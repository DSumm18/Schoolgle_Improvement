{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/packages/ed-backend/dist/lib/openrouter-client.js"],"sourcesContent":["export class OpenRouterClient {\n    constructor(apiKey) {\n        this.baseUrl = 'https://openrouter.ai/api/v1';\n        if (!apiKey) {\n            throw new Error('OpenRouter API key is required');\n        }\n        this.apiKey = apiKey;\n    }\n    async chatCompletion(request) {\n        try {\n            const response = await fetch(`${this.baseUrl}/chat/completions`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${this.apiKey}`,\n                    'Content-Type': 'application/json',\n                    'HTTP-Referer': 'https://schoolgle.co.uk',\n                    'X-Title': 'Schoolgle Ed AI'\n                },\n                body: JSON.stringify({\n                    model: request.model,\n                    messages: request.messages.map(m => ({\n                        role: m.role,\n                        content: m.content\n                    })),\n                    temperature: request.temperature ?? 0.7,\n                    max_tokens: request.maxTokens ?? 1000,\n                    top_p: request.topP ?? 1.0\n                })\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                throw new Error(`OpenRouter API error: ${response.status} - ${errorText}`);\n            }\n            const data = await response.json();\n            return {\n                id: data.id,\n                choices: data.choices.map((choice) => ({\n                    message: {\n                        role: choice.message.role,\n                        content: choice.message.content\n                    },\n                    finishReason: choice.finish_reason\n                })),\n                usage: {\n                    promptTokens: data.usage?.prompt_tokens || 0,\n                    completionTokens: data.usage?.completion_tokens || 0,\n                    totalTokens: data.usage?.total_tokens || 0\n                },\n                model: data.model\n            };\n        }\n        catch (error) {\n            console.error('OpenRouter API Error:', error);\n            throw error;\n        }\n    }\n    async testConnection() {\n        try {\n            const response = await this.chatCompletion({\n                model: 'google/gemini-2.0-flash-lite:free',\n                messages: [{ role: 'user', content: 'Hello' }],\n                maxTokens: 10\n            });\n            return !!response.choices[0]?.message?.content;\n        }\n        catch (error) {\n            console.error('Connection test failed:', error);\n            return false;\n        }\n    }\n}\n"],"names":[],"mappings":";;;;AAAO,MAAM;IACT,YAAY,MAAM,CAAE;QAChB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,QAAQ;YACT,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,CAAC,MAAM,GAAG;IAClB;IACA,MAAM,eAAe,OAAO,EAAE;QAC1B,IAAI;YACA,MAAM,WAAW,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE;gBAC7D,QAAQ;gBACR,SAAS;oBACL,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE;oBACxC,gBAAgB;oBAChB,gBAAgB;oBAChB,WAAW;gBACf;gBACA,MAAM,KAAK,SAAS,CAAC;oBACjB,OAAO,QAAQ,KAAK;oBACpB,UAAU,QAAQ,QAAQ,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;4BACjC,MAAM,EAAE,IAAI;4BACZ,SAAS,EAAE,OAAO;wBACtB,CAAC;oBACD,aAAa,QAAQ,WAAW,IAAI;oBACpC,YAAY,QAAQ,SAAS,IAAI;oBACjC,OAAO,QAAQ,IAAI,IAAI;gBAC3B;YACJ;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;YAC7E;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,OAAO;gBACH,IAAI,KAAK,EAAE;gBACX,SAAS,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,SAAW,CAAC;wBACnC,SAAS;4BACL,MAAM,OAAO,OAAO,CAAC,IAAI;4BACzB,SAAS,OAAO,OAAO,CAAC,OAAO;wBACnC;wBACA,cAAc,OAAO,aAAa;oBACtC,CAAC;gBACD,OAAO;oBACH,cAAc,KAAK,KAAK,EAAE,iBAAiB;oBAC3C,kBAAkB,KAAK,KAAK,EAAE,qBAAqB;oBACnD,aAAa,KAAK,KAAK,EAAE,gBAAgB;gBAC7C;gBACA,OAAO,KAAK,KAAK;YACrB;QACJ,EACA,OAAO,OAAO;YACV,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACV;IACJ;IACA,MAAM,iBAAiB;QACnB,IAAI;YACA,MAAM,WAAW,MAAM,IAAI,CAAC,cAAc,CAAC;gBACvC,OAAO;gBACP,UAAU;oBAAC;wBAAE,MAAM;wBAAQ,SAAS;oBAAQ;iBAAE;gBAC9C,WAAW;YACf;YACA,OAAO,CAAC,CAAC,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS;QAC3C,EACA,OAAO,OAAO;YACV,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO;QACX;IACJ;AACJ"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/packages/ed-backend/dist/lib/model-router.js"],"sourcesContent":["/**\n * Routes tasks to optimal models based on complexity, cost, and requirements\n */\nexport class ModelRouter {\n    /**\n     * Estimate token count (rough approximation)\n     */\n    estimateTokens(text) {\n        return Math.ceil(text.length / 4);\n    }\n    /**\n     * Determine task complexity\n     */\n    analyzeTaskComplexity(messages) {\n        const lastMessage = messages[messages.length - 1];\n        const tokenCount = this.estimateTokens(lastMessage.content);\n        // Check for reasoning indicators\n        const reasoningKeywords = ['explain', 'analyze', 'compare', 'evaluate', 'plan', 'strategy'];\n        const requiresReasoning = reasoningKeywords.some(kw => lastMessage.content.toLowerCase().includes(kw));\n        // Check for vision indicators (will implement with Product 2)\n        const requiresVision = false;\n        return { tokenCount, requiresReasoning, requiresVision };\n    }\n    /**\n     * Determine task type from context\n     */\n    determineTaskType(messages, context) {\n        // Vision analysis (Product 2)\n        if (context?.screenshot) {\n            return 'vision_analysis';\n        }\n        // OCR task\n        if (context?.taskType === 'document_extract') {\n            return 'ocr';\n        }\n        // Report generation\n        if (context?.taskType === 'generate_report') {\n            return 'report_generation';\n        }\n        // Chat complexity\n        const { tokenCount, requiresReasoning } = this.analyzeTaskComplexity(messages);\n        if (tokenCount > 500 || requiresReasoning) {\n            return 'chat_complex';\n        }\n        return 'chat_simple';\n    }\n    /**\n     * Select optimal model for task\n     */\n    route(messages, context = {}) {\n        const taskType = this.determineTaskType(messages, context);\n        let selectedModel;\n        let reason;\n        let estimatedCost;\n        switch (taskType) {\n            case 'vision_analysis':\n                selectedModel = {\n                    model: 'qwen/qwen-2.5-vl-72b',\n                    provider: 'openrouter',\n                    maxTokens: 1500,\n                    temperature: 0.3\n                };\n                reason = 'UI screenshot analysis requires vision model';\n                estimatedCost = 0.0008; // ~Â£0.0008 per request\n                break;\n            case 'ocr':\n                selectedModel = {\n                    model: 'mistralai/pixtral-large-2411',\n                    provider: 'openrouter',\n                    maxTokens: 2000,\n                    temperature: 0.1\n                };\n                reason = 'OCR task requires specialized model';\n                estimatedCost = 0.0004;\n                break;\n            case 'report_generation':\n                selectedModel = {\n                    model: 'openai/gpt-4o-mini',\n                    provider: 'openrouter',\n                    maxTokens: 4000,\n                    temperature: 0.7\n                };\n                reason = 'Report writing benefits from GPT-4o-mini quality';\n                estimatedCost = 0.002;\n                break;\n            case 'chat_complex':\n                selectedModel = {\n                    model: 'deepseek/deepseek-chat',\n                    provider: 'openrouter',\n                    maxTokens: 2000,\n                    temperature: 0.7\n                };\n                reason = 'Complex reasoning task, using DeepSeek V3';\n                estimatedCost = 0.0012;\n                break;\n            case 'chat_simple':\n            default:\n                selectedModel = {\n                    model: 'google/gemini-2.0-flash-lite:free',\n                    provider: 'openrouter',\n                    maxTokens: 1000,\n                    temperature: 0.7\n                };\n                reason = 'Simple query, using fast & cheap model';\n                estimatedCost = 0.00015;\n                break;\n        }\n        return {\n            taskType,\n            selectedModel,\n            reason,\n            estimatedCost\n        };\n    }\n}\n// Export singleton instance\nexport const modelRouter = new ModelRouter();\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;AACM,MAAM;IACT;;KAEC,GACD,eAAe,IAAI,EAAE;QACjB,OAAO,KAAK,IAAI,CAAC,KAAK,MAAM,GAAG;IACnC;IACA;;KAEC,GACD,sBAAsB,QAAQ,EAAE;QAC5B,MAAM,cAAc,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE;QACjD,MAAM,aAAa,IAAI,CAAC,cAAc,CAAC,YAAY,OAAO;QAC1D,iCAAiC;QACjC,MAAM,oBAAoB;YAAC;YAAW;YAAW;YAAW;YAAY;YAAQ;SAAW;QAC3F,MAAM,oBAAoB,kBAAkB,IAAI,CAAC,CAAA,KAAM,YAAY,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC;QAClG,8DAA8D;QAC9D,MAAM,iBAAiB;QACvB,OAAO;YAAE;YAAY;YAAmB;QAAe;IAC3D;IACA;;KAEC,GACD,kBAAkB,QAAQ,EAAE,OAAO,EAAE;QACjC,8BAA8B;QAC9B,IAAI,SAAS,YAAY;YACrB,OAAO;QACX;QACA,WAAW;QACX,IAAI,SAAS,aAAa,oBAAoB;YAC1C,OAAO;QACX;QACA,oBAAoB;QACpB,IAAI,SAAS,aAAa,mBAAmB;YACzC,OAAO;QACX;QACA,kBAAkB;QAClB,MAAM,EAAE,UAAU,EAAE,iBAAiB,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC;QACrE,IAAI,aAAa,OAAO,mBAAmB;YACvC,OAAO;QACX;QACA,OAAO;IACX;IACA;;KAEC,GACD,MAAM,QAAQ,EAAE,UAAU,CAAC,CAAC,EAAE;QAC1B,MAAM,WAAW,IAAI,CAAC,iBAAiB,CAAC,UAAU;QAClD,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,OAAQ;YACJ,KAAK;gBACD,gBAAgB;oBACZ,OAAO;oBACP,UAAU;oBACV,WAAW;oBACX,aAAa;gBACjB;gBACA,SAAS;gBACT,gBAAgB,QAAQ,uBAAuB;gBAC/C;YACJ,KAAK;gBACD,gBAAgB;oBACZ,OAAO;oBACP,UAAU;oBACV,WAAW;oBACX,aAAa;gBACjB;gBACA,SAAS;gBACT,gBAAgB;gBAChB;YACJ,KAAK;gBACD,gBAAgB;oBACZ,OAAO;oBACP,UAAU;oBACV,WAAW;oBACX,aAAa;gBACjB;gBACA,SAAS;gBACT,gBAAgB;gBAChB;YACJ,KAAK;gBACD,gBAAgB;oBACZ,OAAO;oBACP,UAAU;oBACV,WAAW;oBACX,aAAa;gBACjB;gBACA,SAAS;gBACT,gBAAgB;gBAChB;YACJ,KAAK;YACL;gBACI,gBAAgB;oBACZ,OAAO;oBACP,UAAU;oBACV,WAAW;oBACX,aAAa;gBACjB;gBACA,SAAS;gBACT,gBAAgB;gBAChB;QACR;QACA,OAAO;YACH;YACA;YACA;YACA;QACJ;IACJ;AACJ;AAEO,MAAM,cAAc,IAAI"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/packages/ed-backend/dist/lib/prompt-builder.js"],"sourcesContent":["/**\n * Build system prompt based on context\n */\nexport function buildSystemPrompt(context) {\n    const basePrompt = `You are Ed, an AI school assistant created by Schoolgle.\r\n\r\nPERSONALITY:\r\n- Warm, supportive, and honest - like a trusted colleague\r\n- Practical and action-oriented, not theoretical\r\n- Use UK education terminology\r\n- Acknowledge pressures on school staff\r\n- Light humour is welcome but stay professional\r\n\r\nEXPERTISE:\r\n- Ofsted Education Inspection Framework (November 2025)\r\n- SIAMS framework (for church schools)\r\n- EEF Teaching & Learning Toolkit\r\n- School improvement and self-evaluation\r\n- UK school operations and compliance`;\n    // Add product-specific context\n    if (context.product === 'schoolgle-platform') {\n        return basePrompt + `\r\n\r\nCURRENT CONTEXT:\r\nSchool: ${context.schoolName}\r\n${context.schoolType ? `Type: ${context.schoolType}` : ''}\r\n${context.isChurchSchool ? 'This is a church school (both Ofsted and SIAMS apply)' : ''}\r\n${context.page ? `Current page: ${context.page}` : ''}\r\n${context.category ? `Focus area: ${context.category}` : ''}\r\n\r\n${buildSchoolgleContext(context)}\r\n\r\nGUIDELINES:\r\n- Always cite EEF research when making recommendations\r\n- Link advice to specific Ofsted framework requirements\r\n- Be specific and actionable (not generic advice)\r\n- If you see evidence gaps, proactively suggest how to fill them\r\n- If actions are overdue, gently remind without being pushy\r\n- Celebrate progress and strengths`;\n    }\n    if (context.product === 'parent-chat') {\n        return basePrompt + `\r\n\r\nCURRENT CONTEXT:\r\nSchool: ${context.schoolName}\r\n\r\nGUIDELINES FOR PARENT QUERIES:\r\n- Be friendly and welcoming\r\n- Provide accurate school information\r\n- If you don't know something, say so clearly\r\n- Direct parents to contact school for specific queries\r\n- Never make up information about the school`;\n    }\n    if (context.product === 'staff-tools') {\n        return basePrompt + `\r\n\r\nCURRENT CONTEXT:\r\nHelping with: ${context.page || 'MIS system navigation'}\r\n${context.screenshot ? 'Analyzing screenshot of school system' : ''}\r\n\r\nGUIDELINES FOR STAFF SUPPORT:\r\n- Provide step-by-step instructions\r\n- Be patient and clear\r\n- Explain why each step matters\r\n- Offer shortcuts and tips\r\n- If stuck, suggest contacting system support`;\n    }\n    return basePrompt;\n}\n/**\n * Build Schoolgle-specific context from platform data\n */\nfunction buildSchoolgleContext(context) {\n    if (!context.schoolgleContext) {\n        return '';\n    }\n    const parts = [];\n    // Health score\n    if (context.schoolgleContext.healthScore !== undefined) {\n        const score = context.schoolgleContext.healthScore;\n        let status = 'good';\n        if (score < 40)\n            status = 'critical';\n        else if (score < 60)\n            status = 'at risk';\n        else if (score < 75)\n            status = 'neutral';\n        parts.push(`School improvement health: ${score}/100 (${status})`);\n    }\n    // Evidence gaps\n    if (context.schoolgleContext.gaps && context.schoolgleContext.gaps.length > 0) {\n        parts.push(`\\nEVIDENCE GAPS (${context.schoolgleContext.gaps.length}):`);\n        context.schoolgleContext.gaps.slice(0, 5).forEach(gap => {\n            parts.push(`- ${gap.area}/${gap.subcategory}: ${gap.description || 'Missing evidence'} [${gap.severity}]`);\n        });\n        if (context.schoolgleContext.gaps.length > 5) {\n            parts.push(`  ... and ${context.schoolgleContext.gaps.length - 5} more`);\n        }\n    }\n    // Recent activity\n    if (context.schoolgleContext.recentActivity && context.schoolgleContext.recentActivity.length > 0) {\n        parts.push(`\\nRECENT ACTIVITY:`);\n        context.schoolgleContext.recentActivity.slice(0, 3).forEach(activity => {\n            parts.push(`- ${activity.type}: ${activity.summary}`);\n        });\n    }\n    // Evidence summary\n    if (context.schoolgleContext.evidenceSummary) {\n        const summary = context.schoolgleContext.evidenceSummary;\n        parts.push(`\\nEVIDENCE SUMMARY:`);\n        parts.push(`- Total documents scanned: ${summary.totalDocuments}`);\n        parts.push(`- Evidence matches found: ${summary.evidenceMatches}`);\n    }\n    return parts.length > 0 ? '\\n' + parts.join('\\n') : '';\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/packages/ed-backend/dist/lib/chat.js"],"sourcesContent":["import { OpenRouterClient } from './openrouter-client';\nimport { modelRouter } from './model-router';\nimport { buildSystemPrompt } from './prompt-builder';\nexport class EdChatHandler {\n    constructor(apiKey) {\n        this.openRouter = new OpenRouterClient(apiKey);\n    }\n    async handleChat(request) {\n        try {\n            // Route to optimal model\n            const routing = modelRouter.route(request.messages, request.context);\n            console.log(`[Ed] Routing decision:`, {\n                taskType: routing.taskType,\n                model: routing.selectedModel.model,\n                reason: routing.reason\n            });\n            // Build system prompt with context\n            const systemPrompt = buildSystemPrompt(request.context);\n            // Prepare messages with system context\n            const messagesWithSystem = [\n                {\n                    role: 'system',\n                    content: systemPrompt\n                },\n                ...request.messages\n            ];\n            // Call OpenRouter\n            const response = await this.openRouter.chatCompletion({\n                model: routing.selectedModel.model,\n                messages: messagesWithSystem,\n                temperature: routing.selectedModel.temperature,\n                maxTokens: routing.selectedModel.maxTokens,\n                topP: routing.selectedModel.topP\n            });\n            const assistantMessage = response.choices[0]?.message?.content || '';\n            return {\n                message: assistantMessage,\n                conversationId: request.context.conversationId || response.id,\n                model: response.model,\n                usage: {\n                    tokens: response.usage.totalTokens,\n                    cost: routing.estimatedCost\n                }\n            };\n        }\n        catch (error) {\n            console.error('[Ed] Chat error:', error);\n            throw new Error(`Ed chat failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n        }\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACO,MAAM;IACT,YAAY,MAAM,CAAE;QAChB,IAAI,CAAC,UAAU,GAAG,IAAI,sLAAgB,CAAC;IAC3C;IACA,MAAM,WAAW,OAAO,EAAE;QACtB,IAAI;YACA,yBAAyB;YACzB,MAAM,UAAU,4KAAW,CAAC,KAAK,CAAC,QAAQ,QAAQ,EAAE,QAAQ,OAAO;YACnE,QAAQ,GAAG,CAAC,CAAC,sBAAsB,CAAC,EAAE;gBAClC,UAAU,QAAQ,QAAQ;gBAC1B,OAAO,QAAQ,aAAa,CAAC,KAAK;gBAClC,QAAQ,QAAQ,MAAM;YAC1B;YACA,mCAAmC;YACnC,MAAM,eAAe,IAAA,oLAAiB,EAAC,QAAQ,OAAO;YACtD,uCAAuC;YACvC,MAAM,qBAAqB;gBACvB;oBACI,MAAM;oBACN,SAAS;gBACb;mBACG,QAAQ,QAAQ;aACtB;YACD,kBAAkB;YAClB,MAAM,WAAW,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;gBAClD,OAAO,QAAQ,aAAa,CAAC,KAAK;gBAClC,UAAU;gBACV,aAAa,QAAQ,aAAa,CAAC,WAAW;gBAC9C,WAAW,QAAQ,aAAa,CAAC,SAAS;gBAC1C,MAAM,QAAQ,aAAa,CAAC,IAAI;YACpC;YACA,MAAM,mBAAmB,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;YAClE,OAAO;gBACH,SAAS;gBACT,gBAAgB,QAAQ,OAAO,CAAC,cAAc,IAAI,SAAS,EAAE;gBAC7D,OAAO,SAAS,KAAK;gBACrB,OAAO;oBACH,QAAQ,SAAS,KAAK,CAAC,WAAW;oBAClC,MAAM,QAAQ,aAAa;gBAC/B;YACJ;QACJ,EACA,OAAO,OAAO;YACV,QAAQ,KAAK,CAAC,oBAAoB;YAClC,MAAM,IAAI,MAAM,CAAC,gBAAgB,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,iBAAiB;QACjG;IACJ;AACJ"}},
    {"offset": {"line": 439, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/packages/ed-backend/dist/lib/schoolgle-context.js"],"sourcesContent":["/**\n * Retrieves Schoolgle context data for Ed AI assistant\n * This includes assessments, evidence gaps, recent activity, and health metrics\n */\nexport async function getSchoolgleContext(supabase, organizationId) {\n    try {\n        // Fetch assessments with joined subcategory/category data\n        const { data: assessmentsData, error: assessmentsError } = await supabase\n            .from('ofsted_assessments')\n            .select(`\n        id,\n        subcategory_id,\n        school_rating,\n        school_rationale,\n        ai_rating,\n        ai_rationale,\n        evidence_count,\n        evidence_quality_score,\n        ofsted_subcategories!inner (\n          id,\n          name,\n          category_id,\n          ofsted_categories!inner (\n            id,\n            name\n          )\n        )\n      `)\n            .eq('organization_id', organizationId)\n            .not('school_rating', 'is', null);\n        if (assessmentsError) {\n            console.error('[Schoolgle Context] Error fetching assessments:', assessmentsError);\n        }\n        // Transform assessments data\n        const assessments = (assessmentsData || []).map((a) => ({\n            id: a.id,\n            subcategoryId: a.subcategory_id,\n            subcategoryName: a.ofsted_subcategories.name,\n            categoryId: a.ofsted_subcategories.category_id,\n            categoryName: a.ofsted_subcategories.ofsted_categories.name,\n            schoolRating: a.school_rating,\n            schoolRationale: a.school_rationale,\n            aiRating: a.ai_rating,\n            aiRationale: a.ai_rationale,\n            evidenceCount: a.evidence_count || 0,\n            evidenceQualityScore: a.evidence_quality_score\n        }));\n        // Identify evidence gaps (subcategories with no/low evidence)\n        const { data: subcategoriesData } = await supabase\n            .from('ofsted_subcategories')\n            .select(`\n        id,\n        name,\n        category_id,\n        ofsted_categories!inner (\n          id,\n          name\n        )\n      `)\n            .eq('ofsted_categories.is_active', true);\n        const gaps = [];\n        for (const subcat of subcategoriesData || []) {\n            const subcatAny = subcat;\n            const assessment = assessments.find(a => a.subcategoryId === subcatAny.id);\n            if (!assessment) {\n                gaps.push({\n                    subcategoryId: subcatAny.id,\n                    subcategoryName: subcatAny.name,\n                    categoryId: subcatAny.category_id,\n                    categoryName: subcatAny.ofsted_categories.name,\n                    gapType: 'no_evidence',\n                    suggestions: [`No assessment recorded for ${subcatAny.name}`]\n                });\n            }\n            else if (assessment.evidenceCount < 3) {\n                gaps.push({\n                    subcategoryId: subcatAny.id,\n                    subcategoryName: subcatAny.name,\n                    categoryId: subcatAny.category_id,\n                    categoryName: subcatAny.ofsted_categories.name,\n                    gapType: 'insufficient',\n                    suggestions: [`Only ${assessment.evidenceCount} pieces of evidence for ${subcatAny.name}`]\n                });\n            }\n            else if (assessment.evidenceQualityScore && assessment.evidenceQualityScore < 0.6) {\n                gaps.push({\n                    subcategoryId: subcatAny.id,\n                    subcategoryName: subcatAny.name,\n                    categoryId: subcatAny.category_id,\n                    categoryName: subcatAny.ofsted_categories.name,\n                    gapType: 'low_quality',\n                    suggestions: [`Evidence quality score is ${assessment.evidenceQualityScore.toFixed(2)} for ${subcatAny.name}`]\n                });\n            }\n        }\n        // Fetch recent activity (last 20 items)\n        const { data: activityData, error: activityError } = await supabase\n            .from('activity_log')\n            .select('id, action_type, entity_type, entity_name, description, user_name, created_at')\n            .eq('organization_id', organizationId)\n            .order('created_at', { ascending: false })\n            .limit(20);\n        if (activityError) {\n            console.error('[Schoolgle Context] Error fetching activity:', activityError);\n        }\n        const recentActivity = (activityData || []).map((a) => ({\n            id: a.id,\n            actionType: a.action_type,\n            entityType: a.entity_type,\n            entityName: a.entity_name || '',\n            description: a.description || '',\n            userName: a.user_name || 'Unknown',\n            createdAt: a.created_at\n        }));\n        // Fetch evidence summary\n        const { count: documentsCount } = await supabase\n            .from('documents')\n            .select('*', { count: 'exact', head: true })\n            .eq('organization_id', organizationId);\n        const { count: matchesCount } = await supabase\n            .from('evidence_matches')\n            .select('*', { count: 'exact', head: true })\n            .eq('organization_id', organizationId);\n        const { data: lastScan } = await supabase\n            .from('scan_jobs')\n            .select('completed_at')\n            .eq('organization_id', organizationId)\n            .eq('status', 'complete')\n            .order('completed_at', { ascending: false })\n            .limit(1)\n            .single();\n        // Calculate category coverage\n        const { data: categoryMatchCounts } = await supabase\n            .from('evidence_matches')\n            .select('category_id')\n            .eq('organization_id', organizationId);\n        const categoryCoverage = {};\n        for (const match of categoryMatchCounts || []) {\n            const matchAny = match;\n            categoryCoverage[matchAny.category_id] = (categoryCoverage[matchAny.category_id] || 0) + 1;\n        }\n        const evidenceSummary = {\n            totalDocuments: documentsCount || 0,\n            totalMatches: matchesCount || 0,\n            categoryCoverage,\n            lastScanned: lastScan?.completed_at\n        };\n        // Calculate health score (simple average of assessment ratings)\n        let healthScore;\n        if (assessments.length > 0) {\n            const ratingValues = {\n                'exceptional': 4,\n                'strong_standard': 3,\n                'expected_standard': 2,\n                'needs_attention': 1,\n                'urgent_improvement': 0\n            };\n            const totalScore = assessments.reduce((sum, a) => {\n                const rating = a.schoolRating || a.aiRating;\n                return sum + (rating ? ratingValues[rating] || 2 : 2);\n            }, 0);\n            healthScore = (totalScore / assessments.length) / 4 * 100; // Convert to 0-100 scale\n        }\n        return {\n            assessments,\n            gaps,\n            recentActivity,\n            healthScore,\n            evidenceSummary\n        };\n    }\n    catch (error) {\n        console.error('[Schoolgle Context] Unexpected error:', error);\n        // Return empty context on error\n        return {\n            assessments: [],\n            gaps: [],\n            recentActivity: [],\n            healthScore: undefined,\n            evidenceSummary: undefined\n        };\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 614, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/packages/ed-backend/dist/index.js"],"sourcesContent":["export * from './lib/openrouter-client';\nexport * from './lib/model-router';\nexport * from './lib/prompt-builder';\nexport * from './lib/chat';\nexport * from './lib/schoolgle-context';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 629, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/apps/platform/src/lib/supabase.ts"],"sourcesContent":["import { createClient, SupabaseClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\n\r\nlet supabase: SupabaseClient | any = null;\r\n\r\nif (supabaseUrl && supabaseKey) {\r\n    supabase = createClient(supabaseUrl, supabaseKey);\r\n} else {\r\n    console.warn(\"Supabase URL or Key missing. Vector DB features will not work.\");\r\n    // Create a dummy proxy to prevent build crashes if imported\r\n    supabase = {\r\n        from: () => ({\r\n            insert: async () => ({ error: { message: \"Supabase not configured\" } }),\r\n            select: async () => ({ error: { message: \"Supabase not configured\" } }),\r\n        })\r\n    };\r\n}\r\n\r\nexport { supabase };\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,cAAc,QAAQ,GAAG,CAAC,yBAAyB;AAEzD,IAAI,WAAiC;AAErC,IAAI,eAAe,aAAa;IAC5B,WAAW,IAAA,yMAAY,EAAC,aAAa;AACzC,OAAO;IACH,QAAQ,IAAI,CAAC;IACb,4DAA4D;IAC5D,WAAW;QACP,MAAM,IAAM,CAAC;gBACT,QAAQ,UAAY,CAAC;wBAAE,OAAO;4BAAE,SAAS;wBAA0B;oBAAE,CAAC;gBACtE,QAAQ,UAAY,CAAC;wBAAE,OAAO;4BAAE,SAAS;wBAA0B;oBAAE,CAAC;YAC1E,CAAC;IACL;AACJ"}},
    {"offset": {"line": 663, "column": 0}, "map": {"version":3,"sources":["file:///C:/Git/Schoolgle_Improvement/apps/platform/src/app/api/ed/chat/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { EdChatHandler, getSchoolgleContext } from '@schoolgle/ed-backend';\r\nimport type { EdContext, Message } from '@schoolgle/shared';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\n/**\r\n * Ed Chat API Route - Updated to use Ed Backend Package\r\n * Handles chat requests from Ed widget with full Schoolgle context\r\n */\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // Get API key from environment (OpenRouter preferred, OpenAI fallback)\r\n    const apiKey = process.env.VITE_OPENROUTER_API_KEY || process.env.OPENAI_API_KEY;\r\n    if (!apiKey) {\r\n      return NextResponse.json(\r\n        { error: 'AI API key not configured' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // Parse request body\r\n    const body = await request.json();\r\n    const { messages, context } = body as {\r\n      messages: Message[];\r\n      context: Partial<EdContext>;\r\n    };\r\n\r\n    if (!messages || !Array.isArray(messages)) {\r\n      return NextResponse.json(\r\n        { error: 'Invalid messages format' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Fetch actual Schoolgle context from database\r\n    let schoolgleContext;\r\n    const orgId = context.organizationId;\r\n\r\n    if (orgId && orgId !== 'demo' && supabase) {\r\n      try {\r\n        schoolgleContext = await getSchoolgleContext(supabase, orgId);\r\n        console.log('[Ed API] Fetched Schoolgle context:', {\r\n          assessments: schoolgleContext.assessments.length,\r\n          gaps: schoolgleContext.gaps.length,\r\n          activities: schoolgleContext.recentActivity.length,\r\n          healthScore: schoolgleContext.healthScore\r\n        });\r\n      } catch (error) {\r\n        console.error('[Ed API] Error fetching Schoolgle context:', error);\r\n        // Continue with empty context on error\r\n        schoolgleContext = {\r\n          assessments: [],\r\n          gaps: [],\r\n          recentActivity: [],\r\n          healthScore: undefined,\r\n          evidenceSummary: undefined\r\n        };\r\n      }\r\n    } else {\r\n      // Demo mode or no Supabase\r\n      schoolgleContext = context.schoolgleContext || {\r\n        assessments: [],\r\n        gaps: [],\r\n        recentActivity: [],\r\n        healthScore: undefined,\r\n        evidenceSummary: undefined\r\n      };\r\n    }\r\n\r\n    // Build full context\r\n    const fullContext: EdContext = {\r\n      organizationId: orgId || 'demo',\r\n      schoolName: context.schoolName || 'Demo School',\r\n      product: 'schoolgle-platform',\r\n      page: context.page,\r\n      category: context.category,\r\n      userId: context.userId,\r\n      userRole: context.userRole,\r\n      conversationId: context.conversationId,\r\n      schoolgleContext\r\n    };\r\n\r\n    // Initialize Ed chat handler with OpenRouter\r\n    const chatHandler = new EdChatHandler(apiKey);\r\n\r\n    // Handle chat\r\n    const response = await chatHandler.handleChat({\r\n      messages,\r\n      context: fullContext\r\n    });\r\n\r\n    // Return response (maintain compatibility with existing frontend)\r\n    return NextResponse.json({\r\n      response: response.message,  // Keep 'response' key for compatibility\r\n      message: response.message,\r\n      conversationId: response.conversationId,\r\n      metadata: {\r\n        model: response.model,\r\n        tokens: response.usage.tokens,\r\n        cost: response.usage.cost\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('[Ed API] Error:', error);\r\n\r\n    // Return fallback response on error\r\n    return NextResponse.json({\r\n      response: `I'm having a bit of trouble connecting right now. Let me give you a quick answer based on what I know...\\n\\nI'm Ed, your AI School Improvement Partner. I can help you with:\\n\\nðŸ“š **Understanding Ofsted** - What inspectors look for\\nðŸ”¬ **EEF Research** - Evidence-based strategies\\nðŸ“Š **Data Analysis** - Making sense of patterns\\nðŸŽ¯ **Action Planning** - Creating improvement actions\\n\\nWhat would you like to explore?`,\r\n      error: error instanceof Error ? error.message : 'Unknown error'\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAEA;;;;AAOO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,uEAAuE;QACvE,MAAM,SAAS,QAAQ,GAAG,CAAC,uBAAuB,IAAI,QAAQ,GAAG,CAAC,cAAc;QAChF,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA4B,GACrC;gBAAE,QAAQ;YAAI;QAElB;QAEA,qBAAqB;QACrB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG;QAK9B,IAAI,CAAC,YAAY,CAAC,MAAM,OAAO,CAAC,WAAW;YACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,+CAA+C;QAC/C,IAAI;QACJ,MAAM,QAAQ,QAAQ,cAAc;QAEpC,IAAI,SAAS,UAAU,UAAU,wJAAQ,EAAE;YACzC,IAAI;gBACF,mBAAmB,MAAM,IAAA,yLAAmB,EAAC,wJAAQ,EAAE;gBACvD,QAAQ,GAAG,CAAC,uCAAuC;oBACjD,aAAa,iBAAiB,WAAW,CAAC,MAAM;oBAChD,MAAM,iBAAiB,IAAI,CAAC,MAAM;oBAClC,YAAY,iBAAiB,cAAc,CAAC,MAAM;oBAClD,aAAa,iBAAiB,WAAW;gBAC3C;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8CAA8C;gBAC5D,uCAAuC;gBACvC,mBAAmB;oBACjB,aAAa,EAAE;oBACf,MAAM,EAAE;oBACR,gBAAgB,EAAE;oBAClB,aAAa;oBACb,iBAAiB;gBACnB;YACF;QACF,OAAO;YACL,2BAA2B;YAC3B,mBAAmB,QAAQ,gBAAgB,IAAI;gBAC7C,aAAa,EAAE;gBACf,MAAM,EAAE;gBACR,gBAAgB,EAAE;gBAClB,aAAa;gBACb,iBAAiB;YACnB;QACF;QAEA,qBAAqB;QACrB,MAAM,cAAyB;YAC7B,gBAAgB,SAAS;YACzB,YAAY,QAAQ,UAAU,IAAI;YAClC,SAAS;YACT,MAAM,QAAQ,IAAI;YAClB,UAAU,QAAQ,QAAQ;YAC1B,QAAQ,QAAQ,MAAM;YACtB,UAAU,QAAQ,QAAQ;YAC1B,gBAAgB,QAAQ,cAAc;YACtC;QACF;QAEA,6CAA6C;QAC7C,MAAM,cAAc,IAAI,mKAAa,CAAC;QAEtC,cAAc;QACd,MAAM,WAAW,MAAM,YAAY,UAAU,CAAC;YAC5C;YACA,SAAS;QACX;QAEA,kEAAkE;QAClE,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,UAAU,SAAS,OAAO;YAC1B,SAAS,SAAS,OAAO;YACzB,gBAAgB,SAAS,cAAc;YACvC,UAAU;gBACR,OAAO,SAAS,KAAK;gBACrB,QAAQ,SAAS,KAAK,CAAC,MAAM;gBAC7B,MAAM,SAAS,KAAK,CAAC,IAAI;YAC3B;QACF;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QAEjC,oCAAoC;QACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,UAAU,CAAC,kaAAka,CAAC;YAC9a,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;IACF;AACF"}}]
}