module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},92509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},31211,e=>{"use strict";async function t(e,t){let r=`'${t}' in parents and trashed = false`,i=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(r)}&fields=files(id,name,mimeType)`,{headers:{Authorization:`Bearer ${e}`}});if(!i.ok){let e=await i.text();throw console.error(`Google Drive API Error Body: ${e}`),Error(`Google Drive API error: ${i.status} ${i.statusText} - ${e}`)}return(await i.json()).files}async function r(e,t,i,o="Root"){let s=[],a=`'${t}' in parents and trashed = false`,n=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(a)}&fields=files(id,name,mimeType,modifiedTime,size,webViewLink)&pageSize=1000`,{headers:{Authorization:`Bearer ${e}`}});if(!n.ok)throw Error(`Google Drive API error: ${n.status} ${n.statusText}`);let l=(await n.json()).files||[],p=[],d=[];for(let a of(l.forEach(e=>{let r={id:e.id,name:e.name,mimeType:e.mimeType,modifiedTime:e.modifiedTime,size:e.size?parseInt(e.size):void 0,webViewLink:e.webViewLink,folderPath:o,parentId:t,isFolder:"application/vnd.google-apps.folder"===e.mimeType};r.isFolder?p.push(r):d.push(r)}),s.push(...d),i&&i({totalFiles:s.length,processedFiles:0,currentFolder:o}),p)){let t=`${o} > ${a.name}`;console.log(`[Scan] Entering folder: ${t}`);let n=await r(e,a.id,i,t);s.push(...n)}return s}async function i(e,t){let r=await fetch(`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,mimeType,modifiedTime,size,webViewLink,parents`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error(`Google Drive API error: ${r.status} ${r.statusText}`);let i=await r.json();return{id:i.id,name:i.name,mimeType:i.mimeType,modifiedTime:i.modifiedTime,size:i.size?parseInt(i.size):void 0,webViewLink:i.webViewLink,parentId:i.parents?.[0]}}async function o(e,t){let r=await fetch(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error(`Google Drive Download error: ${r.statusText}`);let i=await r.arrayBuffer();return Buffer.from(i)}async function s(e,t,r){let i="text/plain";if("application/vnd.google-apps.document"===r)i="text/plain";else if("application/vnd.google-apps.spreadsheet"===r)i="text/csv";else if("application/vnd.google-apps.presentation"===r)i="text/plain";else throw Error(`Unsupported Google Workspace type: ${r}`);let o=await fetch(`https://www.googleapis.com/drive/v3/files/${t}/export?mimeType=${encodeURIComponent(i)}`,{headers:{Authorization:`Bearer ${e}`}});if(!o.ok)throw Error(`Google Drive Export error: ${o.statusText}`);return await o.text()}function a(e,t){return!t||new Date(e)>new Date(t)}async function n(e,t){let r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${t}/children?select=id,name,file`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error(`Microsoft Graph API error: ${r.statusText}`);return(await r.json()).value.map(e=>({id:e.id,name:e.name,mimeType:e.file?.mimeType||"application/octet-stream"}))}async function l(e,t,r,i="Root"){let o=[],s=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${t}/children?select=id,name,file,folder,lastModifiedDateTime,size,webUrl`,{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw Error(`Microsoft Graph API error: ${s.statusText}`);let a=(await s.json()).value||[],n=[],p=[];for(let s of(a.forEach(e=>{let r={id:e.id,name:e.name,mimeType:e.file?.mimeType||"application/octet-stream",modifiedTime:e.lastModifiedDateTime,size:e.size,webViewLink:e.webUrl,folderPath:i,parentId:t,isFolder:!!e.folder};r.isFolder?n.push(r):p.push(r)}),o.push(...p),r&&r({totalFiles:o.length,processedFiles:0,currentFolder:i}),n)){let t=`${i} > ${s.name}`;console.log(`[Scan] Entering folder: ${t}`);let a=await l(e,s.id,r,t);o.push(...a)}return o}async function p(e,t){let r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${t}/content`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error(`OneDrive Download error: ${r.statusText}`);let i=await r.arrayBuffer();return Buffer.from(i)}async function d(e,t,r={}){let{batchSize:i=5,delayMs:o=1e3,onProgress:s}=r,a=[];for(let r=0;r<e.length;r+=i){let n=e.slice(r,r+i),l=await Promise.all(n.map(e=>t(e)));a.push(...l),s&&s(Math.min(r+i,e.length),e.length),r+i<e.length&&await new Promise(e=>setTimeout(e,o))}return a}e.s(["batchProcessFiles",()=>d,"exportGoogleDoc",()=>s,"getGoogleFileContent",()=>o,"getGoogleFileMetadata",()=>i,"getOneDriveFileContent",()=>p,"listGoogleFiles",()=>t,"listGoogleFilesRecursive",()=>r,"listOneDriveFiles",()=>n,"listOneDriveFilesRecursive",()=>l,"shouldRescanFile",()=>a])},22149,e=>{e.v(e=>Promise.resolve().then(()=>e(31211)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c74b0b93._.js.map