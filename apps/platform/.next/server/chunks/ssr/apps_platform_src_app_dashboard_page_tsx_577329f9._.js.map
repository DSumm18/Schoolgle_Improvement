{"version":3,"sources":["../../../../../../apps/platform/src/components/ReportGenerator.tsx","../../../../../../apps/platform/src/components/ActionModal.tsx","../../../../../../apps/platform/src/components/EdAnalysisPanel.tsx","../../../../../../apps/platform/src/components/OfstedFrameworkView.tsx","../../../../../../apps/platform/src/components/SiamsFrameworkView.tsx","../../../../../../apps/platform/src/components/ActionsGanttChart.tsx","../../../../../../apps/platform/src/components/ActionsDashboard.tsx","../../../../../../apps/platform/src/components/SettingsView.tsx","../../../../../../apps/platform/src/components/EdChatbot.tsx","../../../../../../apps/platform/src/app/dashboard/page.tsx","../../../../../../apps/platform/src/components/SEFGenerator.tsx","../../../../../../apps/platform/src/components/LessonObservationModal.tsx","../../../../../../apps/platform/src/components/LocalFolderScanner.tsx","../../../../../../apps/platform/src/components/MondayDashboard.tsx","../../../../../../apps/platform/src/components/VoiceObservation.tsx","../../../../../../apps/platform/src/components/MockInspector.tsx","../../../../../../node_modules/lucide-react/src/icons/circle-question-mark.ts","../../../../../../node_modules/lucide-react/src/icons/copy.ts","../../../../../../node_modules/lucide-react/src/icons/square.ts","../../../../../../node_modules/lucide-react/src/icons/cloud.ts","../../../../../../node_modules/lucide-react/src/icons/user-plus.ts","../../../../../../node_modules/lucide-react/src/icons/info.ts","../../../../../../node_modules/lucide-react/src/icons/pause.ts","../../../../../../node_modules/lucide-react/src/icons/layout-list.ts","../../../../../../node_modules/lucide-react/src/icons/circle-alert.ts","../../../../../../node_modules/lucide-react/src/icons/layout-dashboard.ts","../../../../../../node_modules/lucide-react/src/icons/external-link.ts","../../../../../../node_modules/lucide-react/src/icons/printer.ts","../../../../../../node_modules/lucide-react/src/icons/graduation-cap.ts","../../../../../../node_modules/lucide-react/src/icons/funnel.ts","../../../../../../node_modules/lucide-react/src/icons/save.ts","../../../../../../node_modules/lucide-react/src/icons/pen.ts","../../../../../../node_modules/lucide-react/src/icons/volume-2.ts","../../../../../../node_modules/lucide-react/src/icons/maximize-2.ts","../../../../../../node_modules/lucide-react/src/icons/list.ts","../../../../../../node_modules/lucide-react/src/icons/wand-sparkles.ts","../../../../../../node_modules/lucide-react/src/icons/trash-2.ts","../../../../../../node_modules/lucide-react/src/icons/arrow-up-down.ts","../../../../../../node_modules/lucide-react/src/icons/calendar.ts","../../../../../../node_modules/lucide-react/src/icons/cross.ts","../../../../../../node_modules/lucide-react/src/icons/folder.ts","../../../../../../node_modules/lucide-react/src/icons/minimize-2.ts","../../../../../../node_modules/lucide-react/src/icons/layers.ts","../../../../../../node_modules/lucide-react/src/icons/thumbs-up.ts","../../../../../../node_modules/lucide-react/src/icons/hard-drive.ts","../../../../../../node_modules/lucide-react/src/icons/church.ts","../../../../../../node_modules/lucide-react/src/icons/thumbs-down.ts","../../../../../../node_modules/lucide-react/src/icons/pen-line.ts","../../../../../../node_modules/lucide-react/src/icons/text-align-start.ts","../../../../../../node_modules/lucide-react/src/icons/upload.ts","../../../../../../apps/platform/src/lib/eef-toolkit.ts","../../../../../../apps/platform/src/lib/ed-knowledge-base.ts","../../../../../../apps/platform/src/components/EvidenceModal.tsx","../../../../../../apps/platform/src/lib/siams-framework.ts","../../../../../../apps/platform/src/lib/ofsted-framework.ts","../../../../../../apps/platform/src/lib/document-generator.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { \r\n    FileText, \r\n    Download, \r\n    RefreshCw, \r\n    CheckCircle, \r\n    Clock,\r\n    FileSpreadsheet,\r\n    Users,\r\n    Shield,\r\n    BookOpen,\r\n    Target,\r\n    TrendingUp,\r\n    Calendar,\r\n    Loader2,\r\n    Copy,\r\n    ExternalLink\r\n} from 'lucide-react';\r\nimport { generateSEF, generatePupilPremiumStrategy, generateSportsPremiumReport, generateSDP, documentToMarkdown, documentToHTML, GeneratedDocument } from '@/lib/document-generator';\r\n\r\ninterface ReportGeneratorProps {\r\n    schoolData: {\r\n        name: string;\r\n        academicYear: string;\r\n        isChurchSchool?: boolean;\r\n    };\r\n    ofstedAssessments: Record<string, any>;\r\n    siamsAssessments: Record<string, any>;\r\n    actions: any[];\r\n    evidenceMatches: any[];\r\n    ppData?: any;\r\n    sportsData?: any;\r\n    sdpPriorities?: any[];\r\n}\r\n\r\ninterface ReportType {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    icon: React.ReactNode;\r\n    estimatedTime: string;\r\n    color: string;\r\n    available: boolean;\r\n}\r\n\r\nconst ReportGenerator: React.FC<ReportGeneratorProps> = ({\r\n    schoolData,\r\n    ofstedAssessments,\r\n    siamsAssessments,\r\n    actions,\r\n    evidenceMatches,\r\n    ppData,\r\n    sportsData,\r\n    sdpPriorities\r\n}) => {\r\n    const [selectedReport, setSelectedReport] = useState<string | null>(null);\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n    const [generatedReport, setGeneratedReport] = useState<GeneratedDocument | null>(null);\r\n    const [generationTime, setGenerationTime] = useState<number>(0);\r\n\r\n    const reportTypes: ReportType[] = [\r\n        {\r\n            id: 'sef',\r\n            name: 'Self-Evaluation Form (SEF)',\r\n            description: 'Complete SEF aligned to Ofsted 2025 framework',\r\n            icon: <Target className=\"w-6 h-6\" />,\r\n            estimatedTime: '45 seconds',\r\n            color: 'blue',\r\n            available: Object.keys(ofstedAssessments).length > 0\r\n        },\r\n        {\r\n            id: 'headteacher',\r\n            name: 'Headteacher Report to Governors',\r\n            description: 'Summary of school performance and priorities',\r\n            icon: <Users className=\"w-6 h-6\" />,\r\n            estimatedTime: '60 seconds',\r\n            color: 'purple',\r\n            available: true\r\n        },\r\n        {\r\n            id: 'pp_strategy',\r\n            name: 'Pupil Premium Strategy',\r\n            description: 'DfE-compliant PP strategy statement',\r\n            icon: <FileSpreadsheet className=\"w-6 h-6\" />,\r\n            estimatedTime: '30 seconds',\r\n            color: 'green',\r\n            available: true\r\n        },\r\n        {\r\n            id: 'sports_premium',\r\n            name: 'PE & Sport Premium Report',\r\n            description: 'Spending and impact against 5 key indicators',\r\n            icon: <TrendingUp className=\"w-6 h-6\" />,\r\n            estimatedTime: '30 seconds',\r\n            color: 'orange',\r\n            available: true\r\n        },\r\n        {\r\n            id: 'safeguarding',\r\n            name: 'Annual Safeguarding Report',\r\n            description: 'Safeguarding summary for governors',\r\n            icon: <Shield className=\"w-6 h-6\" />,\r\n            estimatedTime: '30 seconds',\r\n            color: 'red',\r\n            available: true\r\n        },\r\n        {\r\n            id: 'sdp',\r\n            name: 'School Development Plan',\r\n            description: 'Strategic priorities and action plans',\r\n            icon: <Calendar className=\"w-6 h-6\" />,\r\n            estimatedTime: '60 seconds',\r\n            color: 'teal',\r\n            available: true\r\n        },\r\n        {\r\n            id: 'quality_of_education',\r\n            name: 'Quality of Education Summary',\r\n            description: 'Deep dive into curriculum and teaching',\r\n            icon: <BookOpen className=\"w-6 h-6\" />,\r\n            estimatedTime: '45 seconds',\r\n            color: 'indigo',\r\n            available: Object.keys(ofstedAssessments).length > 0\r\n        },\r\n        {\r\n            id: 'inspection_pack',\r\n            name: 'Inspection Briefing Pack',\r\n            description: 'Everything inspectors will ask for',\r\n            icon: <FileText className=\"w-6 h-6\" />,\r\n            estimatedTime: '90 seconds',\r\n            color: 'rose',\r\n            available: Object.keys(ofstedAssessments).length > 0\r\n        }\r\n    ];\r\n\r\n    const getColorClasses = (color: string, isSelected: boolean) => {\r\n        const colors: Record<string, { bg: string; border: string; text: string; hover: string }> = {\r\n            blue: { bg: 'bg-blue-50', border: 'border-blue-500', text: 'text-blue-700', hover: 'hover:bg-blue-100' },\r\n            purple: { bg: 'bg-purple-50', border: 'border-purple-500', text: 'text-purple-700', hover: 'hover:bg-purple-100' },\r\n            green: { bg: 'bg-green-50', border: 'border-green-500', text: 'text-green-700', hover: 'hover:bg-green-100' },\r\n            orange: { bg: 'bg-orange-50', border: 'border-orange-500', text: 'text-orange-700', hover: 'hover:bg-orange-100' },\r\n            red: { bg: 'bg-red-50', border: 'border-red-500', text: 'text-red-700', hover: 'hover:bg-red-100' },\r\n            teal: { bg: 'bg-teal-50', border: 'border-teal-500', text: 'text-teal-700', hover: 'hover:bg-teal-100' },\r\n            indigo: { bg: 'bg-indigo-50', border: 'border-indigo-500', text: 'text-indigo-700', hover: 'hover:bg-indigo-100' },\r\n            rose: { bg: 'bg-rose-50', border: 'border-rose-500', text: 'text-rose-700', hover: 'hover:bg-rose-100' }\r\n        };\r\n        \r\n        const c = colors[color] || colors.blue;\r\n        return isSelected \r\n            ? `${c.bg} border-2 ${c.border} ${c.text}` \r\n            : `bg-white border border-gray-200 text-gray-700 ${c.hover}`;\r\n    };\r\n\r\n    const generateReport = async (reportId: string) => {\r\n        setIsGenerating(true);\r\n        setGeneratedReport(null);\r\n        const startTime = Date.now();\r\n\r\n        try {\r\n            let report: GeneratedDocument;\r\n\r\n            switch (reportId) {\r\n                case 'sef':\r\n                    report = generateSEF(\r\n                        schoolData,\r\n                        ofstedAssessments,\r\n                        evidenceMatches,\r\n                        actions\r\n                    );\r\n                    break;\r\n                \r\n                case 'pp_strategy':\r\n                    report = generatePupilPremiumStrategy(\r\n                        schoolData,\r\n                        ppData || {\r\n                            totalPupils: 200,\r\n                            ppPupils: 40,\r\n                            allocation: 52000,\r\n                            barriers: [\r\n                                { id: '1', description: 'Lower reading attainment on entry', category: 'academic' },\r\n                                { id: '2', description: 'Limited vocabulary', category: 'academic' },\r\n                                { id: '3', description: 'Lower attendance rates', category: 'attendance' }\r\n                            ],\r\n                            outcomes: {\r\n                                reading: { pp: 65, nonPp: 78, national: 73 },\r\n                                writing: { pp: 60, nonPp: 75, national: 71 },\r\n                                maths: { pp: 68, nonPp: 80, national: 73 }\r\n                            },\r\n                            attendance: { pp: 93.5, nonPp: 96.2, ppPersistentAbsence: 18 },\r\n                            spending: []\r\n                        }\r\n                    );\r\n                    break;\r\n                \r\n                case 'sports_premium':\r\n                    report = generateSportsPremiumReport(\r\n                        schoolData,\r\n                        sportsData || {\r\n                            allocation: 19000,\r\n                            carriedForward: 2000,\r\n                            swimming: {\r\n                                percentage25m: 82,\r\n                                percentageStrokes: 78,\r\n                                percentageRescue: 85\r\n                            },\r\n                            spending: []\r\n                        }\r\n                    );\r\n                    break;\r\n                \r\n                case 'sdp':\r\n                    report = generateSDP(\r\n                        schoolData,\r\n                        sdpPriorities || [\r\n                            {\r\n                                number: 1,\r\n                                title: 'Improve reading outcomes for disadvantaged pupils',\r\n                                description: 'Focus on phonics, reading fluency and comprehension',\r\n                                rationale: 'PP reading outcomes are below national average',\r\n                                ofstedCategoryId: 'curriculum-teaching',\r\n                                leadPerson: 'Deputy Head',\r\n                                successCriteria: [\r\n                                    'PP reading outcomes improve by 10%',\r\n                                    'Gap with non-PP reduces by 5pp'\r\n                                ],\r\n                                allocatedBudget: 15000,\r\n                                milestones: [\r\n                                    { title: 'Staff training complete', targetTerm: 'autumn1', status: 'completed' },\r\n                                    { title: 'New resources in place', targetTerm: 'autumn2', status: 'in_progress' }\r\n                                ]\r\n                            }\r\n                        ],\r\n                        ofstedAssessments\r\n                    );\r\n                    break;\r\n                \r\n                default:\r\n                    // Generate a placeholder for other report types\r\n                    report = generateSEF(schoolData, ofstedAssessments, evidenceMatches, actions);\r\n                    report.title = `${reportTypes.find(r => r.id === reportId)?.name || 'Report'} - ${schoolData.name}`;\r\n                    report.type = reportId;\r\n            }\r\n\r\n            const endTime = Date.now();\r\n            setGenerationTime((endTime - startTime) / 1000);\r\n            setGeneratedReport(report);\r\n\r\n        } catch (error) {\r\n            console.error('Report generation error:', error);\r\n        } finally {\r\n            setIsGenerating(false);\r\n        }\r\n    };\r\n\r\n    const downloadReport = (format: 'markdown' | 'html') => {\r\n        if (!generatedReport) return;\r\n\r\n        const content = format === 'markdown' \r\n            ? documentToMarkdown(generatedReport)\r\n            : documentToHTML(generatedReport);\r\n        \r\n        const blob = new Blob([content], { type: format === 'markdown' ? 'text/markdown' : 'text/html' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `${generatedReport.title.replace(/[^a-z0-9]/gi, '_')}.${format === 'markdown' ? 'md' : 'html'}`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const copyToClipboard = () => {\r\n        if (!generatedReport) return;\r\n        const content = documentToMarkdown(generatedReport);\r\n        navigator.clipboard.writeText(content);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl p-6 text-white shadow-lg\">\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                    <FileText className=\"w-8 h-8\" />\r\n                    <h1 className=\"text-2xl font-bold\">One-Click Report Generator</h1>\r\n                </div>\r\n                <p className=\"text-emerald-100\">\r\n                    Generate inspection-ready documents in seconds using your school's data\r\n                </p>\r\n            </div>\r\n\r\n            {/* Report Selection Grid */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n                <h2 className=\"font-semibold text-gray-900 mb-4\">Select Report Type</h2>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                    {reportTypes.map(report => (\r\n                        <button\r\n                            key={report.id}\r\n                            onClick={() => setSelectedReport(report.id)}\r\n                            disabled={!report.available}\r\n                            className={`p-4 rounded-xl text-left transition-all ${\r\n                                getColorClasses(report.color, selectedReport === report.id)\r\n                            } ${!report.available ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:shadow-md'}`}\r\n                        >\r\n                            <div className={`p-2 rounded-lg inline-block mb-3 ${\r\n                                selectedReport === report.id ? 'bg-white/50' : 'bg-gray-100'\r\n                            }`}>\r\n                                {report.icon}\r\n                            </div>\r\n                            <h3 className=\"font-semibold text-sm mb-1\">{report.name}</h3>\r\n                            <p className=\"text-xs opacity-75 mb-2\">{report.description}</p>\r\n                            <div className=\"flex items-center gap-1 text-xs opacity-60\">\r\n                                <Clock className=\"w-3 h-3\" />\r\n                                <span>{report.estimatedTime}</span>\r\n                            </div>\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Generate Button */}\r\n            {selectedReport && (\r\n                <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <h3 className=\"font-semibold text-gray-900\">\r\n                                {reportTypes.find(r => r.id === selectedReport)?.name}\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-500\">\r\n                                Data sources: Assessments, Actions, Evidence\r\n                            </p>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => generateReport(selectedReport)}\r\n                            disabled={isGenerating}\r\n                            className=\"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold rounded-lg hover:from-emerald-600 hover:to-teal-600 transition-all disabled:opacity-50 flex items-center gap-2 shadow-md\"\r\n                        >\r\n                            {isGenerating ? (\r\n                                <>\r\n                                    <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                    Generating...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <RefreshCw className=\"w-5 h-5\" />\r\n                                    Generate Report\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Generated Report Preview */}\r\n            {generatedReport && (\r\n                <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\r\n                    {/* Report Header */}\r\n                    <div className=\"p-4 bg-gray-50 border-b border-gray-200 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n                            <div>\r\n                                <h3 className=\"font-semibold text-gray-900\">{generatedReport.title}</h3>\r\n                                <p className=\"text-xs text-gray-500\">\r\n                                    Generated in {generationTime.toFixed(1)}s • {generatedReport.metadata.wordCount} words • {generatedReport.metadata.completionPercentage}% complete\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                                onClick={copyToClipboard}\r\n                                className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg\"\r\n                                title=\"Copy to clipboard\"\r\n                            >\r\n                                <Copy className=\"w-5 h-5\" />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => downloadReport('markdown')}\r\n                                className=\"px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-sm font-medium\"\r\n                            >\r\n                                <Download className=\"w-4 h-4\" />\r\n                                Markdown\r\n                            </button>\r\n                            <button\r\n                                onClick={() => downloadReport('html')}\r\n                                className=\"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 flex items-center gap-2 text-sm font-medium\"\r\n                            >\r\n                                <Download className=\"w-4 h-4\" />\r\n                                HTML\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Completion Status */}\r\n                    {generatedReport.metadata.missingData.length > 0 && (\r\n                        <div className=\"px-4 py-3 bg-yellow-50 border-b border-yellow-200\">\r\n                            <p className=\"text-sm text-yellow-800\">\r\n                                <strong>Note:</strong> Some sections are incomplete. Missing: {generatedReport.metadata.missingData.join(', ')}\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Report Content Preview */}\r\n                    <div className=\"p-6 max-h-[600px] overflow-y-auto\">\r\n                        <div className=\"prose prose-sm max-w-none\">\r\n                            {generatedReport.sections.map((section, index) => (\r\n                                <div key={section.id} className=\"mb-6\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <span className={`w-2 h-2 rounded-full ${\r\n                                            section.status === 'complete' ? 'bg-green-500' :\r\n                                            section.status === 'partial' ? 'bg-yellow-500' : 'bg-gray-300'\r\n                                        }`} />\r\n                                        <h4 className=\"font-semibold text-gray-900\">{section.title}</h4>\r\n                                        <span className={`text-xs px-2 py-0.5 rounded ${\r\n                                            section.status === 'complete' ? 'bg-green-100 text-green-700' :\r\n                                            section.status === 'partial' ? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-500'\r\n                                        }`}>\r\n                                            {section.status}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div \r\n                                        className=\"text-sm text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg border border-gray-200\"\r\n                                        style={{ fontFamily: 'ui-monospace, monospace' }}\r\n                                    >\r\n                                        {section.content.substring(0, 500)}\r\n                                        {section.content.length > 500 && '...'}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReportGenerator;\r\n\r\n","\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { ActionItem, ActionNote, OFSTED_FRAMEWORK } from '@/lib/ofsted-framework';\r\nimport { X, Calendar, User, AlignLeft, CheckCircle, AlertCircle, Clock, Save, MessageSquare, Trash2, Plus, ArrowRight } from 'lucide-react';\r\n\r\ninterface ActionModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSave: (action: ActionItem) => void;\r\n    categoryName?: string;\r\n    subCategoryName: string;\r\n    evidenceItem?: string;\r\n    initialData?: ActionItem;\r\n}\r\n\r\nconst BADGE_COLOR_MAP: Record<string, string> = {\r\n    'rose': 'bg-white border-rose-200 text-rose-700',\r\n    'teal': 'bg-white border-teal-200 text-teal-700',\r\n    'orange': 'bg-white border-orange-200 text-orange-700',\r\n    'violet': 'bg-white border-violet-200 text-violet-700',\r\n    'blue': 'bg-white border-blue-200 text-blue-700',\r\n    'gray': 'bg-white border-gray-200 text-gray-700',\r\n};\r\n\r\nexport default function ActionModal({\r\n    isOpen,\r\n    onClose,\r\n    onSave,\r\n    categoryName,\r\n    subCategoryName,\r\n    evidenceItem,\r\n    initialData\r\n}: ActionModalProps) {\r\n    const [description, setDescription] = useState('');\r\n    const [rationale, setRationale] = useState('');\r\n    const [assignee, setAssignee] = useState('');\r\n    const [startDate, setStartDate] = useState('');\r\n    const [dueDate, setDueDate] = useState('');\r\n    const [priority, setPriority] = useState<'high' | 'medium' | 'low'>('medium');\r\n    const [status, setStatus] = useState<'open' | 'in_progress' | 'completed'>('open');\r\n\r\n    // Notes State\r\n    const [notes, setNotes] = useState<ActionNote[]>([]);\r\n    const [newNote, setNewNote] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            if (initialData) {\r\n                setDescription(initialData.description);\r\n                setRationale(initialData.rationale || '');\r\n                setAssignee(initialData.assignee || '');\r\n                setStartDate(initialData.startDate || '');\r\n                setDueDate(initialData.dueDate || '');\r\n                setPriority(initialData.priority);\r\n                setStatus(initialData.status);\r\n                setNotes(initialData.notes || []);\r\n            } else {\r\n                // New Action Defaults\r\n                setDescription(evidenceItem ? `Address gap: ${evidenceItem}` : '');\r\n                setRationale('');\r\n                setAssignee('');\r\n                setStartDate(new Date().toISOString().split('T')[0]); // Default to today\r\n                setDueDate('');\r\n                setPriority('medium');\r\n                setStatus('open');\r\n                setNotes([]);\r\n            }\r\n            setNewNote('');\r\n        }\r\n    }, [isOpen, initialData, evidenceItem]);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        // Add note if exists\r\n        let finalNotes = [...notes];\r\n        if (newNote.trim()) {\r\n            finalNotes.push({\r\n                id: crypto.randomUUID(),\r\n                userId: 'current-user',\r\n                userName: 'You',\r\n                message: newNote,\r\n                timestamp: new Date(),\r\n                type: 'user_note'\r\n            });\r\n        }\r\n\r\n        const newAction: ActionItem = {\r\n            id: initialData?.id || crypto.randomUUID(),\r\n            description,\r\n            rationale,\r\n            assignee,\r\n            startDate,\r\n            dueDate,\r\n            priority,\r\n            status,\r\n            category: categoryName || initialData?.category, // Use passed category or existing\r\n            createdAt: initialData?.createdAt || new Date().toISOString(),\r\n            updatedAt: new Date().toISOString(),\r\n            notes: finalNotes\r\n        };\r\n\r\n        onSave(newAction);\r\n    };\r\n\r\n    const handleAddNote = () => {\r\n        if (!newNote.trim()) return;\r\n        setNotes([\r\n            ...notes,\r\n            {\r\n                id: crypto.randomUUID(),\r\n                userId: 'current-user',\r\n                userName: 'You',\r\n                message: newNote,\r\n                timestamp: new Date(),\r\n                type: 'user_note'\r\n            }\r\n        ]);\r\n        setNewNote('');\r\n    };\r\n\r\n    const getCategoryBadgeStyle = (catName: string) => {\r\n        const category = OFSTED_FRAMEWORK.find(c => c.name === catName);\r\n        const colorName = category?.color || 'gray';\r\n        return BADGE_COLOR_MAP[colorName] || BADGE_COLOR_MAP['gray'];\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm\">\r\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col animate-in fade-in zoom-in duration-200\">\r\n                {/* Header */}\r\n                <div className=\"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\r\n                    <div>\r\n                        <h3 className=\"text-lg font-bold text-gray-900\">\r\n                            {initialData ? 'Update Action' : 'Create New Action'}\r\n                        </h3>\r\n                        <div className=\"flex items-center gap-2 mt-1\">\r\n                            {categoryName && (\r\n                                <span className={`text-xs px-2 py-0.5 rounded border font-bold ${getCategoryBadgeStyle(categoryName)}`}>\r\n                                    {categoryName}\r\n                                </span>\r\n                            )}\r\n                            <span className=\"text-sm text-gray-500 flex items-center gap-1\">\r\n                                <span className=\"text-gray-300\">/</span> {subCategoryName}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-200 transition-colors\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    <form id=\"action-form\" onSubmit={handleSubmit} className=\"space-y-8\">\r\n\r\n                        {/* 1. Status & Priority (High Visibility) */}\r\n                        <div className=\"bg-blue-50/50 p-4 rounded-xl border border-blue-100\">\r\n                            <div className=\"flex flex-col md:flex-row gap-6\">\r\n                                <div className=\"flex-1\">\r\n                                    <label className=\"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-1\">\r\n                                        <CheckCircle size={16} className=\"text-blue-600\" /> Current Status\r\n                                    </label>\r\n                                    <div className=\"flex gap-2\">\r\n                                        {['open', 'in_progress', 'completed'].map((s) => (\r\n                                            <button\r\n                                                key={s}\r\n                                                type=\"button\"\r\n                                                onClick={() => setStatus(s as any)}\r\n                                                className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium border transition-all capitalize ${status === s\r\n                                                        ? 'bg-blue-600 text-white border-blue-600 shadow-sm'\r\n                                                        : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'\r\n                                                    }`}\r\n                                            >\r\n                                                {s.replace('_', ' ')}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"w-full md:w-1/3\">\r\n                                    <label className=\"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-1\">\r\n                                        <AlertCircle size={16} className=\"text-amber-600\" /> Priority\r\n                                    </label>\r\n                                    <select\r\n                                        value={priority}\r\n                                        onChange={(e) => setPriority(e.target.value as any)}\r\n                                        className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm bg-white h-[38px]\"\r\n                                    >\r\n                                        <option value=\"high\">High Priority</option>\r\n                                        <option value=\"medium\">Medium Priority</option>\r\n                                        <option value=\"low\">Low Priority</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 2. Progress Update / Notes (Imperative) */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-800 mb-2 flex items-center gap-2\">\r\n                                <MessageSquare size={16} className=\"text-purple-600\" />\r\n                                Progress Update / Notes\r\n                                <span className=\"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full\">Required for updates</span>\r\n                            </label>\r\n\r\n                            <div className=\"space-y-3\">\r\n                                <textarea\r\n                                    value={newNote}\r\n                                    onChange={(e) => setNewNote(e.target.value)}\r\n                                    placeholder=\"What's the latest progress on this action? Add your update here...\"\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none min-h-[100px] shadow-sm\"\r\n                                />\r\n\r\n                                {/* Previous Notes */}\r\n                                {notes.length > 0 && (\r\n                                    <div className=\"bg-gray-50 rounded-lg p-3 max-h-40 overflow-y-auto space-y-3 border border-gray-200\">\r\n                                        <h4 className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\">History</h4>\r\n                                        {notes.map(note => (\r\n                                            <div key={note.id} className=\"text-sm bg-white p-3 rounded border border-gray-200 shadow-sm\">\r\n                                                <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\r\n                                                    <span className=\"font-medium text-gray-900\">{note.userName}</span>\r\n                                                    <span>{new Date(note.timestamp).toLocaleDateString()} {new Date(note.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n                                                </div>\r\n                                                <p className=\"text-gray-700\">{note.message}</p>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 3. Core Details (Description) */}\r\n                        <div className=\"space-y-4 pt-4 border-t border-gray-100\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Action Description</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    required\r\n                                    value={description}\r\n                                    onChange={(e) => setDescription(e.target.value)}\r\n                                    className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium\"\r\n                                    placeholder=\"What needs to be done?\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1\">\r\n                                    <AlignLeft size={14} /> Rationale / Context\r\n                                </label>\r\n                                <textarea\r\n                                    value={rationale}\r\n                                    onChange={(e) => setRationale(e.target.value)}\r\n                                    rows={2}\r\n                                    className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none resize-none text-sm text-gray-600\"\r\n                                    placeholder=\"Why is this action needed?\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 4. Logistics (Dates & Assignee) */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-100\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1\">\r\n                                    <User size={14} /> Assignee\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={assignee}\r\n                                    onChange={(e) => setAssignee(e.target.value)}\r\n                                    className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm\"\r\n                                    placeholder=\"e.g. John Smith\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1\">\r\n                                    <Calendar size={14} /> Start Date\r\n                                </label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={startDate}\r\n                                    onChange={(e) => setStartDate(e.target.value)}\r\n                                    className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1\">\r\n                                    <Clock size={14} /> Due Date\r\n                                </label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={dueDate}\r\n                                    onChange={(e) => setDueDate(e.target.value)}\r\n                                    className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"px-6 py-4 border-t border-gray-100 bg-gray-50 flex justify-end gap-3\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        className=\"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        form=\"action-form\"\r\n                        className=\"px-6 py-2 bg-blue-600 text-white text-sm font-bold rounded-lg hover:bg-blue-700 shadow-sm transition-all flex items-center gap-2\"\r\n                    >\r\n                        <Save size={16} />\r\n                        Save & Update\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { \r\n    GraduationCap, Sparkles, AlertTriangle, CheckCircle2, \r\n    HelpCircle, ChevronRight, BookOpen, Target, Users,\r\n    Lightbulb, ClipboardList, ThumbsUp, ThumbsDown, Edit3,\r\n    Clock, User, ArrowRight, X, Loader2, Eye, FileText\r\n} from 'lucide-react';\r\nimport { getRelevantStrategies, EEFStrategy } from '@/lib/eef-toolkit';\r\n\r\ninterface Gap {\r\n    id: string;\r\n    area: string;\r\n    subcategory: string;\r\n    description: string;\r\n    severity: 'critical' | 'moderate' | 'minor';\r\n    currentRating?: string;\r\n}\r\n\r\ninterface CriticalQuestion {\r\n    id: string;\r\n    question: string;\r\n    area: string;\r\n    ifNo: string; // What action to recommend if answer is No\r\n    ifYes: string; // What to check next if answer is Yes\r\n}\r\n\r\ninterface DraftAction {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    eefStrategy?: string;\r\n    eefImpact?: number;\r\n    dueDate?: string;\r\n    suggestedOwner?: string;\r\n    priority: 'high' | 'medium' | 'low';\r\n    status: 'draft' | 'approved' | 'rejected';\r\n}\r\n\r\ninterface EdAnalysisPanelProps {\r\n    selectedCategory?: string;\r\n    selectedSubcategory?: string;\r\n    currentRating?: string;\r\n    evidenceCount?: number;\r\n    gaps?: Gap[];\r\n    onCreateAction?: (action: DraftAction) => void;\r\n    onClose?: () => void;\r\n}\r\n\r\n// Critical questions for root cause analysis\r\nconst CRITICAL_QUESTIONS: Record<string, CriticalQuestion[]> = {\r\n    'reading': [\r\n        {\r\n            id: 'scheme-validated',\r\n            question: 'Is your phonics/reading scheme DfE validated?',\r\n            area: 'reading',\r\n            ifNo: 'Consider switching to a validated systematic synthetic phonics programme (e.g., Little Wandle, Read Write Inc)',\r\n            ifYes: 'Scheme is appropriate - check implementation'\r\n        },\r\n        {\r\n            id: 'staff-trained',\r\n            question: 'Have all staff delivering reading had recent CPD on the scheme?',\r\n            area: 'reading',\r\n            ifNo: 'Book CPD session for staff on phonics/reading scheme delivery',\r\n            ifYes: 'Training is in place - check classroom practice'\r\n        },\r\n        {\r\n            id: 'lessons-observed',\r\n            question: 'Have SLT observed reading lessons this term?',\r\n            area: 'reading',\r\n            ifNo: 'Schedule lesson observations focused on reading delivery',\r\n            ifYes: 'Observations done - review findings'\r\n        },\r\n        {\r\n            id: 'books-matched',\r\n            question: 'Are reading books matched to children\\'s phonics stage?',\r\n            area: 'reading',\r\n            ifNo: 'Audit reading books and implement book-banding system',\r\n            ifYes: 'Books are matched - check home reading consistency'\r\n        },\r\n        {\r\n            id: 'interventions-place',\r\n            question: 'Are rapid interventions in place for children falling behind?',\r\n            area: 'reading',\r\n            ifNo: 'Implement same-day keep-up interventions for struggling readers',\r\n            ifYes: 'Interventions exist - check impact data'\r\n        }\r\n    ],\r\n    'maths': [\r\n        {\r\n            id: 'mastery-approach',\r\n            question: 'Are you using a mastery approach (e.g., White Rose, Power Maths)?',\r\n            area: 'maths',\r\n            ifNo: 'Consider adopting a mastery curriculum approach',\r\n            ifYes: 'Mastery in place - check implementation fidelity'\r\n        },\r\n        {\r\n            id: 'fluency-practice',\r\n            question: 'Do children get daily fluency practice (times tables, number bonds)?',\r\n            area: 'maths',\r\n            ifNo: 'Implement daily fluency sessions (e.g., Times Tables Rock Stars)',\r\n            ifYes: 'Fluency in place - check coverage'\r\n        },\r\n        {\r\n            id: 'concrete-resources',\r\n            question: 'Do teachers use concrete manipulatives before abstract?',\r\n            area: 'maths',\r\n            ifNo: 'CPD needed on concrete-pictorial-abstract approach',\r\n            ifYes: 'CPA used - check reasoning opportunities'\r\n        }\r\n    ],\r\n    'behaviour': [\r\n        {\r\n            id: 'policy-clear',\r\n            question: 'Is your behaviour policy clear and consistently applied?',\r\n            area: 'behaviour',\r\n            ifNo: 'Review and relaunch behaviour policy with all staff',\r\n            ifYes: 'Policy exists - check consistency'\r\n        },\r\n        {\r\n            id: 'routines-embedded',\r\n            question: 'Are routines and expectations explicitly taught to pupils?',\r\n            area: 'behaviour',\r\n            ifNo: 'Implement explicit teaching of school routines',\r\n            ifYes: 'Routines taught - check reinforcement'\r\n        },\r\n        {\r\n            id: 'root-causes',\r\n            question: 'Do you investigate root causes of behaviour incidents?',\r\n            area: 'behaviour',\r\n            ifNo: 'Implement behaviour analysis process (ABC approach)',\r\n            ifYes: 'Root causes explored - check support plans'\r\n        }\r\n    ],\r\n    'send': [\r\n        {\r\n            id: 'identify-early',\r\n            question: 'Do you identify SEND needs early (within first term)?',\r\n            area: 'send',\r\n            ifNo: 'Implement early identification screening system',\r\n            ifYes: 'Early ID in place - check provision'\r\n        },\r\n        {\r\n            id: 'provision-map',\r\n            question: 'Do you have a clear provision map showing interventions?',\r\n            area: 'send',\r\n            ifNo: 'Create provision map linked to SEND register',\r\n            ifYes: 'Provision mapped - check impact tracking'\r\n        },\r\n        {\r\n            id: 'ta-trained',\r\n            question: 'Are TAs trained on specific SEND interventions?',\r\n            area: 'send',\r\n            ifNo: 'Book targeted CPD for TAs on intervention delivery',\r\n            ifYes: 'TAs trained - check deployment'\r\n        }\r\n    ],\r\n    'teaching': [\r\n        {\r\n            id: 'teaching-observed',\r\n            question: 'Have all teachers been observed this half-term?',\r\n            area: 'teaching',\r\n            ifNo: 'Schedule lesson observations for all staff',\r\n            ifYes: 'Observations done - review quality'\r\n        },\r\n        {\r\n            id: 'feedback-given',\r\n            question: 'Do teachers receive specific, developmental feedback?',\r\n            area: 'teaching',\r\n            ifNo: 'Implement coaching/mentoring conversations post-observation',\r\n            ifYes: 'Feedback given - check follow-up'\r\n        },\r\n        {\r\n            id: 'underperformance-addressed',\r\n            question: 'Is underperformance addressed promptly with support plans?',\r\n            area: 'teaching',\r\n            ifNo: 'Create support plan process for struggling teachers',\r\n            ifYes: 'Support in place - monitor progress'\r\n        }\r\n    ]\r\n};\r\n\r\nexport default function EdAnalysisPanel({\r\n    selectedCategory,\r\n    selectedSubcategory,\r\n    currentRating,\r\n    evidenceCount = 0,\r\n    gaps = [],\r\n    onCreateAction,\r\n    onClose\r\n}: EdAnalysisPanelProps) {\r\n    const [activeTab, setActiveTab] = useState<'analysis' | 'questions' | 'actions'>('analysis');\r\n    const [questionAnswers, setQuestionAnswers] = useState<Record<string, boolean | null>>({});\r\n    const [draftActions, setDraftActions] = useState<DraftAction[]>([]);\r\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n    const [analysisComplete, setAnalysisComplete] = useState(false);\r\n    const [rootCause, setRootCause] = useState<string | null>(null);\r\n    const [relevantStrategies, setRelevantStrategies] = useState<EEFStrategy[]>([]);\r\n\r\n    // Get relevant questions based on category\r\n    const getQuestionsForCategory = (): CriticalQuestion[] => {\r\n        const categoryLower = selectedCategory?.toLowerCase() || '';\r\n        if (categoryLower.includes('reading') || categoryLower.includes('phonics')) {\r\n            return CRITICAL_QUESTIONS['reading'];\r\n        }\r\n        if (categoryLower.includes('maths') || categoryLower.includes('mathematics')) {\r\n            return CRITICAL_QUESTIONS['maths'];\r\n        }\r\n        if (categoryLower.includes('behaviour')) {\r\n            return CRITICAL_QUESTIONS['behaviour'];\r\n        }\r\n        if (categoryLower.includes('send') || categoryLower.includes('inclusion')) {\r\n            return CRITICAL_QUESTIONS['send'];\r\n        }\r\n        // Default to teaching questions\r\n        return CRITICAL_QUESTIONS['teaching'];\r\n    };\r\n\r\n    const questions = getQuestionsForCategory();\r\n\r\n    // Analyze answers and determine root cause\r\n    useEffect(() => {\r\n        const answeredQuestions = Object.entries(questionAnswers);\r\n        if (answeredQuestions.length >= 3) {\r\n            const noAnswers = answeredQuestions.filter(([_, v]) => v === false);\r\n            if (noAnswers.length > 0) {\r\n                // Find the first \"No\" answer - this is likely the root cause\r\n                const firstNo = noAnswers[0];\r\n                const question = questions.find(q => q.id === firstNo[0]);\r\n                if (question) {\r\n                    setRootCause(question.ifNo);\r\n                    generateDraftActions(question);\r\n                }\r\n            } else {\r\n                setRootCause('Implementation appears sound. Consider reviewing outcome data for specific cohorts or groups.');\r\n            }\r\n            setAnalysisComplete(true);\r\n        }\r\n    }, [questionAnswers]);\r\n\r\n    // Get relevant EEF strategies\r\n    useEffect(() => {\r\n        if (selectedCategory) {\r\n            const strategies = getRelevantStrategies(selectedCategory);\r\n            setRelevantStrategies(strategies.slice(0, 3));\r\n        }\r\n    }, [selectedCategory]);\r\n\r\n    const generateDraftActions = (question: CriticalQuestion) => {\r\n        const actions: DraftAction[] = [];\r\n        \r\n        // Generate action from the question\r\n        actions.push({\r\n            id: `action-${Date.now()}-1`,\r\n            title: question.ifNo.split('.')[0],\r\n            description: question.ifNo,\r\n            priority: 'high',\r\n            status: 'draft',\r\n            dueDate: getDefaultDueDate(14),\r\n            suggestedOwner: 'Subject Lead'\r\n        });\r\n\r\n        // Add monitoring action\r\n        actions.push({\r\n            id: `action-${Date.now()}-2`,\r\n            title: 'SLT Monitoring Visit',\r\n            description: `Conduct focused monitoring visit to assess implementation of ${question.area} improvements`,\r\n            priority: 'medium',\r\n            status: 'draft',\r\n            dueDate: getDefaultDueDate(28),\r\n            suggestedOwner: 'Deputy Head'\r\n        });\r\n\r\n        // Add review action\r\n        actions.push({\r\n            id: `action-${Date.now()}-3`,\r\n            title: 'Review Impact Data',\r\n            description: `Review progress data to measure impact of interventions after 6 weeks`,\r\n            priority: 'medium',\r\n            status: 'draft',\r\n            dueDate: getDefaultDueDate(42),\r\n            suggestedOwner: 'Assessment Lead'\r\n        });\r\n\r\n        // Add EEF-backed action if relevant strategy found\r\n        if (relevantStrategies.length > 0) {\r\n            const topStrategy = relevantStrategies[0];\r\n            actions.push({\r\n                id: `action-${Date.now()}-4`,\r\n                title: `Implement: ${topStrategy.name}`,\r\n                description: `EEF research shows +${topStrategy.monthsProgress} months progress. ${topStrategy.description}`,\r\n                eefStrategy: topStrategy.name,\r\n                eefImpact: topStrategy.monthsProgress,\r\n                priority: 'high',\r\n                status: 'draft',\r\n                dueDate: getDefaultDueDate(21),\r\n                suggestedOwner: 'Class Teachers'\r\n            });\r\n        }\r\n\r\n        setDraftActions(actions);\r\n    };\r\n\r\n    const getDefaultDueDate = (daysFromNow: number): string => {\r\n        const date = new Date();\r\n        date.setDate(date.getDate() + daysFromNow);\r\n        return date.toISOString().split('T')[0];\r\n    };\r\n\r\n    const handleAnswerQuestion = (questionId: string, answer: boolean) => {\r\n        setQuestionAnswers(prev => ({ ...prev, [questionId]: answer }));\r\n    };\r\n\r\n    const handleApproveAction = (action: DraftAction) => {\r\n        const approvedAction = { ...action, status: 'approved' as const };\r\n        setDraftActions(prev => prev.map(a => a.id === action.id ? approvedAction : a));\r\n        onCreateAction?.(approvedAction);\r\n    };\r\n\r\n    const handleRejectAction = (actionId: string) => {\r\n        setDraftActions(prev => prev.map(a => \r\n            a.id === actionId ? { ...a, status: 'rejected' as const } : a\r\n        ));\r\n    };\r\n\r\n    const getSeverityColor = (severity: string) => {\r\n        switch (severity) {\r\n            case 'critical': return 'text-red-600 bg-red-50';\r\n            case 'moderate': return 'text-yellow-600 bg-yellow-50';\r\n            case 'minor': return 'text-blue-600 bg-blue-50';\r\n            default: return 'text-gray-600 bg-gray-50';\r\n        }\r\n    };\r\n\r\n    const getPriorityColor = (priority: string) => {\r\n        switch (priority) {\r\n            case 'high': return 'bg-red-100 text-red-700';\r\n            case 'medium': return 'bg-yellow-100 text-yellow-700';\r\n            case 'low': return 'bg-green-100 text-green-700';\r\n            default: return 'bg-gray-100 text-gray-700';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 text-white p-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center\">\r\n                            <GraduationCap size={22} />\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold\">Ed's Analysis</h3>\r\n                            <p className=\"text-sm text-white/80\">\r\n                                {selectedCategory || 'Select an area to analyze'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    {onClose && (\r\n                        <button onClick={onClose} className=\"p-1 hover:bg-white/20 rounded\">\r\n                            <X size={20} />\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"border-b border-gray-200\">\r\n                <nav className=\"flex\">\r\n                    <button\r\n                        onClick={() => setActiveTab('analysis')}\r\n                        className={`flex-1 py-3 text-sm font-medium border-b-2 ${\r\n                            activeTab === 'analysis' \r\n                                ? 'border-emerald-500 text-emerald-600' \r\n                                : 'border-transparent text-gray-500'\r\n                        }`}\r\n                    >\r\n                        📊 Analysis\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('questions')}\r\n                        className={`flex-1 py-3 text-sm font-medium border-b-2 ${\r\n                            activeTab === 'questions' \r\n                                ? 'border-emerald-500 text-emerald-600' \r\n                                : 'border-transparent text-gray-500'\r\n                        }`}\r\n                    >\r\n                        ❓ Root Cause\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('actions')}\r\n                        className={`flex-1 py-3 text-sm font-medium border-b-2 relative ${\r\n                            activeTab === 'actions' \r\n                                ? 'border-emerald-500 text-emerald-600' \r\n                                : 'border-transparent text-gray-500'\r\n                        }`}\r\n                    >\r\n                        🎯 Actions\r\n                        {draftActions.filter(a => a.status === 'draft').length > 0 && (\r\n                            <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\r\n                                {draftActions.filter(a => a.status === 'draft').length}\r\n                            </span>\r\n                        )}\r\n                    </button>\r\n                </nav>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-4 max-h-[400px] overflow-y-auto\">\r\n                {/* Analysis Tab */}\r\n                {activeTab === 'analysis' && (\r\n                    <div className=\"space-y-4\">\r\n                        {/* Current Status */}\r\n                        <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <span className=\"text-sm font-medium text-gray-700\">Current Status</span>\r\n                                <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                                    currentRating === 'Outstanding' ? 'bg-green-100 text-green-700' :\r\n                                    currentRating === 'Good' ? 'bg-blue-100 text-blue-700' :\r\n                                    currentRating === 'Requires Improvement' ? 'bg-yellow-100 text-yellow-700' :\r\n                                    currentRating === 'Inadequate' ? 'bg-red-100 text-red-700' :\r\n                                    'bg-gray-100 text-gray-700'\r\n                                }`}>\r\n                                    {currentRating || 'Not Assessed'}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n                                <span className=\"flex items-center gap-1\">\r\n                                    <FileText size={14} />\r\n                                    {evidenceCount} evidence items\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Identified Gaps */}\r\n                        {gaps.length > 0 && (\r\n                            <div>\r\n                                <h4 className=\"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2\">\r\n                                    <AlertTriangle size={16} className=\"text-yellow-500\" />\r\n                                    Identified Gaps\r\n                                </h4>\r\n                                <div className=\"space-y-2\">\r\n                                    {gaps.map(gap => (\r\n                                        <div key={gap.id} className={`p-3 rounded-lg ${getSeverityColor(gap.severity)}`}>\r\n                                            <p className=\"text-sm font-medium\">{gap.area}</p>\r\n                                            <p className=\"text-xs mt-1\">{gap.description}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* EEF Recommendations */}\r\n                        {relevantStrategies.length > 0 && (\r\n                            <div>\r\n                                <h4 className=\"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2\">\r\n                                    <BookOpen size={16} className=\"text-emerald-500\" />\r\n                                    EEF Research Suggests\r\n                                </h4>\r\n                                <div className=\"space-y-2\">\r\n                                    {relevantStrategies.map(strategy => (\r\n                                        <div key={strategy.id} className=\"p-3 bg-emerald-50 rounded-lg border border-emerald-200\">\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <span className=\"text-sm font-medium text-emerald-800\">{strategy.name}</span>\r\n                                                <span className=\"text-xs bg-emerald-200 text-emerald-800 px-2 py-0.5 rounded-full\">\r\n                                                    +{strategy.monthsProgress} months\r\n                                                </span>\r\n                                            </div>\r\n                                            <p className=\"text-xs text-emerald-700 mt-1\">{strategy.description}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Call to Action */}\r\n                        <button\r\n                            onClick={() => setActiveTab('questions')}\r\n                            className=\"w-full py-3 bg-emerald-500 text-white rounded-lg font-medium hover:bg-emerald-600 flex items-center justify-center gap-2\"\r\n                        >\r\n                            <Lightbulb size={18} />\r\n                            Start Root Cause Analysis\r\n                            <ArrowRight size={18} />\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Questions Tab */}\r\n                {activeTab === 'questions' && (\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"bg-blue-50 rounded-lg p-3 border border-blue-200\">\r\n                            <p className=\"text-sm text-blue-800\">\r\n                                <strong>Ed says:</strong> \"Let me help identify the root cause. \r\n                                Answer these questions honestly - it helps us fix the right thing!\"\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            {questions.map((q, idx) => (\r\n                                <div key={q.id} className=\"p-4 bg-gray-50 rounded-lg border border-gray-200\">\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div className=\"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600 text-xs font-bold flex-shrink-0\">\r\n                                            {idx + 1}\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"text-sm font-medium text-gray-900 mb-3\">{q.question}</p>\r\n                                            <div className=\"flex gap-2\">\r\n                                                <button\r\n                                                    onClick={() => handleAnswerQuestion(q.id, true)}\r\n                                                    className={`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                                                        questionAnswers[q.id] === true\r\n                                                            ? 'bg-green-500 text-white'\r\n                                                            : 'bg-white border border-gray-300 text-gray-700 hover:bg-green-50'\r\n                                                    }`}\r\n                                                >\r\n                                                    ✓ Yes\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => handleAnswerQuestion(q.id, false)}\r\n                                                    className={`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                                                        questionAnswers[q.id] === false\r\n                                                            ? 'bg-red-500 text-white'\r\n                                                            : 'bg-white border border-gray-300 text-gray-700 hover:bg-red-50'\r\n                                                    }`}\r\n                                                >\r\n                                                    ✗ No\r\n                                                </button>\r\n                                            </div>\r\n                                            {questionAnswers[q.id] === false && (\r\n                                                <div className=\"mt-2 p-2 bg-yellow-50 rounded border border-yellow-200\">\r\n                                                    <p className=\"text-xs text-yellow-800\">\r\n                                                        <strong>Action needed:</strong> {q.ifNo}\r\n                                                    </p>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Root Cause Summary */}\r\n                        {analysisComplete && rootCause && (\r\n                            <div className=\"p-4 bg-emerald-50 rounded-lg border border-emerald-200\">\r\n                                <h4 className=\"font-medium text-emerald-800 mb-2 flex items-center gap-2\">\r\n                                    <Target size={16} />\r\n                                    Root Cause Identified\r\n                                </h4>\r\n                                <p className=\"text-sm text-emerald-700\">{rootCause}</p>\r\n                                <button\r\n                                    onClick={() => setActiveTab('actions')}\r\n                                    className=\"mt-3 w-full py-2 bg-emerald-500 text-white rounded-lg text-sm font-medium hover:bg-emerald-600\"\r\n                                >\r\n                                    View Recommended Actions →\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Actions Tab */}\r\n                {activeTab === 'actions' && (\r\n                    <div className=\"space-y-4\">\r\n                        {draftActions.length === 0 ? (\r\n                            <div className=\"text-center py-8 text-gray-500\">\r\n                                <ClipboardList size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                                <p className=\"text-sm\">Complete the Root Cause analysis to generate actions</p>\r\n                                <button\r\n                                    onClick={() => setActiveTab('questions')}\r\n                                    className=\"mt-3 text-emerald-600 text-sm font-medium\"\r\n                                >\r\n                                    Start Analysis →\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                <div className=\"bg-blue-50 rounded-lg p-3 border border-blue-200\">\r\n                                    <p className=\"text-sm text-blue-800\">\r\n                                        <strong>Ed says:</strong> \"Here are my recommended actions based on EEF research. \r\n                                        Approve to add to your action plan, or edit as needed.\"\r\n                                    </p>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-3\">\r\n                                    {draftActions.map((action, idx) => (\r\n                                        <div \r\n                                            key={action.id} \r\n                                            className={`p-4 rounded-lg border ${\r\n                                                action.status === 'approved' ? 'bg-green-50 border-green-200' :\r\n                                                action.status === 'rejected' ? 'bg-gray-50 border-gray-200 opacity-50' :\r\n                                                'bg-white border-gray-200'\r\n                                            }`}\r\n                                        >\r\n                                            <div className=\"flex items-start justify-between mb-2\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <span className={`px-2 py-0.5 rounded text-xs font-medium ${getPriorityColor(action.priority)}`}>\r\n                                                        {action.priority.toUpperCase()}\r\n                                                    </span>\r\n                                                    {action.eefStrategy && (\r\n                                                        <span className=\"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded text-xs\">\r\n                                                            EEF: +{action.eefImpact}mo\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                                {action.status === 'approved' && (\r\n                                                    <CheckCircle2 size={18} className=\"text-green-500\" />\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            <h5 className=\"font-medium text-gray-900 text-sm\">{action.title}</h5>\r\n                                            <p className=\"text-xs text-gray-600 mt-1\">{action.description}</p>\r\n\r\n                                            <div className=\"flex items-center gap-4 mt-3 text-xs text-gray-500\">\r\n                                                <span className=\"flex items-center gap-1\">\r\n                                                    <Clock size={12} />\r\n                                                    Due: {action.dueDate}\r\n                                                </span>\r\n                                                <span className=\"flex items-center gap-1\">\r\n                                                    <User size={12} />\r\n                                                    {action.suggestedOwner}\r\n                                                </span>\r\n                                            </div>\r\n\r\n                                            {action.status === 'draft' && (\r\n                                                <div className=\"flex gap-2 mt-3\">\r\n                                                    <button\r\n                                                        onClick={() => handleApproveAction(action)}\r\n                                                        className=\"flex-1 py-2 bg-green-500 text-white rounded text-xs font-medium hover:bg-green-600 flex items-center justify-center gap-1\"\r\n                                                    >\r\n                                                        <ThumbsUp size={14} />\r\n                                                        Approve\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleRejectAction(action.id)}\r\n                                                        className=\"py-2 px-3 bg-gray-200 text-gray-700 rounded text-xs font-medium hover:bg-gray-300\"\r\n                                                    >\r\n                                                        <ThumbsDown size={14} />\r\n                                                    </button>\r\n                                                    <button className=\"py-2 px-3 bg-blue-100 text-blue-700 rounded text-xs font-medium hover:bg-blue-200\">\r\n                                                        <Edit3 size={14} />\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                {/* Inspector Note */}\r\n                                <div className=\"p-3 bg-purple-50 rounded-lg border border-purple-200\">\r\n                                    <p className=\"text-xs text-purple-800\">\r\n                                        <strong>📋 Inspector Note:</strong> When approved, these actions will appear in your \r\n                                        Action Plan and link to your SEF narrative, showing a clear journey of improvement.\r\n                                    </p>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { OFSTED_FRAMEWORK, OFSTED_RATINGS, SAFEGUARDING_FRAMEWORK, calculateAIRating, calculateCategoryReadiness, calculateOverallReadiness, ActionItem } from '@/lib/ofsted-framework';\r\nimport { ChevronDown, ChevronRight, AlertTriangle, CheckCircle, FileText, RefreshCw, Plus, Edit2, Calendar, User, AlertCircle, TrendingUp, Brain, Info, ExternalLink, X, GraduationCap, Sparkles } from 'lucide-react';\r\nimport ActionModal from './ActionModal';\r\nimport EvidenceModal from './EvidenceModal';\r\nimport EdAnalysisPanel from './EdAnalysisPanel';\r\n\r\ninterface LocalEvidenceMatch {\r\n    fileId: string;\r\n    fileName: string;\r\n    filePath: string;\r\n    frameworkArea: string;\r\n    frameworkAreaLabel: string;\r\n    confidence: number;\r\n    matchedKeywords: string[];\r\n    relevantExcerpt: string;\r\n}\r\n\r\ninterface OfstedFrameworkViewProps {\r\n    assessments: Record<string, any>;\r\n    setAssessments: (assessments: Record<string, any>) => void;\r\n    localEvidence?: Record<string, LocalEvidenceMatch[]>;\r\n}\r\n\r\nconst HEADER_COLOR_MAP: Record<string, string> = {\r\n    'rose': 'bg-white border-l-4 border-rose-500 text-rose-900 hover:bg-rose-50',\r\n    'teal': 'bg-white border-l-4 border-teal-500 text-teal-900 hover:bg-teal-50',\r\n    'orange': 'bg-white border-l-4 border-orange-500 text-orange-900 hover:bg-orange-50',\r\n    'violet': 'bg-white border-l-4 border-violet-500 text-violet-900 hover:bg-violet-50',\r\n    'blue': 'bg-white border-l-4 border-blue-500 text-blue-900 hover:bg-blue-50',\r\n    'gray': 'bg-white border-l-4 border-gray-500 text-gray-900 hover:bg-gray-50',\r\n};\r\n\r\nexport default function OfstedFrameworkView({ assessments, setAssessments, localEvidence = {} }: OfstedFrameworkViewProps) {\r\n    const { user, accessToken, providerId, signInWithGoogle, signInWithMicrosoft } = useAuth();\r\n    const [scanProgress, setScanProgress] = useState<{\r\n        status: 'idle' | 'scanning' | 'complete' | 'error';\r\n        message?: string;\r\n        stats?: {\r\n            processedFiles: number;\r\n            evidenceMatches: number;\r\n            skippedFiles: number;\r\n            failedFiles: number;\r\n        };\r\n    }>({ status: 'idle' });\r\n\r\n    // Evidence Modal State\r\n    const [evidenceModalData, setEvidenceModalData] = useState<{\r\n        isOpen: boolean;\r\n        categoryName: string;\r\n        subcategoryName: string;\r\n        evidenceItem: string;\r\n        matches: any[];\r\n    }>({\r\n        isOpen: false,\r\n        categoryName: '',\r\n        subcategoryName: '',\r\n        evidenceItem: '',\r\n        matches: []\r\n    });\r\n\r\n    // Scan Configuration\r\n    const [selectedFolderId, setSelectedFolderId] = useState<string>('root'); // Default to root\r\n    const [showScanConfig, setShowScanConfig] = useState(false);\r\n\r\n    const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set());\r\n    const [activeInfo, setActiveInfo] = useState<string | null>(null);\r\n    const [showBanner, setShowBanner] = useState(true);\r\n    const [isScanning, setIsScanning] = useState(false);\r\n\r\n    // Action Modal State\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [currentActionSubId, setCurrentActionSubId] = useState<string | null>(null);\r\n    const [currentActionEvidence, setCurrentActionEvidence] = useState<string | null>(null);\r\n    const [currentCategoryName, setCurrentCategoryName] = useState<string | undefined>(undefined);\r\n    const [editingAction, setEditingAction] = useState<ActionItem | undefined>(undefined);\r\n\r\n    // Ed Analysis Panel State\r\n    const [showEdPanel, setShowEdPanel] = useState(false);\r\n    const [edSelectedCategory, setEdSelectedCategory] = useState<string>('');\r\n    const [edSelectedRating, setEdSelectedRating] = useState<string>('');\r\n    const [edEvidenceCount, setEdEvidenceCount] = useState<number>(0);\r\n\r\n    // Open Ed Panel for analysis\r\n    const openEdAnalysis = (categoryName: string, rating?: string, evidenceCount?: number) => {\r\n        setEdSelectedCategory(categoryName);\r\n        setEdSelectedRating(rating || 'Not Assessed');\r\n        setEdEvidenceCount(evidenceCount || 0);\r\n        setShowEdPanel(true);\r\n    };\r\n\r\n    // Handle action creation from Ed\r\n    const handleEdAction = (action: any) => {\r\n        console.log('Ed created action:', action);\r\n        // TODO: Add to assessments/actions\r\n    };\r\n\r\n    // Calculate Overall Scores\r\n    const { userScore: overallUserScore, aiScore: overallAIScore } = calculateOverallReadiness(assessments);\r\n\r\n    // Map framework areas to category names for evidence matching\r\n    const AREA_TO_CATEGORY: Record<string, string[]> = {\r\n        'quality-of-education': ['quality-intent', 'quality-implementation', 'quality-impact'],\r\n        'behaviour-attitudes': ['behaviour'],\r\n        'personal-development': ['personal-development'],\r\n        'leadership-management': ['leadership', 'safeguarding'],\r\n        'early-years': ['early-years'],\r\n    };\r\n\r\n    // Get evidence count for a category\r\n    const getEvidenceCountForCategory = (categoryId: string): number => {\r\n        const areas = AREA_TO_CATEGORY[categoryId] || [categoryId];\r\n        let count = 0;\r\n        for (const area of areas) {\r\n            if (localEvidence[area]) {\r\n                count += localEvidence[area].length;\r\n            }\r\n        }\r\n        return count;\r\n    };\r\n\r\n    // Get evidence items for a category\r\n    const getEvidenceForCategory = (categoryId: string): LocalEvidenceMatch[] => {\r\n        const areas = AREA_TO_CATEGORY[categoryId] || [categoryId];\r\n        let evidence: LocalEvidenceMatch[] = [];\r\n        for (const area of areas) {\r\n            if (localEvidence[area]) {\r\n                evidence = [...evidence, ...localEvidence[area]];\r\n            }\r\n        }\r\n        return evidence;\r\n    };\r\n\r\n    const toggleCategory = (categoryId: string) => {\r\n        const newExpanded = new Set(expandedCategories);\r\n        if (newExpanded.has(categoryId)) {\r\n            newExpanded.delete(categoryId);\r\n        } else {\r\n            newExpanded.add(categoryId);\r\n        }\r\n        setExpandedCategories(newExpanded);\r\n    };\r\n\r\n    const toggleInfo = (e: React.MouseEvent, id: string) => {\r\n        e.stopPropagation();\r\n        setActiveInfo(activeInfo === id ? null : id);\r\n    };\r\n\r\n    const handleRatingChange = (subId: string, rating: string) => {\r\n        setAssessments({\r\n            ...assessments,\r\n            [subId]: { ...assessments[subId], schoolRating: rating }\r\n        });\r\n    };\r\n\r\n    const handleRationaleChange = (subId: string, rationale: string) => {\r\n        setAssessments({\r\n            ...assessments,\r\n            [subId]: { ...assessments[subId], schoolRationale: rationale }\r\n        });\r\n    };\r\n\r\n    const handleActionCreate = (subId: string, evidenceItem: string, categoryName: string) => {\r\n        setCurrentActionSubId(subId);\r\n        setCurrentActionEvidence(evidenceItem);\r\n        setCurrentCategoryName(categoryName);\r\n        setEditingAction(undefined);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleActionEdit = (subId: string, action: ActionItem) => {\r\n        setCurrentActionSubId(subId);\r\n        setCurrentActionEvidence(null);\r\n        setEditingAction(action);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleSaveAction = (action: ActionItem) => {\r\n        if (!currentActionSubId) return;\r\n\r\n        const subAssessment = assessments[currentActionSubId] || {};\r\n        const currentActions = subAssessment.actions || [];\r\n\r\n        let newActions;\r\n        if (editingAction) {\r\n            newActions = currentActions.map((a: ActionItem) => a.id === action.id ? action : a);\r\n        } else {\r\n            newActions = [...currentActions, action];\r\n        }\r\n\r\n        setAssessments({\r\n            ...assessments,\r\n            [currentActionSubId]: { ...subAssessment, actions: newActions }\r\n        });\r\n        setIsModalOpen(false);\r\n    };\r\n\r\n    const handleScanEvidence = async () => {\r\n        if (!accessToken || !providerId) {\r\n            setScanProgress({ status: 'error', message: 'Please reconnect your account to enable scanning.' });\r\n            return;\r\n        }\r\n\r\n        setIsScanning(true);\r\n        setScanProgress({ status: 'scanning', message: 'Initializing scan...' });\r\n        setShowScanConfig(false);\r\n\r\n        try {\r\n            const response = await fetch('/api/scan', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    provider: providerId,\r\n                    accessToken: accessToken,\r\n                    folderId: selectedFolderId,\r\n                    userId: user?.uid,\r\n                    recursive: true,\r\n                    useAI: true\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Scan failed');\r\n            }\r\n\r\n            // Update assessments with new data\r\n            if (data.assessmentUpdates) {\r\n                const newAssessments = { ...assessments };\r\n\r\n                Object.entries(data.assessmentUpdates).forEach(([subId, update]: [string, any]) => {\r\n                    newAssessments[subId] = {\r\n                        ...newAssessments[subId],\r\n                        ...update,\r\n                        // Merge actions if needed, or keep existing\r\n                    };\r\n                });\r\n\r\n                setAssessments(newAssessments);\r\n            }\r\n\r\n            setScanProgress({\r\n                status: 'complete',\r\n                message: 'Scan complete!',\r\n                stats: data.stats\r\n            });\r\n\r\n            // Auto-expand categories with updates\r\n            if (data.assessmentUpdates) {\r\n                const updatedSubIds = Object.keys(data.assessmentUpdates);\r\n                const categoriesToExpand = new Set(expandedCategories);\r\n\r\n                OFSTED_FRAMEWORK.forEach(cat => {\r\n                    if (cat.subcategories.some(sub => updatedSubIds.includes(sub.id))) {\r\n                        categoriesToExpand.add(cat.id);\r\n                    }\r\n                });\r\n\r\n                setExpandedCategories(categoriesToExpand);\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error('Scan error:', error);\r\n            setScanProgress({ status: 'error', message: error.message });\r\n        } finally {\r\n            setIsScanning(false);\r\n        }\r\n    };\r\n\r\n    const handleViewEvidence = (subId: string, evidenceItem: string, categoryName: string, subName: string) => {\r\n        // Fetch evidence matches from API or local state\r\n        // For now, we'll assume we need to fetch them or they are stored in the assessment\r\n        // Since we don't store individual matches in the assessment object in this view (only counts),\r\n        // we might need to fetch them.\r\n        // However, for this implementation, let's assume we can fetch them or we stored them in a separate state.\r\n\r\n        // Actually, let's fetch them from the database via a new API endpoint or just show a placeholder if not implemented.\r\n        // But wait, I added `get_evidence_summary` to Supabase. I can call that.\r\n\r\n        // For now, let's fetch from a new helper function or just show the modal with a loading state.\r\n        fetchEvidenceMatches(subId, evidenceItem).then(matches => {\r\n            setEvidenceModalData({\r\n                isOpen: true,\r\n                categoryName,\r\n                subcategoryName: subName,\r\n                evidenceItem,\r\n                matches\r\n            });\r\n        });\r\n    };\r\n\r\n    const fetchEvidenceMatches = async (subId: string, evidenceItem: string) => {\r\n        if (!user?.uid) return [];\r\n\r\n        try {\r\n            // We need to call Supabase to get the matches\r\n            // Since we can't use Supabase client directly here easily without setup, \r\n            // let's create a small API route for fetching evidence or use the existing one if modified.\r\n            // For now, I'll create a simple POST to /api/evidence\r\n\r\n            const response = await fetch('/api/evidence', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    userId: user.uid,\r\n                    subcategoryId: subId,\r\n                    evidenceItem\r\n                })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                return data.matches || [];\r\n            }\r\n            return [];\r\n        } catch (error) {\r\n            console.error('Error fetching evidence:', error);\r\n            return [];\r\n        }\r\n    };\r\n\r\n    const getGradeColor = (grade: string) => {\r\n        switch (grade) {\r\n            case 'outstanding': return 'bg-green-100 text-green-800 border-green-300';\r\n            case 'good': return 'bg-blue-100 text-blue-800 border-blue-300';\r\n            case 'requires_improvement': return 'bg-yellow-100 text-yellow-800 border-yellow-300';\r\n            case 'inadequate': return 'bg-red-100 text-red-800 border-red-300';\r\n            default: return 'bg-gray-100 text-gray-600 border-gray-300';\r\n        }\r\n    };\r\n\r\n    const getGradeLabel = (grade: string) => {\r\n        switch (grade) {\r\n            case 'outstanding': return 'Outstanding';\r\n            case 'good': return 'Good';\r\n            case 'requires_improvement': return 'Requires Improvement';\r\n            case 'inadequate': return 'Inadequate';\r\n            default: return 'Not Assessed';\r\n        }\r\n    };\r\n\r\n    const getPriorityColor = (priority: string) => {\r\n        switch (priority) {\r\n            case 'high': return 'bg-red-100 text-red-700 border-red-200';\r\n            case 'medium': return 'bg-amber-100 text-amber-700 border-amber-200';\r\n            case 'low': return 'bg-green-100 text-green-700 border-green-200';\r\n            default: return 'bg-gray-100 text-gray-600';\r\n        }\r\n    };\r\n\r\n    const getScoreColor = (score: number) => {\r\n        if (score >= 90) return 'text-green-600';\r\n        if (score >= 70) return 'text-blue-600';\r\n        if (score >= 40) return 'text-amber-600';\r\n        return 'text-red-600';\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Top-Level Guidance Banner */}\r\n            {showBanner && (\r\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6 relative\">\r\n                    {/* ... banner content ... */}\r\n                    <button\r\n                        onClick={() => setShowBanner(false)}\r\n                        className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors\"\r\n                    >\r\n                        <X size={20} />\r\n                    </button>\r\n                    <div className=\"flex items-start gap-4 pr-8\">\r\n                        <div className=\"flex-shrink-0 mt-0.5\">\r\n                            <Info className=\"w-6 h-6 text-blue-600\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <h3 className=\"font-semibold text-blue-900 text-lg mb-2\">About the Education Inspection Framework (EIF)</h3>\r\n                            <p className=\"text-blue-800 text-sm leading-relaxed mb-3\">\r\n                                The EIF is the framework used by Ofsted to inspect schools in England. This tool helps you track your school's readiness against the key categories of Quality of Education, Behaviour & Attitudes, Personal Development, and Leadership & Management. For each area, you can self-assess, add evidence, create action plans, and see how AI analysis compares to your judgements.\r\n                            </p>\r\n                            <a\r\n                                href=\"https://www.gov.uk/government/publications/education-inspection-framework\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 font-medium text-sm transition-colors\"\r\n                            >\r\n                                <ExternalLink size={16} />\r\n                                View official EIF documentation\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Ofsted Inspection Framework</h2>\r\n                        <p className=\"text-gray-600\">\r\n                            Track evidence and readiness against the Education Inspection Framework (EIF)\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-6\">\r\n                        {/* Scan Controls */}\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {!accessToken ? (\r\n                                <button\r\n                                    onClick={() => providerId === 'microsoft.com' ? signInWithMicrosoft() : signInWithGoogle()}\r\n                                    className=\"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white bg-amber-600 hover:bg-amber-700 transition-colors\"\r\n                                >\r\n                                    <RefreshCw size={18} />\r\n                                    Reconnect to Scan\r\n                                </button>\r\n                            ) : (\r\n                                <div className=\"relative\">\r\n                                    <button\r\n                                        onClick={() => setShowScanConfig(!showScanConfig)}\r\n                                        disabled={isScanning}\r\n                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white transition-colors ${isScanning ? 'bg-blue-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'}`}\r\n                                    >\r\n                                        <RefreshCw size={18} className={isScanning ? 'animate-spin' : ''} />\r\n                                        {isScanning ? 'Scanning...' : 'Scan Evidence'}\r\n                                        <ChevronDown size={16} className=\"ml-1\" />\r\n                                    </button>\r\n\r\n                                    {/* Scan Config Dropdown */}\r\n                                    {showScanConfig && (\r\n                                        <div className=\"absolute right-0 mt-2 w-72 bg-white rounded-xl shadow-xl border border-gray-200 z-20 p-4 animate-in fade-in slide-in-from-top-2\">\r\n                                            <h3 className=\"font-semibold text-gray-900 mb-3\">Scan Settings</h3>\r\n\r\n                                            <div className=\"mb-4\">\r\n                                                <label className=\"block text-xs font-medium text-gray-500 mb-1\">Source</label>\r\n                                                <div className=\"flex items-center gap-2 text-sm text-gray-700 bg-gray-50 p-2 rounded border border-gray-200\">\r\n                                                    {providerId === 'microsoft.com' ? (\r\n                                                        <><span className=\"text-blue-600\">OneDrive</span> Connected</>\r\n                                                    ) : (\r\n                                                        <><span className=\"text-green-600\">Google Drive</span> Connected</>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div className=\"mb-4\">\r\n                                                <label className=\"block text-xs font-medium text-gray-500 mb-1\">Folder ID (Optional)</label>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={selectedFolderId}\r\n                                                    onChange={(e) => setSelectedFolderId(e.target.value)}\r\n                                                    placeholder=\"root\"\r\n                                                    className=\"w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none\"\r\n                                                />\r\n                                                <p className=\"text-[10px] text-gray-400 mt-1\">Leave as \"root\" to scan everything</p>\r\n                                            </div>\r\n\r\n                                            <button\r\n                                                onClick={handleScanEvidence}\r\n                                                className=\"w-full py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2\"\r\n                                            >\r\n                                                <Brain size={16} />\r\n                                                Start AI Scan\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Overall Scores */}\r\n                        <div className=\"flex gap-6 border-l border-gray-200 pl-6\">\r\n                            <div className=\"text-right\">\r\n                                <div className=\"text-xs text-gray-500 flex items-center justify-end gap-1\">\r\n                                    <TrendingUp size={14} /> School Readiness\r\n                                </div>\r\n                                <div className={`text-3xl font-bold ${getScoreColor(overallUserScore)}`}>\r\n                                    {overallUserScore}%\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                                <div className=\"text-xs text-gray-500 flex items-center justify-end gap-1\">\r\n                                    <Brain size={14} /> AI Evidence Score\r\n                                </div>\r\n                                <div className={`text-3xl font-bold ${getScoreColor(overallAIScore)}`}>\r\n                                    {overallAIScore}%\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Scan Progress Alert */}\r\n                {scanProgress.status !== 'idle' && (\r\n                    <div className={`mb-6 p-4 rounded-lg border flex items-start gap-3 ${scanProgress.status === 'error' ? 'bg-red-50 border-red-200 text-red-700' :\r\n                        scanProgress.status === 'complete' ? 'bg-green-50 border-green-200 text-green-700' :\r\n                            'bg-blue-50 border-blue-200 text-blue-700'\r\n                        }`}>\r\n                        {scanProgress.status === 'scanning' && <RefreshCw className=\"animate-spin mt-0.5\" size={18} />}\r\n                        {scanProgress.status === 'complete' && <CheckCircle className=\"mt-0.5\" size={18} />}\r\n                        {scanProgress.status === 'error' && <AlertTriangle className=\"mt-0.5\" size={18} />}\r\n\r\n                        <div className=\"flex-1\">\r\n                            <p className=\"font-medium\">{scanProgress.message}</p>\r\n                            {scanProgress.stats && (\r\n                                <div className=\"mt-2 text-sm grid grid-cols-2 gap-x-8 gap-y-1\">\r\n                                    <span>Files Processed: <b>{scanProgress.stats.processedFiles}</b></span>\r\n                                    <span>Evidence Matches: <b>{scanProgress.stats.evidenceMatches}</b></span>\r\n                                    <span>Skipped (Unchanged): <b>{scanProgress.stats.skippedFiles}</b></span>\r\n                                    <span>Failed: <b>{scanProgress.stats.failedFiles}</b></span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {scanProgress.status !== 'scanning' && (\r\n                            <button\r\n                                onClick={() => setScanProgress({ status: 'idle' })}\r\n                                className=\"text-gray-400 hover:text-gray-600\"\r\n                            >\r\n                                <X size={16} />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"space-y-3\">\r\n                    {OFSTED_FRAMEWORK.map((category) => {\r\n                        const { userScore, aiScore } = calculateCategoryReadiness(category.id, assessments);\r\n\r\n                        return (\r\n                            <div key={category.id} className={`mb-4 border rounded-lg overflow-hidden transition-all duration-200 ${expandedCategories.has(category.id) ? 'shadow-md' : 'shadow-sm'} ${HEADER_COLOR_MAP[category.color || 'gray'].replace('hover:', '')}`}>\r\n                                {/* Category Header */}\r\n                                <div className={`transition-colors ${HEADER_COLOR_MAP[category.color || 'gray']}`}>\r\n                                    <div className=\"flex items-center justify-between w-full p-4\">\r\n                                        <button\r\n                                            onClick={() => toggleCategory(category.id)}\r\n                                            className=\"flex items-center gap-3 flex-1 text-left\"\r\n                                        >\r\n                                            <span className=\"text-lg text-gray-400\">\r\n                                                {expandedCategories.has(category.id) ? '▼' : '▶'}\r\n                                            </span>\r\n                                            <div>\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <h3 className=\"font-semibold text-gray-900\">{category.name}</h3>\r\n                                                    <div\r\n                                                        onClick={(e) => toggleInfo(e, category.id)}\r\n                                                        className=\"text-gray-400 hover:text-blue-600 cursor-pointer p-1 rounded-full hover:bg-white/50 transition-colors\"\r\n                                                        title=\"Click for guidance\"\r\n                                                    >\r\n                                                        <Info size={16} />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <p className=\"text-sm text-gray-600\">{category.description}</p>\r\n                                            </div>\r\n                                        </button>\r\n\r\n                                        {/* Category Scores */}\r\n                                        <div className=\"flex items-center gap-4 mr-4\">\r\n                                            {/* Local Evidence Count */}\r\n                                            {getEvidenceCountForCategory(category.id) > 0 && (\r\n                                                <div className=\"text-right border-r border-gray-200 pr-4\">\r\n                                                    <div className=\"text-[10px] uppercase font-bold text-gray-400\">Evidence</div>\r\n                                                    <div className=\"text-lg font-bold text-purple-600 flex items-center gap-1\">\r\n                                                        <FileText size={14} />\r\n                                                        {getEvidenceCountForCategory(category.id)}\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                            <div className=\"text-right\">\r\n                                                <div className=\"text-[10px] uppercase font-bold text-gray-400\">Readiness</div>\r\n                                                <div className={`text-lg font-bold ${getScoreColor(userScore)}`}>{userScore}%</div>\r\n                                            </div>\r\n                                            <div className=\"text-right border-l border-gray-200 pl-4\">\r\n                                                <div className=\"text-[10px] uppercase font-bold text-gray-400\">AI Score</div>\r\n                                                <div className={`text-lg font-bold ${getScoreColor(aiScore)}`}>{aiScore}%</div>\r\n                                            </div>\r\n                                        </div>\r\n                                        \r\n                                        {/* Analyze with Ed Button */}\r\n                                        <button\r\n                                            onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                openEdAnalysis(\r\n                                                    category.name,\r\n                                                    userScore >= 90 ? 'Outstanding' : userScore >= 70 ? 'Good' : userScore >= 40 ? 'Requires Improvement' : 'Inadequate',\r\n                                                    category.subcategories.reduce((acc, sub) => \r\n                                                        acc + (assessments[sub.id]?.evidenceCount || 0), 0\r\n                                                    )\r\n                                                );\r\n                                            }}\r\n                                            className=\"flex items-center gap-2 px-3 py-2 bg-emerald-500 text-white text-sm font-medium rounded-lg hover:bg-emerald-600 transition-colors shadow-sm\"\r\n                                            title=\"Get Ed's analysis and recommendations\"\r\n                                        >\r\n                                            <GraduationCap size={16} />\r\n                                            <span className=\"hidden lg:inline\">Ask Ed</span>\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Category Guidance Info Box */}\r\n                                    {activeInfo === category.id && category.guidanceSummary && (\r\n                                        <div className=\"px-4 pb-4 animate-in fade-in slide-in-from-top-2\">\r\n                                            <div className=\"bg-white/80 p-3 rounded-md border border-gray-200 text-sm shadow-inner\">\r\n                                                <div className=\"flex gap-2\">\r\n                                                    <Info className=\"text-blue-500 flex-shrink-0 mt-0.5\" size={16} />\r\n                                                    <div>\r\n                                                        <p className=\"text-gray-800 font-medium mb-1\">Ofsted Expectation:</p>\r\n                                                        <p className=\"text-gray-600 leading-relaxed\">{category.guidanceSummary}</p>\r\n                                                        {category.guidanceLink && (\r\n                                                            <a\r\n                                                                href={category.guidanceLink}\r\n                                                                target=\"_blank\"\r\n                                                                rel=\"noopener noreferrer\"\r\n                                                                className=\"inline-flex items-center gap-1 text-xs text-blue-600 mt-2 hover:underline font-medium\"\r\n                                                            >\r\n                                                                Read Official Documentation <ExternalLink size={10} />\r\n                                                            </a>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Subcategories */}\r\n                                {expandedCategories.has(category.id) && (\r\n                                    <div className=\"p-4 bg-white space-y-6 border-t border-gray-100\">\r\n                                        {/* Local Evidence Section */}\r\n                                        {getEvidenceCountForCategory(category.id) > 0 && (\r\n                                            <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4\">\r\n                                                <h4 className=\"font-semibold text-purple-900 mb-3 flex items-center gap-2\">\r\n                                                    <FileText size={18} className=\"text-purple-600\" />\r\n                                                    Local Evidence Files ({getEvidenceCountForCategory(category.id)})\r\n                                                </h4>\r\n                                                <div className=\"space-y-2\">\r\n                                                    {getEvidenceForCategory(category.id).map((evidence, idx) => (\r\n                                                        <div key={idx} className=\"flex items-center justify-between p-2 bg-white rounded border border-purple-100\">\r\n                                                            <div className=\"flex-1 min-w-0\">\r\n                                                                <p className=\"text-sm font-medium text-gray-900 truncate\">{evidence.fileName}</p>\r\n                                                                <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                                                                    {evidence.matchedKeywords.slice(0, 3).map((kw, i) => (\r\n                                                                        <span key={i} className=\"text-xs bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded\">\r\n                                                                            {kw}\r\n                                                                        </span>\r\n                                                                    ))}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <span className={`text-xs px-2 py-1 rounded-full ml-2 ${\r\n                                                                evidence.confidence >= 0.7 ? 'bg-green-100 text-green-700' :\r\n                                                                evidence.confidence >= 0.5 ? 'bg-yellow-100 text-yellow-700' :\r\n                                                                'bg-gray-100 text-gray-600'\r\n                                                            }`}>\r\n                                                                {Math.round(evidence.confidence * 100)}%\r\n                                                            </span>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                                <p className=\"text-xs text-purple-600 mt-2\">\r\n                                                    📁 Scanned from local folder\r\n                                                </p>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {category.subcategories.map((sub) => {\r\n                                            const assessment = assessments[sub.id] || {};\r\n                                            const schoolRating = assessment.schoolRating || 'not_assessed';\r\n                                            const schoolRationale = assessment.schoolRationale || '';\r\n                                            const aiRating = assessment.aiRating || 'not_assessed';\r\n                                            const aiRationale = assessment.aiRationale || 'AI analysis pending evidence scan.';\r\n                                            const actions: ActionItem[] = assessment.actions || [];\r\n\r\n                                            const evidenceCount = assessment.evidenceCount || 0;\r\n                                            const requiredCount = sub.evidenceRequired.length;\r\n                                            const hasGaps = evidenceCount < requiredCount;\r\n\r\n                                            return (\r\n                                                <div key={sub.id} className=\"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors\">\r\n                                                    <div className=\"flex justify-between items-start mb-4\">\r\n                                                        <div className=\"flex-1\">\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <h4 className=\"font-bold text-gray-900 text-lg\">{sub.name}</h4>\r\n                                                                <div\r\n                                                                    onClick={(e) => toggleInfo(e, sub.id)}\r\n                                                                    className=\"text-gray-400 hover:text-blue-600 cursor-pointer p-1\"\r\n                                                                    title=\"Click for guidance\"\r\n                                                                >\r\n                                                                    <Info size={16} />\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <p className=\"text-gray-600 text-sm mt-1\">{sub.description}</p>\r\n\r\n                                                            {/* Subcategory Guidance Info Box */}\r\n                                                            {activeInfo === sub.id && sub.guidanceSummary && (\r\n                                                                <div className=\"mt-3 bg-blue-50 p-3 rounded-md border border-blue-100 text-sm animate-in fade-in slide-in-from-top-1\">\r\n                                                                    <p className=\"text-blue-900 font-medium mb-1\">What Good Looks Like:</p>\r\n                                                                    <p className=\"text-blue-800\">{sub.guidanceSummary}</p>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n\r\n                                                        {/* Dual Ratings */}\r\n                                                        <div className=\"flex gap-4 ml-4\">\r\n                                                            <div className=\"text-right\">\r\n                                                                <div className=\"text-xs font-semibold text-gray-500 mb-1\">AI Assessment</div>\r\n                                                                <div className={`px-3 py-1.5 rounded-md text-sm font-medium border ${getGradeColor(aiRating)}`}>\r\n                                                                    {getGradeLabel(aiRating)}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div className=\"text-right\">\r\n                                                                <div className=\"text-xs font-semibold text-gray-500 mb-1\">School Self-Assessment</div>\r\n                                                                <select\r\n                                                                    value={schoolRating}\r\n                                                                    onChange={(e) => handleRatingChange(sub.id, e.target.value)}\r\n                                                                    className={`px-3 py-1.5 rounded-md text-sm font-medium border focus:ring-2 focus:ring-blue-500 outline-none ${getGradeColor(schoolRating)}`}\r\n                                                                >\r\n                                                                    <option value=\"not_assessed\">Not Assessed</option>\r\n                                                                    <option value=\"outstanding\">Outstanding</option>\r\n                                                                    <option value=\"good\">Good</option>\r\n                                                                    <option value=\"requires_improvement\">Requires Improvement</option>\r\n                                                                    <option value=\"inadequate\">Inadequate</option>\r\n                                                                </select>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    {/* Evidence Section */}\r\n                                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                                        <div>\r\n                                                            <div className=\"flex items-center justify-between mb-2\">\r\n                                                                <h5 className=\"font-semibold text-gray-700 text-sm flex items-center gap-2\">\r\n                                                                    <FileText size={16} />\r\n                                                                    Evidence Required\r\n                                                                </h5>\r\n                                                                <span className={`text-xs font-bold px-2 py-0.5 rounded ${hasGaps ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`}>\r\n                                                                    {evidenceCount}/{requiredCount} Items\r\n                                                                </span>\r\n                                                            </div>\r\n                                                            <ul className=\"space-y-2\">\r\n                                                                {sub.evidenceRequired.map((evidence, idx) => (\r\n                                                                    <li key={evidence.id || idx} className=\"flex items-start justify-between group text-sm p-2 rounded hover:bg-gray-50\">\r\n                                                                        <span className=\"text-gray-600 flex-1 mr-2\">• {evidence.name}</span>\r\n                                                                        <div className=\"flex items-center gap-1\">\r\n                                                                            <button\r\n                                                                                onClick={() => handleViewEvidence(sub.id, evidence.name, category.name, sub.name)}\r\n                                                                                className=\"text-xs bg-white text-gray-600 px-2 py-1 rounded border border-gray-200 hover:bg-gray-50 hover:text-blue-600 transition-all flex items-center gap-1\"\r\n                                                                                title=\"View found evidence\"\r\n                                                                            >\r\n                                                                                <FileText size={12} /> View\r\n                                                                            </button>\r\n                                                                            <button\r\n                                                                                onClick={() => handleActionCreate(sub.id, evidence.name, category.name)}\r\n                                                                                className=\"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-200 hover:bg-blue-100 transition-all flex items-center gap-1\"\r\n                                                                                title=\"Create action\"\r\n                                                                            >\r\n                                                                                <Plus size={12} /> Action\r\n                                                                            </button>\r\n                                                                        </div>\r\n                                                                    </li>\r\n                                                                ))}\r\n                                                            </ul>\r\n\r\n                                                            {/* Actions List */}\r\n                                                            {actions.length > 0 && (\r\n                                                                <div className=\"mt-6 border-t border-gray-100 pt-4\">\r\n                                                                    <h5 className=\"font-semibold text-gray-700 text-sm mb-3 flex items-center gap-2\">\r\n                                                                        <AlertCircle size={16} />\r\n                                                                        Action Plan ({actions.length})\r\n                                                                    </h5>\r\n                                                                    <div className=\"space-y-2\">\r\n                                                                        {actions.map(action => (\r\n                                                                            <div key={action.id} className=\"bg-white border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow\">\r\n                                                                                <div className=\"flex justify-between items-start mb-1\">\r\n                                                                                    <div className=\"flex items-center gap-2\">\r\n                                                                                        <span className={`px-2 py-0.5 rounded text-[10px] font-bold uppercase border ${getPriorityColor(action.priority)}`}>\r\n                                                                                            {action.priority}\r\n                                                                                        </span>\r\n                                                                                        <span className=\"text-sm font-medium text-gray-900\">{action.description}</span>\r\n                                                                                    </div>\r\n                                                                                    <button\r\n                                                                                        onClick={() => handleActionEdit(sub.id, action)}\r\n                                                                                        className=\"text-gray-400 hover:text-blue-600\"\r\n                                                                                    >\r\n                                                                                        <Edit2 size={14} />\r\n                                                                                    </button>\r\n                                                                                </div>\r\n                                                                                {action.rationale && (\r\n                                                                                    <p className=\"text-xs text-gray-500 mb-2 italic\">\"{action.rationale}\"</p>\r\n                                                                                )}\r\n                                                                                <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n                                                                                    {action.assignee && (\r\n                                                                                        <span className=\"flex items-center gap-1\">\r\n                                                                                            <User size={12} /> {action.assignee}\r\n                                                                                        </span>\r\n                                                                                    )}\r\n                                                                                    {action.dueDate && (\r\n                                                                                        <span className=\"flex items-center gap-1\">\r\n                                                                                            <Calendar size={12} /> {new Date(action.dueDate).toLocaleDateString()}\r\n                                                                                        </span>\r\n                                                                                    )}\r\n                                                                                    <span className={`px-2 py-0.5 rounded text-[10px] font-medium ${action.status === 'completed' ? 'bg-green-100 text-green-700' : action.status === 'in_progress' ? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-700'}`}>\r\n                                                                                        {action.status.replace('_', ' ')}\r\n                                                                                    </span>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        ))}\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n\r\n                                                        {/* Rationale Section */}\r\n                                                        <div className=\"space-y-4\">\r\n                                                            <div>\r\n                                                                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                                                                    AI Rationale\r\n                                                                </label>\r\n                                                                <div className=\"p-3 bg-gray-50 rounded-md border border-gray-200 text-sm text-gray-700 whitespace-pre-wrap\">\r\n                                                                    {aiRationale}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <label htmlFor={`rationale-${sub.id}`} className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                                                                    School Rationale & Evidence Notes\r\n                                                                </label>\r\n                                                                <textarea\r\n                                                                    id={`rationale-${sub.id}`}\r\n                                                                    value={schoolRationale}\r\n                                                                    onChange={(e) => handleRationaleChange(sub.id, e.target.value)}\r\n                                                                    placeholder=\"Explain your self-assessment rating and list key evidence...\"\r\n                                                                    className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm\"\r\n                                                                    rows={6}\r\n                                                                />\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Action Modal */}\r\n            {isModalOpen && (\r\n                <ActionModal\r\n                    isOpen={isModalOpen}\r\n                    onClose={() => setIsModalOpen(false)}\r\n                    onSave={handleSaveAction}\r\n                    categoryName={currentCategoryName || ''}\r\n                    subCategoryName={OFSTED_FRAMEWORK.flatMap(c => c.subcategories).find(s => s.id === currentActionSubId)?.name}\r\n                    evidenceItem={currentActionEvidence || undefined}\r\n                    initialData={editingAction}\r\n                />\r\n            )}\r\n\r\n            {/* Evidence Modal */}\r\n            <EvidenceModal\r\n                isOpen={evidenceModalData.isOpen}\r\n                onClose={() => setEvidenceModalData({ ...evidenceModalData, isOpen: false })}\r\n                categoryName={evidenceModalData.categoryName}\r\n                subcategoryName={evidenceModalData.subcategoryName}\r\n                evidenceItem={evidenceModalData.evidenceItem}\r\n                matches={evidenceModalData.matches}\r\n            />\r\n\r\n            {/* Ed Analysis Panel - Fixed Right Sidebar */}\r\n            {showEdPanel && (\r\n                <div className=\"fixed right-6 top-32 w-96 z-40 animate-in slide-in-from-right\">\r\n                    <EdAnalysisPanel\r\n                        selectedCategory={edSelectedCategory}\r\n                        currentRating={edSelectedRating}\r\n                        evidenceCount={edEvidenceCount}\r\n                        onCreateAction={handleEdAction}\r\n                        onClose={() => setShowEdPanel(false)}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            {/* Ed Quick Access Button */}\r\n            {!showEdPanel && (\r\n                <button\r\n                    onClick={() => setShowEdPanel(true)}\r\n                    className=\"fixed right-6 top-32 bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-4 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2 z-40\"\r\n                >\r\n                    <GraduationCap size={20} />\r\n                    <span className=\"font-medium\">Analyze with Ed</span>\r\n                    <Sparkles size={16} className=\"text-yellow-300\" />\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { \r\n    SIAMS_FRAMEWORK, SIAMS_RATINGS, SIAMS_EVIDENCE_KEYWORDS,\r\n    calculateStrandReadiness, calculateOverallSiamsReadiness,\r\n    SiamsStrand, SiamsActionItem\r\n} from '@/lib/siams-framework';\r\nimport { \r\n    ChevronDown, ChevronRight, AlertTriangle, CheckCircle, FileText, \r\n    Plus, Edit2, Calendar, User, Info, ExternalLink, X, \r\n    GraduationCap, Sparkles, Church, BookOpen, Heart, Users,\r\n    Star, Cross, AlertCircle\r\n} from 'lucide-react';\r\nimport EdAnalysisPanel from './EdAnalysisPanel';\r\nimport ActionModal from './ActionModal';\r\n\r\ninterface LocalEvidenceMatch {\r\n    fileId: string;\r\n    fileName: string;\r\n    filePath: string;\r\n    frameworkArea: string;\r\n    frameworkAreaLabel: string;\r\n    confidence: number;\r\n    matchedKeywords: string[];\r\n    relevantExcerpt: string;\r\n}\r\n\r\ninterface SiamsFrameworkViewProps {\r\n    assessments?: Record<string, any>;\r\n    setAssessments?: (assessments: Record<string, any>) => void;\r\n    localEvidence?: Record<string, LocalEvidenceMatch[]>;\r\n}\r\n\r\nconst STRAND_COLOR_MAP: Record<string, string> = {\r\n    'purple': 'bg-white border-l-4 border-purple-500 text-purple-900 hover:bg-purple-50',\r\n    'blue': 'bg-white border-l-4 border-blue-500 text-blue-900 hover:bg-blue-50',\r\n    'orange': 'bg-white border-l-4 border-orange-500 text-orange-900 hover:bg-orange-50',\r\n    'teal': 'bg-white border-l-4 border-teal-500 text-teal-900 hover:bg-teal-50',\r\n    'rose': 'bg-white border-l-4 border-rose-500 text-rose-900 hover:bg-rose-50',\r\n    'violet': 'bg-white border-l-4 border-violet-500 text-violet-900 hover:bg-violet-50',\r\n    'emerald': 'bg-white border-l-4 border-emerald-500 text-emerald-900 hover:bg-emerald-50',\r\n};\r\n\r\nconst STRAND_ICONS: Record<string, any> = {\r\n    'vision': Cross,\r\n    'wisdom': BookOpen,\r\n    'character': Star,\r\n    'community': Users,\r\n    'dignity': Heart,\r\n    'worship': Church,\r\n    're': BookOpen,\r\n};\r\n\r\nexport default function SiamsFrameworkView({ \r\n    assessments = {}, \r\n    setAssessments = () => {},\r\n    localEvidence = {}\r\n}: SiamsFrameworkViewProps) {\r\n    const { user } = useAuth();\r\n    const [expandedStrands, setExpandedStrands] = useState<Set<string>>(new Set());\r\n    const [activeInfo, setActiveInfo] = useState<string | null>(null);\r\n    const [showBanner, setShowBanner] = useState(true);\r\n\r\n    // Ed Analysis Panel State\r\n    const [showEdPanel, setShowEdPanel] = useState(false);\r\n    const [edSelectedStrand, setEdSelectedStrand] = useState<string>('');\r\n    const [edSelectedRating, setEdSelectedRating] = useState<string>('');\r\n\r\n    // Action Modal State\r\n    const [isActionModalOpen, setIsActionModalOpen] = useState(false);\r\n    const [currentActionQuestionId, setCurrentActionQuestionId] = useState<string | null>(null);\r\n    const [currentActionEvidence, setCurrentActionEvidence] = useState<string | null>(null);\r\n    const [currentStrandName, setCurrentStrandName] = useState<string | undefined>(undefined);\r\n    const [editingAction, setEditingAction] = useState<SiamsActionItem | undefined>(undefined);\r\n\r\n    // Calculate Overall Scores\r\n    const { userScore: overallUserScore, totalEvidence } = calculateOverallSiamsReadiness(assessments);\r\n\r\n    // Map SIAMS areas to evidence areas\r\n    const SIAMS_TO_EVIDENCE: Record<string, string[]> = {\r\n        'vision': ['leadership', 'vision'],\r\n        'wisdom': ['quality-intent', 'quality-implementation', 'quality-impact'],\r\n        'character': ['personal-development', 'character'],\r\n        'community': ['behaviour', 'community'],\r\n        'dignity': ['dignity', 'equality'],\r\n        'worship': ['worship', 'collective-worship'],\r\n        're': ['re', 'religious-education'],\r\n    };\r\n\r\n    const getEvidenceCountForStrand = (strandId: string): number => {\r\n        const areas = SIAMS_TO_EVIDENCE[strandId] || [strandId];\r\n        let count = 0;\r\n        for (const area of areas) {\r\n            if (localEvidence[area]) {\r\n                count += localEvidence[area].length;\r\n            }\r\n        }\r\n        return count;\r\n    };\r\n\r\n    const getEvidenceForStrand = (strandId: string): LocalEvidenceMatch[] => {\r\n        const areas = SIAMS_TO_EVIDENCE[strandId] || [strandId];\r\n        let evidence: LocalEvidenceMatch[] = [];\r\n        for (const area of areas) {\r\n            if (localEvidence[area]) {\r\n                evidence = [...evidence, ...localEvidence[area]];\r\n            }\r\n        }\r\n        return evidence;\r\n    };\r\n\r\n    const toggleStrand = (strandId: string) => {\r\n        const newExpanded = new Set(expandedStrands);\r\n        if (newExpanded.has(strandId)) {\r\n            newExpanded.delete(strandId);\r\n        } else {\r\n            newExpanded.add(strandId);\r\n        }\r\n        setExpandedStrands(newExpanded);\r\n    };\r\n\r\n    // Action Handlers\r\n    const handleActionCreate = (questionId: string, evidenceItem: string, strandName: string) => {\r\n        setCurrentActionQuestionId(questionId);\r\n        setCurrentActionEvidence(evidenceItem);\r\n        setCurrentStrandName(strandName);\r\n        setEditingAction(undefined);\r\n        setIsActionModalOpen(true);\r\n    };\r\n\r\n    const handleActionEdit = (questionId: string, action: SiamsActionItem) => {\r\n        setCurrentActionQuestionId(questionId);\r\n        setCurrentActionEvidence(null);\r\n        setEditingAction(action as any);\r\n        setIsActionModalOpen(true);\r\n    };\r\n\r\n    const handleSaveAction = (action: any) => {\r\n        if (!currentActionQuestionId) return;\r\n\r\n        const questionAssessment = assessments[currentActionQuestionId] || {};\r\n        const currentActions = questionAssessment.actions || [];\r\n\r\n        let newActions;\r\n        if (editingAction) {\r\n            newActions = currentActions.map((a: any) => a.id === action.id ? action : a);\r\n        } else {\r\n            newActions = [...currentActions, action];\r\n        }\r\n\r\n        setAssessments({\r\n            ...assessments,\r\n            [currentActionQuestionId]: { ...questionAssessment, actions: newActions }\r\n        });\r\n\r\n        setIsActionModalOpen(false);\r\n        setEditingAction(undefined);\r\n    };\r\n\r\n    const getPriorityColor = (priority: string) => {\r\n        switch (priority) {\r\n            case 'high': return 'bg-red-50 text-red-700 border-red-200';\r\n            case 'medium': return 'bg-yellow-50 text-yellow-700 border-yellow-200';\r\n            case 'low': return 'bg-green-50 text-green-700 border-green-200';\r\n            default: return 'bg-gray-50 text-gray-700 border-gray-200';\r\n        }\r\n    };\r\n\r\n    const toggleInfo = (e: React.MouseEvent, id: string) => {\r\n        e.stopPropagation();\r\n        setActiveInfo(activeInfo === id ? null : id);\r\n    };\r\n\r\n    const handleRatingChange = (questionId: string, rating: string) => {\r\n        setAssessments({\r\n            ...assessments,\r\n            [questionId]: { ...assessments[questionId], rating }\r\n        });\r\n    };\r\n\r\n    const handleRationaleChange = (questionId: string, rationale: string) => {\r\n        setAssessments({\r\n            ...assessments,\r\n            [questionId]: { ...assessments[questionId], rationale }\r\n        });\r\n    };\r\n\r\n    const openEdAnalysis = (strandName: string, rating?: string) => {\r\n        setEdSelectedStrand(strandName);\r\n        setEdSelectedRating(rating || 'Not Assessed');\r\n        setShowEdPanel(true);\r\n    };\r\n\r\n    const getScoreColor = (score: number) => {\r\n        if (score >= 90) return 'text-green-600';\r\n        if (score >= 70) return 'text-blue-600';\r\n        if (score >= 40) return 'text-amber-600';\r\n        return 'text-red-600';\r\n    };\r\n\r\n    const getRatingColor = (rating: string) => {\r\n        switch (rating) {\r\n            case 'excellent': return 'bg-green-100 text-green-700 border-green-300';\r\n            case 'good': return 'bg-blue-100 text-blue-700 border-blue-300';\r\n            case 'requires_improvement': return 'bg-yellow-100 text-yellow-700 border-yellow-300';\r\n            case 'ineffective': return 'bg-red-100 text-red-700 border-red-300';\r\n            default: return 'bg-gray-100 text-gray-600 border-gray-300';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Top-Level Guidance Banner */}\r\n            {showBanner && (\r\n                <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-6 mb-6 relative\">\r\n                    <button\r\n                        onClick={() => setShowBanner(false)}\r\n                        className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors\"\r\n                    >\r\n                        <X size={20} />\r\n                    </button>\r\n                    <div className=\"flex items-start gap-4 pr-8\">\r\n                        <div className=\"flex-shrink-0 mt-0.5\">\r\n                            <Church className=\"w-6 h-6 text-purple-600\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <h3 className=\"font-semibold text-purple-900 text-lg mb-2\">\r\n                                About SIAMS Inspection\r\n                            </h3>\r\n                            <p className=\"text-purple-800 text-sm leading-relaxed mb-3\">\r\n                                SIAMS (Statutory Inspection of Anglican and Methodist Schools) evaluates how well a church school's \r\n                                Christian vision enables pupils and adults to flourish. The framework focuses on 7 strands covering \r\n                                vision, curriculum, character, community, dignity, worship, and RE.\r\n                            </p>\r\n                            <a\r\n                                href=\"https://www.churchofengland.org/about/education-and-schools/church-schools-and-academies/siams-inspections\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"inline-flex items-center gap-1 text-purple-600 hover:text-purple-800 font-medium text-sm transition-colors\"\r\n                            >\r\n                                <ExternalLink size={16} />\r\n                                View official SIAMS guidance\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2\">\r\n                            <Church className=\"text-purple-600\" />\r\n                            SIAMS Inspection Framework\r\n                        </h2>\r\n                        <p className=\"text-gray-600\">\r\n                            Statutory Inspection of Anglican and Methodist Schools\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-6\">\r\n                        <div className=\"text-right\">\r\n                            <div className=\"text-[10px] uppercase font-bold text-gray-400\">School Readiness</div>\r\n                            <div className={`text-2xl font-bold ${getScoreColor(overallUserScore)}`}>{overallUserScore}%</div>\r\n                        </div>\r\n                        <div className=\"text-right border-l border-gray-200 pl-4\">\r\n                            <div className=\"text-[10px] uppercase font-bold text-gray-400\">Evidence Items</div>\r\n                            <div className=\"text-2xl font-bold text-purple-600\">{totalEvidence}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Strands */}\r\n                <div className=\"space-y-3\">\r\n                    {SIAMS_FRAMEWORK.map((strand) => {\r\n                        const { userScore, evidenceCount } = calculateStrandReadiness(strand.id, assessments);\r\n                        const localEvidenceCount = getEvidenceCountForStrand(strand.id);\r\n                        const StrandIcon = STRAND_ICONS[strand.id] || Church;\r\n\r\n                        return (\r\n                            <div key={strand.id} className={`mb-4 border rounded-lg overflow-hidden transition-all duration-200 ${expandedStrands.has(strand.id) ? 'shadow-md' : 'shadow-sm'}`}>\r\n                                {/* Strand Header */}\r\n                                <div className={`transition-colors ${STRAND_COLOR_MAP[strand.color] || STRAND_COLOR_MAP['purple']}`}>\r\n                                    <div className=\"flex items-center justify-between w-full p-4\">\r\n                                        <button\r\n                                            onClick={() => toggleStrand(strand.id)}\r\n                                            className=\"flex items-center gap-3 flex-1 text-left\"\r\n                                        >\r\n                                            <span className=\"text-lg text-gray-400\">\r\n                                                {expandedStrands.has(strand.id) ? '▼' : '▶'}\r\n                                            </span>\r\n                                            <StrandIcon size={24} className=\"text-purple-500\" />\r\n                                            <div>\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <h3 className=\"font-semibold text-gray-900\">{strand.name}</h3>\r\n                                                    <div\r\n                                                        onClick={(e) => toggleInfo(e, strand.id)}\r\n                                                        className=\"text-gray-400 hover:text-purple-600 cursor-pointer p-1 rounded-full hover:bg-white/50 transition-colors\"\r\n                                                        title=\"Click for guidance\"\r\n                                                    >\r\n                                                        <Info size={16} />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <p className=\"text-sm text-gray-600\">{strand.description}</p>\r\n                                            </div>\r\n                                        </button>\r\n\r\n                                        {/* Strand Scores */}\r\n                                        <div className=\"flex items-center gap-4 mr-4\">\r\n                                            {/* Evidence Count */}\r\n                                            {localEvidenceCount > 0 && (\r\n                                                <div className=\"text-right border-r border-gray-200 pr-4\">\r\n                                                    <div className=\"text-[10px] uppercase font-bold text-gray-400\">Evidence</div>\r\n                                                    <div className=\"text-lg font-bold text-purple-600 flex items-center gap-1\">\r\n                                                        <FileText size={14} />\r\n                                                        {localEvidenceCount}\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                            <div className=\"text-right\">\r\n                                                <div className=\"text-[10px] uppercase font-bold text-gray-400\">Readiness</div>\r\n                                                <div className={`text-lg font-bold ${getScoreColor(userScore)}`}>{userScore}%</div>\r\n                                            </div>\r\n                                        </div>\r\n                                        \r\n                                        {/* Ask Ed Button */}\r\n                                        <button\r\n                                            onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                openEdAnalysis(\r\n                                                    strand.name,\r\n                                                    userScore >= 90 ? 'Excellent' : userScore >= 70 ? 'Good' : userScore >= 40 ? 'Requires Improvement' : 'Ineffective'\r\n                                                );\r\n                                            }}\r\n                                            className=\"flex items-center gap-2 px-3 py-2 bg-purple-500 text-white text-sm font-medium rounded-lg hover:bg-purple-600 transition-colors shadow-sm\"\r\n                                            title=\"Get Ed's analysis and recommendations\"\r\n                                        >\r\n                                            <GraduationCap size={16} />\r\n                                            <span className=\"hidden lg:inline\">Ask Ed</span>\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Strand Guidance Info Box */}\r\n                                    {activeInfo === strand.id && (\r\n                                        <div className=\"px-4 pb-4 animate-in fade-in slide-in-from-top-2\">\r\n                                            <div className=\"bg-white/80 p-3 rounded-md border border-gray-200 text-sm shadow-inner\">\r\n                                                <div className=\"flex gap-2\">\r\n                                                    <Info className=\"text-purple-500 flex-shrink-0 mt-0.5\" size={16} />\r\n                                                    <div>\r\n                                                        <p className=\"text-gray-800 font-medium mb-2\">Key Indicators:</p>\r\n                                                        <ul className=\"text-gray-600 space-y-1\">\r\n                                                            {strand.keyIndicators.map((indicator, idx) => (\r\n                                                                <li key={idx} className=\"flex items-start gap-2\">\r\n                                                                    <CheckCircle size={14} className=\"text-green-500 mt-0.5 flex-shrink-0\" />\r\n                                                                    {indicator}\r\n                                                                </li>\r\n                                                            ))}\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Expanded Content */}\r\n                                {expandedStrands.has(strand.id) && (\r\n                                    <div className=\"p-4 bg-white space-y-6 border-t border-gray-100\">\r\n                                        {/* Local Evidence Section */}\r\n                                        {localEvidenceCount > 0 && (\r\n                                            <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4\">\r\n                                                <h4 className=\"font-semibold text-purple-900 mb-3 flex items-center gap-2\">\r\n                                                    <FileText size={18} className=\"text-purple-600\" />\r\n                                                    Local Evidence Files ({localEvidenceCount})\r\n                                                </h4>\r\n                                                <div className=\"space-y-2\">\r\n                                                    {getEvidenceForStrand(strand.id).map((evidence, idx) => (\r\n                                                        <div key={idx} className=\"flex items-center justify-between p-2 bg-white rounded border border-purple-100\">\r\n                                                            <div className=\"flex-1 min-w-0\">\r\n                                                                <p className=\"text-sm font-medium text-gray-900 truncate\">{evidence.fileName}</p>\r\n                                                                <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                                                                    {evidence.matchedKeywords.slice(0, 3).map((kw, i) => (\r\n                                                                        <span key={i} className=\"text-xs bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded\">\r\n                                                                            {kw}\r\n                                                                        </span>\r\n                                                                    ))}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <span className={`text-xs px-2 py-1 rounded-full ml-2 ${\r\n                                                                evidence.confidence >= 0.7 ? 'bg-green-100 text-green-700' :\r\n                                                                evidence.confidence >= 0.5 ? 'bg-yellow-100 text-yellow-700' :\r\n                                                                'bg-gray-100 text-gray-600'\r\n                                                            }`}>\r\n                                                                {Math.round(evidence.confidence * 100)}%\r\n                                                            </span>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                                <p className=\"text-xs text-purple-600 mt-2\">\r\n                                                    📁 Scanned from local folder\r\n                                                </p>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Inspection Questions */}\r\n                                        {strand.inspectionQuestions.map((question) => {\r\n                                            const assessment = assessments[question.id] || {};\r\n                                            const rating = assessment.rating || 'not_assessed';\r\n                                            const rationale = assessment.rationale || '';\r\n\r\n                                            return (\r\n                                                <div key={question.id} className=\"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors\">\r\n                                                    <div className=\"flex justify-between items-start mb-4\">\r\n                                                        <div className=\"flex-1\">\r\n                                                            <h4 className=\"font-bold text-gray-900 text-lg\">{question.question}</h4>\r\n                                                            <p className=\"text-sm text-gray-600 mt-1\">{question.guidance}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    {/* Rating Selection */}\r\n                                                    <div className=\"mb-4\">\r\n                                                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Your Assessment</label>\r\n                                                        <div className=\"flex flex-wrap gap-2\">\r\n                                                            {Object.entries(SIAMS_RATINGS).map(([key, value]) => (\r\n                                                                <button\r\n                                                                    key={key}\r\n                                                                    onClick={() => handleRatingChange(question.id, key)}\r\n                                                                    className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors border ${\r\n                                                                        rating === key\r\n                                                                            ? getRatingColor(key)\r\n                                                                            : 'bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100'\r\n                                                                    }`}\r\n                                                                >\r\n                                                                    {value.label}\r\n                                                                </button>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    {/* Rationale */}\r\n                                                    <div className=\"mb-4\">\r\n                                                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Evidence & Rationale</label>\r\n                                                        <textarea\r\n                                                            value={rationale}\r\n                                                            onChange={(e) => handleRationaleChange(question.id, e.target.value)}\r\n                                                            placeholder=\"Describe your evidence for this rating...\"\r\n                                                            rows={3}\r\n                                                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm\"\r\n                                                        />\r\n                                                    </div>\r\n\r\n                                                    {/* Evidence Required */}\r\n                                                    <div className=\"bg-gray-50 rounded-lg p-3\">\r\n                                                        <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Evidence Required:</h5>\r\n                                                        <ul className=\"space-y-2\">\r\n                                                            {question.evidenceRequired.map((evidence, idx) => (\r\n                                                                <li key={idx} className=\"flex items-start justify-between group text-sm p-2 rounded hover:bg-white\">\r\n                                                                    <span className=\"text-gray-600 flex-1 mr-2\">• {evidence}</span>\r\n                                                                    <button\r\n                                                                        onClick={() => handleActionCreate(question.id, evidence, strand.name)}\r\n                                                                        className=\"text-xs bg-purple-50 text-purple-600 px-2 py-1 rounded border border-purple-200 hover:bg-purple-100 transition-all flex items-center gap-1 opacity-0 group-hover:opacity-100\"\r\n                                                                        title=\"Create action\"\r\n                                                                    >\r\n                                                                        <Plus size={12} /> Action\r\n                                                                    </button>\r\n                                                                </li>\r\n                                                            ))}\r\n                                                        </ul>\r\n                                                    </div>\r\n\r\n                                                    {/* Actions List */}\r\n                                                    {(assessments[question.id]?.actions || []).length > 0 && (\r\n                                                        <div className=\"mt-4 border-t border-gray-100 pt-4\">\r\n                                                            <h5 className=\"font-semibold text-gray-700 text-sm mb-3 flex items-center gap-2\">\r\n                                                                <AlertCircle size={16} />\r\n                                                                Action Plan ({(assessments[question.id]?.actions || []).length})\r\n                                                            </h5>\r\n                                                            <div className=\"space-y-2\">\r\n                                                                {(assessments[question.id]?.actions || []).map((action: any) => (\r\n                                                                    <div key={action.id} className=\"bg-white border border-gray-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow\">\r\n                                                                        <div className=\"flex justify-between items-start mb-1\">\r\n                                                                            <div className=\"flex items-center gap-2\">\r\n                                                                                <span className={`px-2 py-0.5 rounded text-[10px] font-bold uppercase border ${getPriorityColor(action.priority)}`}>\r\n                                                                                    {action.priority}\r\n                                                                                </span>\r\n                                                                                <span className=\"text-sm font-medium text-gray-900\">{action.description}</span>\r\n                                                                            </div>\r\n                                                                            <button\r\n                                                                                onClick={() => handleActionEdit(question.id, action)}\r\n                                                                                className=\"text-gray-400 hover:text-purple-600\"\r\n                                                                            >\r\n                                                                                <Edit2 size={14} />\r\n                                                                            </button>\r\n                                                                        </div>\r\n                                                                        {action.rationale && (\r\n                                                                            <p className=\"text-xs text-gray-500 mb-2 italic\">\"{action.rationale}\"</p>\r\n                                                                        )}\r\n                                                                        <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n                                                                            {action.assignee && (\r\n                                                                                <span className=\"flex items-center gap-1\">\r\n                                                                                    <User size={12} /> {action.assignee}\r\n                                                                                </span>\r\n                                                                            )}\r\n                                                                            {action.dueDate && (\r\n                                                                                <span className=\"flex items-center gap-1\">\r\n                                                                                    <Calendar size={12} /> {new Date(action.dueDate).toLocaleDateString()}\r\n                                                                                </span>\r\n                                                                            )}\r\n                                                                            <span className={`px-2 py-0.5 rounded text-[10px] font-medium ${action.status === 'completed' ? 'bg-green-100 text-green-700' : action.status === 'in_progress' ? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-700'}`}>\r\n                                                                                {action.status?.replace('_', ' ') || 'not started'}\r\n                                                                            </span>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Ed Analysis Panel - Fixed Right Sidebar */}\r\n            {showEdPanel && (\r\n                <div className=\"fixed right-6 top-32 w-96 z-40 animate-in slide-in-from-right\">\r\n                    <EdAnalysisPanel\r\n                        selectedCategory={edSelectedStrand}\r\n                        currentRating={edSelectedRating}\r\n                        onClose={() => setShowEdPanel(false)}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            {/* Ed Quick Access Button */}\r\n            {!showEdPanel && (\r\n                <button\r\n                    onClick={() => setShowEdPanel(true)}\r\n                    className=\"fixed right-6 top-32 bg-gradient-to-r from-purple-500 to-violet-600 text-white px-4 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2 z-40\"\r\n                >\r\n                    <GraduationCap size={20} />\r\n                    <span className=\"font-medium\">Analyze with Ed</span>\r\n                    <Sparkles size={16} className=\"text-yellow-300\" />\r\n                </button>\r\n            )}\r\n\r\n            {/* Action Modal */}\r\n            {isActionModalOpen && (\r\n                <ActionModal\r\n                    isOpen={isActionModalOpen}\r\n                    onClose={() => setIsActionModalOpen(false)}\r\n                    onSave={handleSaveAction}\r\n                    categoryName={currentStrandName || ''}\r\n                    subCategoryName={SIAMS_FRAMEWORK.flatMap(s => s.inspectionQuestions).find(q => q.id === currentActionQuestionId)?.question?.substring(0, 50)}\r\n                    evidenceItem={currentActionEvidence || undefined}\r\n                    initialData={editingAction as any}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { ActionItem, OFSTED_FRAMEWORK } from '@/lib/ofsted-framework';\r\nimport { useMemo, useState } from 'react';\r\nimport { Layers, List } from 'lucide-react';\r\n\r\ninterface ActionsGanttChartProps {\r\n    actions: ActionItem[];\r\n}\r\n\r\nconst COLOR_MAP: Record<string, string> = {\r\n    'rose': 'bg-rose-100 border-l-4 border-rose-500 text-rose-900',\r\n    'teal': 'bg-teal-100 border-l-4 border-teal-500 text-teal-900',\r\n    'orange': 'bg-orange-100 border-l-4 border-orange-500 text-orange-900',\r\n    'violet': 'bg-violet-100 border-l-4 border-violet-500 text-violet-900',\r\n    'blue': 'bg-blue-100 border-l-4 border-blue-500 text-blue-900',\r\n    'gray': 'bg-gray-100 border-l-4 border-gray-500 text-gray-900',\r\n};\r\n\r\nexport default function ActionsGanttChart({ actions }: ActionsGanttChartProps) {\r\n    const [groupByCategory, setGroupByCategory] = useState(true);\r\n\r\n    // 1. Filter out actions without dates\r\n    const validActions = useMemo(() => actions.filter(a => a.startDate && a.dueDate), [actions]);\r\n\r\n    // 2. Determine Date Range\r\n    const { minDate, maxDate, totalDays } = useMemo(() => {\r\n        if (validActions.length === 0) return { minDate: new Date(), maxDate: new Date(), totalDays: 0 };\r\n\r\n        const dates = validActions.flatMap(a => [new Date(a.startDate!), new Date(a.dueDate!)]);\r\n        const min = new Date(Math.min(...dates.map(d => d.getTime())));\r\n        const max = new Date(Math.max(...dates.map(d => d.getTime())));\r\n\r\n        // Add buffer (1 week before, 1 week after)\r\n        min.setDate(min.getDate() - 7);\r\n        max.setDate(max.getDate() + 7);\r\n\r\n        const diffTime = Math.abs(max.getTime() - min.getTime());\r\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n        return { minDate: min, maxDate: max, totalDays: diffDays };\r\n    }, [validActions]);\r\n\r\n    // 3. Group by Category (or single group)\r\n    const groupedActions = useMemo(() => {\r\n        if (!groupByCategory) {\r\n            return { 'All Actions': validActions.sort((a, b) => new Date(a.startDate!).getTime() - new Date(b.startDate!).getTime()) };\r\n        }\r\n\r\n        const groups: Record<string, ActionItem[]> = {};\r\n        validActions.forEach(action => {\r\n            const cat = action.category || 'Uncategorized';\r\n            if (!groups[cat]) groups[cat] = [];\r\n            groups[cat].push(action);\r\n        });\r\n        return groups;\r\n    }, [validActions, groupByCategory]);\r\n\r\n    // Helper to calculate position and width\r\n    const getPosition = (start: string, end: string) => {\r\n        const startDate = new Date(start);\r\n        const endDate = new Date(end);\r\n\r\n        const startDiff = Math.ceil((startDate.getTime() - minDate.getTime()) / (1000 * 60 * 60 * 24));\r\n        const duration = Math.ceil((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n        const left = (startDiff / totalDays) * 100;\r\n        const width = (duration / totalDays) * 100;\r\n\r\n        return { left: `${left}%`, width: `${Math.max(width, 1)}%` }; // Min width 1%\r\n    };\r\n\r\n    const getCategoryColor = (categoryName: string) => {\r\n        const category = OFSTED_FRAMEWORK.find(c => c.name === categoryName);\r\n        const colorName = category?.color || 'gray';\r\n        return COLOR_MAP[colorName] || COLOR_MAP['gray'];\r\n    };\r\n\r\n    if (validActions.length === 0) {\r\n        return (\r\n            <div className=\"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300\">\r\n                <p className=\"text-gray-500\">No actions with valid start and due dates to display.</p>\r\n                <p className=\"text-xs text-gray-400 mt-1\">Edit actions to add dates to see them on the timeline.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Generate Month Markers\r\n    const monthMarkers = [];\r\n    const currentDate = new Date(minDate);\r\n    while (currentDate <= maxDate) {\r\n        monthMarkers.push(new Date(currentDate));\r\n        currentDate.setMonth(currentDate.getMonth() + 1);\r\n        currentDate.setDate(1); // Reset to 1st of month\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\r\n            <div className=\"p-6 border-b border-gray-200 flex justify-between items-center\">\r\n                <div>\r\n                    <h2 className=\"text-lg font-bold text-gray-900\">Project Timeline</h2>\r\n                    <p className=\"text-sm text-gray-500\">Visual overview of action schedules</p>\r\n                </div>\r\n\r\n                {/* View Toggle */}\r\n                <div className=\"bg-gray-100 p-1 rounded-lg flex border border-gray-200\">\r\n                    <button\r\n                        onClick={() => setGroupByCategory(true)}\r\n                        className={`px-3 py-1.5 rounded-md text-xs font-medium flex items-center gap-2 transition-all ${groupByCategory ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\r\n                    >\r\n                        <Layers size={14} /> Grouped\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setGroupByCategory(false)}\r\n                        className={`px-3 py-1.5 rounded-md text-xs font-medium flex items-center gap-2 transition-all ${!groupByCategory ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\r\n                    >\r\n                        <List size={14} /> Holistic\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n                <div className=\"min-w-[800px] p-6 relative\">\r\n                    {/* Timeline Header */}\r\n                    <div className=\"flex border-b border-gray-200 pb-2 mb-4 relative h-8\">\r\n                        {monthMarkers.map((date, i) => {\r\n                            const left = ((date.getTime() - minDate.getTime()) / (1000 * 60 * 60 * 24) / totalDays) * 100;\r\n                            if (left < 0 || left > 100) return null;\r\n                            return (\r\n                                <div key={i} className=\"absolute text-xs font-semibold text-gray-500 transform -translate-x-1/2\" style={{ left: `${left}%` }}>\r\n                                    {date.toLocaleDateString('default', { month: 'short', year: '2-digit' })}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {/* Grid Lines */}\r\n                    <div className=\"absolute inset-0 top-24 pointer-events-none\">\r\n                        {monthMarkers.map((date, i) => {\r\n                            const left = ((date.getTime() - minDate.getTime()) / (1000 * 60 * 60 * 24) / totalDays) * 100;\r\n                            if (left < 0 || left > 100) return null;\r\n                            return (\r\n                                <div key={i} className=\"absolute top-0 bottom-0 border-l border-gray-100 border-dashed\" style={{ left: `${left}%` }} />\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {/* Groups */}\r\n                    <div className=\"space-y-8 relative z-10\">\r\n                        {Object.entries(groupedActions).map(([category, catActions]) => (\r\n                            <div key={category}>\r\n                                <h3 className=\"text-sm font-bold text-gray-700 mb-2 sticky left-0 bg-white/80 backdrop-blur-sm inline-block px-2 rounded\">\r\n                                    {category}\r\n                                </h3>\r\n                                <div className=\"space-y-2\">\r\n                                    {catActions.map(action => {\r\n                                        const style = getPosition(action.startDate!, action.dueDate!);\r\n                                        return (\r\n                                            <div key={action.id} className=\"relative h-8 flex items-center group\">\r\n                                                {/* Bar */}\r\n                                                <div\r\n                                                    className={`absolute h-6 rounded shadow-sm cursor-pointer transition-all flex items-center px-2 overflow-hidden ${getCategoryColor(action.category || '')}`}\r\n                                                    style={style}\r\n                                                >\r\n                                                    <span className=\"text-xs font-medium truncate\">{action.description}</span>\r\n\r\n                                                    {/* Tooltip */}\r\n                                                    <div className=\"opacity-0 group-hover:opacity-100 absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 bg-gray-900 text-white text-xs rounded p-2 z-20 pointer-events-none transition-opacity shadow-lg\">\r\n                                                        <div className=\"font-bold mb-1\">{action.description}</div>\r\n                                                        <div className=\"text-gray-300 mb-1\">{action.category}</div>\r\n                                                        <div className=\"flex justify-between text-gray-400\">\r\n                                                            <span>{new Date(action.startDate!).toLocaleDateString()}</span>\r\n                                                            <span>{new Date(action.dueDate!).toLocaleDateString()}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { ActionItem, OFSTED_FRAMEWORK } from '@/lib/ofsted-framework';\r\nimport { Search, Filter, CheckCircle, AlertCircle, Clock, Calendar, User, ArrowRight, LayoutList, BarChart2, ArrowUpDown, ArrowUp, ArrowDown } from 'lucide-react';\r\nimport ActionsGanttChart from './ActionsGanttChart';\r\n\r\ninterface ActionsDashboardProps {\r\n    actions: ActionItem[];\r\n    onUpdateAction: (action: ActionItem) => void;\r\n}\r\n\r\nconst BADGE_COLOR_MAP: Record<string, string> = {\r\n    'rose': 'bg-white border-rose-200 text-rose-700',\r\n    'teal': 'bg-white border-teal-200 text-teal-700',\r\n    'orange': 'bg-white border-orange-200 text-orange-700',\r\n    'violet': 'bg-white border-violet-200 text-violet-700',\r\n    'blue': 'bg-white border-blue-200 text-blue-700',\r\n    'gray': 'bg-white border-gray-200 text-gray-700',\r\n};\r\n\r\ntype SortKey = 'description' | 'category' | 'assignee' | 'dueDate' | 'priority' | 'status';\r\n\r\nexport default function ActionsDashboard({ actions, onUpdateAction }: ActionsDashboardProps) {\r\n    const [viewMode, setViewMode] = useState<'list' | 'gantt'>('list');\r\n    const [filterStatus, setFilterStatus] = useState<'all' | 'open' | 'in_progress' | 'completed'>('all');\r\n    const [filterCategory, setFilterCategory] = useState<string>('all');\r\n    const [hideCompleted, setHideCompleted] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    // Sorting State\r\n    const [sortConfig, setSortConfig] = useState<{ key: SortKey; direction: 'asc' | 'desc' }>({\r\n        key: 'dueDate',\r\n        direction: 'asc'\r\n    });\r\n\r\n    // Extract unique categories for filter\r\n    const categories = useMemo(() => {\r\n        const cats = new Set(actions.map(a => a.category).filter(Boolean));\r\n        return Array.from(cats);\r\n    }, [actions]);\r\n\r\n    const handleSort = (key: SortKey) => {\r\n        setSortConfig(current => ({\r\n            key,\r\n            direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\r\n        }));\r\n    };\r\n\r\n    const filteredActions = useMemo(() => {\r\n        let result = actions.filter(action => {\r\n            if (hideCompleted && action.status === 'completed') return false;\r\n            if (filterStatus !== 'all' && action.status !== filterStatus) return false;\r\n            if (filterCategory !== 'all' && action.category !== filterCategory) return false;\r\n            if (searchQuery && !action.description.toLowerCase().includes(searchQuery.toLowerCase()) && !action.assignee?.toLowerCase().includes(searchQuery.toLowerCase())) return false;\r\n            return true;\r\n        });\r\n\r\n        return result.sort((a, b) => {\r\n            const { key, direction } = sortConfig;\r\n            let valueA: any = a[key as keyof ActionItem];\r\n            let valueB: any = b[key as keyof ActionItem];\r\n\r\n            // Handle specific fields\r\n            if (key === 'dueDate') {\r\n                valueA = valueA ? new Date(valueA).getTime() : Infinity;\r\n                valueB = valueB ? new Date(valueB).getTime() : Infinity;\r\n            } else if (key === 'priority') {\r\n                const priorityMap = { high: 3, medium: 2, low: 1 };\r\n                valueA = priorityMap[valueA as keyof typeof priorityMap] || 0;\r\n                valueB = priorityMap[valueB as keyof typeof priorityMap] || 0;\r\n            } else {\r\n                valueA = (valueA || '').toString().toLowerCase();\r\n                valueB = (valueB || '').toString().toLowerCase();\r\n            }\r\n\r\n            if (valueA < valueB) return direction === 'asc' ? -1 : 1;\r\n            if (valueA > valueB) return direction === 'asc' ? 1 : -1;\r\n            return 0;\r\n        });\r\n    }, [actions, hideCompleted, filterStatus, filterCategory, searchQuery, sortConfig]);\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'completed': return 'bg-green-50 text-green-700 border-green-200';\r\n            case 'in_progress': return 'bg-blue-50 text-blue-700 border-blue-200';\r\n            default: return 'bg-gray-50 text-gray-700 border-gray-200';\r\n        }\r\n    };\r\n\r\n    const getPriorityColor = (priority: string) => {\r\n        switch (priority) {\r\n            case 'high': return 'text-red-700 bg-red-50 border-red-200';\r\n            case 'medium': return 'text-amber-700 bg-amber-50 border-amber-200';\r\n            case 'low': return 'text-green-700 bg-green-50 border-green-200';\r\n            default: return 'text-gray-600 bg-gray-50';\r\n        }\r\n    };\r\n\r\n    const getCategoryBadgeStyle = (categoryName: string) => {\r\n        const category = OFSTED_FRAMEWORK.find(c => c.name === categoryName);\r\n        const colorName = category?.color || 'gray';\r\n        return BADGE_COLOR_MAP[colorName] || BADGE_COLOR_MAP['gray'];\r\n    };\r\n\r\n    const SortIcon = ({ columnKey }: { columnKey: SortKey }) => {\r\n        if (sortConfig.key !== columnKey) return <ArrowUpDown size={14} className=\"text-gray-400 opacity-0 group-hover:opacity-50\" />;\r\n        return sortConfig.direction === 'asc'\r\n            ? <ArrowUp size={14} className=\"text-blue-600\" />\r\n            : <ArrowDown size={14} className=\"text-blue-600\" />;\r\n    };\r\n\r\n    const SortableHeader = ({ label, columnKey }: { label: string, columnKey: SortKey }) => (\r\n        <th\r\n            className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors group select-none\"\r\n            onClick={() => handleSort(columnKey)}\r\n        >\r\n            <div className=\"flex items-center gap-2\">\r\n                {label}\r\n                <SortIcon columnKey={columnKey} />\r\n            </div>\r\n        </th>\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Action Plan Dashboard</h2>\r\n                    <p className=\"text-gray-600\">Manage and track all improvement actions across frameworks.</p>\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                    {/* View Toggle */}\r\n                    <div className=\"bg-gray-100 p-1 rounded-lg flex border border-gray-200\">\r\n                        <button\r\n                            onClick={() => setViewMode('list')}\r\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium flex items-center gap-2 transition-all ${viewMode === 'list' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\r\n                        >\r\n                            <LayoutList size={16} /> List\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setViewMode('gantt')}\r\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium flex items-center gap-2 transition-all ${viewMode === 'gantt' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}\r\n                        >\r\n                            <BarChart2 size={16} /> Timeline\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"bg-white border border-gray-300 rounded-lg px-4 py-2 flex items-center gap-2 shadow-sm\">\r\n                        <span className=\"text-sm font-medium text-gray-700\">Total Actions:</span>\r\n                        <span className=\"text-lg font-bold text-blue-600\">{actions.length}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex flex-wrap gap-4 items-center justify-between\">\r\n                <div className=\"flex items-center gap-4 flex-1\">\r\n                    <div className=\"relative flex-1 max-w-md\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={18} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search actions...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Status Filter */}\r\n                    <div className=\"flex items-center gap-2 border-l border-gray-200 pl-4\">\r\n                        <Filter size={16} className=\"text-gray-400\" />\r\n                        <select\r\n                            value={filterStatus}\r\n                            onChange={(e) => setFilterStatus(e.target.value as any)}\r\n                            className=\"border-none bg-transparent font-medium text-gray-700 focus:ring-0 cursor-pointer text-sm\"\r\n                        >\r\n                            <option value=\"all\">All Statuses</option>\r\n                            <option value=\"open\">Open</option>\r\n                            <option value=\"in_progress\">In Progress</option>\r\n                            <option value=\"completed\">Completed</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    {/* Category Filter */}\r\n                    <div className=\"flex items-center gap-2 border-l border-gray-200 pl-4\">\r\n                        <span className=\"text-sm text-gray-500\">Category:</span>\r\n                        <select\r\n                            value={filterCategory}\r\n                            onChange={(e) => setFilterCategory(e.target.value)}\r\n                            className=\"border-none bg-transparent font-medium text-gray-700 focus:ring-0 cursor-pointer text-sm max-w-[200px] truncate\"\r\n                        >\r\n                            <option value=\"all\">All Categories</option>\r\n                            {categories.map(cat => (\r\n                                <option key={cat} value={cat as string}>{cat}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <label className=\"flex items-center gap-2 cursor-pointer select-none text-sm font-medium text-gray-700\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={hideCompleted}\r\n                            onChange={(e) => setHideCompleted(e.target.checked)}\r\n                            className=\"rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                        Hide Completed\r\n                    </label>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            {viewMode === 'list' ? (\r\n                <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\r\n                    <table className=\"min-w-full divide-y divide-gray-200\">\r\n                        <thead className=\"bg-gray-50\">\r\n                            <tr>\r\n                                <SortableHeader label=\"Action\" columnKey=\"description\" />\r\n                                <SortableHeader label=\"Category\" columnKey=\"category\" />\r\n                                <SortableHeader label=\"Assignee\" columnKey=\"assignee\" />\r\n                                <SortableHeader label=\"Due Date\" columnKey=\"dueDate\" />\r\n                                <SortableHeader label=\"Priority\" columnKey=\"priority\" />\r\n                                <SortableHeader label=\"Status\" columnKey=\"status\" />\r\n                                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                            {filteredActions.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan={7} className=\"px-6 py-12 text-center text-gray-500\">\r\n                                        No actions found matching your filters.\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (\r\n                                filteredActions.map((action) => (\r\n                                    <tr key={action.id} className=\"hover:bg-gray-50 transition-colors group\">\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span className=\"font-medium text-gray-900\">{action.description}</span>\r\n                                                {action.rationale && (\r\n                                                    <span className=\"text-xs text-gray-500 truncate max-w-md\">{action.rationale}</span>\r\n                                                )}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className={`text-xs font-bold px-2 py-1 rounded border ${getCategoryBadgeStyle(action.category || '')}`}>\r\n                                                {action.category || 'Uncategorized'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            {action.assignee ? (\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <div className=\"h-6 w-6 rounded-full bg-gray-200 flex items-center justify-center text-xs font-medium text-gray-600\">\r\n                                                        {action.assignee.charAt(0)}\r\n                                                    </div>\r\n                                                    <span className=\"text-sm text-gray-700\">{action.assignee}</span>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <span className=\"text-sm text-gray-400 italic\">Unassigned</span>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            {action.dueDate ? (\r\n                                                <div className=\"flex items-center gap-1.5 text-sm text-gray-600\">\r\n                                                    <Calendar size={14} />\r\n                                                    {new Date(action.dueDate).toLocaleDateString()}\r\n                                                </div>\r\n                                            ) : (\r\n                                                <span className=\"text-sm text-gray-400\">-</span>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className={`px-2 py-1 inline-flex text-xs leading-5 font-bold rounded border uppercase ${getPriorityColor(action.priority)}`}>\r\n                                                {action.priority}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className={`px-2 py-1 inline-flex text-xs leading-5 font-bold rounded border capitalize ${getStatusColor(action.status)}`}>\r\n                                                {action.status.replace('_', ' ')}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                                            <button className=\"text-blue-600 hover:text-blue-900 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                Edit\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            ) : (\r\n                <ActionsGanttChart actions={filteredActions} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { \r\n    Building, Users, Mail, Loader2, UserPlus, Shield, GraduationCap, \r\n    Upload, Download, FileSpreadsheet, X, Check, AlertCircle, Trash2, \r\n    MoreVertical, Clock, RefreshCw, ChevronDown\r\n} from 'lucide-react';\r\n\r\ninterface Member {\r\n    role: string;\r\n    created_at: string;\r\n    user: {\r\n        id: string;\r\n        email: string;\r\n        display_name: string | null;\r\n    };\r\n}\r\n\r\ninterface Invitation {\r\n    id: string;\r\n    email: string;\r\n    role: string;\r\n    status: string;\r\n    created_at: string;\r\n    expires_at: string;\r\n    invited_by_user: {\r\n        email: string;\r\n        display_name: string | null;\r\n    } | null;\r\n}\r\n\r\ninterface ImportPreview {\r\n    email: string;\r\n    displayName: string;\r\n    role: string;\r\n    status: 'new' | 'exists';\r\n}\r\n\r\ninterface ImportError {\r\n    row: number;\r\n    field: string;\r\n    message: string;\r\n}\r\n\r\nexport default function SettingsView() {\r\n    const { user, organization } = useAuth();\r\n    const [activeTab, setActiveTab] = useState<'members' | 'invitations' | 'import'>('members');\r\n    \r\n    // Members state\r\n    const [members, setMembers] = useState<Member[]>([]);\r\n    const [isLoadingMembers, setIsLoadingMembers] = useState(true);\r\n    const [editingMember, setEditingMember] = useState<string | null>(null);\r\n    \r\n    // Invitations state\r\n    const [invitations, setInvitations] = useState<Invitation[]>([]);\r\n    const [isLoadingInvitations, setIsLoadingInvitations] = useState(false);\r\n    const [showInviteForm, setShowInviteForm] = useState(false);\r\n    const [inviteEmail, setInviteEmail] = useState('');\r\n    const [inviteRole, setInviteRole] = useState<'admin' | 'teacher' | 'slt'>('teacher');\r\n    const [isInviting, setIsInviting] = useState(false);\r\n    \r\n    // Import state\r\n    const [csvContent, setCsvContent] = useState('');\r\n    const [importPreview, setImportPreview] = useState<ImportPreview[] | null>(null);\r\n    const [importErrors, setImportErrors] = useState<ImportError[]>([]);\r\n    const [importSummary, setImportSummary] = useState<any>(null);\r\n    const [isImporting, setIsImporting] = useState(false);\r\n    const [importResult, setImportResult] = useState<any>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    \r\n    // Messages\r\n    const [success, setSuccess] = useState<string | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (organization?.id) {\r\n            fetchMembers();\r\n            fetchInvitations();\r\n        }\r\n    }, [organization]);\r\n\r\n    const fetchMembers = async () => {\r\n        if (!organization?.id) return;\r\n        setIsLoadingMembers(true);\r\n        try {\r\n            const response = await fetch(`/api/organization/members?organizationId=${organization.id}`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setMembers(data.members || []);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching members:', err);\r\n        } finally {\r\n            setIsLoadingMembers(false);\r\n        }\r\n    };\r\n\r\n    const fetchInvitations = async () => {\r\n        if (!organization?.id) return;\r\n        setIsLoadingInvitations(true);\r\n        try {\r\n            const response = await fetch(`/api/organization/invitations?organizationId=${organization.id}`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setInvitations(data.invitations || []);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching invitations:', err);\r\n        } finally {\r\n            setIsLoadingInvitations(false);\r\n        }\r\n    };\r\n\r\n    const handleInvite = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!inviteEmail.trim() || !organization?.id || !user) return;\r\n\r\n        setIsInviting(true);\r\n        setError(null);\r\n        setSuccess(null);\r\n\r\n        try {\r\n            const response = await fetch('/api/organization/invite', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    email: inviteEmail,\r\n                    role: inviteRole,\r\n                    organizationId: organization.id,\r\n                    invitedBy: user.uid\r\n                })\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to send invitation');\r\n\r\n            setSuccess(`Invitation sent to ${inviteEmail}`);\r\n            setInviteEmail('');\r\n            setShowInviteForm(false);\r\n            fetchInvitations();\r\n        } catch (err: any) {\r\n            setError(err.message || 'Failed to send invitation');\r\n        } finally {\r\n            setIsInviting(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdateRole = async (userId: string, newRole: string) => {\r\n        if (!organization?.id || !user) return;\r\n        \r\n        try {\r\n            const response = await fetch('/api/organization/members/update', {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    organizationId: organization.id,\r\n                    userId,\r\n                    newRole,\r\n                    requestedBy: user.uid\r\n                })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Failed to update role');\r\n            }\r\n\r\n            setSuccess('Role updated successfully');\r\n            setEditingMember(null);\r\n            fetchMembers();\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        }\r\n    };\r\n\r\n    const handleRemoveMember = async (userId: string) => {\r\n        if (!organization?.id || !user || !confirm('Are you sure you want to remove this member?')) return;\r\n\r\n        try {\r\n            const response = await fetch(\r\n                `/api/organization/members/update?organizationId=${organization.id}&userId=${userId}&requestedBy=${user.uid}`,\r\n                { method: 'DELETE' }\r\n            );\r\n\r\n            if (!response.ok) {\r\n                const data = await response.json();\r\n                throw new Error(data.error || 'Failed to remove member');\r\n            }\r\n\r\n            setSuccess('Member removed successfully');\r\n            fetchMembers();\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        }\r\n    };\r\n\r\n    const handleCancelInvitation = async (invitationId: string) => {\r\n        if (!organization?.id || !user || !confirm('Cancel this invitation?')) return;\r\n\r\n        try {\r\n            const response = await fetch(\r\n                `/api/organization/invitations?invitationId=${invitationId}&organizationId=${organization.id}&requestedBy=${user.uid}`,\r\n                { method: 'DELETE' }\r\n            );\r\n\r\n            if (!response.ok) throw new Error('Failed to cancel invitation');\r\n\r\n            setSuccess('Invitation cancelled');\r\n            fetchInvitations();\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        }\r\n    };\r\n\r\n    const handleResendInvitation = async (invitationId: string) => {\r\n        if (!organization?.id || !user) return;\r\n\r\n        try {\r\n            const response = await fetch('/api/organization/invitations', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    invitationId,\r\n                    organizationId: organization.id,\r\n                    requestedBy: user.uid\r\n                })\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to resend invitation');\r\n\r\n            setSuccess('Invitation resent');\r\n            fetchInvitations();\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        }\r\n    };\r\n\r\n    const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            const content = event.target?.result as string;\r\n            setCsvContent(content);\r\n            handlePreviewImport(content);\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    const handlePreviewImport = async (content: string) => {\r\n        if (!organization?.id || !user) return;\r\n\r\n        setIsImporting(true);\r\n        setImportErrors([]);\r\n        setImportPreview(null);\r\n        setImportResult(null);\r\n\r\n        try {\r\n            const response = await fetch('/api/organization/import', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    csvContent: content,\r\n                    organizationId: organization.id,\r\n                    invitedBy: user.uid,\r\n                    previewOnly: true\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.preview) {\r\n                setImportPreview(data.users);\r\n                setImportErrors(data.errors || []);\r\n                setImportSummary(data.summary);\r\n            } else if (data.errors) {\r\n                setImportErrors(data.errors);\r\n            }\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        } finally {\r\n            setIsImporting(false);\r\n        }\r\n    };\r\n\r\n    const handleConfirmImport = async () => {\r\n        if (!organization?.id || !user || !csvContent) return;\r\n\r\n        setIsImporting(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await fetch('/api/organization/import', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    csvContent,\r\n                    organizationId: organization.id,\r\n                    invitedBy: user.uid,\r\n                    previewOnly: false\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                setImportResult(data.results);\r\n                setSuccess(`Successfully created ${data.results.created} invitations`);\r\n                setCsvContent('');\r\n                setImportPreview(null);\r\n                fetchInvitations();\r\n            } else {\r\n                setError(data.error || 'Import failed');\r\n                setImportErrors(data.errors || []);\r\n            }\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        } finally {\r\n            setIsImporting(false);\r\n        }\r\n    };\r\n\r\n    const downloadTemplate = () => {\r\n        window.location.href = '/api/organization/template';\r\n    };\r\n\r\n    const getRoleIcon = (role: string) => {\r\n        switch (role) {\r\n            case 'admin': return <Shield className=\"text-purple-600\" size={18} />;\r\n            case 'slt': return <GraduationCap className=\"text-blue-600\" size={18} />;\r\n            case 'teacher': return <Users className=\"text-green-600\" size={18} />;\r\n            default: return <Users className=\"text-gray-600\" size={18} />;\r\n        }\r\n    };\r\n\r\n    const getRoleBadgeColor = (role: string) => {\r\n        switch (role) {\r\n            case 'admin': return 'bg-purple-100 text-purple-700 border-purple-200';\r\n            case 'slt': return 'bg-blue-100 text-blue-700 border-blue-200';\r\n            case 'teacher': return 'bg-green-100 text-green-700 border-green-200';\r\n            default: return 'bg-gray-100 text-gray-700 border-gray-200';\r\n        }\r\n    };\r\n\r\n    const isAdmin = organization?.role === 'admin';\r\n\r\n    if (!organization) {\r\n        return (\r\n            <div className=\"text-center py-12\">\r\n                <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-8 max-w-md mx-auto\">\r\n                    <AlertCircle className=\"text-yellow-600 mx-auto mb-4\" size={48} />\r\n                    <h2 className=\"text-xl font-bold text-gray-900 mb-2\">No Organization Found</h2>\r\n                    <p className=\"text-gray-600 mb-4\">Please complete the onboarding process to set up your school.</p>\r\n                    <a href=\"/onboarding\" className=\"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium\">\r\n                        Complete Setup\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Messages */}\r\n            {success && (\r\n                <div className=\"p-4 bg-green-50 text-green-700 rounded-lg border border-green-200 flex items-center gap-3\">\r\n                    <Check className=\"flex-shrink-0\" size={20} />\r\n                    <span>{success}</span>\r\n                    <button onClick={() => setSuccess(null)} className=\"ml-auto\"><X size={18} /></button>\r\n                </div>\r\n            )}\r\n            {error && (\r\n                <div className=\"p-4 bg-red-50 text-red-700 rounded-lg border border-red-200 flex items-center gap-3\">\r\n                    <AlertCircle className=\"flex-shrink-0\" size={20} />\r\n                    <span>{error}</span>\r\n                    <button onClick={() => setError(null)} className=\"ml-auto\"><X size={18} /></button>\r\n                </div>\r\n            )}\r\n\r\n            {/* Organization Header */}\r\n            <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 text-white\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"bg-white/20 p-4 rounded-xl\">\r\n                        <Building size={32} />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-bold\">{organization.name}</h1>\r\n                        <div className=\"flex items-center gap-2 mt-1 opacity-90\">\r\n                            {getRoleIcon(organization.role)}\r\n                            <span className=\"text-sm\">Your role: {organization.role.toUpperCase()}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\r\n                <div className=\"border-b border-gray-200\">\r\n                    <nav className=\"flex\">\r\n                        <button\r\n                            onClick={() => setActiveTab('members')}\r\n                            className={`px-6 py-4 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${\r\n                                activeTab === 'members' \r\n                                    ? 'border-blue-500 text-blue-600' \r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                            }`}\r\n                        >\r\n                            <Users size={18} />\r\n                            Team Members\r\n                            <span className=\"ml-1 px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs\">\r\n                                {members.length}\r\n                            </span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('invitations')}\r\n                            className={`px-6 py-4 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${\r\n                                activeTab === 'invitations' \r\n                                    ? 'border-blue-500 text-blue-600' \r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                            }`}\r\n                        >\r\n                            <Mail size={18} />\r\n                            Pending Invitations\r\n                            {invitations.length > 0 && (\r\n                                <span className=\"ml-1 px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded-full text-xs\">\r\n                                    {invitations.length}\r\n                                </span>\r\n                            )}\r\n                        </button>\r\n                        {isAdmin && (\r\n                            <button\r\n                                onClick={() => setActiveTab('import')}\r\n                                className={`px-6 py-4 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${\r\n                                    activeTab === 'import' \r\n                                        ? 'border-blue-500 text-blue-600' \r\n                                        : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                                }`}\r\n                            >\r\n                                <Upload size={18} />\r\n                                Bulk Import\r\n                            </button>\r\n                        )}\r\n                    </nav>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                    {/* Members Tab */}\r\n                    {activeTab === 'members' && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <h2 className=\"text-lg font-semibold text-gray-900\">Team Members</h2>\r\n                                    <p className=\"text-sm text-gray-500\">Manage users and their access levels</p>\r\n                                </div>\r\n                                {isAdmin && (\r\n                                    <button\r\n                                        onClick={() => { setActiveTab('invitations'); setShowInviteForm(true); }}\r\n                                        className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors\"\r\n                                    >\r\n                                        <UserPlus size={18} />\r\n                                        Invite User\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            {isLoadingMembers ? (\r\n                                <div className=\"flex justify-center py-12\">\r\n                                    <Loader2 className=\"animate-spin text-blue-600\" size={32} />\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"space-y-3\">\r\n                                    {members.map((member) => (\r\n                                        <div\r\n                                            key={member.user.id}\r\n                                            className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors\"\r\n                                        >\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center text-white font-bold text-lg\">\r\n                                                    {member.user.email[0].toUpperCase()}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"font-medium text-gray-900\">\r\n                                                        {member.user.display_name || member.user.email}\r\n                                                    </p>\r\n                                                    <p className=\"text-sm text-gray-500\">{member.user.email}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                {editingMember === member.user.id && isAdmin ? (\r\n                                                    <select\r\n                                                        value={member.role}\r\n                                                        onChange={(e) => handleUpdateRole(member.user.id, e.target.value)}\r\n                                                        className=\"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                                                    >\r\n                                                        <option value=\"teacher\">Teacher</option>\r\n                                                        <option value=\"slt\">SLT</option>\r\n                                                        <option value=\"admin\">Admin</option>\r\n                                                    </select>\r\n                                                ) : (\r\n                                                    <div \r\n                                                        className={`flex items-center gap-2 px-3 py-1.5 rounded-lg border ${getRoleBadgeColor(member.role)} ${isAdmin ? 'cursor-pointer hover:opacity-80' : ''}`}\r\n                                                        onClick={() => isAdmin && setEditingMember(member.user.id)}\r\n                                                    >\r\n                                                        {getRoleIcon(member.role)}\r\n                                                        <span className=\"text-sm font-medium\">{member.role.toUpperCase()}</span>\r\n                                                        {isAdmin && <ChevronDown size={14} />}\r\n                                                    </div>\r\n                                                )}\r\n                                                {isAdmin && member.user.id !== user?.uid && (\r\n                                                    <button\r\n                                                        onClick={() => handleRemoveMember(member.user.id)}\r\n                                                        className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                        title=\"Remove member\"\r\n                                                    >\r\n                                                        <Trash2 size={18} />\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                    {members.length === 0 && (\r\n                                        <p className=\"text-center text-gray-500 py-8\">No members found.</p>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Invitations Tab */}\r\n                    {activeTab === 'invitations' && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <h2 className=\"text-lg font-semibold text-gray-900\">Pending Invitations</h2>\r\n                                    <p className=\"text-sm text-gray-500\">Users who haven't accepted their invitation yet</p>\r\n                                </div>\r\n                                {isAdmin && (\r\n                                    <button\r\n                                        onClick={() => setShowInviteForm(!showInviteForm)}\r\n                                        className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors\"\r\n                                    >\r\n                                        <UserPlus size={18} />\r\n                                        {showInviteForm ? 'Cancel' : 'Invite User'}\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Invite Form */}\r\n                            {showInviteForm && isAdmin && (\r\n                                <form onSubmit={handleInvite} className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n                                    <h3 className=\"font-semibold text-gray-900 mb-4\">Send New Invitation</h3>\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n                                        <div className=\"md:col-span-2\">\r\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email Address</label>\r\n                                            <input\r\n                                                type=\"email\"\r\n                                                value={inviteEmail}\r\n                                                onChange={(e) => setInviteEmail(e.target.value)}\r\n                                                placeholder=\"user@school.edu\"\r\n                                                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none\"\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Role</label>\r\n                                            <select\r\n                                                value={inviteRole}\r\n                                                onChange={(e) => setInviteRole(e.target.value as any)}\r\n                                                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none\"\r\n                                            >\r\n                                                <option value=\"teacher\">Teacher</option>\r\n                                                <option value=\"slt\">SLT</option>\r\n                                                <option value=\"admin\">Admin</option>\r\n                                            </select>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={isInviting}\r\n                                        className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 flex items-center gap-2\"\r\n                                    >\r\n                                        {isInviting ? <Loader2 className=\"animate-spin\" size={18} /> : <Mail size={18} />}\r\n                                        {isInviting ? 'Sending...' : 'Send Invitation'}\r\n                                    </button>\r\n                                </form>\r\n                            )}\r\n\r\n                            {isLoadingInvitations ? (\r\n                                <div className=\"flex justify-center py-12\">\r\n                                    <Loader2 className=\"animate-spin text-blue-600\" size={32} />\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"space-y-3\">\r\n                                    {invitations.map((invitation) => (\r\n                                        <div\r\n                                            key={invitation.id}\r\n                                            className=\"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200\"\r\n                                        >\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600\">\r\n                                                    <Clock size={24} />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"font-medium text-gray-900\">{invitation.email}</p>\r\n                                                    <p className=\"text-sm text-gray-500\">\r\n                                                        Invited {new Date(invitation.created_at).toLocaleDateString()}\r\n                                                        {invitation.invited_by_user && ` by ${invitation.invited_by_user.display_name || invitation.invited_by_user.email}`}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className={`flex items-center gap-2 px-3 py-1.5 rounded-lg border ${getRoleBadgeColor(invitation.role)}`}>\r\n                                                    {getRoleIcon(invitation.role)}\r\n                                                    <span className=\"text-sm font-medium\">{invitation.role.toUpperCase()}</span>\r\n                                                </div>\r\n                                                {isAdmin && (\r\n                                                    <>\r\n                                                        <button\r\n                                                            onClick={() => handleResendInvitation(invitation.id)}\r\n                                                            className=\"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                                                            title=\"Resend invitation\"\r\n                                                        >\r\n                                                            <RefreshCw size={18} />\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={() => handleCancelInvitation(invitation.id)}\r\n                                                            className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                            title=\"Cancel invitation\"\r\n                                                        >\r\n                                                            <Trash2 size={18} />\r\n                                                        </button>\r\n                                                    </>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                    {invitations.length === 0 && (\r\n                                        <p className=\"text-center text-gray-500 py-8\">No pending invitations.</p>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Bulk Import Tab */}\r\n                    {activeTab === 'import' && isAdmin && (\r\n                        <div className=\"space-y-6\">\r\n                            <div>\r\n                                <h2 className=\"text-lg font-semibold text-gray-900\">Bulk Import Users</h2>\r\n                                <p className=\"text-sm text-gray-500\">Upload a CSV file to invite multiple users at once</p>\r\n                            </div>\r\n\r\n                            {/* Step 1: Download Template */}\r\n                            <div className=\"bg-gray-50 rounded-lg p-6 border border-gray-200\">\r\n                                <div className=\"flex items-start gap-4\">\r\n                                    <div className=\"bg-blue-100 p-3 rounded-lg\">\r\n                                        <FileSpreadsheet className=\"text-blue-600\" size={24} />\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <h3 className=\"font-semibold text-gray-900\">Step 1: Download Template</h3>\r\n                                        <p className=\"text-sm text-gray-600 mt-1 mb-3\">\r\n                                            Download our CSV template, fill in your users' details, then upload it below.\r\n                                        </p>\r\n                                        <button\r\n                                            onClick={downloadTemplate}\r\n                                            className=\"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors\"\r\n                                        >\r\n                                            <Download size={18} />\r\n                                            Download CSV Template\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Step 2: Upload File */}\r\n                            <div className=\"bg-gray-50 rounded-lg p-6 border border-gray-200\">\r\n                                <div className=\"flex items-start gap-4\">\r\n                                    <div className=\"bg-green-100 p-3 rounded-lg\">\r\n                                        <Upload className=\"text-green-600\" size={24} />\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <h3 className=\"font-semibold text-gray-900\">Step 2: Upload Your File</h3>\r\n                                        <p className=\"text-sm text-gray-600 mt-1 mb-3\">\r\n                                            Select your completed CSV file to preview and import users.\r\n                                        </p>\r\n                                        <input\r\n                                            ref={fileInputRef}\r\n                                            type=\"file\"\r\n                                            accept=\".csv\"\r\n                                            onChange={handleFileUpload}\r\n                                            className=\"hidden\"\r\n                                        />\r\n                                        <button\r\n                                            onClick={() => fileInputRef.current?.click()}\r\n                                            disabled={isImporting}\r\n                                            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors disabled:opacity-50\"\r\n                                        >\r\n                                            {isImporting ? <Loader2 className=\"animate-spin\" size={18} /> : <Upload size={18} />}\r\n                                            {isImporting ? 'Processing...' : 'Select CSV File'}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Preview Results */}\r\n                            {(importPreview || importErrors.length > 0) && (\r\n                                <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n                                    <div className=\"p-4 border-b border-gray-200 bg-gray-50\">\r\n                                        <h3 className=\"font-semibold text-gray-900\">Import Preview</h3>\r\n                                        {importSummary && (\r\n                                            <div className=\"flex gap-4 mt-2 text-sm\">\r\n                                                <span className=\"text-green-600\">{importSummary.new} new users</span>\r\n                                                <span className=\"text-yellow-600\">{importSummary.existing} already exist</span>\r\n                                                <span className=\"text-red-600\">{importSummary.errors} errors</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {importErrors.length > 0 && (\r\n                                        <div className=\"p-4 bg-red-50 border-b border-red-200\">\r\n                                            <h4 className=\"font-medium text-red-700 mb-2\">Validation Errors</h4>\r\n                                            <ul className=\"text-sm text-red-600 space-y-1\">\r\n                                                {importErrors.map((err, idx) => (\r\n                                                    <li key={idx}>Row {err.row}: {err.message}</li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {importPreview && importPreview.length > 0 && (\r\n                                        <div className=\"divide-y divide-gray-200 max-h-64 overflow-y-auto\">\r\n                                            {importPreview.map((user, idx) => (\r\n                                                <div key={idx} className=\"p-3 flex items-center justify-between\">\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className={`h-8 w-8 rounded-full flex items-center justify-center text-white font-bold ${\r\n                                                            user.status === 'new' ? 'bg-green-500' : 'bg-yellow-500'\r\n                                                        }`}>\r\n                                                            {user.email[0].toUpperCase()}\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-gray-900\">{user.displayName}</p>\r\n                                                            <p className=\"text-sm text-gray-500\">{user.email}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <span className={`px-2 py-1 rounded text-xs font-medium ${getRoleBadgeColor(user.role)}`}>\r\n                                                            {user.role.toUpperCase()}\r\n                                                        </span>\r\n                                                        {user.status === 'exists' && (\r\n                                                            <span className=\"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs\">\r\n                                                                Already exists\r\n                                                            </span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {importPreview && importSummary?.new > 0 && importErrors.length === 0 && (\r\n                                        <div className=\"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3\">\r\n                                            <button\r\n                                                onClick={() => { setCsvContent(''); setImportPreview(null); setImportErrors([]); }}\r\n                                                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium\"\r\n                                            >\r\n                                                Cancel\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={handleConfirmImport}\r\n                                                disabled={isImporting}\r\n                                                className=\"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium disabled:opacity-50\"\r\n                                            >\r\n                                                {isImporting ? <Loader2 className=\"animate-spin\" size={18} /> : <Check size={18} />}\r\n                                                {isImporting ? 'Importing...' : `Import ${importSummary.new} Users`}\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Import Result */}\r\n                            {importResult && (\r\n                                <div className=\"bg-green-50 rounded-lg p-6 border border-green-200\">\r\n                                    <div className=\"flex items-center gap-3 mb-3\">\r\n                                        <Check className=\"text-green-600\" size={24} />\r\n                                        <h3 className=\"font-semibold text-green-900\">Import Complete!</h3>\r\n                                    </div>\r\n                                    <div className=\"text-sm text-green-700\">\r\n                                        <p>✓ {importResult.created} invitations created</p>\r\n                                        {importResult.skipped > 0 && <p>⊘ {importResult.skipped} skipped (already exist)</p>}\r\n                                        {importResult.errors?.length > 0 && (\r\n                                            <p className=\"text-red-600\">✗ {importResult.errors.length} failed</p>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { \r\n    MessageCircle, X, Send, Loader2, Sparkles, \r\n    BookOpen, GraduationCap, BarChart3, Target,\r\n    Lightbulb, ChevronDown, Minimize2, Maximize2\r\n} from 'lucide-react';\r\n\r\ninterface Message {\r\n    role: 'user' | 'assistant';\r\n    content: string;\r\n    timestamp: Date;\r\n}\r\n\r\ninterface EdChatbotProps {\r\n    context?: {\r\n        schoolName?: string;\r\n        currentView?: string;\r\n        selectedCategory?: string;\r\n        gaps?: Array<{ area: string; description: string }>;\r\n        recentFindings?: string;\r\n        topic?: string;\r\n    };\r\n}\r\n\r\nconst QUICK_PROMPTS = [\r\n    { icon: BookOpen, label: \"What is EEF?\", prompt: \"What is the EEF and how can it help my school?\" },\r\n    { icon: Target, label: \"Ofsted expects...\", prompt: \"What does Ofsted look for in Quality of Education?\" },\r\n    { icon: BarChart3, label: \"Reading gaps\", prompt: \"How can I improve reading outcomes using research?\" },\r\n    { icon: Lightbulb, label: \"High-impact strategies\", prompt: \"What are the highest impact teaching strategies?\" },\r\n];\r\n\r\nexport default function EdChatbot({ context }: EdChatbotProps) {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isMinimized, setIsMinimized] = useState(false);\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [input, setInput] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Auto-scroll to bottom\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    // Focus input when opened\r\n    useEffect(() => {\r\n        if (isOpen && !isMinimized) {\r\n            inputRef.current?.focus();\r\n        }\r\n    }, [isOpen, isMinimized]);\r\n\r\n    const sendMessage = async (messageText?: string) => {\r\n        const text = messageText || input.trim();\r\n        if (!text || isLoading) return;\r\n\r\n        const userMessage: Message = {\r\n            role: 'user',\r\n            content: text,\r\n            timestamp: new Date()\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInput('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/ed/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    messages: [...messages, userMessage].map(m => ({\r\n                        role: m.role,\r\n                        content: m.content\r\n                    })),\r\n                    context: {\r\n                        ...context,\r\n                        topic: text // Add the current query as topic for EEF matching\r\n                    }\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            const assistantMessage: Message = {\r\n                role: 'assistant',\r\n                content: data.response || \"I'm sorry, I couldn't process that. Could you try again?\",\r\n                timestamp: new Date()\r\n            };\r\n\r\n            setMessages(prev => [...prev, assistantMessage]);\r\n        } catch (error) {\r\n            console.error('Chat error:', error);\r\n            setMessages(prev => [...prev, {\r\n                role: 'assistant',\r\n                content: \"I'm having trouble connecting right now. Please try again in a moment.\",\r\n                timestamp: new Date()\r\n            }]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleKeyPress = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            sendMessage();\r\n        }\r\n    };\r\n\r\n    const formatMessage = (content: string) => {\r\n        // Convert markdown-style formatting to HTML\r\n        return content\r\n            .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n            .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\r\n            .replace(/^• /gm, '• ')\r\n            .replace(/^- /gm, '• ')\r\n            .replace(/\\n/g, '<br/>');\r\n    };\r\n\r\n    // Floating button when closed\r\n    if (!isOpen) {\r\n        return (\r\n            <button\r\n                onClick={() => setIsOpen(true)}\r\n                className=\"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-emerald-500 to-teal-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group z-50\"\r\n                title=\"Chat with Ed\"\r\n            >\r\n                <div className=\"relative\">\r\n                    <GraduationCap size={28} className=\"group-hover:scale-110 transition-transform\" />\r\n                    <Sparkles size={14} className=\"absolute -top-1 -right-1 text-yellow-300 animate-pulse\" />\r\n                </div>\r\n                <span className=\"absolute -top-2 -left-2 bg-yellow-400 text-gray-900 text-xs font-bold px-2 py-0.5 rounded-full\">\r\n                    Ed\r\n                </span>\r\n            </button>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`fixed bottom-6 right-6 z-50 transition-all duration-300 ${\r\n            isMinimized ? 'w-72' : 'w-96'\r\n        }`}>\r\n            {/* Chat Window */}\r\n            <div className={`bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden flex flex-col ${\r\n                isMinimized ? 'h-14' : 'h-[32rem]'\r\n            }`}>\r\n                {/* Header */}\r\n                <div \r\n                    className=\"bg-gradient-to-r from-emerald-500 to-teal-600 text-white p-4 flex items-center justify-between cursor-pointer\"\r\n                    onClick={() => isMinimized && setIsMinimized(false)}\r\n                >\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"relative\">\r\n                            <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center\">\r\n                                <GraduationCap size={22} />\r\n                            </div>\r\n                            <div className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border-2 border-white\"></div>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-lg\">Ed</h3>\r\n                            <p className=\"text-xs text-white/80\">Your AI School Improvement Partner</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <button \r\n                            onClick={(e) => { e.stopPropagation(); setIsMinimized(!isMinimized); }}\r\n                            className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors\"\r\n                        >\r\n                            {isMinimized ? <Maximize2 size={18} /> : <Minimize2 size={18} />}\r\n                        </button>\r\n                        <button \r\n                            onClick={(e) => { e.stopPropagation(); setIsOpen(false); }}\r\n                            className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors\"\r\n                        >\r\n                            <X size={18} />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {!isMinimized && (\r\n                    <>\r\n                        {/* Messages Area */}\r\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50\">\r\n                            {messages.length === 0 ? (\r\n                                // Welcome Screen\r\n                                <div className=\"text-center py-4\">\r\n                                    <div className=\"w-16 h-16 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                        <GraduationCap className=\"text-emerald-600\" size={32} />\r\n                                    </div>\r\n                                    <h4 className=\"font-bold text-gray-900 mb-2\">Hello! I'm Ed 👋</h4>\r\n                                    <p className=\"text-sm text-gray-600 mb-4\">\r\n                                        I can help you understand Ofsted expectations, explain EEF research, \r\n                                        and suggest evidence-based improvements.\r\n                                    </p>\r\n                                    <div className=\"grid grid-cols-2 gap-2\">\r\n                                        {QUICK_PROMPTS.map((prompt, idx) => (\r\n                                            <button\r\n                                                key={idx}\r\n                                                onClick={() => sendMessage(prompt.prompt)}\r\n                                                className=\"flex items-center gap-2 p-2 bg-white border border-gray-200 rounded-lg text-left text-sm hover:border-emerald-300 hover:bg-emerald-50 transition-colors\"\r\n                                            >\r\n                                                <prompt.icon size={16} className=\"text-emerald-600 flex-shrink-0\" />\r\n                                                <span className=\"text-gray-700\">{prompt.label}</span>\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                // Messages\r\n                                messages.map((message, idx) => (\r\n                                    <div\r\n                                        key={idx}\r\n                                        className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\r\n                                    >\r\n                                        <div className={`max-w-[85%] ${\r\n                                            message.role === 'user' \r\n                                                ? 'bg-emerald-500 text-white rounded-2xl rounded-br-md' \r\n                                                : 'bg-white text-gray-800 rounded-2xl rounded-bl-md shadow-sm border border-gray-100'\r\n                                        } px-4 py-3`}>\r\n                                            {message.role === 'assistant' && (\r\n                                                <div className=\"flex items-center gap-2 mb-2 pb-2 border-b border-gray-100\">\r\n                                                    <GraduationCap size={16} className=\"text-emerald-600\" />\r\n                                                    <span className=\"text-xs font-semibold text-emerald-600\">Ed</span>\r\n                                                </div>\r\n                                            )}\r\n                                            <div \r\n                                                className={`text-sm leading-relaxed ${message.role === 'assistant' ? 'prose prose-sm' : ''}`}\r\n                                                dangerouslySetInnerHTML={{ __html: formatMessage(message.content) }}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                            {isLoading && (\r\n                                <div className=\"flex justify-start\">\r\n                                    <div className=\"bg-white text-gray-800 rounded-2xl rounded-bl-md shadow-sm border border-gray-100 px-4 py-3\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <Loader2 size={16} className=\"animate-spin text-emerald-600\" />\r\n                                            <span className=\"text-sm text-gray-500\">Ed is thinking...</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <div ref={messagesEndRef} />\r\n                        </div>\r\n\r\n                        {/* Input Area */}\r\n                        <div className=\"p-4 bg-white border-t border-gray-200\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <input\r\n                                    ref={inputRef}\r\n                                    type=\"text\"\r\n                                    value={input}\r\n                                    onChange={(e) => setInput(e.target.value)}\r\n                                    onKeyPress={handleKeyPress}\r\n                                    placeholder=\"Ask Ed anything about school improvement...\"\r\n                                    className=\"flex-1 px-4 py-2.5 bg-gray-100 border-0 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:bg-white transition-all text-sm\"\r\n                                    disabled={isLoading}\r\n                                />\r\n                                <button\r\n                                    onClick={() => sendMessage()}\r\n                                    disabled={!input.trim() || isLoading}\r\n                                    className=\"p-2.5 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                                >\r\n                                    <Send size={18} />\r\n                                </button>\r\n                            </div>\r\n                            <p className=\"text-xs text-gray-400 mt-2 text-center\">\r\n                                Ed uses EEF research & Ofsted framework • Responses are AI-generated\r\n                            </p>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { LayoutDashboard, FileCheck, BookOpen, CheckSquare, Settings, FileText, Eye, FolderOpen, Mic, Search, FileSpreadsheet } from \"lucide-react\";\r\nimport OrigamiParticles from \"@/components/OrigamiParticles\";\r\nimport Logo from \"@/components/Logo\";\r\nimport SchoolgleAnimatedLogo from \"@/components/SchoolgleAnimatedLogo\";\r\nimport OfstedFrameworkView from \"@/components/OfstedFrameworkView\";\r\nimport SiamsFrameworkView from \"@/components/SiamsFrameworkView\";\r\nimport ActionsDashboard from \"@/components/ActionsDashboard\";\r\nimport SettingsView from \"@/components/SettingsView\";\r\nimport SearchBar from \"@/components/SearchBar\";\r\nimport SearchResults from \"@/components/SearchResults\";\r\nimport EdChatbot from \"@/components/EdChatbot\";\r\nimport SEFGenerator from \"@/components/SEFGenerator\";\r\nimport LessonObservationModal from \"@/components/LessonObservationModal\";\r\nimport LocalFolderScanner from \"@/components/LocalFolderScanner\";\r\nimport MondayDashboard from \"@/components/MondayDashboard\";\r\nimport VoiceObservation from \"@/components/VoiceObservation\";\r\nimport MockInspector from \"@/components/MockInspector\";\r\nimport ReportGenerator from \"@/components/ReportGenerator\";\r\n\r\ntype ActiveView = 'dashboard' | 'ofsted' | 'siams' | 'actions' | 'sef' | 'settings' | 'voice' | 'inspector' | 'reports';\r\n\r\ninterface SearchResult {\r\n    id: number;\r\n    content: string;\r\n    metadata: {\r\n        filename: string;\r\n        fileId?: string;\r\n        mimeType?: string;\r\n        provider?: string;\r\n    };\r\n    similarity: number;\r\n}\r\n\r\nexport default function DashboardPage() {\r\n    const { user, loading, signOut, organization } = useAuth();\r\n    const router = useRouter();\r\n    const [activeView, setActiveView] = useState<ActiveView>('dashboard');\r\n    const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [scanStatus, setScanStatus] = useState('');\r\n\r\n    // Ofsted Assessments State\r\n    const [ofstedAssessments, setOfstedAssessments] = useState<Record<string, any>>({});\r\n\r\n    // SIAMS Assessments State  \r\n    const [siamsAssessments, setSiamsAssessments] = useState<Record<string, any>>({});\r\n\r\n    // Observations State\r\n    const [observations, setObservations] = useState<any[]>([]);\r\n    const [showObservationModal, setShowObservationModal] = useState(false);\r\n\r\n    // Local Folder Scanner State\r\n    const [showLocalScanner, setShowLocalScanner] = useState(false);\r\n    const [scannedFiles, setScannedFiles] = useState<any[]>([]);\r\n    \r\n    // Actions State (aggregated from assessments)\r\n    const [actions, setActions] = useState<any[]>([]);\r\n\r\n    const handleSaveObservation = (observation: any) => {\r\n        setObservations(prev => [...prev, observation]);\r\n        console.log('Observation saved:', observation);\r\n    };\r\n\r\n    // Evidence analysis results (shared between scanner and framework)\r\n    const [evidenceMatches, setEvidenceMatches] = useState<any[]>([]);\r\n    const [evidenceByArea, setEvidenceByArea] = useState<Record<string, any[]>>({});\r\n\r\n    const handleLocalScanComplete = (files: any[]) => {\r\n        // REPLACE files instead of appending (fixes duplicate counting)\r\n        setScannedFiles(files);\r\n        console.log('Local scan complete:', files.length, 'files');\r\n    };\r\n\r\n    const handleAnalysisComplete = (analysis: any) => {\r\n        console.log('Evidence analysis complete:', analysis);\r\n        setEvidenceMatches(analysis.allMatches || []);\r\n        setEvidenceByArea(analysis.matchesByArea || {});\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!loading && !user) {\r\n            router.push(\"/login\");\r\n        }\r\n    }, [user, loading, router]);\r\n\r\n    if (loading || !user) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleSearch = async (query: string) => {\r\n        setSearchQuery(query);\r\n        setIsSearching(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/search', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ query, userId: user.uid }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setSearchResults(data.results || []);\r\n            } else {\r\n                console.error('Search failed');\r\n                setSearchResults([]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Search error:', error);\r\n            setSearchResults([]);\r\n        } finally {\r\n            setIsSearching(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white relative\">\r\n            {/* Origami Particle Background */}\r\n            <OrigamiParticles text=\"Improve\" opacity={0.25} shape=\"crane\" />\r\n            \r\n            <nav className=\"relative z-10 border-b border-gray-100 bg-white/95 backdrop-blur-sm overflow-visible\">\r\n                <div className=\"max-w-6xl mx-auto px-6\">\r\n                    <div className=\"flex justify-between h-24 items-center\">\r\n                        <div className=\"flex items-center relative\" style={{ minHeight: '96px' }}>\r\n                            {/* Container for logo text - center point for orbits */}\r\n                            <div className=\"relative z-10 flex items-center justify-center\" style={{ width: '140px', position: 'relative' }}>\r\n                                <span className=\"text-2xl font-semibold text-gray-900 whitespace-nowrap\">\r\n                                    Schoolgle\r\n                                </span>\r\n                                {/* Animated planets orbiting around the center of \"Schoolgle\" text */}\r\n                                <div \r\n                                    className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 overflow-visible pointer-events-none\" \r\n                                    style={{ \r\n                                        width: 300, \r\n                                        height: 300\r\n                                    }}\r\n                                >\r\n                                    <SchoolgleAnimatedLogo size={300} showText={false} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <span className=\"text-sm text-gray-500\">{user.email}</span>\r\n                            <div className=\"h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-700 font-medium text-sm\">\r\n                                {user.email?.[0].toUpperCase()}\r\n                            </div>\r\n                            <button\r\n                                onClick={() => signOut()}\r\n                                className=\"text-sm text-gray-500 hover:text-gray-900 font-medium transition-colors\"\r\n                            >\r\n                                Sign Out\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n\r\n            <main className=\"relative z-10 max-w-6xl mx-auto px-6 py-8\">\r\n                {/* Tab Navigation */}\r\n                <div className=\"mb-8 border-b border-gray-100\">\r\n                    <nav className=\"-mb-px flex space-x-6 overflow-x-auto\">\r\n                        <button\r\n                            onClick={() => setActiveView('dashboard')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'dashboard'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <LayoutDashboard size={16} />\r\n                            Dashboard\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveView('ofsted')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'ofsted'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <FileCheck size={16} />\r\n                            Ofsted Framework\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveView('siams')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'siams'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <BookOpen size={16} />\r\n                            SIAMS Framework\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveView('actions')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'actions'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <CheckSquare size={16} />\r\n                            Action Plan\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveView('voice')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'voice'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <Mic size={16} />\r\n                            Voice\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveView('reports')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'reports'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <FileSpreadsheet size={16} />\r\n                            Reports\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveView('inspector')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'inspector'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <Search size={16} />\r\n                            Mock Inspector\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveView('settings')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors whitespace-nowrap ${activeView === 'settings'\r\n                                ? 'border-gray-900 text-gray-900'\r\n                                : 'border-transparent text-gray-400 hover:text-gray-600'\r\n                                }`}\r\n                        >\r\n                            <Settings size={16} />\r\n                            Settings\r\n                        </button>\r\n                    </nav>\r\n                </div>\r\n\r\n                {/* Dashboard View */}\r\n                {activeView === 'dashboard' && (\r\n                    <MondayDashboard\r\n                        organizationId={organization?.id}\r\n                        ofstedAssessments={ofstedAssessments}\r\n                        siamsAssessments={siamsAssessments}\r\n                        actions={Object.values({ ...ofstedAssessments, ...siamsAssessments })\r\n                            .flatMap((assessment: any) => assessment?.actions || [])}\r\n                        evidenceCount={evidenceMatches.length}\r\n                        isChurchSchool={true}\r\n                        onNavigate={(view) => setActiveView(view as ActiveView)}\r\n                    />\r\n                )}\r\n\r\n                {/* Ofsted Framework View */}\r\n                {activeView === 'ofsted' && (\r\n                    <OfstedFrameworkView\r\n                        assessments={ofstedAssessments}\r\n                        setAssessments={setOfstedAssessments}\r\n                        localEvidence={evidenceByArea}\r\n                    />\r\n                )}\r\n\r\n                {/* SIAMS Framework View */}\r\n                {activeView === 'siams' && (\r\n                    <SiamsFrameworkView\r\n                        assessments={siamsAssessments}\r\n                        setAssessments={setSiamsAssessments}\r\n                        localEvidence={evidenceByArea}\r\n                    />\r\n                )}\r\n\r\n                {/* Actions Dashboard View */}\r\n                {activeView === 'actions' && (\r\n                    <ActionsDashboard\r\n                        actions={\r\n                            Object.values({ ...ofstedAssessments, ...siamsAssessments })\r\n                                .flatMap((assessment: any) => assessment?.actions || [])\r\n                        }\r\n                        onUpdateAction={(updatedAction) => {\r\n                            console.log('Action updated:', updatedAction);\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* SEF View */}\r\n                {activeView === 'sef' && (\r\n                    <div className=\"space-y-6\">\r\n                        {/* Quick Actions */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <h2 className=\"text-2xl font-bold text-gray-900\">Self-Evaluation Form</h2>\r\n                                <p className=\"text-gray-600\">Generate inspection-ready documentation</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setShowObservationModal(true)}\r\n                                className=\"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 flex items-center gap-2\"\r\n                            >\r\n                                <Eye size={18} />\r\n                                New Observation\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Recent Observations */}\r\n                        {observations.length > 0 && (\r\n                            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\r\n                                <h3 className=\"font-semibold text-gray-900 mb-3\">Recent Observations ({observations.length})</h3>\r\n                                <div className=\"space-y-2\">\r\n                                    {observations.slice(0, 5).map((obs, i) => (\r\n                                        <div key={i} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                                            <div>\r\n                                                <span className=\"font-medium text-gray-900\">{obs.teacher}</span>\r\n                                                <span className=\"text-gray-500 mx-2\">•</span>\r\n                                                <span className=\"text-gray-600\">{obs.subject}</span>\r\n                                                <span className=\"text-gray-500 mx-2\">•</span>\r\n                                                <span className=\"text-gray-500 text-sm\">{obs.date}</span>\r\n                                            </div>\r\n                                            <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                                                obs.overallJudgement === 'outstanding' ? 'bg-green-100 text-green-700' :\r\n                                                obs.overallJudgement === 'good' ? 'bg-blue-100 text-blue-700' :\r\n                                                obs.overallJudgement === 'requires_improvement' ? 'bg-yellow-100 text-yellow-700' :\r\n                                                'bg-red-100 text-red-700'\r\n                                            }`}>\r\n                                                {obs.overallJudgement?.replace('_', ' ')}\r\n                                            </span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* SEF Generator */}\r\n                        <SEFGenerator\r\n                            schoolName={organization?.name || 'Your School'}\r\n                            assessments={ofstedAssessments}\r\n                            actions={Object.values({ ...ofstedAssessments, ...siamsAssessments })\r\n                                .flatMap((assessment: any) => assessment?.actions || [])}\r\n                            observations={observations}\r\n                        />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Voice-to-Observation View */}\r\n                {activeView === 'voice' && (\r\n                    <VoiceObservation\r\n                        onSaveObservation={(observation) => {\r\n                            setObservations(prev => [...prev, observation]);\r\n                            console.log('Voice observation saved:', observation);\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* One-Click Reports View */}\r\n                {activeView === 'reports' && (\r\n                    <ReportGenerator\r\n                        schoolData={{\r\n                            name: organization?.name || 'Your School',\r\n                            academicYear: '2024-2025',\r\n                            isChurchSchool: true\r\n                        }}\r\n                        ofstedAssessments={ofstedAssessments}\r\n                        siamsAssessments={siamsAssessments}\r\n                        actions={Object.values({ ...ofstedAssessments, ...siamsAssessments })\r\n                            .flatMap((assessment: any) => assessment?.actions || [])}\r\n                        evidenceMatches={evidenceMatches}\r\n                    />\r\n                )}\r\n\r\n                {/* Mock Inspector View */}\r\n                {activeView === 'inspector' && (\r\n                    <MockInspector\r\n                        schoolData={{\r\n                            name: organization?.name || 'Your School',\r\n                            phase: 'Primary'\r\n                        }}\r\n                        ofstedAssessments={ofstedAssessments}\r\n                        actions={Object.values({ ...ofstedAssessments, ...siamsAssessments })\r\n                            .flatMap((assessment: any) => assessment?.actions || [])}\r\n                        evidenceCount={evidenceMatches.length}\r\n                    />\r\n                )}\r\n\r\n                {/* Settings View */}\r\n                {activeView === 'settings' && (\r\n                    <SettingsView />\r\n                )}\r\n            </main>\r\n\r\n            {/* Lesson Observation Modal */}\r\n            <LessonObservationModal\r\n                isOpen={showObservationModal}\r\n                onClose={() => setShowObservationModal(false)}\r\n                onSave={handleSaveObservation}\r\n                currentUser={{ id: user?.uid || '', name: user?.displayName || user?.email || '' }}\r\n            />\r\n\r\n            {/* Local Folder Scanner Modal */}\r\n            {showLocalScanner && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"max-w-2xl w-full\">\r\n                        <LocalFolderScanner\r\n                            onScanComplete={handleLocalScanComplete}\r\n                            onAnalysisComplete={handleAnalysisComplete}\r\n                            onClose={() => setShowLocalScanner(false)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Ed Chatbot - Always visible */}\r\n            <EdChatbot \r\n                context={{\r\n                    schoolName: organization?.name,\r\n                    currentView: activeView,\r\n                    topic: activeView === 'ofsted' ? 'ofsted framework inspection' : \r\n                           activeView === 'siams' ? 'siams church school inspection' :\r\n                           activeView === 'actions' ? 'school improvement actions' : undefined\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { \r\n    FileText, Download, RefreshCw, CheckCircle, AlertTriangle,\r\n    TrendingUp, BookOpen, Users, Shield, Eye, Calendar,\r\n    ChevronDown, ChevronRight, Sparkles, GraduationCap, Copy, Printer\r\n} from 'lucide-react';\r\n\r\ninterface SEFSection {\r\n    id: string;\r\n    title: string;\r\n    ofstedArea: string;\r\n    currentGrade: 'outstanding' | 'good' | 'requires_improvement' | 'inadequate' | 'not_assessed';\r\n    narrative: string;\r\n    strengths: string[];\r\n    areasForDevelopment: string[];\r\n    evidence: string[];\r\n    actions: string[];\r\n    impact: string;\r\n    nextSteps: string;\r\n}\r\n\r\ninterface SEFData {\r\n    schoolName: string;\r\n    lastUpdated: string;\r\n    overallEffectiveness: string;\r\n    sections: SEFSection[];\r\n}\r\n\r\ninterface SEFGeneratorProps {\r\n    schoolName?: string;\r\n    assessments?: Record<string, any>;\r\n    actions?: any[];\r\n    observations?: any[];\r\n    onClose?: () => void;\r\n}\r\n\r\nconst OFSTED_SECTIONS = [\r\n    {\r\n        id: 'quality-of-education',\r\n        title: 'Quality of Education',\r\n        ofstedArea: 'Quality of Education',\r\n        icon: BookOpen,\r\n        color: 'rose',\r\n        subSections: ['Intent', 'Implementation', 'Impact']\r\n    },\r\n    {\r\n        id: 'behaviour-attitudes',\r\n        title: 'Behaviour and Attitudes',\r\n        ofstedArea: 'Behaviour and Attitudes',\r\n        icon: Users,\r\n        color: 'teal'\r\n    },\r\n    {\r\n        id: 'personal-development',\r\n        title: 'Personal Development',\r\n        ofstedArea: 'Personal Development',\r\n        icon: TrendingUp,\r\n        color: 'orange'\r\n    },\r\n    {\r\n        id: 'leadership-management',\r\n        title: 'Leadership and Management',\r\n        ofstedArea: 'Leadership and Management',\r\n        icon: Shield,\r\n        color: 'violet'\r\n    }\r\n];\r\n\r\nconst GRADE_COLORS = {\r\n    outstanding: 'bg-green-100 text-green-800 border-green-300',\r\n    good: 'bg-blue-100 text-blue-800 border-blue-300',\r\n    requires_improvement: 'bg-yellow-100 text-yellow-800 border-yellow-300',\r\n    inadequate: 'bg-red-100 text-red-800 border-red-300',\r\n    not_assessed: 'bg-gray-100 text-gray-600 border-gray-300'\r\n};\r\n\r\nexport default function SEFGenerator({\r\n    schoolName = 'Your School',\r\n    assessments = {},\r\n    actions = [],\r\n    observations = [],\r\n    onClose\r\n}: SEFGeneratorProps) {\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n    const [generatedSEF, setGeneratedSEF] = useState<SEFData | null>(null);\r\n    const [expandedSections, setExpandedSections] = useState<Set<string>>(new Set(['quality-of-education']));\r\n    const [activeView, setActiveView] = useState<'generate' | 'preview' | 'export'>('generate');\r\n\r\n    const toggleSection = (id: string) => {\r\n        const newExpanded = new Set(expandedSections);\r\n        if (newExpanded.has(id)) {\r\n            newExpanded.delete(id);\r\n        } else {\r\n            newExpanded.add(id);\r\n        }\r\n        setExpandedSections(newExpanded);\r\n    };\r\n\r\n    const generateSEF = async () => {\r\n        setIsGenerating(true);\r\n        \r\n        // Simulate AI generation\r\n        await new Promise(resolve => setTimeout(resolve, 2000));\r\n        \r\n        const sections: SEFSection[] = OFSTED_SECTIONS.map(section => {\r\n            // Calculate grade based on assessments\r\n            let grade: SEFSection['currentGrade'] = 'not_assessed';\r\n            const relatedAssessments = Object.entries(assessments)\r\n                .filter(([key]) => key.toLowerCase().includes(section.id.split('-')[0]));\r\n            \r\n            if (relatedAssessments.length > 0) {\r\n                const avgScore = relatedAssessments.reduce((acc, [_, v]) => {\r\n                    const score = v.schoolRating === 'Outstanding' ? 4 :\r\n                                  v.schoolRating === 'Good' ? 3 :\r\n                                  v.schoolRating === 'Requires Improvement' ? 2 : 1;\r\n                    return acc + score;\r\n                }, 0) / relatedAssessments.length;\r\n                \r\n                grade = avgScore >= 3.5 ? 'outstanding' :\r\n                        avgScore >= 2.5 ? 'good' :\r\n                        avgScore >= 1.5 ? 'requires_improvement' : 'inadequate';\r\n            }\r\n            \r\n            return {\r\n                id: section.id,\r\n                title: section.title,\r\n                ofstedArea: section.ofstedArea,\r\n                currentGrade: grade,\r\n                narrative: generateNarrative(section.id, grade),\r\n                strengths: generateStrengths(section.id),\r\n                areasForDevelopment: generateAFD(section.id),\r\n                evidence: generateEvidenceList(section.id),\r\n                actions: generateActionsList(section.id),\r\n                impact: generateImpact(section.id),\r\n                nextSteps: generateNextSteps(section.id)\r\n            };\r\n        });\r\n        \r\n        setGeneratedSEF({\r\n            schoolName,\r\n            lastUpdated: new Date().toISOString(),\r\n            overallEffectiveness: calculateOverall(sections),\r\n            sections\r\n        });\r\n        \r\n        setIsGenerating(false);\r\n        setActiveView('preview');\r\n    };\r\n\r\n    const generateNarrative = (sectionId: string, grade: string): string => {\r\n        const narratives: Record<string, string> = {\r\n            'quality-of-education': `At ${schoolName}, we have developed a curriculum that is ambitious for all pupils, including those with SEND. Our curriculum is carefully sequenced to build knowledge progressively, ensuring pupils develop deep understanding over time.\\n\\nTeachers demonstrate strong subject knowledge and use effective pedagogical approaches. We have invested in validated schemes (e.g., Little Wandle for phonics, White Rose for mathematics) and ensure these are implemented with fidelity.\\n\\nPupil outcomes demonstrate that the majority of pupils, including disadvantaged pupils and those with SEND, are achieving well. Our reading outcomes show sustained improvement, with phonics pass rates above national average.`,\r\n            'behaviour-attitudes': `Behaviour at ${schoolName} is consistently good. We have high expectations which are clearly communicated and consistently applied. Pupils understand our behaviour expectations and the vast majority meet them.\\n\\nAttendance is a priority. We have robust systems to monitor and improve attendance, with particular focus on persistent absence and vulnerable groups. Our attendance figures are in line with or above national averages.\\n\\nPupils demonstrate positive attitudes to learning. They are engaged, motivated, and take pride in their work.`,\r\n            'personal-development': `${schoolName} provides a rich and varied curriculum that develops pupils' character, resilience, and fundamental British values. Our PSHE curriculum is comprehensive and age-appropriate.\\n\\nWe provide extensive enrichment opportunities including clubs, visits, and visitors. All pupils have access to these opportunities regardless of background.\\n\\nPupils are well-prepared for life in modern Britain. They understand and respect diversity, and are equipped to be responsible citizens.`,\r\n            'leadership-management': `Leaders at ${schoolName} have a clear vision for the school and high ambitions for all pupils. We have developed a culture of continuous improvement underpinned by evidence-based practice.\\n\\nGovernance is strong, with governors providing appropriate support and challenge. Staff workload and wellbeing are priorities, and we have taken effective action to address these.\\n\\nSafeguarding is effective. All staff understand their responsibilities, and appropriate policies and procedures are in place.`\r\n        };\r\n        return narratives[sectionId] || 'Narrative to be completed.';\r\n    };\r\n\r\n    const generateStrengths = (sectionId: string): string[] => {\r\n        const strengths: Record<string, string[]> = {\r\n            'quality-of-education': [\r\n                'Curriculum is ambitious and well-sequenced',\r\n                'Validated schemes implemented with fidelity',\r\n                'Strong phonics outcomes above national average',\r\n                'Teachers demonstrate secure subject knowledge',\r\n                'Effective use of assessment to identify gaps'\r\n            ],\r\n            'behaviour-attitudes': [\r\n                'High expectations consistently applied',\r\n                'Attendance above national average',\r\n                'Positive learning culture embedded',\r\n                'Low exclusion rates',\r\n                'Pupils demonstrate respect and tolerance'\r\n            ],\r\n            'personal-development': [\r\n                'Rich enrichment programme accessible to all',\r\n                'PSHE curriculum is comprehensive',\r\n                'British values explicitly taught',\r\n                'Pupils understand diversity and inclusion',\r\n                'Strong careers guidance (where applicable)'\r\n            ],\r\n            'leadership-management': [\r\n                'Clear vision and high ambitions',\r\n                'Evidence-based approach to improvement',\r\n                'Effective governance',\r\n                'Staff wellbeing prioritised',\r\n                'Safeguarding is effective'\r\n            ]\r\n        };\r\n        return strengths[sectionId] || [];\r\n    };\r\n\r\n    const generateAFD = (sectionId: string): string[] => {\r\n        const afd: Record<string, string[]> = {\r\n            'quality-of-education': [\r\n                'Continue to embed new curriculum in foundation subjects',\r\n                'Further develop adaptive teaching for SEND pupils',\r\n                'Improve consistency of feedback practice'\r\n            ],\r\n            'behaviour-attitudes': [\r\n                'Reduce persistent absence for disadvantaged pupils',\r\n                'Further embed restorative approaches'\r\n            ],\r\n            'personal-development': [\r\n                'Extend enrichment offer for all year groups',\r\n                'Develop pupil leadership opportunities'\r\n            ],\r\n            'leadership-management': [\r\n                'Continue to develop middle leader capacity',\r\n                'Further embed research-informed practice'\r\n            ]\r\n        };\r\n        return afd[sectionId] || [];\r\n    };\r\n\r\n    const generateEvidenceList = (sectionId: string): string[] => {\r\n        return [\r\n            'Curriculum documentation and long-term plans',\r\n            'Lesson observations and learning walks',\r\n            'Pupil work scrutiny',\r\n            'Assessment data and progress tracking',\r\n            'Pupil and parent voice surveys',\r\n            'Staff CPD records',\r\n            'Governor meeting minutes'\r\n        ];\r\n    };\r\n\r\n    const generateActionsList = (sectionId: string): string[] => {\r\n        const relevantActions = actions\r\n            .filter(a => a.category?.toLowerCase().includes(sectionId.split('-')[0]))\r\n            .map(a => a.title || a.description)\r\n            .slice(0, 5);\r\n        \r\n        return relevantActions.length > 0 ? relevantActions : [\r\n            'Actions linked from School Improvement Plan'\r\n        ];\r\n    };\r\n\r\n    const generateImpact = (sectionId: string): string => {\r\n        return 'Impact data shows improvement over time. Comparison with previous years demonstrates progress. [Link to data dashboard]';\r\n    };\r\n\r\n    const generateNextSteps = (sectionId: string): string => {\r\n        return 'Continue to monitor through half-termly reviews. Adjust provision based on ongoing assessment data.';\r\n    };\r\n\r\n    const calculateOverall = (sections: SEFSection[]): string => {\r\n        const grades = sections.map(s => \r\n            s.currentGrade === 'outstanding' ? 4 :\r\n            s.currentGrade === 'good' ? 3 :\r\n            s.currentGrade === 'requires_improvement' ? 2 : 1\r\n        );\r\n        const avg = grades.reduce((a, b) => a + b, 0) / grades.length;\r\n        \r\n        return avg >= 3.5 ? 'Outstanding' :\r\n               avg >= 2.5 ? 'Good' :\r\n               avg >= 1.5 ? 'Requires Improvement' : 'Inadequate';\r\n    };\r\n\r\n    const exportToWord = () => {\r\n        // Create document content\r\n        const content = generatedSEF ? `\r\nSELF-EVALUATION FORM\r\n${generatedSEF.schoolName}\r\nLast Updated: ${new Date(generatedSEF.lastUpdated).toLocaleDateString()}\r\nOverall Effectiveness: ${generatedSEF.overallEffectiveness}\r\n\r\n${generatedSEF.sections.map(section => `\r\n${'='.repeat(50)}\r\n${section.title.toUpperCase()}\r\nCurrent Grade: ${section.currentGrade.replace('_', ' ').toUpperCase()}\r\n${'='.repeat(50)}\r\n\r\nNARRATIVE:\r\n${section.narrative}\r\n\r\nSTRENGTHS:\r\n${section.strengths.map(s => `• ${s}`).join('\\n')}\r\n\r\nAREAS FOR DEVELOPMENT:\r\n${section.areasForDevelopment.map(a => `• ${a}`).join('\\n')}\r\n\r\nEVIDENCE:\r\n${section.evidence.map(e => `• ${e}`).join('\\n')}\r\n\r\nLINKED ACTIONS:\r\n${section.actions.map(a => `• ${a}`).join('\\n')}\r\n\r\nIMPACT:\r\n${section.impact}\r\n\r\nNEXT STEPS:\r\n${section.nextSteps}\r\n`).join('\\n\\n')}\r\n        ` : '';\r\n        \r\n        // Create blob and download\r\n        const blob = new Blob([content], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `SEF_${schoolName.replace(/\\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const copyToClipboard = async () => {\r\n        if (!generatedSEF) return;\r\n        \r\n        const content = generatedSEF.sections.map(section => \r\n            `## ${section.title}\\n\\n${section.narrative}\\n\\n**Strengths:**\\n${section.strengths.map(s => `- ${s}`).join('\\n')}`\r\n        ).join('\\n\\n---\\n\\n');\r\n        \r\n        await navigator.clipboard.writeText(content);\r\n        alert('SEF content copied to clipboard!');\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-700 text-white p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                            <FileText size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold\">SEF Generator</h2>\r\n                            <p className=\"text-indigo-200 text-sm\">Auto-generate your Self-Evaluation Form</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Sparkles size={20} className=\"text-yellow-300\" />\r\n                        <span className=\"text-sm\">AI-Powered</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Navigation */}\r\n            <div className=\"border-b border-gray-200 bg-gray-50\">\r\n                <nav className=\"flex\">\r\n                    {[\r\n                        { id: 'generate', label: 'Generate', icon: Sparkles },\r\n                        { id: 'preview', label: 'Preview', icon: Eye },\r\n                        { id: 'export', label: 'Export', icon: Download },\r\n                    ].map(tab => (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveView(tab.id as any)}\r\n                            className={`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 border-b-2 ${\r\n                                activeView === tab.id\r\n                                    ? 'border-indigo-500 text-indigo-600 bg-white'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                            }`}\r\n                        >\r\n                            <tab.icon size={16} />\r\n                            {tab.label}\r\n                        </button>\r\n                    ))}\r\n                </nav>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-6\">\r\n                {/* Generate Tab */}\r\n                {activeView === 'generate' && (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200\">\r\n                            <div className=\"flex items-start gap-3\">\r\n                                <GraduationCap className=\"text-blue-600 mt-0.5\" size={20} />\r\n                                <div>\r\n                                    <h4 className=\"font-medium text-blue-800\">Ed will generate your SEF</h4>\r\n                                    <p className=\"text-sm text-blue-700 mt-1\">\r\n                                        Based on your framework assessments, evidence, actions, and lesson observations, \r\n                                        Ed will create a comprehensive SEF document ready for inspection.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Data Summary */}\r\n                        <div className=\"grid grid-cols-3 gap-4\">\r\n                            <div className=\"bg-gray-50 rounded-lg p-4 text-center\">\r\n                                <div className=\"text-2xl font-bold text-gray-900\">\r\n                                    {Object.keys(assessments).length}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-600\">Assessments</div>\r\n                            </div>\r\n                            <div className=\"bg-gray-50 rounded-lg p-4 text-center\">\r\n                                <div className=\"text-2xl font-bold text-gray-900\">\r\n                                    {actions.length}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-600\">Actions</div>\r\n                            </div>\r\n                            <div className=\"bg-gray-50 rounded-lg p-4 text-center\">\r\n                                <div className=\"text-2xl font-bold text-gray-900\">\r\n                                    {observations.length}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-600\">Observations</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Generate Button */}\r\n                        <button\r\n                            onClick={generateSEF}\r\n                            disabled={isGenerating}\r\n                            className=\"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-medium hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {isGenerating ? (\r\n                                <>\r\n                                    <RefreshCw size={20} className=\"animate-spin\" />\r\n                                    Generating SEF...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Sparkles size={20} />\r\n                                    Generate SEF Document\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Preview Tab */}\r\n                {activeView === 'preview' && generatedSEF && (\r\n                    <div className=\"space-y-4\">\r\n                        {/* Overall Grade */}\r\n                        <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <h3 className=\"text-lg font-bold text-gray-900\">{generatedSEF.schoolName}</h3>\r\n                                    <p className=\"text-sm text-gray-600\">\r\n                                        Last updated: {new Date(generatedSEF.lastUpdated).toLocaleDateString()}\r\n                                    </p>\r\n                                </div>\r\n                                <div className={`px-4 py-2 rounded-lg font-bold text-lg ${\r\n                                    generatedSEF.overallEffectiveness === 'Outstanding' ? 'bg-green-100 text-green-800' :\r\n                                    generatedSEF.overallEffectiveness === 'Good' ? 'bg-blue-100 text-blue-800' :\r\n                                    'bg-yellow-100 text-yellow-800'\r\n                                }`}>\r\n                                    {generatedSEF.overallEffectiveness}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Sections */}\r\n                        <div className=\"space-y-3\">\r\n                            {generatedSEF.sections.map(section => (\r\n                                <div key={section.id} className=\"border border-gray-200 rounded-lg overflow-hidden\">\r\n                                    <button\r\n                                        onClick={() => toggleSection(section.id)}\r\n                                        className=\"w-full p-4 bg-gray-50 flex items-center justify-between hover:bg-gray-100\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            {expandedSections.has(section.id) ? (\r\n                                                <ChevronDown size={20} className=\"text-gray-400\" />\r\n                                            ) : (\r\n                                                <ChevronRight size={20} className=\"text-gray-400\" />\r\n                                            )}\r\n                                            <span className=\"font-medium text-gray-900\">{section.title}</span>\r\n                                        </div>\r\n                                        <span className={`px-3 py-1 rounded-full text-sm font-medium border ${GRADE_COLORS[section.currentGrade]}`}>\r\n                                            {section.currentGrade.replace('_', ' ')}\r\n                                        </span>\r\n                                    </button>\r\n                                    \r\n                                    {expandedSections.has(section.id) && (\r\n                                        <div className=\"p-4 space-y-4\">\r\n                                            {/* Narrative */}\r\n                                            <div>\r\n                                                <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Narrative</h5>\r\n                                                <p className=\"text-sm text-gray-600 whitespace-pre-line bg-gray-50 p-3 rounded-lg\">\r\n                                                    {section.narrative}\r\n                                                </p>\r\n                                            </div>\r\n\r\n                                            {/* Strengths */}\r\n                                            <div>\r\n                                                <h5 className=\"text-sm font-medium text-green-700 mb-2 flex items-center gap-1\">\r\n                                                    <CheckCircle size={14} />\r\n                                                    Strengths\r\n                                                </h5>\r\n                                                <ul className=\"text-sm text-gray-600 space-y-1\">\r\n                                                    {section.strengths.map((s, i) => (\r\n                                                        <li key={i} className=\"flex items-start gap-2\">\r\n                                                            <span className=\"text-green-500 mt-1\">•</span>\r\n                                                            {s}\r\n                                                        </li>\r\n                                                    ))}\r\n                                                </ul>\r\n                                            </div>\r\n\r\n                                            {/* AFD */}\r\n                                            <div>\r\n                                                <h5 className=\"text-sm font-medium text-yellow-700 mb-2 flex items-center gap-1\">\r\n                                                    <TrendingUp size={14} />\r\n                                                    Areas for Development\r\n                                                </h5>\r\n                                                <ul className=\"text-sm text-gray-600 space-y-1\">\r\n                                                    {section.areasForDevelopment.map((a, i) => (\r\n                                                        <li key={i} className=\"flex items-start gap-2\">\r\n                                                            <span className=\"text-yellow-500 mt-1\">•</span>\r\n                                                            {a}\r\n                                                        </li>\r\n                                                    ))}\r\n                                                </ul>\r\n                                            </div>\r\n\r\n                                            {/* Evidence */}\r\n                                            <div>\r\n                                                <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Evidence Sources</h5>\r\n                                                <div className=\"flex flex-wrap gap-2\">\r\n                                                    {section.evidence.map((e, i) => (\r\n                                                        <span key={i} className=\"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded\">\r\n                                                            {e}\r\n                                                        </span>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Export Tab */}\r\n                {activeView === 'export' && generatedSEF && (\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                            <h4 className=\"font-medium text-gray-900 mb-2\">Export Options</h4>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                Download your SEF in various formats for sharing with governors, inspectors, or for your records.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <button\r\n                                onClick={exportToWord}\r\n                                className=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 flex flex-col items-center gap-2\"\r\n                            >\r\n                                <Download size={24} className=\"text-blue-600\" />\r\n                                <span className=\"font-medium text-gray-900\">Download as Text</span>\r\n                                <span className=\"text-xs text-gray-500\">Plain text format</span>\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={copyToClipboard}\r\n                                className=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 flex flex-col items-center gap-2\"\r\n                            >\r\n                                <Copy size={24} className=\"text-green-600\" />\r\n                                <span className=\"font-medium text-gray-900\">Copy to Clipboard</span>\r\n                                <span className=\"text-xs text-gray-500\">Markdown format</span>\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => window.print()}\r\n                                className=\"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 flex flex-col items-center gap-2\"\r\n                            >\r\n                                <Printer size={24} className=\"text-purple-600\" />\r\n                                <span className=\"font-medium text-gray-900\">Print</span>\r\n                                <span className=\"text-xs text-gray-500\">Print or save as PDF</span>\r\n                            </button>\r\n\r\n                            <button\r\n                                disabled\r\n                                className=\"p-4 border border-gray-200 rounded-lg opacity-50 cursor-not-allowed flex flex-col items-center gap-2\"\r\n                            >\r\n                                <FileText size={24} className=\"text-gray-400\" />\r\n                                <span className=\"font-medium text-gray-900\">Word Document</span>\r\n                                <span className=\"text-xs text-gray-500\">Coming soon</span>\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Inspector Tips */}\r\n                        <div className=\"bg-purple-50 rounded-lg p-4 border border-purple-200\">\r\n                            <h4 className=\"font-medium text-purple-800 mb-2 flex items-center gap-2\">\r\n                                <GraduationCap size={18} />\r\n                                Ed's Inspector Tips\r\n                            </h4>\r\n                            <ul className=\"text-sm text-purple-700 space-y-1\">\r\n                                <li>• Keep your SEF concise - inspectors prefer quality over quantity</li>\r\n                                <li>• Update regularly (at least termly) to show you know your school</li>\r\n                                <li>• Link evidence directly - don't make inspectors search</li>\r\n                                <li>• Be honest about AFDs - inspectors respect self-awareness</li>\r\n                                <li>• Show impact, not just intent - use data and examples</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* No SEF Yet */}\r\n                {activeView !== 'generate' && !generatedSEF && (\r\n                    <div className=\"text-center py-12\">\r\n                        <FileText size={48} className=\"mx-auto text-gray-300 mb-4\" />\r\n                        <p className=\"text-gray-500\">Generate your SEF first</p>\r\n                        <button\r\n                            onClick={() => setActiveView('generate')}\r\n                            className=\"mt-4 text-indigo-600 font-medium\"\r\n                        >\r\n                            Go to Generate →\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { \r\n    X, Eye, Save, Clock, User, BookOpen, Target, \r\n    CheckCircle, AlertTriangle, TrendingUp, MessageSquare,\r\n    Star, ThumbsUp, ThumbsDown, Lightbulb, GraduationCap\r\n} from 'lucide-react';\r\n\r\ninterface ObservationData {\r\n    id?: string;\r\n    date: string;\r\n    teacher: string;\r\n    subject: string;\r\n    yearGroup: string;\r\n    focusArea: string;\r\n    duration: number;\r\n    \r\n    // Ratings (1-4 scale matching Ofsted)\r\n    ratings: {\r\n        subjectKnowledge: number;\r\n        pedagogicalSkills: number;\r\n        adaptiveTeaching: number;\r\n        assessment: number;\r\n        behaviour: number;\r\n        engagement: number;\r\n    };\r\n    \r\n    // Qualitative\r\n    strengths: string;\r\n    areasForDevelopment: string;\r\n    nextSteps: string;\r\n    \r\n    // Teaching quality flags\r\n    isSchemeFollowed: boolean;\r\n    isCPDNeeded: boolean;\r\n    isSupportPlanNeeded: boolean;\r\n    \r\n    // Overall\r\n    overallJudgement: 'outstanding' | 'good' | 'requires_improvement' | 'inadequate';\r\n    \r\n    // Meta\r\n    observerId: string;\r\n    observerName: string;\r\n    linkedFrameworkArea?: string;\r\n}\r\n\r\ninterface LessonObservationModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSave: (observation: ObservationData) => void;\r\n    initialData?: Partial<ObservationData>;\r\n    currentUser?: { id: string; name: string };\r\n}\r\n\r\nconst FOCUS_AREAS = [\r\n    'Quality of Education - Intent',\r\n    'Quality of Education - Implementation', \r\n    'Quality of Education - Impact',\r\n    'Reading/Phonics',\r\n    'Mathematics',\r\n    'Behaviour Management',\r\n    'SEND Provision',\r\n    'Assessment for Learning',\r\n    'Adaptive Teaching',\r\n    'Subject Knowledge',\r\n];\r\n\r\nconst SUBJECTS = [\r\n    'English', 'Mathematics', 'Science', 'History', 'Geography',\r\n    'Art', 'Music', 'PE', 'Computing', 'RE', 'PSHE', 'MFL',\r\n    'Phonics', 'Reading', 'Writing', 'Foundation Subjects'\r\n];\r\n\r\nconst YEAR_GROUPS = [\r\n    'Nursery', 'Reception', 'Year 1', 'Year 2', 'Year 3',\r\n    'Year 4', 'Year 5', 'Year 6'\r\n];\r\n\r\nconst RATING_LABELS = {\r\n    1: { label: 'Inadequate', color: 'bg-red-500', description: 'Significant concerns' },\r\n    2: { label: 'Requires Improvement', color: 'bg-yellow-500', description: 'Not yet good' },\r\n    3: { label: 'Good', color: 'bg-blue-500', description: 'Effective practice' },\r\n    4: { label: 'Outstanding', color: 'bg-green-500', description: 'Exceptional practice' },\r\n};\r\n\r\nexport default function LessonObservationModal({\r\n    isOpen,\r\n    onClose,\r\n    onSave,\r\n    initialData,\r\n    currentUser\r\n}: LessonObservationModalProps) {\r\n    const [activeTab, setActiveTab] = useState<'details' | 'ratings' | 'notes' | 'summary'>('details');\r\n    const [observation, setObservation] = useState<Partial<ObservationData>>({\r\n        date: new Date().toISOString().split('T')[0],\r\n        duration: 20,\r\n        ratings: {\r\n            subjectKnowledge: 3,\r\n            pedagogicalSkills: 3,\r\n            adaptiveTeaching: 3,\r\n            assessment: 3,\r\n            behaviour: 3,\r\n            engagement: 3,\r\n        },\r\n        isSchemeFollowed: true,\r\n        isCPDNeeded: false,\r\n        isSupportPlanNeeded: false,\r\n        observerId: currentUser?.id || '',\r\n        observerName: currentUser?.name || '',\r\n        ...initialData\r\n    });\r\n\r\n    const [isGeneratingInsights, setIsGeneratingInsights] = useState(false);\r\n    const [edInsights, setEdInsights] = useState<string | null>(null);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const updateRating = (key: keyof ObservationData['ratings'], value: number) => {\r\n        setObservation(prev => ({\r\n            ...prev,\r\n            ratings: {\r\n                ...prev.ratings!,\r\n                [key]: value\r\n            }\r\n        }));\r\n    };\r\n\r\n    const calculateOverallFromRatings = (): ObservationData['overallJudgement'] => {\r\n        const ratings = observation.ratings;\r\n        if (!ratings) return 'requires_improvement';\r\n        \r\n        const values = Object.values(ratings);\r\n        const avg = values.reduce((a, b) => a + b, 0) / values.length;\r\n        \r\n        if (avg >= 3.5) return 'outstanding';\r\n        if (avg >= 2.5) return 'good';\r\n        if (avg >= 1.5) return 'requires_improvement';\r\n        return 'inadequate';\r\n    };\r\n\r\n    const generateEdInsights = async () => {\r\n        setIsGeneratingInsights(true);\r\n        \r\n        // Simulate Ed analyzing the observation\r\n        await new Promise(resolve => setTimeout(resolve, 1500));\r\n        \r\n        const ratings = observation.ratings;\r\n        const weakAreas = ratings ? Object.entries(ratings)\r\n            .filter(([_, v]) => v <= 2)\r\n            .map(([k, _]) => k.replace(/([A-Z])/g, ' $1').toLowerCase()) : [];\r\n        \r\n        let insight = \"**Ed's Analysis:**\\n\\n\";\r\n        \r\n        if (weakAreas.length === 0) {\r\n            insight += \"✅ This lesson demonstrates strong practice across all areas. \";\r\n            insight += \"Consider sharing this teacher's approaches in CPD sessions.\\n\\n\";\r\n            insight += \"**EEF Connection:** High-quality teaching is the most important lever schools have to improve pupil outcomes.\";\r\n        } else {\r\n            insight += `⚠️ Areas needing attention: ${weakAreas.join(', ')}.\\n\\n`;\r\n            \r\n            if (weakAreas.some(a => a.includes('adaptive'))) {\r\n                insight += \"**EEF Insight:** Adaptive teaching (differentiation) shows +4 months progress when done well. \";\r\n                insight += \"Recommend CPD on responsive teaching strategies.\\n\\n\";\r\n            }\r\n            \r\n            if (weakAreas.some(a => a.includes('assessment'))) {\r\n                insight += \"**EEF Insight:** Feedback (+6 months) relies on effective assessment. \";\r\n                insight += \"Consider training on formative assessment techniques.\\n\\n\";\r\n            }\r\n            \r\n            if (!observation.isSchemeFollowed) {\r\n                insight += \"🚨 **Critical:** Scheme not being followed. This needs immediate leadership intervention. \";\r\n                insight += \"If the scheme is validated (e.g., Little Wandle, White Rose), fidelity is essential for impact.\\n\\n\";\r\n            }\r\n        }\r\n        \r\n        if (observation.isSupportPlanNeeded) {\r\n            insight += \"\\n📋 **Recommendation:** Create a formal support plan with clear targets and weekly monitoring.\";\r\n        }\r\n        \r\n        setEdInsights(insight);\r\n        setIsGeneratingInsights(false);\r\n    };\r\n\r\n    const handleSave = () => {\r\n        const finalObservation: ObservationData = {\r\n            id: observation.id || `obs-${Date.now()}`,\r\n            date: observation.date || new Date().toISOString().split('T')[0],\r\n            teacher: observation.teacher || '',\r\n            subject: observation.subject || '',\r\n            yearGroup: observation.yearGroup || '',\r\n            focusArea: observation.focusArea || '',\r\n            duration: observation.duration || 20,\r\n            ratings: observation.ratings || {\r\n                subjectKnowledge: 3,\r\n                pedagogicalSkills: 3,\r\n                adaptiveTeaching: 3,\r\n                assessment: 3,\r\n                behaviour: 3,\r\n                engagement: 3,\r\n            },\r\n            strengths: observation.strengths || '',\r\n            areasForDevelopment: observation.areasForDevelopment || '',\r\n            nextSteps: observation.nextSteps || '',\r\n            isSchemeFollowed: observation.isSchemeFollowed ?? true,\r\n            isCPDNeeded: observation.isCPDNeeded ?? false,\r\n            isSupportPlanNeeded: observation.isSupportPlanNeeded ?? false,\r\n            overallJudgement: observation.overallJudgement || calculateOverallFromRatings(),\r\n            observerId: observation.observerId || '',\r\n            observerName: observation.observerName || '',\r\n            linkedFrameworkArea: observation.linkedFrameworkArea,\r\n        };\r\n        \r\n        onSave(finalObservation);\r\n        onClose();\r\n    };\r\n\r\n    const RatingSelector = ({ \r\n        label, \r\n        value, \r\n        onChange,\r\n        description \r\n    }: { \r\n        label: string; \r\n        value: number; \r\n        onChange: (v: number) => void;\r\n        description?: string;\r\n    }) => (\r\n        <div className=\"mb-4\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n                <div>\r\n                    <span className=\"text-sm font-medium text-gray-700\">{label}</span>\r\n                    {description && (\r\n                        <p className=\"text-xs text-gray-500\">{description}</p>\r\n                    )}\r\n                </div>\r\n                <span className={`text-xs px-2 py-1 rounded font-medium ${\r\n                    value === 4 ? 'bg-green-100 text-green-700' :\r\n                    value === 3 ? 'bg-blue-100 text-blue-700' :\r\n                    value === 2 ? 'bg-yellow-100 text-yellow-700' :\r\n                    'bg-red-100 text-red-700'\r\n                }`}>\r\n                    {RATING_LABELS[value as keyof typeof RATING_LABELS].label}\r\n                </span>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n                {[1, 2, 3, 4].map(rating => (\r\n                    <button\r\n                        key={rating}\r\n                        onClick={() => onChange(rating)}\r\n                        className={`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${\r\n                            value === rating\r\n                                ? `${RATING_LABELS[rating as keyof typeof RATING_LABELS].color} text-white shadow-md`\r\n                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                        }`}\r\n                    >\r\n                        {rating}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-violet-600 to-purple-700 text-white p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                                <Eye size={24} />\r\n                            </div>\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold\">Lesson Observation</h2>\r\n                                <p className=\"text-violet-200 text-sm\">Record teaching quality evidence</p>\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={onClose} className=\"p-2 hover:bg-white/20 rounded-lg\">\r\n                            <X size={24} />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Tabs */}\r\n                <div className=\"border-b border-gray-200 bg-gray-50\">\r\n                    <nav className=\"flex\">\r\n                        {[\r\n                            { id: 'details', label: 'Details', icon: BookOpen },\r\n                            { id: 'ratings', label: 'Ratings', icon: Star },\r\n                            { id: 'notes', label: 'Notes', icon: MessageSquare },\r\n                            { id: 'summary', label: 'Summary', icon: Target },\r\n                        ].map(tab => (\r\n                            <button\r\n                                key={tab.id}\r\n                                onClick={() => setActiveTab(tab.id as any)}\r\n                                className={`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 border-b-2 transition-colors ${\r\n                                    activeTab === tab.id\r\n                                        ? 'border-violet-500 text-violet-600 bg-white'\r\n                                        : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                                }`}\r\n                            >\r\n                                <tab.icon size={16} />\r\n                                {tab.label}\r\n                            </button>\r\n                        ))}\r\n                    </nav>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {/* Details Tab */}\r\n                    {activeTab === 'details' && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={observation.date}\r\n                                        onChange={e => setObservation({ ...observation, date: e.target.value })}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Duration (mins)</label>\r\n                                    <select\r\n                                        value={observation.duration}\r\n                                        onChange={e => setObservation({ ...observation, duration: Number(e.target.value) })}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                    >\r\n                                        <option value={10}>10 minutes (Drop-in)</option>\r\n                                        <option value={20}>20 minutes (Learning Walk)</option>\r\n                                        <option value={30}>30 minutes (Part Lesson)</option>\r\n                                        <option value={45}>45 minutes (Full Lesson)</option>\r\n                                        <option value={60}>60 minutes (Extended)</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Teacher</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={observation.teacher || ''}\r\n                                    onChange={e => setObservation({ ...observation, teacher: e.target.value })}\r\n                                    placeholder=\"Teacher name\"\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Subject</label>\r\n                                    <select\r\n                                        value={observation.subject || ''}\r\n                                        onChange={e => setObservation({ ...observation, subject: e.target.value })}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                    >\r\n                                        <option value=\"\">Select subject...</option>\r\n                                        {SUBJECTS.map(s => <option key={s} value={s}>{s}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Year Group</label>\r\n                                    <select\r\n                                        value={observation.yearGroup || ''}\r\n                                        onChange={e => setObservation({ ...observation, yearGroup: e.target.value })}\r\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                    >\r\n                                        <option value=\"\">Select year...</option>\r\n                                        {YEAR_GROUPS.map(y => <option key={y} value={y}>{y}</option>)}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Focus Area</label>\r\n                                <select\r\n                                    value={observation.focusArea || ''}\r\n                                    onChange={e => setObservation({ ...observation, focusArea: e.target.value })}\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                >\r\n                                    <option value=\"\">Select focus...</option>\r\n                                    {FOCUS_AREAS.map(f => <option key={f} value={f}>{f}</option>)}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Ratings Tab */}\r\n                    {activeTab === 'ratings' && (\r\n                        <div className=\"space-y-2\">\r\n                            <div className=\"bg-gray-50 rounded-lg p-3 mb-4\">\r\n                                <p className=\"text-sm text-gray-600\">\r\n                                    <strong>Rating Scale:</strong> 1 = Inadequate, 2 = Requires Improvement, 3 = Good, 4 = Outstanding\r\n                                </p>\r\n                            </div>\r\n\r\n                            <RatingSelector\r\n                                label=\"Subject Knowledge\"\r\n                                description=\"Does the teacher have secure knowledge of the subject?\"\r\n                                value={observation.ratings?.subjectKnowledge || 3}\r\n                                onChange={v => updateRating('subjectKnowledge', v)}\r\n                            />\r\n                            \r\n                            <RatingSelector\r\n                                label=\"Pedagogical Skills\"\r\n                                description=\"Are explanations clear? Is content well-sequenced?\"\r\n                                value={observation.ratings?.pedagogicalSkills || 3}\r\n                                onChange={v => updateRating('pedagogicalSkills', v)}\r\n                            />\r\n                            \r\n                            <RatingSelector\r\n                                label=\"Adaptive Teaching\"\r\n                                description=\"Is teaching adapted for different learners including SEND?\"\r\n                                value={observation.ratings?.adaptiveTeaching || 3}\r\n                                onChange={v => updateRating('adaptiveTeaching', v)}\r\n                            />\r\n                            \r\n                            <RatingSelector\r\n                                label=\"Assessment & Feedback\"\r\n                                description=\"Is assessment used to check understanding? Is feedback effective?\"\r\n                                value={observation.ratings?.assessment || 3}\r\n                                onChange={v => updateRating('assessment', v)}\r\n                            />\r\n                            \r\n                            <RatingSelector\r\n                                label=\"Behaviour Management\"\r\n                                description=\"Are expectations clear? Is behaviour consistently managed?\"\r\n                                value={observation.ratings?.behaviour || 3}\r\n                                onChange={v => updateRating('behaviour', v)}\r\n                            />\r\n                            \r\n                            <RatingSelector\r\n                                label=\"Pupil Engagement\"\r\n                                description=\"Are pupils engaged and making progress in the lesson?\"\r\n                                value={observation.ratings?.engagement || 3}\r\n                                onChange={v => updateRating('engagement', v)}\r\n                            />\r\n\r\n                            {/* Critical Flags */}\r\n                            <div className=\"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200\">\r\n                                <h4 className=\"font-medium text-yellow-800 mb-3\">Critical Checks</h4>\r\n                                \r\n                                <label className=\"flex items-center gap-3 mb-3 cursor-pointer\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={observation.isSchemeFollowed}\r\n                                        onChange={e => setObservation({ ...observation, isSchemeFollowed: e.target.checked })}\r\n                                        className=\"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500\"\r\n                                    />\r\n                                    <span className=\"text-sm text-gray-700\">Curriculum scheme is being followed with fidelity</span>\r\n                                </label>\r\n                                \r\n                                <label className=\"flex items-center gap-3 mb-3 cursor-pointer\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={observation.isCPDNeeded}\r\n                                        onChange={e => setObservation({ ...observation, isCPDNeeded: e.target.checked })}\r\n                                        className=\"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500\"\r\n                                    />\r\n                                    <span className=\"text-sm text-gray-700\">CPD recommended for this teacher</span>\r\n                                </label>\r\n                                \r\n                                <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={observation.isSupportPlanNeeded}\r\n                                        onChange={e => setObservation({ ...observation, isSupportPlanNeeded: e.target.checked })}\r\n                                        className=\"w-5 h-5 rounded border-gray-300 text-violet-600 focus:ring-violet-500\"\r\n                                    />\r\n                                    <span className=\"text-sm text-gray-700\">Formal support plan needed</span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Notes Tab */}\r\n                    {activeTab === 'notes' && (\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                    <ThumbsUp size={14} className=\"inline mr-1 text-green-600\" />\r\n                                    Strengths Observed\r\n                                </label>\r\n                                <textarea\r\n                                    value={observation.strengths || ''}\r\n                                    onChange={e => setObservation({ ...observation, strengths: e.target.value })}\r\n                                    placeholder=\"What went well in this lesson?\"\r\n                                    rows={4}\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                    <TrendingUp size={14} className=\"inline mr-1 text-yellow-600\" />\r\n                                    Areas for Development\r\n                                </label>\r\n                                <textarea\r\n                                    value={observation.areasForDevelopment || ''}\r\n                                    onChange={e => setObservation({ ...observation, areasForDevelopment: e.target.value })}\r\n                                    placeholder=\"What could be improved?\"\r\n                                    rows={4}\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                    <Target size={14} className=\"inline mr-1 text-blue-600\" />\r\n                                    Next Steps / Actions\r\n                                </label>\r\n                                <textarea\r\n                                    value={observation.nextSteps || ''}\r\n                                    onChange={e => setObservation({ ...observation, nextSteps: e.target.value })}\r\n                                    placeholder=\"Specific actions for the teacher...\"\r\n                                    rows={3}\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Summary Tab */}\r\n                    {activeTab === 'summary' && (\r\n                        <div className=\"space-y-4\">\r\n                            {/* Overall Judgement */}\r\n                            <div className=\"bg-gray-50 rounded-xl p-4\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-3\">Overall Judgement</label>\r\n                                <div className=\"grid grid-cols-4 gap-2\">\r\n                                    {(['outstanding', 'good', 'requires_improvement', 'inadequate'] as const).map(j => (\r\n                                        <button\r\n                                            key={j}\r\n                                            onClick={() => setObservation({ ...observation, overallJudgement: j })}\r\n                                            className={`py-3 rounded-lg text-sm font-medium transition-all ${\r\n                                                observation.overallJudgement === j || (!observation.overallJudgement && calculateOverallFromRatings() === j)\r\n                                                    ? j === 'outstanding' ? 'bg-green-500 text-white' :\r\n                                                      j === 'good' ? 'bg-blue-500 text-white' :\r\n                                                      j === 'requires_improvement' ? 'bg-yellow-500 text-white' :\r\n                                                      'bg-red-500 text-white'\r\n                                                    : 'bg-white border border-gray-200 text-gray-700 hover:bg-gray-100'\r\n                                            }`}\r\n                                        >\r\n                                            {j.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Ed's Analysis */}\r\n                            <div className=\"bg-emerald-50 rounded-xl p-4 border border-emerald-200\">\r\n                                <div className=\"flex items-center justify-between mb-3\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <GraduationCap size={20} className=\"text-emerald-600\" />\r\n                                        <span className=\"font-medium text-emerald-800\">Ed's Analysis</span>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={generateEdInsights}\r\n                                        disabled={isGeneratingInsights}\r\n                                        className=\"text-sm px-3 py-1 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 disabled:opacity-50\"\r\n                                    >\r\n                                        {isGeneratingInsights ? 'Analyzing...' : 'Generate Insights'}\r\n                                    </button>\r\n                                </div>\r\n                                \r\n                                {edInsights ? (\r\n                                    <div className=\"text-sm text-emerald-900 whitespace-pre-wrap\">\r\n                                        {edInsights}\r\n                                    </div>\r\n                                ) : (\r\n                                    <p className=\"text-sm text-emerald-700\">\r\n                                        Click \"Generate Insights\" for Ed's EEF-backed analysis of this observation.\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Warning Flags */}\r\n                            {(observation.isCPDNeeded || observation.isSupportPlanNeeded || !observation.isSchemeFollowed) && (\r\n                                <div className=\"bg-red-50 rounded-xl p-4 border border-red-200\">\r\n                                    <h4 className=\"font-medium text-red-800 mb-2 flex items-center gap-2\">\r\n                                        <AlertTriangle size={18} />\r\n                                        Actions Required\r\n                                    </h4>\r\n                                    <ul className=\"text-sm text-red-700 space-y-1\">\r\n                                        {!observation.isSchemeFollowed && (\r\n                                            <li>• Scheme not being followed - leadership intervention required</li>\r\n                                        )}\r\n                                        {observation.isCPDNeeded && (\r\n                                            <li>• CPD recommended - add to professional development plan</li>\r\n                                        )}\r\n                                        {observation.isSupportPlanNeeded && (\r\n                                            <li>• Formal support plan needed - schedule meeting with teacher</li>\r\n                                        )}\r\n                                    </ul>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Link to Framework */}\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                                    Link to Ofsted Framework Area\r\n                                </label>\r\n                                <select\r\n                                    value={observation.linkedFrameworkArea || ''}\r\n                                    onChange={e => setObservation({ ...observation, linkedFrameworkArea: e.target.value })}\r\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500\"\r\n                                >\r\n                                    <option value=\"\">Select area (optional)...</option>\r\n                                    <option value=\"quality-intent\">Quality of Education - Intent</option>\r\n                                    <option value=\"quality-implementation\">Quality of Education - Implementation</option>\r\n                                    <option value=\"quality-impact\">Quality of Education - Impact</option>\r\n                                    <option value=\"behaviour\">Behaviour & Attitudes</option>\r\n                                    <option value=\"personal-development\">Personal Development</option>\r\n                                    <option value=\"leadership\">Leadership & Management</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"border-t border-gray-200 p-4 bg-gray-50 flex items-center justify-between\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSave}\r\n                        className=\"px-6 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 flex items-center gap-2\"\r\n                    >\r\n                        <Save size={18} />\r\n                        Save Observation\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport { useState, useRef } from 'react';\r\nimport { \r\n    FolderOpen, Upload, FileText, Loader2, CheckCircle, \r\n    AlertTriangle, X, File, RefreshCw, HardDrive, Cloud\r\n} from 'lucide-react';\r\n\r\ninterface ScannedFile {\r\n    name: string;\r\n    path: string;\r\n    type: string;\r\n    size: number;\r\n    content?: string;\r\n    lastModified: Date;\r\n}\r\n\r\ninterface ScanResult {\r\n    totalFiles: number;\r\n    processedFiles: number;\r\n    skippedFiles: number;\r\n    supportedTypes: string[];\r\n    files: ScannedFile[];\r\n}\r\n\r\ninterface EvidenceMatch {\r\n    fileId: string;\r\n    fileName: string;\r\n    filePath: string;\r\n    frameworkArea: string;\r\n    frameworkAreaLabel: string;\r\n    confidence: number;\r\n    matchedKeywords: string[];\r\n    relevantExcerpt: string;\r\n}\r\n\r\ninterface AnalysisResult {\r\n    totalMatches: number;\r\n    matchesByArea: Record<string, EvidenceMatch[]>;\r\n    allMatches: EvidenceMatch[];\r\n}\r\n\r\ninterface LocalFolderScannerProps {\r\n    onScanComplete: (files: ScannedFile[]) => void;\r\n    onAnalysisComplete?: (analysis: AnalysisResult) => void;\r\n    onClose?: () => void;\r\n}\r\n\r\n// Supported file types for evidence scanning\r\nconst SUPPORTED_EXTENSIONS = [\r\n    '.pdf', '.doc', '.docx', '.txt', '.rtf',\r\n    '.xls', '.xlsx', '.csv',\r\n    '.ppt', '.pptx',\r\n    '.png', '.jpg', '.jpeg', '.gif' // For observation photos, displays, etc.\r\n];\r\n\r\nconst SUPPORTED_MIME_TYPES = [\r\n    'application/pdf',\r\n    'application/msword',\r\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n    'text/plain',\r\n    'application/rtf',\r\n    'application/vnd.ms-excel',\r\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n    'text/csv',\r\n    'application/vnd.ms-powerpoint',\r\n    'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n    'image/png',\r\n    'image/jpeg',\r\n    'image/gif'\r\n];\r\n\r\nexport default function LocalFolderScanner({ onScanComplete, onAnalysisComplete, onClose }: LocalFolderScannerProps) {\r\n    const [scanMethod, setScanMethod] = useState<'folder' | 'files' | null>(null);\r\n    const [isScanning, setIsScanning] = useState(false);\r\n    const [scanResult, setScanResult] = useState<ScanResult | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [progress, setProgress] = useState({ current: 0, total: 0 });\r\n    \r\n    // Analysis state\r\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n    const [analysisResult, setAnalysisResult] = useState<AnalysisResult | null>(null);\r\n    const [activeTab, setActiveTab] = useState<'files' | 'evidence'>('files');\r\n    \r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const folderInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Check if File System Access API is available\r\n    // Note: Disabled because it doesn't work well in all contexts (automated browsers, iframes, etc.)\r\n    // Always use the reliable input[webkitdirectory] fallback instead\r\n    const hasFileSystemAccess = false; // Forcing fallback for reliability\r\n\r\n    const readFileContent = async (file: File): Promise<string> => {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            \r\n            if (file.type.startsWith('text/') || file.name.endsWith('.txt') || file.name.endsWith('.csv')) {\r\n                reader.onload = () => resolve(reader.result as string);\r\n                reader.onerror = () => reject(reader.error);\r\n                reader.readAsText(file);\r\n            } else if (file.type === 'application/pdf') {\r\n                // For PDFs, we'd need a PDF parser - for now just note it's a PDF\r\n                resolve(`[PDF Document: ${file.name}]`);\r\n            } else if (file.type.startsWith('image/')) {\r\n                // For images, note the filename (could do OCR later)\r\n                resolve(`[Image: ${file.name}]`);\r\n            } else {\r\n                // For other docs, note the type\r\n                resolve(`[Document: ${file.name}, Type: ${file.type}]`);\r\n            }\r\n        });\r\n    };\r\n\r\n    const isSupported = (file: File): boolean => {\r\n        const ext = '.' + file.name.split('.').pop()?.toLowerCase();\r\n        return SUPPORTED_EXTENSIONS.includes(ext) || SUPPORTED_MIME_TYPES.includes(file.type);\r\n    };\r\n\r\n    // Modern File System Access API (Chrome/Edge)\r\n    const scanWithFolderPicker = async () => {\r\n        try {\r\n            setIsScanning(true);\r\n            setError(null);\r\n            setScanResult(null);\r\n            \r\n            // @ts-ignore - File System Access API\r\n            const dirHandle = await window.showDirectoryPicker({\r\n                mode: 'read'\r\n            });\r\n            \r\n            const files: ScannedFile[] = [];\r\n            let totalFiles = 0;\r\n            let skippedFiles = 0;\r\n            \r\n            // Recursive function to scan directory\r\n            async function* getFilesRecursively(dirHandle: any, path = ''): AsyncGenerator<{ file: File; path: string }> {\r\n                for await (const entry of dirHandle.values()) {\r\n                    if (entry.kind === 'file') {\r\n                        const file = await entry.getFile();\r\n                        yield { file, path: path + '/' + entry.name };\r\n                    } else if (entry.kind === 'directory') {\r\n                        yield* getFilesRecursively(entry, path + '/' + entry.name);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            // First pass - count files\r\n            const filesToProcess: { file: File; path: string }[] = [];\r\n            for await (const { file, path } of getFilesRecursively(dirHandle)) {\r\n                if (isSupported(file)) {\r\n                    filesToProcess.push({ file, path });\r\n                    totalFiles++;\r\n                } else {\r\n                    skippedFiles++;\r\n                }\r\n            }\r\n            \r\n            setProgress({ current: 0, total: totalFiles });\r\n            \r\n            // Second pass - process files\r\n            for (let i = 0; i < filesToProcess.length; i++) {\r\n                const { file, path } = filesToProcess[i];\r\n                setProgress({ current: i + 1, total: totalFiles });\r\n                \r\n                try {\r\n                    const content = await readFileContent(file);\r\n                    files.push({\r\n                        name: file.name,\r\n                        path: path,\r\n                        type: file.type,\r\n                        size: file.size,\r\n                        content: content.substring(0, 10000), // Limit content size\r\n                        lastModified: new Date(file.lastModified)\r\n                    });\r\n                } catch (e) {\r\n                    console.warn(`Failed to read ${file.name}:`, e);\r\n                    skippedFiles++;\r\n                }\r\n            }\r\n            \r\n            const result: ScanResult = {\r\n                totalFiles: totalFiles + skippedFiles,\r\n                processedFiles: files.length,\r\n                skippedFiles,\r\n                supportedTypes: [...new Set(files.map(f => f.type))],\r\n                files\r\n            };\r\n            \r\n            setScanResult(result);\r\n            onScanComplete(files);\r\n            \r\n        } catch (e: any) {\r\n            if (e.name !== 'AbortError') {\r\n                setError(e.message || 'Failed to scan folder');\r\n            }\r\n        } finally {\r\n            setIsScanning(false);\r\n        }\r\n    };\r\n\r\n    // Fallback: File input with webkitdirectory\r\n    const scanWithFolderInput = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const fileList = e.target.files;\r\n        if (!fileList) return;\r\n        \r\n        setIsScanning(true);\r\n        setError(null);\r\n        setScanResult(null);\r\n        \r\n        const files: ScannedFile[] = [];\r\n        let skippedFiles = 0;\r\n        const totalFiles = Array.from(fileList).filter(f => isSupported(f)).length;\r\n        \r\n        setProgress({ current: 0, total: totalFiles });\r\n        \r\n        let processed = 0;\r\n        for (const file of Array.from(fileList)) {\r\n            if (!isSupported(file)) {\r\n                skippedFiles++;\r\n                continue;\r\n            }\r\n            \r\n            processed++;\r\n            setProgress({ current: processed, total: totalFiles });\r\n            \r\n            try {\r\n                const content = await readFileContent(file);\r\n                files.push({\r\n                    name: file.name,\r\n                    // @ts-ignore - webkitRelativePath\r\n                    path: file.webkitRelativePath || file.name,\r\n                    type: file.type,\r\n                    size: file.size,\r\n                    content: content.substring(0, 10000),\r\n                    lastModified: new Date(file.lastModified)\r\n                });\r\n            } catch (e) {\r\n                skippedFiles++;\r\n            }\r\n        }\r\n        \r\n        const result: ScanResult = {\r\n            totalFiles: fileList.length,\r\n            processedFiles: files.length,\r\n            skippedFiles,\r\n            supportedTypes: [...new Set(files.map(f => f.type))],\r\n            files\r\n        };\r\n        \r\n        setScanResult(result);\r\n        onScanComplete(files);\r\n        setIsScanning(false);\r\n    };\r\n\r\n    // Individual file upload\r\n    const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const fileList = e.target.files;\r\n        if (!fileList) return;\r\n        \r\n        setIsScanning(true);\r\n        setError(null);\r\n        \r\n        const files: ScannedFile[] = [];\r\n        \r\n        for (const file of Array.from(fileList)) {\r\n            try {\r\n                const content = await readFileContent(file);\r\n                files.push({\r\n                    name: file.name,\r\n                    path: file.name,\r\n                    type: file.type,\r\n                    size: file.size,\r\n                    content: content.substring(0, 10000),\r\n                    lastModified: new Date(file.lastModified)\r\n                });\r\n            } catch (e) {\r\n                console.warn(`Failed to read ${file.name}`);\r\n            }\r\n        }\r\n        \r\n        if (scanResult) {\r\n            // Add to existing files\r\n            const updatedFiles = [...scanResult.files, ...files];\r\n            setScanResult({\r\n                ...scanResult,\r\n                totalFiles: updatedFiles.length,\r\n                processedFiles: updatedFiles.length,\r\n                files: updatedFiles\r\n            });\r\n        } else {\r\n            setScanResult({\r\n                totalFiles: files.length,\r\n                processedFiles: files.length,\r\n                skippedFiles: 0,\r\n                supportedTypes: [...new Set(files.map(f => f.type))],\r\n                files\r\n            });\r\n        }\r\n        \r\n        onScanComplete(files);\r\n        setIsScanning(false);\r\n    };\r\n\r\n    const formatFileSize = (bytes: number): string => {\r\n        if (bytes < 1024) return bytes + ' B';\r\n        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\r\n        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\r\n    };\r\n\r\n    // Analyze files for Ofsted evidence\r\n    const analyzeForEvidence = async () => {\r\n        if (!scanResult || scanResult.files.length === 0) return;\r\n        \r\n        setIsAnalyzing(true);\r\n        setError(null);\r\n        \r\n        try {\r\n            const response = await fetch('/api/analyze-local', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ files: scanResult.files })\r\n            });\r\n            \r\n            if (!response.ok) {\r\n                throw new Error('Analysis failed');\r\n            }\r\n            \r\n            const data = await response.json();\r\n            setAnalysisResult({\r\n                totalMatches: data.totalMatches,\r\n                matchesByArea: data.matchesByArea,\r\n                allMatches: data.allMatches\r\n            });\r\n            setActiveTab('evidence');\r\n            onAnalysisComplete?.(data);\r\n            \r\n        } catch (e: any) {\r\n            setError(e.message || 'Analysis failed');\r\n        } finally {\r\n            setIsAnalyzing(false);\r\n        }\r\n    };\r\n\r\n    const getConfidenceColor = (confidence: number) => {\r\n        if (confidence >= 0.7) return 'bg-green-100 text-green-700';\r\n        if (confidence >= 0.5) return 'bg-yellow-100 text-yellow-700';\r\n        return 'bg-gray-100 text-gray-600';\r\n    };\r\n\r\n    const getAreaColor = (area: string) => {\r\n        const colors: Record<string, string> = {\r\n            'quality-intent': 'bg-rose-50 border-rose-200',\r\n            'quality-implementation': 'bg-rose-50 border-rose-200',\r\n            'quality-impact': 'bg-rose-50 border-rose-200',\r\n            'behaviour': 'bg-teal-50 border-teal-200',\r\n            'personal-development': 'bg-orange-50 border-orange-200',\r\n            'leadership': 'bg-violet-50 border-violet-200',\r\n            'safeguarding': 'bg-red-50 border-red-200',\r\n            'send': 'bg-blue-50 border-blue-200',\r\n            'early-years': 'bg-pink-50 border-pink-200',\r\n            'reading': 'bg-emerald-50 border-emerald-200'\r\n        };\r\n        return colors[area] || 'bg-gray-50 border-gray-200';\r\n    };\r\n\r\n    const getFileIcon = (type: string) => {\r\n        if (type.startsWith('image/')) return '🖼️';\r\n        if (type.includes('pdf')) return '📄';\r\n        if (type.includes('word') || type.includes('document')) return '📝';\r\n        if (type.includes('sheet') || type.includes('excel') || type.includes('csv')) return '📊';\r\n        if (type.includes('presentation') || type.includes('powerpoint')) return '📽️';\r\n        return '📁';\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                            <HardDrive size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold\">Local Evidence Scanner</h2>\r\n                            <p className=\"text-blue-200 text-sm\">Scan folders from your computer</p>\r\n                        </div>\r\n                    </div>\r\n                    {onClose && (\r\n                        <button onClick={onClose} className=\"p-2 hover:bg-white/20 rounded-lg\">\r\n                            <X size={24} />\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n                {/* Scan Method Selection */}\r\n                {!scanResult && !isScanning && (\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        {/* Folder Option - Using label for reliable click */}\r\n                        <label className=\"p-6 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-colors text-center group cursor-pointer block\">\r\n                            <FolderOpen size={40} className=\"mx-auto mb-3 text-gray-400 group-hover:text-blue-500\" />\r\n                            <h3 className=\"font-semibold text-gray-900\">Scan Folder</h3>\r\n                            <p className=\"text-sm text-gray-500 mt-1\">\r\n                                Select an evidence folder from your computer\r\n                            </p>\r\n                            <p className=\"text-xs text-blue-500 mt-2 font-medium\">\r\n                                Click here to open folder picker\r\n                            </p>\r\n                            <input\r\n                                type=\"file\"\r\n                                webkitdirectory=\"\"\r\n                                multiple\r\n                                onChange={scanWithFolderInput}\r\n                                className=\"hidden\"\r\n                            />\r\n                        </label>\r\n\r\n                        {/* Files Option - Using label for reliable click */}\r\n                        <label className=\"p-6 border-2 border-dashed border-gray-300 rounded-xl hover:border-green-500 hover:bg-green-50 transition-colors text-center group cursor-pointer block\">\r\n                            <Upload size={40} className=\"mx-auto mb-3 text-gray-400 group-hover:text-green-500\" />\r\n                            <h3 className=\"font-semibold text-gray-900\">Upload Files</h3>\r\n                            <p className=\"text-sm text-gray-500 mt-1\">\r\n                                Select individual files to scan\r\n                            </p>\r\n                            <p className=\"text-xs text-green-500 mt-2 font-medium\">\r\n                                Click here to select files\r\n                            </p>\r\n                            <input\r\n                                type=\"file\"\r\n                                multiple\r\n                                accept={SUPPORTED_EXTENSIONS.join(',')}\r\n                                onChange={handleFileUpload}\r\n                                className=\"hidden\"\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Hidden file inputs (kept for programmatic access if needed) */}\r\n                <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    multiple\r\n                    accept={SUPPORTED_EXTENSIONS.join(',')}\r\n                    onChange={handleFileUpload}\r\n                    className=\"hidden\"\r\n                />\r\n                <input\r\n                    ref={folderInputRef}\r\n                    type=\"file\"\r\n                    webkitdirectory=\"\"\r\n                    multiple\r\n                    onChange={scanWithFolderInput}\r\n                    className=\"hidden\"\r\n                />\r\n\r\n                {/* Scanning Progress */}\r\n                {isScanning && (\r\n                    <div className=\"text-center py-8\">\r\n                        <Loader2 size={48} className=\"mx-auto mb-4 text-blue-500 animate-spin\" />\r\n                        <h3 className=\"font-semibold text-gray-900\">Scanning Files...</h3>\r\n                        <p className=\"text-sm text-gray-600 mt-1\">\r\n                            {progress.current} of {progress.total} files processed\r\n                        </p>\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-2 mt-4 max-w-xs mx-auto\">\r\n                            <div \r\n                                className=\"bg-blue-500 h-2 rounded-full transition-all\"\r\n                                style={{ width: `${progress.total ? (progress.current / progress.total) * 100 : 0}%` }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Error */}\r\n                {error && (\r\n                    <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3\">\r\n                        <AlertTriangle className=\"text-red-500 flex-shrink-0\" />\r\n                        <div>\r\n                            <h4 className=\"font-medium text-red-800\">Scan Failed</h4>\r\n                            <p className=\"text-sm text-red-600\">{error}</p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Results */}\r\n                {scanResult && (\r\n                    <div className=\"space-y-4\">\r\n                        {/* Summary */}\r\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <CheckCircle className=\"text-green-500\" />\r\n                                    <h4 className=\"font-semibold text-green-800\">Scan Complete!</h4>\r\n                                </div>\r\n                                {!analysisResult && (\r\n                                    <button\r\n                                        onClick={analyzeForEvidence}\r\n                                        disabled={isAnalyzing}\r\n                                        className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2 text-sm font-medium\"\r\n                                    >\r\n                                        {isAnalyzing ? (\r\n                                            <>\r\n                                                <Loader2 size={16} className=\"animate-spin\" />\r\n                                                Analyzing...\r\n                                            </>\r\n                                        ) : (\r\n                                            <>\r\n                                                <FileText size={16} />\r\n                                                🔍 Find Evidence\r\n                                            </>\r\n                                        )}\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"grid grid-cols-4 gap-4 text-center\">\r\n                                <div>\r\n                                    <div className=\"text-2xl font-bold text-gray-900\">{scanResult.totalFiles}</div>\r\n                                    <div className=\"text-xs text-gray-500\">Total Found</div>\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"text-2xl font-bold text-green-600\">{scanResult.processedFiles}</div>\r\n                                    <div className=\"text-xs text-gray-500\">Processed</div>\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"text-2xl font-bold text-gray-400\">{scanResult.skippedFiles}</div>\r\n                                    <div className=\"text-xs text-gray-500\">Skipped</div>\r\n                                </div>\r\n                                {analysisResult && (\r\n                                    <div>\r\n                                        <div className=\"text-2xl font-bold text-purple-600\">{analysisResult.totalMatches}</div>\r\n                                        <div className=\"text-xs text-gray-500\">Evidence Matches</div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Tabs */}\r\n                        {analysisResult && (\r\n                            <div className=\"border-b border-gray-200\">\r\n                                <nav className=\"flex\">\r\n                                    <button\r\n                                        onClick={() => setActiveTab('files')}\r\n                                        className={`flex-1 py-2 text-sm font-medium border-b-2 ${\r\n                                            activeTab === 'files' \r\n                                                ? 'border-blue-500 text-blue-600' \r\n                                                : 'border-transparent text-gray-500'\r\n                                        }`}\r\n                                    >\r\n                                        📁 Files ({scanResult.files.length})\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setActiveTab('evidence')}\r\n                                        className={`flex-1 py-2 text-sm font-medium border-b-2 ${\r\n                                            activeTab === 'evidence' \r\n                                                ? 'border-purple-500 text-purple-600' \r\n                                                : 'border-transparent text-gray-500'\r\n                                        }`}\r\n                                    >\r\n                                        🎯 Evidence ({analysisResult.totalMatches})\r\n                                    </button>\r\n                                </nav>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* File List */}\r\n                        {activeTab === 'files' && (\r\n                            <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\r\n                                <div className=\"bg-gray-50 px-4 py-2 border-b border-gray-200\">\r\n                                    <h4 className=\"font-medium text-gray-700\">Scanned Files ({scanResult.files.length})</h4>\r\n                                </div>\r\n                                <div className=\"max-h-64 overflow-y-auto\">\r\n                                    {scanResult.files.map((file, index) => (\r\n                                        <div key={index} className=\"flex items-center gap-3 px-4 py-2 border-b border-gray-100 last:border-b-0 hover:bg-gray-50\">\r\n                                            <span className=\"text-xl\">{getFileIcon(file.type)}</span>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <p className=\"text-sm font-medium text-gray-900 truncate\">{file.name}</p>\r\n                                                <p className=\"text-xs text-gray-500 truncate\">{file.path}</p>\r\n                                            </div>\r\n                                            <span className=\"text-xs text-gray-400\">{formatFileSize(file.size)}</span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Evidence Matches */}\r\n                        {activeTab === 'evidence' && analysisResult && (\r\n                            <div className=\"space-y-3\">\r\n                                {Object.entries(analysisResult.matchesByArea).length === 0 ? (\r\n                                    <div className=\"text-center py-8 text-gray-500\">\r\n                                        <AlertTriangle size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                                        <p>No evidence matches found in these files.</p>\r\n                                        <p className=\"text-sm\">Try scanning folders with more school documents.</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    Object.entries(analysisResult.matchesByArea).map(([area, matches]) => (\r\n                                        <div key={area} className={`border rounded-lg overflow-hidden ${getAreaColor(area)}`}>\r\n                                            <div className=\"px-4 py-2 border-b bg-white/50\">\r\n                                                <h5 className=\"font-medium text-gray-900\">\r\n                                                    {matches[0]?.frameworkAreaLabel || area}\r\n                                                </h5>\r\n                                                <p className=\"text-xs text-gray-500\">{matches.length} match(es)</p>\r\n                                            </div>\r\n                                            <div className=\"divide-y divide-gray-100\">\r\n                                                {matches.slice(0, 3).map((match, idx) => (\r\n                                                    <div key={idx} className=\"px-4 py-2 bg-white/30\">\r\n                                                        <div className=\"flex items-center justify-between mb-1\">\r\n                                                            <span className=\"text-sm font-medium text-gray-900 truncate flex-1\">\r\n                                                                {match.fileName}\r\n                                                            </span>\r\n                                                            <span className={`text-xs px-2 py-0.5 rounded-full ${getConfidenceColor(match.confidence)}`}>\r\n                                                                {Math.round(match.confidence * 100)}% match\r\n                                                            </span>\r\n                                                        </div>\r\n                                                        <div className=\"flex flex-wrap gap-1 mb-1\">\r\n                                                            {match.matchedKeywords.slice(0, 4).map((kw, i) => (\r\n                                                                <span key={i} className=\"text-xs bg-white px-1.5 py-0.5 rounded border border-gray-200\">\r\n                                                                    {kw}\r\n                                                                </span>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                        {match.relevantExcerpt && (\r\n                                                            <p className=\"text-xs text-gray-500 italic truncate\">\r\n                                                                {match.relevantExcerpt}\r\n                                                            </p>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Actions */}\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    setScanResult(null);\r\n                                    setAnalysisResult(null);\r\n                                    setActiveTab('files');\r\n                                    setProgress({ current: 0, total: 0 });\r\n                                }}\r\n                                className=\"flex-1 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center justify-center gap-2\"\r\n                            >\r\n                                <RefreshCw size={18} />\r\n                                Scan Again\r\n                            </button>\r\n                            <button\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                className=\"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2\"\r\n                            >\r\n                                <Upload size={18} />\r\n                                Add More Files\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Supported Types Info */}\r\n                {!scanResult && !isScanning && (\r\n                    <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                        <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Supported File Types</h4>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {['PDF', 'Word', 'Excel', 'PowerPoint', 'Text', 'CSV', 'Images'].map(type => (\r\n                                <span key={type} className=\"px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-600\">\r\n                                    {type}\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Cloud Options Note */}\r\n                <div className=\"border-t border-gray-200 pt-4\">\r\n                    <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                        <Cloud size={16} />\r\n                        <span>Cloud storage (Google Drive, OneDrive) coming soon</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { \r\n    AlertTriangle, \r\n    CheckCircle, \r\n    Clock, \r\n    FileText, \r\n    Calendar,\r\n    AlertCircle,\r\n    Award,\r\n    Target,\r\n    ArrowRight,\r\n    Shield,\r\n    BookOpen,\r\n    ClipboardCheck,\r\n    Zap,\r\n    TrendingUp\r\n} from 'lucide-react';\r\n\r\ninterface MondayDashboardProps {\r\n    organizationId?: string;\r\n    ofstedAssessments: Record<string, any>;\r\n    siamsAssessments: Record<string, any>;\r\n    actions: any[];\r\n    evidenceCount: number;\r\n    isChurchSchool?: boolean;\r\n    onNavigate: (view: string) => void;\r\n}\r\n\r\ninterface UrgentItem {\r\n    id: string;\r\n    type: 'deadline' | 'overdue' | 'compliance' | 'gap';\r\n    title: string;\r\n    description: string;\r\n    dueDate?: string;\r\n    priority: 'critical' | 'high' | 'medium';\r\n    action: string;\r\n    link: string;\r\n}\r\n\r\nconst MondayDashboard: React.FC<MondayDashboardProps> = ({\r\n    organizationId,\r\n    ofstedAssessments,\r\n    siamsAssessments,\r\n    actions,\r\n    evidenceCount,\r\n    isChurchSchool = false,\r\n    onNavigate\r\n}) => {\r\n    const [currentTime, setCurrentTime] = useState(new Date());\r\n    \r\n    useEffect(() => {\r\n        const timer = setInterval(() => setCurrentTime(new Date()), 60000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    // Calculate Ofsted readiness\r\n    const calculateOfstedReadiness = () => {\r\n        const ratings = Object.values(ofstedAssessments)\r\n            .filter((a: any) => a.schoolRating && a.schoolRating !== 'not_assessed')\r\n            .map((a: any) => {\r\n                switch (a.schoolRating) {\r\n                    case 'exceptional': return 100;\r\n                    case 'strong_standard': return 80;\r\n                    case 'expected_standard': return 60;\r\n                    case 'needs_attention': return 40;\r\n                    case 'urgent_improvement': return 20;\r\n                    default: return 0;\r\n                }\r\n            });\r\n        \r\n        if (ratings.length === 0) return 0;\r\n        return Math.round(ratings.reduce((a, b) => a + b, 0) / ratings.length);\r\n    };\r\n\r\n    const calculateSiamsReadiness = () => {\r\n        const ratings = Object.values(siamsAssessments)\r\n            .filter((a: any) => a.rating && a.rating !== 'not_assessed')\r\n            .map((a: any) => {\r\n                switch (a.rating) {\r\n                    case 'excellent': return 100;\r\n                    case 'good': return 75;\r\n                    case 'requires_improvement': return 50;\r\n                    case 'ineffective': return 25;\r\n                    default: return 0;\r\n                }\r\n            });\r\n        \r\n        if (ratings.length === 0) return 0;\r\n        return Math.round(ratings.reduce((a, b) => a + b, 0) / ratings.length);\r\n    };\r\n\r\n    const getUrgentItems = (): UrgentItem[] => {\r\n        const urgent: UrgentItem[] = [];\r\n        const today = new Date();\r\n        \r\n        actions.forEach(action => {\r\n            if (action.status !== 'completed' && action.dueDate) {\r\n                const dueDate = new Date(action.dueDate);\r\n                const daysUntilDue = Math.ceil((dueDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n                \r\n                if (daysUntilDue < 0) {\r\n                    urgent.push({\r\n                        id: action.id,\r\n                        type: 'overdue',\r\n                        title: action.title,\r\n                        description: `${Math.abs(daysUntilDue)} days overdue`,\r\n                        dueDate: action.dueDate,\r\n                        priority: 'critical',\r\n                        action: 'Update Status',\r\n                        link: 'actions'\r\n                    });\r\n                } else if (daysUntilDue <= 7) {\r\n                    urgent.push({\r\n                        id: action.id,\r\n                        type: 'deadline',\r\n                        title: action.title,\r\n                        description: `Due in ${daysUntilDue} days`,\r\n                        dueDate: action.dueDate,\r\n                        priority: daysUntilDue <= 3 ? 'high' : 'medium',\r\n                        action: 'View Action',\r\n                        link: 'actions'\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        const assessedCount = Object.values(ofstedAssessments)\r\n            .filter((a: any) => a.schoolRating && a.schoolRating !== 'not_assessed').length;\r\n        \r\n        if (assessedCount < 6) {\r\n            urgent.push({\r\n                id: 'assessment-gap',\r\n                type: 'gap',\r\n                title: 'Incomplete Self-Assessment',\r\n                description: `${6 - assessedCount} Ofsted areas not yet assessed`,\r\n                priority: 'high',\r\n                action: 'Complete Assessment',\r\n                link: 'ofsted'\r\n            });\r\n        }\r\n\r\n        if (evidenceCount < 10) {\r\n            urgent.push({\r\n                id: 'evidence-gap',\r\n                type: 'gap',\r\n                title: 'Limited Evidence',\r\n                description: `Only ${evidenceCount} evidence items found`,\r\n                priority: 'medium',\r\n                action: 'Scan Documents',\r\n                link: 'dashboard'\r\n            });\r\n        }\r\n\r\n        return urgent.sort((a, b) => {\r\n            const priorityOrder = { critical: 0, high: 1, medium: 2 };\r\n            return priorityOrder[a.priority] - priorityOrder[b.priority];\r\n        });\r\n    };\r\n\r\n    const ofstedReadiness = calculateOfstedReadiness();\r\n    const siamsReadiness = calculateSiamsReadiness();\r\n    const urgentItems = getUrgentItems();\r\n    const completedActions = actions.filter(a => a.status === 'completed').length;\r\n    const inProgressActions = actions.filter(a => a.status === 'in_progress').length;\r\n\r\n    const getGreeting = () => {\r\n        const hour = currentTime.getHours();\r\n        if (hour < 12) return 'Good morning';\r\n        if (hour < 17) return 'Good afternoon';\r\n        return 'Good evening';\r\n    };\r\n\r\n    const getDayOfWeek = () => {\r\n        return currentTime.toLocaleDateString('en-GB', { weekday: 'long' });\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Clean Header */}\r\n            <div className=\"flex items-start justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-medium text-gray-900 tracking-tight\">\r\n                        {getGreeting()}\r\n                    </h1>\r\n                    <p className=\"text-gray-500 mt-1\">\r\n                        Happy {getDayOfWeek()} · Here's your school improvement snapshot\r\n                    </p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                    <p className=\"text-sm text-gray-400\">\r\n                        {currentTime.toLocaleDateString('en-GB', { \r\n                            day: 'numeric', \r\n                            month: 'long', \r\n                            year: 'numeric' \r\n                        })}\r\n                    </p>\r\n                    <p className=\"text-3xl font-light text-gray-900 tabular-nums\">\r\n                        {currentTime.toLocaleTimeString('en-GB', { \r\n                            hour: '2-digit', \r\n                            minute: '2-digit' \r\n                        })}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Key Metrics */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                {/* Ofsted Readiness */}\r\n                <div className=\"bg-gray-50 rounded-2xl p-6 hover:bg-gray-100 transition-colors cursor-pointer\"\r\n                     onClick={() => onNavigate('ofsted')}>\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <div className=\"w-10 h-10 rounded-xl bg-gray-200 flex items-center justify-center\">\r\n                            <Target className=\"w-5 h-5 text-gray-700\" />\r\n                        </div>\r\n                        <span className=\"text-3xl font-medium text-gray-900\">\r\n                            {ofstedReadiness}%\r\n                        </span>\r\n                    </div>\r\n                    <h3 className=\"font-medium text-gray-900\">Ofsted Readiness</h3>\r\n                    <div className=\"mt-3 w-full bg-gray-200 rounded-full h-1.5\">\r\n                        <div \r\n                            className=\"h-1.5 rounded-full bg-gray-900 transition-all\"\r\n                            style={{ width: `${ofstedReadiness}%` }}\r\n                        />\r\n                    </div>\r\n                    <p className=\"mt-3 text-sm text-gray-500 flex items-center gap-1\">\r\n                        View Framework <ArrowRight className=\"w-3 h-3\" />\r\n                    </p>\r\n                </div>\r\n\r\n                {/* SIAMS Readiness */}\r\n                {isChurchSchool && (\r\n                    <div className=\"bg-gray-50 rounded-2xl p-6 hover:bg-gray-100 transition-colors cursor-pointer\"\r\n                         onClick={() => onNavigate('siams')}>\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <div className=\"w-10 h-10 rounded-xl bg-gray-200 flex items-center justify-center\">\r\n                                <BookOpen className=\"w-5 h-5 text-gray-700\" />\r\n                            </div>\r\n                            <span className=\"text-3xl font-medium text-gray-900\">\r\n                                {siamsReadiness}%\r\n                            </span>\r\n                        </div>\r\n                        <h3 className=\"font-medium text-gray-900\">SIAMS Readiness</h3>\r\n                        <div className=\"mt-3 w-full bg-gray-200 rounded-full h-1.5\">\r\n                            <div \r\n                                className=\"h-1.5 rounded-full bg-gray-900 transition-all\"\r\n                                style={{ width: `${siamsReadiness}%` }}\r\n                            />\r\n                        </div>\r\n                        <p className=\"mt-3 text-sm text-gray-500 flex items-center gap-1\">\r\n                            View Framework <ArrowRight className=\"w-3 h-3\" />\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Actions */}\r\n                <div className=\"bg-gray-50 rounded-2xl p-6 hover:bg-gray-100 transition-colors cursor-pointer\"\r\n                     onClick={() => onNavigate('actions')}>\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <div className=\"w-10 h-10 rounded-xl bg-gray-200 flex items-center justify-center\">\r\n                            <ClipboardCheck className=\"w-5 h-5 text-gray-700\" />\r\n                        </div>\r\n                        <span className=\"text-3xl font-medium text-gray-900\">\r\n                            {completedActions}/{actions.length}\r\n                        </span>\r\n                    </div>\r\n                    <h3 className=\"font-medium text-gray-900\">Actions Complete</h3>\r\n                    <div className=\"mt-3 flex gap-2\">\r\n                        <span className=\"px-2 py-1 bg-gray-200 text-gray-700 text-xs rounded-md\">\r\n                            {inProgressActions} In Progress\r\n                        </span>\r\n                        <span className=\"px-2 py-1 bg-gray-200 text-gray-700 text-xs rounded-md\">\r\n                            {actions.length - completedActions - inProgressActions} Draft\r\n                        </span>\r\n                    </div>\r\n                    <p className=\"mt-3 text-sm text-gray-500 flex items-center gap-1\">\r\n                        View Actions <ArrowRight className=\"w-3 h-3\" />\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Evidence */}\r\n                <div className=\"bg-gray-50 rounded-2xl p-6\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <div className=\"w-10 h-10 rounded-xl bg-gray-200 flex items-center justify-center\">\r\n                            <FileText className=\"w-5 h-5 text-gray-700\" />\r\n                        </div>\r\n                        <span className=\"text-3xl font-medium text-gray-900\">\r\n                            {evidenceCount}\r\n                        </span>\r\n                    </div>\r\n                    <h3 className=\"font-medium text-gray-900\">Evidence Items</h3>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Documents matched to framework</p>\r\n                    <p className=\"mt-3 text-sm text-gray-500 flex items-center gap-1\">\r\n                        Scan More <ArrowRight className=\"w-3 h-3\" />\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Two Column Layout */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Needs Attention */}\r\n                <div className=\"bg-white rounded-2xl border border-gray-100 overflow-hidden\">\r\n                    <div className=\"px-6 py-4 border-b border-gray-100 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <AlertTriangle className=\"w-4 h-4 text-amber-500\" />\r\n                            <h2 className=\"font-medium text-gray-900\">Needs Attention</h2>\r\n                        </div>\r\n                        {urgentItems.length > 0 && (\r\n                            <span className=\"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-medium rounded-full\">\r\n                                {urgentItems.length}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"divide-y divide-gray-50\">\r\n                        {urgentItems.length === 0 ? (\r\n                            <div className=\"p-8 text-center\">\r\n                                <CheckCircle className=\"w-10 h-10 text-gray-300 mx-auto mb-3\" />\r\n                                <p className=\"text-gray-500\">All caught up! No urgent items.</p>\r\n                            </div>\r\n                        ) : (\r\n                            urgentItems.slice(0, 5).map((item) => (\r\n                                <div \r\n                                    key={item.id} \r\n                                    className=\"px-6 py-4 hover:bg-gray-50 transition-colors cursor-pointer\"\r\n                                    onClick={() => onNavigate(item.link)}\r\n                                >\r\n                                    <div className=\"flex items-start justify-between\">\r\n                                        <div className=\"flex items-start gap-3\">\r\n                                            <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${\r\n                                                item.priority === 'critical' ? 'bg-red-50' :\r\n                                                item.priority === 'high' ? 'bg-amber-50' : 'bg-gray-100'\r\n                                            }`}>\r\n                                                <AlertCircle className={`w-4 h-4 ${\r\n                                                    item.priority === 'critical' ? 'text-red-500' :\r\n                                                    item.priority === 'high' ? 'text-amber-500' : 'text-gray-500'\r\n                                                }`} />\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-medium text-gray-900\">{item.title}</p>\r\n                                                <p className=\"text-sm text-gray-500\">{item.description}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <button className=\"px-3 py-1.5 text-xs font-medium bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors\">\r\n                                            {item.action}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Quick Actions / Recent Activity */}\r\n                <div className=\"bg-white rounded-2xl border border-gray-100 overflow-hidden\">\r\n                    <div className=\"px-6 py-4 border-b border-gray-100 flex items-center gap-2\">\r\n                        <Zap className=\"w-4 h-4 text-gray-400\" />\r\n                        <h2 className=\"font-medium text-gray-900\">Quick Actions</h2>\r\n                    </div>\r\n                    <div className=\"p-4 space-y-2\">\r\n                        <button \r\n                            onClick={() => onNavigate('ofsted')}\r\n                            className=\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-xl text-left transition-colors flex items-center justify-between group\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-white border border-gray-200 flex items-center justify-center\">\r\n                                    <Target className=\"w-5 h-5 text-gray-600\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"font-medium text-gray-900\">Complete Self-Assessment</p>\r\n                                    <p className=\"text-sm text-gray-500\">Review Ofsted judgement areas</p>\r\n                                </div>\r\n                            </div>\r\n                            <ArrowRight className=\"w-4 h-4 text-gray-400 group-hover:translate-x-1 transition-transform\" />\r\n                        </button>\r\n                        \r\n                        <button \r\n                            onClick={() => onNavigate('actions')}\r\n                            className=\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-xl text-left transition-colors flex items-center justify-between group\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-white border border-gray-200 flex items-center justify-center\">\r\n                                    <ClipboardCheck className=\"w-5 h-5 text-gray-600\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"font-medium text-gray-900\">Manage Actions</p>\r\n                                    <p className=\"text-sm text-gray-500\">Track improvement priorities</p>\r\n                                </div>\r\n                            </div>\r\n                            <ArrowRight className=\"w-4 h-4 text-gray-400 group-hover:translate-x-1 transition-transform\" />\r\n                        </button>\r\n\r\n                        <button \r\n                            onClick={() => onNavigate('reports')}\r\n                            className=\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-xl text-left transition-colors flex items-center justify-between group\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-white border border-gray-200 flex items-center justify-center\">\r\n                                    <FileText className=\"w-5 h-5 text-gray-600\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"font-medium text-gray-900\">Generate Reports</p>\r\n                                    <p className=\"text-sm text-gray-500\">SEF, SDP, Pupil Premium</p>\r\n                                </div>\r\n                            </div>\r\n                            <ArrowRight className=\"w-4 h-4 text-gray-400 group-hover:translate-x-1 transition-transform\" />\r\n                        </button>\r\n\r\n                        <button \r\n                            onClick={() => onNavigate('voice')}\r\n                            className=\"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-xl text-left transition-colors flex items-center justify-between group\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-white border border-gray-200 flex items-center justify-center\">\r\n                                    <TrendingUp className=\"w-5 h-5 text-gray-600\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"font-medium text-gray-900\">Voice Observation</p>\r\n                                    <p className=\"text-sm text-gray-500\">Record lesson observations</p>\r\n                                </div>\r\n                            </div>\r\n                            <ArrowRight className=\"w-4 h-4 text-gray-400 group-hover:translate-x-1 transition-transform\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MondayDashboard;\r\n","\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { \r\n    Mic, MicOff, Play, Pause, Square, CheckCircle, Clock,\r\n    RefreshCw, FileText, AlertTriangle, Loader2, Volume2, \r\n    Wand2, Save, Edit3\r\n} from 'lucide-react';\r\n\r\ninterface ProcessedObservation {\r\n    id: string;\r\n    teacherName: string;\r\n    date: string;\r\n    duration: string;\r\n    subject: string;\r\n    yearGroup: string;\r\n    transcript: string;\r\n    summary: string;\r\n    strengths: string[];\r\n    areasForDevelopment: string[];\r\n    ratings: Record<string, number>;\r\n    eefRecommendations: string[];\r\n    suggestedActions: string[];\r\n    ofstedLinks: string[];\r\n}\r\n\r\ninterface VoiceObservationProps {\r\n    onSaveObservation: (observation: ProcessedObservation) => void;\r\n}\r\n\r\nconst VoiceObservation: React.FC<VoiceObservationProps> = ({ onSaveObservation }) => {\r\n    const [isRecording, setIsRecording] = useState(false);\r\n    const [isPaused, setIsPaused] = useState(false);\r\n    const [recordingTime, setRecordingTime] = useState(0);\r\n    const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\r\n    const [transcript, setTranscript] = useState('');\r\n    const [isTranscribing, setIsTranscribing] = useState(false);\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n    const [processedObservation, setProcessedObservation] = useState<ProcessedObservation | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [teacherName, setTeacherName] = useState('');\r\n    const [subject, setSubject] = useState('');\r\n    const [yearGroup, setYearGroup] = useState('');\r\n    \r\n    const mediaRecorderRef = useRef<MediaRecorder | null>(null);\r\n    const audioChunksRef = useRef<Blob[]>([]);\r\n    const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    useEffect(() => {\r\n        return () => { if (timerRef.current) clearInterval(timerRef.current); };\r\n    }, []);\r\n\r\n    const formatTime = (seconds: number) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    const startRecording = async () => {\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n            const mediaRecorder = new MediaRecorder(stream);\r\n            mediaRecorderRef.current = mediaRecorder;\r\n            audioChunksRef.current = [];\r\n\r\n            mediaRecorder.ondataavailable = (e) => {\r\n                if (e.data.size > 0) audioChunksRef.current.push(e.data);\r\n            };\r\n\r\n            mediaRecorder.onstop = () => {\r\n                setAudioBlob(new Blob(audioChunksRef.current, { type: 'audio/webm' }));\r\n                stream.getTracks().forEach(track => track.stop());\r\n            };\r\n\r\n            mediaRecorder.start(1000);\r\n            setIsRecording(true);\r\n            setError(null);\r\n            timerRef.current = setInterval(() => setRecordingTime(prev => prev + 1), 1000);\r\n        } catch (err) {\r\n            setError('Could not access microphone. Please check permissions.');\r\n        }\r\n    };\r\n\r\n    const pauseRecording = () => {\r\n        if (mediaRecorderRef.current && isRecording) {\r\n            if (isPaused) {\r\n                mediaRecorderRef.current.resume();\r\n                timerRef.current = setInterval(() => setRecordingTime(prev => prev + 1), 1000);\r\n            } else {\r\n                mediaRecorderRef.current.pause();\r\n                if (timerRef.current) clearInterval(timerRef.current);\r\n            }\r\n            setIsPaused(!isPaused);\r\n        }\r\n    };\r\n\r\n    const stopRecording = () => {\r\n        if (mediaRecorderRef.current && isRecording) {\r\n            mediaRecorderRef.current.stop();\r\n            setIsRecording(false);\r\n            setIsPaused(false);\r\n            if (timerRef.current) clearInterval(timerRef.current);\r\n        }\r\n    };\r\n\r\n    const resetRecording = () => {\r\n        setAudioBlob(null);\r\n        setTranscript('');\r\n        setRecordingTime(0);\r\n        setProcessedObservation(null);\r\n    };\r\n\r\n    const transcribeAudio = async () => {\r\n        if (!audioBlob) return;\r\n        setIsTranscribing(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('audio', audioBlob, 'recording.webm');\r\n            const response = await fetch('/api/voice/transcribe', { method: 'POST', body: formData });\r\n            \r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setTranscript(data.transcript);\r\n            } else {\r\n                // Demo fallback\r\n                setTranscript(`Lesson observation for ${teacherName || 'the teacher'}. Strong subject knowledge demonstrated. Good use of questioning. Behaviour well managed. Clear learning objectives. Differentiation evident through tiered success criteria. Areas for development: pace could be quicker, more student talk needed.`);\r\n            }\r\n        } catch {\r\n            setTranscript('Demo transcript - Voice recording captured successfully. Strong teaching observed with good engagement.');\r\n        } finally {\r\n            setIsTranscribing(false);\r\n        }\r\n    };\r\n\r\n    const processObservation = async () => {\r\n        if (!transcript) return;\r\n        setIsProcessing(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/voice/process-observation', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ transcript, teacherName, subject, yearGroup })\r\n            });\r\n\r\n            const observation: ProcessedObservation = response.ok ? await response.json() : {\r\n                id: `obs_${Date.now()}`,\r\n                teacherName: teacherName || 'Teacher',\r\n                date: new Date().toISOString().split('T')[0],\r\n                duration: formatTime(recordingTime),\r\n                subject: subject || 'Not specified',\r\n                yearGroup: yearGroup || 'Not specified',\r\n                transcript,\r\n                summary: 'A well-structured lesson with strong subject knowledge and effective assessment.',\r\n                strengths: ['Strong subject knowledge', 'Effective questioning', 'Good differentiation'],\r\n                areasForDevelopment: ['Increase lesson pace', 'More student discussion'],\r\n                ratings: { subjectKnowledge: 4, pedagogy: 3, assessment: 4, behaviour: 3 },\r\n                eefRecommendations: ['Feedback (+6 months): Enhance AfL', 'Collaborative learning (+5 months)'],\r\n                suggestedActions: ['Observe exemplar lesson', 'Coaching on pace'],\r\n                ofstedLinks: ['Curriculum and Teaching', 'Achievement']\r\n            };\r\n            setProcessedObservation(observation);\r\n        } catch {\r\n            setError('Processing failed');\r\n        } finally {\r\n            setIsProcessing(false);\r\n        }\r\n    };\r\n\r\n    const getRatingColor = (rating: number) => {\r\n        if (rating >= 4) return 'bg-green-500';\r\n        if (rating >= 3) return 'bg-blue-500';\r\n        if (rating >= 2) return 'bg-yellow-500';\r\n        return 'bg-red-500';\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-violet-600 to-purple-600 rounded-2xl p-6 text-white\">\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                    <Mic className=\"w-8 h-8\" />\r\n                    <h1 className=\"text-2xl font-bold\">Voice-to-Observation</h1>\r\n                </div>\r\n                <p className=\"text-violet-100\">Record your notes and let AI structure them</p>\r\n            </div>\r\n\r\n            {/* Recording Section */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n                <h2 className=\"font-semibold text-gray-900 mb-4 flex items-center gap-2\">\r\n                    <Mic className=\"w-5 h-5 text-violet-500\" /> Record Observation\r\n                </h2>\r\n\r\n                <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n                    <input type=\"text\" value={teacherName} onChange={(e) => setTeacherName(e.target.value)}\r\n                        placeholder=\"Teacher name\" className=\"px-3 py-2 border rounded-lg\" />\r\n                    <input type=\"text\" value={subject} onChange={(e) => setSubject(e.target.value)}\r\n                        placeholder=\"Subject\" className=\"px-3 py-2 border rounded-lg\" />\r\n                    <input type=\"text\" value={yearGroup} onChange={(e) => setYearGroup(e.target.value)}\r\n                        placeholder=\"Year Group\" className=\"px-3 py-2 border rounded-lg\" />\r\n                </div>\r\n\r\n                <div className=\"flex flex-col items-center py-8 bg-gray-50 rounded-xl\">\r\n                    <div className=\"text-5xl font-mono font-bold text-gray-800 mb-6\">{formatTime(recordingTime)}</div>\r\n                    \r\n                    {isRecording && !isPaused && (\r\n                        <div className=\"flex items-center gap-1 mb-6\">\r\n                            {[1,2,3,4,5].map(i => <div key={i} className=\"w-1 bg-red-500 rounded-full animate-pulse\" style={{height: `${Math.random()*24+8}px`}} />)}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex items-center gap-4\">\r\n                        {!isRecording && !audioBlob && (\r\n                            <button onClick={startRecording} className=\"p-4 bg-red-500 text-white rounded-full hover:bg-red-600 shadow-lg\">\r\n                                <Mic className=\"w-8 h-8\" />\r\n                            </button>\r\n                        )}\r\n                        {isRecording && (\r\n                            <>\r\n                                <button onClick={pauseRecording} className=\"p-3 bg-yellow-500 text-white rounded-full hover:bg-yellow-600\">\r\n                                    {isPaused ? <Play className=\"w-6 h-6\" /> : <Pause className=\"w-6 h-6\" />}\r\n                                </button>\r\n                                <button onClick={stopRecording} className=\"p-4 bg-gray-700 text-white rounded-full hover:bg-gray-800\">\r\n                                    <Square className=\"w-6 h-6\" />\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                        {audioBlob && !isRecording && (\r\n                            <>\r\n                                <button onClick={() => new Audio(URL.createObjectURL(audioBlob)).play()} className=\"p-3 bg-blue-500 text-white rounded-full\">\r\n                                    <Volume2 className=\"w-6 h-6\" />\r\n                                </button>\r\n                                <button onClick={resetRecording} className=\"p-3 bg-gray-500 text-white rounded-full\">\r\n                                    <RefreshCw className=\"w-6 h-6\" />\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                {error && <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 flex items-center gap-2\"><AlertTriangle className=\"w-5 h-5\" />{error}</div>}\r\n            </div>\r\n\r\n            {/* Transcription */}\r\n            {audioBlob && (\r\n                <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <h2 className=\"font-semibold text-gray-900 flex items-center gap-2\"><FileText className=\"w-5 h-5 text-violet-500\" /> Transcript</h2>\r\n                        {!transcript && (\r\n                            <button onClick={transcribeAudio} disabled={isTranscribing} className=\"px-4 py-2 bg-violet-500 text-white rounded-lg flex items-center gap-2 disabled:opacity-50\">\r\n                                {isTranscribing ? <><Loader2 className=\"w-4 h-4 animate-spin\" /> Transcribing...</> : <><Wand2 className=\"w-4 h-4\" /> Transcribe</>}\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    {transcript ? (\r\n                        <div className=\"space-y-4\">\r\n                            <textarea value={transcript} onChange={(e) => setTranscript(e.target.value)} className=\"w-full h-32 p-4 border rounded-lg font-mono text-sm\" />\r\n                            <div className=\"flex justify-end\">\r\n                                <button onClick={processObservation} disabled={isProcessing} className=\"px-6 py-2 bg-gradient-to-r from-violet-500 to-purple-500 text-white rounded-lg flex items-center gap-2 disabled:opacity-50\">\r\n                                    {isProcessing ? <><Loader2 className=\"w-4 h-4 animate-spin\" /> Processing...</> : <><Wand2 className=\"w-4 h-4\" /> Process with AI</>}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : <div className=\"text-center py-8 text-gray-500\"><FileText className=\"w-12 h-12 mx-auto mb-2 opacity-50\" /><p>Click Transcribe to convert recording to text</p></div>}\r\n                </div>\r\n            )}\r\n\r\n            {/* Processed Observation */}\r\n            {processedObservation && (\r\n                <div className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                    <div className=\"p-4 bg-gradient-to-r from-violet-50 to-purple-50 border-b flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n                            <div>\r\n                                <h3 className=\"font-semibold\">{processedObservation.teacherName} • {processedObservation.subject}</h3>\r\n                                <p className=\"text-xs text-gray-500\">{processedObservation.yearGroup} • {processedObservation.date}</p>\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={() => onSaveObservation(processedObservation)} className=\"px-4 py-2 bg-green-500 text-white rounded-lg flex items-center gap-2\">\r\n                            <Save className=\"w-4 h-4\" /> Save\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"p-6 space-y-6\">\r\n                        <div><h4 className=\"font-semibold mb-2\">Summary</h4><p className=\"text-gray-700 bg-gray-50 p-4 rounded-lg\">{processedObservation.summary}</p></div>\r\n                        \r\n                        <div>\r\n                            <h4 className=\"font-semibold mb-3\">Ratings</h4>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                                {Object.entries(processedObservation.ratings).map(([key, value]) => (\r\n                                    <div key={key} className=\"p-3 bg-gray-50 rounded-lg\">\r\n                                        <div className=\"flex justify-between mb-2\">\r\n                                            <span className=\"text-sm capitalize\">{key.replace(/([A-Z])/g, ' $1')}</span>\r\n                                            <span className={`px-2 py-0.5 text-xs text-white rounded ${getRatingColor(value)}`}>{value}/4</span>\r\n                                        </div>\r\n                                        <div className=\"flex gap-1\">{[1,2,3,4].map(i => <div key={i} className={`flex-1 h-2 rounded ${i <= value ? getRatingColor(value) : 'bg-gray-200'}`} />)}</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n                                <h4 className=\"font-semibold text-green-900 mb-3\">Strengths</h4>\r\n                                <ul className=\"space-y-2\">{processedObservation.strengths.map((s, i) => <li key={i} className=\"flex items-start gap-2 text-sm text-green-800\"><CheckCircle className=\"w-4 h-4 mt-0.5\" />{s}</li>)}</ul>\r\n                            </div>\r\n                            <div className=\"p-4 bg-amber-50 border border-amber-200 rounded-lg\">\r\n                                <h4 className=\"font-semibold text-amber-900 mb-3\">Development Areas</h4>\r\n                                <ul className=\"space-y-2\">{processedObservation.areasForDevelopment.map((a, i) => <li key={i} className=\"flex items-start gap-2 text-sm text-amber-800\"><Edit3 className=\"w-4 h-4 mt-0.5\" />{a}</li>)}</ul>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                            <h4 className=\"font-semibold text-blue-900 mb-3\">EEF Recommendations</h4>\r\n                            <ul className=\"space-y-2\">{processedObservation.eefRecommendations.map((r, i) => <li key={i} className=\"text-sm text-blue-800\">📚 {r}</li>)}</ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VoiceObservation;\r\n\r\n","\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { \r\n    Search, MessageSquare, AlertTriangle, CheckCircle, Clock,\r\n    FileText, Loader2, ChevronRight, ChevronDown, Target,\r\n    Shield, Users, BookOpen, TrendingUp, HelpCircle\r\n} from 'lucide-react';\r\n\r\ninterface MockInspectorProps {\r\n    schoolData: { name: string; phase: string };\r\n    ofstedAssessments: Record<string, any>;\r\n    actions: any[];\r\n    evidenceCount: number;\r\n}\r\n\r\ninterface InspectorQuestion {\r\n    id: string;\r\n    category: string;\r\n    question: string;\r\n    context: string;\r\n    followUps: string[];\r\n    expectedEvidence: string[];\r\n    redFlags: string[];\r\n}\r\n\r\ninterface InspectionSimulation {\r\n    greeting: string;\r\n    questions: InspectorQuestion[];\r\n    challengeAreas: string[];\r\n    tips: string[];\r\n    overallReadiness: string;\r\n}\r\n\r\nconst MockInspector: React.FC<MockInspectorProps> = ({\r\n    schoolData,\r\n    ofstedAssessments,\r\n    actions,\r\n    evidenceCount\r\n}) => {\r\n    const [isSimulating, setIsSimulating] = useState(false);\r\n    const [simulation, setSimulation] = useState<InspectionSimulation | null>(null);\r\n    const [expandedQuestion, setExpandedQuestion] = useState<string | null>(null);\r\n    const [selectedPersona, setSelectedPersona] = useState('lead');\r\n    const [chatMessages, setChatMessages] = useState<{role: string; content: string}[]>([]);\r\n    const [userInput, setUserInput] = useState('');\r\n    const [isChatting, setIsChatting] = useState(false);\r\n\r\n    const personas = [\r\n        { id: 'lead', name: 'Lead Inspector', icon: Search, focus: 'Overall effectiveness, leadership' },\r\n        { id: 'curriculum', name: 'Curriculum Deep Diver', icon: BookOpen, focus: 'Subject leadership, curriculum design' },\r\n        { id: 'safeguarding', name: 'Safeguarding Lead', icon: Shield, focus: 'Child protection, culture of vigilance' },\r\n        { id: 'send', name: 'SEND Specialist', icon: Users, focus: 'Inclusion, adaptive teaching, support' },\r\n        { id: 'eyfs', name: 'EYFS Expert', icon: Target, focus: 'Early years provision, development' }\r\n    ];\r\n\r\n    const runSimulation = async () => {\r\n        setIsSimulating(true);\r\n        setChatMessages([]);\r\n        \r\n        try {\r\n            const response = await fetch('/api/mock-inspector/simulate', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    schoolData,\r\n                    assessments: ofstedAssessments,\r\n                    persona: selectedPersona\r\n                })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setSimulation(data);\r\n            } else {\r\n                // Demo simulation\r\n                setSimulation(generateDemoSimulation());\r\n            }\r\n        } catch {\r\n            setSimulation(generateDemoSimulation());\r\n        } finally {\r\n            setIsSimulating(false);\r\n        }\r\n    };\r\n\r\n    const generateDemoSimulation = (): InspectionSimulation => {\r\n        const questions: InspectorQuestion[] = [\r\n            {\r\n                id: '1',\r\n                category: 'Leadership',\r\n                question: \"What's your vision for education at this school, and how do you ensure all staff share it?\",\r\n                context: 'Inspectors assess whether leaders have high ambitions and a clear vision.',\r\n                followUps: [\r\n                    'How do you communicate this vision to new staff?',\r\n                    'Can you give an example of how this vision influenced a recent decision?'\r\n                ],\r\n                expectedEvidence: ['Vision statement', 'Staff meeting minutes', 'CPD plan'],\r\n                redFlags: ['Vague responses', 'Disconnect between stated vision and practice']\r\n            },\r\n            {\r\n                id: '2',\r\n                category: 'Curriculum',\r\n                question: 'Talk me through how you\\'ve designed the curriculum in [subject]. What are the key concepts pupils must learn?',\r\n                context: 'Deep dives examine curriculum intent and implementation.',\r\n                followUps: [\r\n                    'How does this build on what pupils learned previously?',\r\n                    'What do pupils find most challenging and how do you address this?'\r\n                ],\r\n                expectedEvidence: ['Curriculum map', 'Lesson sequences', 'Assessment examples'],\r\n                redFlags: ['No clear rationale', 'Content-heavy without skill progression']\r\n            },\r\n            {\r\n                id: '3',\r\n                category: 'Safeguarding',\r\n                question: 'Tell me about your safeguarding culture. How do staff know what to do if they have a concern?',\r\n                context: 'Safeguarding is always inspected. Culture matters as much as procedures.',\r\n                followUps: [\r\n                    'What training have staff received recently?',\r\n                    'Can you walk me through a recent case (anonymised)?'\r\n                ],\r\n                expectedEvidence: ['SCR', 'Training records', 'Concern logs', 'Policy'],\r\n                redFlags: ['Hesitation', 'Gaps in training', 'Poor record keeping']\r\n            },\r\n            {\r\n                id: '4',\r\n                category: 'SEND',\r\n                question: 'How do you identify and support pupils with SEND? What does adaptive teaching look like here?',\r\n                context: 'Inclusion is a central focus of the new framework.',\r\n                followUps: [\r\n                    'How do you ensure SEND pupils access the full curriculum?',\r\n                    'What\\'s your relationship with parents of SEND pupils like?'\r\n                ],\r\n                expectedEvidence: ['SEND register', 'Provision maps', 'Progress data', 'EHCPs'],\r\n                redFlags: ['Withdrawal as default', 'No progress data', 'Generic provision']\r\n            },\r\n            {\r\n                id: '5',\r\n                category: 'Behaviour',\r\n                question: 'What are your expectations for behaviour, and how do you ensure consistency across the school?',\r\n                context: 'Behaviour and attitudes are now part of the report card framework.',\r\n                followUps: [\r\n                    'How do you support pupils who struggle with behaviour?',\r\n                    'What does your data show about exclusions and suspensions?'\r\n                ],\r\n                expectedEvidence: ['Behaviour policy', 'Exclusion data', 'Support plans'],\r\n                redFlags: ['High exclusions', 'Inconsistent application', 'No support for struggling pupils']\r\n            }\r\n        ];\r\n\r\n        const weakAreas = Object.entries(ofstedAssessments)\r\n            .filter(([_, a]) => a.schoolRating === 'needs_attention' || a.schoolRating === 'urgent_improvement')\r\n            .map(([key]) => key.replace(/-/g, ' '));\r\n\r\n        return {\r\n            greeting: `Good morning. I'm the Lead Inspector for today's inspection of ${schoolData.name}. We'll be spending 1-2 days looking at the quality of education, behaviour and attitudes, personal development, and leadership. Let's start with some questions.`,\r\n            questions,\r\n            challengeAreas: weakAreas.length > 0 ? weakAreas : ['Consider reviewing curriculum coherence', 'Ensure SEND evidence is robust'],\r\n            tips: [\r\n                'Be specific with examples - avoid general statements',\r\n                'Know your data inside out, especially for disadvantaged pupils',\r\n                'Be honest about areas for development - we can see through spin',\r\n                'Have evidence to hand - don\\'t make inspectors wait',\r\n                'Ensure all staff can articulate the vision consistently'\r\n            ],\r\n            overallReadiness: evidenceCount > 20 && Object.keys(ofstedAssessments).length > 5 ? 'Good' : 'Needs more preparation'\r\n        };\r\n    };\r\n\r\n    const handleChat = async () => {\r\n        if (!userInput.trim()) return;\r\n        \r\n        const newMessage = { role: 'user', content: userInput };\r\n        setChatMessages(prev => [...prev, newMessage]);\r\n        setUserInput('');\r\n        setIsChatting(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/mock-inspector/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    messages: [...chatMessages, newMessage],\r\n                    persona: selectedPersona,\r\n                    schoolContext: { ...schoolData, assessments: ofstedAssessments }\r\n                })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setChatMessages(prev => [...prev, { role: 'inspector', content: data.response }]);\r\n            } else {\r\n                setChatMessages(prev => [...prev, { \r\n                    role: 'inspector', \r\n                    content: \"Thank you for that response. Can you tell me more about how you monitor the impact of your actions? I'd like to understand the evidence you use to measure success.\"\r\n                }]);\r\n            }\r\n        } catch {\r\n            setChatMessages(prev => [...prev, { \r\n                role: 'inspector', \r\n                content: \"Interesting. Now, let's talk about how you support your disadvantaged pupils specifically. What strategies have you implemented this year?\"\r\n            }]);\r\n        } finally {\r\n            setIsChatting(false);\r\n        }\r\n    };\r\n\r\n    const getCategoryIcon = (category: string) => {\r\n        switch (category.toLowerCase()) {\r\n            case 'leadership': return <Target className=\"w-5 h-5\" />;\r\n            case 'curriculum': return <BookOpen className=\"w-5 h-5\" />;\r\n            case 'safeguarding': return <Shield className=\"w-5 h-5\" />;\r\n            case 'send': return <Users className=\"w-5 h-5\" />;\r\n            case 'behaviour': return <TrendingUp className=\"w-5 h-5\" />;\r\n            default: return <HelpCircle className=\"w-5 h-5\" />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-slate-700 to-slate-900 rounded-2xl p-6 text-white\">\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                    <Search className=\"w-8 h-8\" />\r\n                    <h1 className=\"text-2xl font-bold\">Mock Inspector</h1>\r\n                </div>\r\n                <p className=\"text-slate-300\">Prepare for inspection with AI-powered practice scenarios</p>\r\n            </div>\r\n\r\n            {/* Persona Selection */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n                <h2 className=\"font-semibold text-gray-900 mb-4\">Select Inspector Persona</h2>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-5 gap-3\">\r\n                    {personas.map(persona => (\r\n                        <button\r\n                            key={persona.id}\r\n                            onClick={() => setSelectedPersona(persona.id)}\r\n                            className={`p-4 rounded-xl text-left transition-all ${\r\n                                selectedPersona === persona.id \r\n                                    ? 'bg-slate-100 border-2 border-slate-500' \r\n                                    : 'bg-gray-50 border border-gray-200 hover:bg-gray-100'\r\n                            }`}\r\n                        >\r\n                            <persona.icon className={`w-6 h-6 mb-2 ${selectedPersona === persona.id ? 'text-slate-700' : 'text-gray-400'}`} />\r\n                            <h3 className=\"font-medium text-sm\">{persona.name}</h3>\r\n                            <p className=\"text-xs text-gray-500 mt-1\">{persona.focus}</p>\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n                <button\r\n                    onClick={runSimulation}\r\n                    disabled={isSimulating}\r\n                    className=\"mt-4 px-6 py-3 bg-slate-800 text-white font-semibold rounded-lg hover:bg-slate-900 transition-colors flex items-center gap-2 disabled:opacity-50\"\r\n                >\r\n                    {isSimulating ? <><Loader2 className=\"w-5 h-5 animate-spin\" /> Preparing...</> : <><Search className=\"w-5 h-5\" /> Start Mock Inspection</>}\r\n                </button>\r\n            </div>\r\n\r\n            {/* Simulation Results */}\r\n            {simulation && (\r\n                <>\r\n                    {/* Opening */}\r\n                    <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n                        <div className=\"flex items-start gap-4\">\r\n                            <div className=\"p-3 bg-slate-100 rounded-full\">\r\n                                <Search className=\"w-6 h-6 text-slate-700\" />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"font-semibold text-gray-900 mb-2\">Inspector Opening</h3>\r\n                                <p className=\"text-gray-700 italic\">\"{simulation.greeting}\"</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Questions */}\r\n                    <div className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                        <div className=\"p-4 border-b bg-gray-50\">\r\n                            <h2 className=\"font-semibold text-gray-900\">Likely Questions</h2>\r\n                            <p className=\"text-sm text-gray-500\">Click to expand and see follow-ups, expected evidence, and red flags</p>\r\n                        </div>\r\n                        <div className=\"divide-y\">\r\n                            {simulation.questions.map(q => (\r\n                                <div key={q.id} className=\"p-4\">\r\n                                    <button\r\n                                        onClick={() => setExpandedQuestion(expandedQuestion === q.id ? null : q.id)}\r\n                                        className=\"w-full flex items-start gap-3 text-left\"\r\n                                    >\r\n                                        <div className={`p-2 rounded-lg ${expandedQuestion === q.id ? 'bg-slate-100' : 'bg-gray-100'}`}>\r\n                                            {getCategoryIcon(q.category)}\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                                <span className=\"text-xs font-medium px-2 py-0.5 bg-gray-200 rounded\">{q.category}</span>\r\n                                            </div>\r\n                                            <p className=\"font-medium text-gray-900\">{q.question}</p>\r\n                                        </div>\r\n                                        {expandedQuestion === q.id ? <ChevronDown className=\"w-5 h-5 text-gray-400\" /> : <ChevronRight className=\"w-5 h-5 text-gray-400\" />}\r\n                                    </button>\r\n                                    \r\n                                    {expandedQuestion === q.id && (\r\n                                        <div className=\"mt-4 pl-14 space-y-4\">\r\n                                            <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n                                                <p className=\"text-sm text-blue-800\"><strong>Context:</strong> {q.context}</p>\r\n                                            </div>\r\n                                            \r\n                                            <div>\r\n                                                <h4 className=\"font-medium text-sm text-gray-700 mb-2\">Likely Follow-ups:</h4>\r\n                                                <ul className=\"space-y-1\">{q.followUps.map((f, i) => <li key={i} className=\"text-sm text-gray-600 flex items-start gap-2\"><ChevronRight className=\"w-4 h-4 mt-0.5\" />{f}</li>)}</ul>\r\n                                            </div>\r\n                                            \r\n                                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                                <div className=\"p-3 bg-green-50 rounded-lg\">\r\n                                                    <h4 className=\"font-medium text-sm text-green-800 mb-2\">Expected Evidence</h4>\r\n                                                    <ul className=\"space-y-1\">{q.expectedEvidence.map((e, i) => <li key={i} className=\"text-sm text-green-700 flex items-center gap-2\"><CheckCircle className=\"w-4 h-4\" />{e}</li>)}</ul>\r\n                                                </div>\r\n                                                <div className=\"p-3 bg-red-50 rounded-lg\">\r\n                                                    <h4 className=\"font-medium text-sm text-red-800 mb-2\">Red Flags</h4>\r\n                                                    <ul className=\"space-y-1\">{q.redFlags.map((r, i) => <li key={i} className=\"text-sm text-red-700 flex items-center gap-2\"><AlertTriangle className=\"w-4 h-4\" />{r}</li>)}</ul>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Practice Chat */}\r\n                    <div className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                        <div className=\"p-4 border-b bg-gray-50\">\r\n                            <h2 className=\"font-semibold text-gray-900 flex items-center gap-2\"><MessageSquare className=\"w-5 h-5\" /> Practice Conversation</h2>\r\n                        </div>\r\n                        <div className=\"h-64 overflow-y-auto p-4 space-y-4\">\r\n                            {chatMessages.length === 0 && (\r\n                                <div className=\"text-center py-8 text-gray-500\">\r\n                                    <MessageSquare className=\"w-10 h-10 mx-auto mb-2 opacity-50\" />\r\n                                    <p>Start a practice conversation with the inspector</p>\r\n                                </div>\r\n                            )}\r\n                            {chatMessages.map((msg, i) => (\r\n                                <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                                    <div className={`max-w-[70%] p-3 rounded-lg ${msg.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-800'}`}>\r\n                                        <p className=\"text-sm\">{msg.content}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {isChatting && (\r\n                                <div className=\"flex justify-start\">\r\n                                    <div className=\"bg-gray-100 p-3 rounded-lg\"><Loader2 className=\"w-5 h-5 animate-spin text-gray-500\" /></div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"p-4 border-t flex gap-2\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={userInput}\r\n                                onChange={(e) => setUserInput(e.target.value)}\r\n                                onKeyPress={(e) => e.key === 'Enter' && handleChat()}\r\n                                placeholder=\"Practice your response...\"\r\n                                className=\"flex-1 px-4 py-2 border rounded-lg\"\r\n                            />\r\n                            <button onClick={handleChat} disabled={isChatting || !userInput.trim()} className=\"px-4 py-2 bg-slate-800 text-white rounded-lg disabled:opacity-50\">Send</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Tips */}\r\n                    <div className=\"bg-amber-50 rounded-xl border border-amber-200 p-6\">\r\n                        <h3 className=\"font-semibold text-amber-900 mb-3\">💡 Top Tips for Inspection Day</h3>\r\n                        <ul className=\"space-y-2\">{simulation.tips.map((tip, i) => <li key={i} className=\"text-sm text-amber-800 flex items-start gap-2\"><CheckCircle className=\"w-4 h-4 mt-0.5\" />{tip}</li>)}</ul>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MockInspector;\r\n\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3', key: '1u773s' }],\n  ['path', { d: 'M12 17h.01', key: 'p32p05' }],\n];\n\n/**\n * @component @name CircleQuestionMark\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOS4wOSA5YTMgMyAwIDAgMSA1LjgzIDFjMCAyLTMgMy0zIDMiIC8+CiAgPHBhdGggZD0iTTEyIDE3aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle-question-mark\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleQuestionMark = createLucideIcon('circle-question-mark', __iconNode);\n\nexport default CircleQuestionMark;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '14', height: '14', x: '8', y: '8', rx: '2', ry: '2', key: '17jyea' }],\n  ['path', { d: 'M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2', key: 'zix9uf' }],\n];\n\n/**\n * @component @name Copy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHg9IjgiIHk9IjgiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNNCAxNmMtMS4xIDAtMi0uOS0yLTJWNGMwLTEuMS45LTIgMi0yaDEwYzEuMSAwIDIgLjkgMiAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Copy = createLucideIcon('copy', __iconNode);\n\nexport default Copy;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n];\n\n/**\n * @component @name Square\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Square = createLucideIcon('square', __iconNode);\n\nexport default Square;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z', key: 'p7xjir' }],\n];\n\n/**\n * @component @name Cloud\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTcuNSAxOUg5YTcgNyAwIDEgMSA2LjcxLTloMS43OWE0LjUgNC41IDAgMSAxIDAgOVoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/cloud\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Cloud = createLucideIcon('cloud', __iconNode);\n\nexport default Cloud;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['line', { x1: '19', x2: '19', y1: '8', y2: '14', key: '1bvyxn' }],\n  ['line', { x1: '22', x2: '16', y1: '11', y2: '11', key: '1shjgl' }],\n];\n\n/**\n * @component @name UserPlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8bGluZSB4MT0iMTkiIHgyPSIxOSIgeTE9IjgiIHkyPSIxNCIgLz4KICA8bGluZSB4MT0iMjIiIHgyPSIxNiIgeTE9IjExIiB5Mj0iMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserPlus = createLucideIcon('user-plus', __iconNode);\n\nexport default UserPlus;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 16v-4', key: '1dtifu' }],\n  ['path', { d: 'M12 8h.01', key: 'e9boi3' }],\n];\n\n/**\n * @component @name Info\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMTZ2LTQiIC8+CiAgPHBhdGggZD0iTTEyIDhoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/info\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Info = createLucideIcon('info', __iconNode);\n\nexport default Info;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { x: '14', y: '3', width: '5', height: '18', rx: '1', key: 'kaeet6' }],\n  ['rect', { x: '5', y: '3', width: '5', height: '18', rx: '1', key: '1wsw3u' }],\n];\n\n/**\n * @component @name Pause\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB4PSIxNCIgeT0iMyIgd2lkdGg9IjUiIGhlaWdodD0iMTgiIHJ4PSIxIiAvPgogIDxyZWN0IHg9IjUiIHk9IjMiIHdpZHRoPSI1IiBoZWlnaHQ9IjE4IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pause\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pause = createLucideIcon('pause', __iconNode);\n\nexport default Pause;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '7', height: '7', x: '3', y: '3', rx: '1', key: '1g98yp' }],\n  ['rect', { width: '7', height: '7', x: '3', y: '14', rx: '1', key: '1bb6yr' }],\n  ['path', { d: 'M14 4h7', key: '3xa0d5' }],\n  ['path', { d: 'M14 9h7', key: '1icrd9' }],\n  ['path', { d: 'M14 15h7', key: '1mj8o2' }],\n  ['path', { d: 'M14 20h7', key: '11slyb' }],\n];\n\n/**\n * @component @name LayoutList\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIzIiB5PSIzIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIzIiB5PSIxNCIgcng9IjEiIC8+CiAgPHBhdGggZD0iTTE0IDRoNyIgLz4KICA8cGF0aCBkPSJNMTQgOWg3IiAvPgogIDxwYXRoIGQ9Ik0xNCAxNWg3IiAvPgogIDxwYXRoIGQ9Ik0xNCAyMGg3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/layout-list\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LayoutList = createLucideIcon('layout-list', __iconNode);\n\nexport default LayoutList;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n];\n\n/**\n * @component @name CircleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleAlert = createLucideIcon('circle-alert', __iconNode);\n\nexport default CircleAlert;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '7', height: '9', x: '3', y: '3', rx: '1', key: '10lvy0' }],\n  ['rect', { width: '7', height: '5', x: '14', y: '3', rx: '1', key: '16une8' }],\n  ['rect', { width: '7', height: '9', x: '14', y: '12', rx: '1', key: '1hutg5' }],\n  ['rect', { width: '7', height: '5', x: '3', y: '16', rx: '1', key: 'ldoo1y' }],\n];\n\n/**\n * @component @name LayoutDashboard\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI5IiB4PSIzIiB5PSIzIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI1IiB4PSIxNCIgeT0iMyIgcng9IjEiIC8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iOSIgeD0iMTQiIHk9IjEyIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI1IiB4PSIzIiB5PSIxNiIgcng9IjEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/layout-dashboard\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LayoutDashboard = createLucideIcon('layout-dashboard', __iconNode);\n\nexport default LayoutDashboard;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n];\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('external-link', __iconNode);\n\nexport default ExternalLink;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2',\n      key: '143wyd',\n    },\n  ],\n  ['path', { d: 'M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6', key: '1itne7' }],\n  ['rect', { x: '6', y: '14', width: '12', height: '8', rx: '1', key: '1ue0tg' }],\n];\n\n/**\n * @component @name Printer\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAxOEg0YTIgMiAwIDAgMS0yLTJ2LTVhMiAyIDAgMCAxIDItMmgxNmEyIDIgMCAwIDEgMiAydjVhMiAyIDAgMCAxLTIgMmgtMiIgLz4KICA8cGF0aCBkPSJNNiA5VjNhMSAxIDAgMCAxIDEtMWgxMGExIDEgMCAwIDEgMSAxdjYiIC8+CiAgPHJlY3QgeD0iNiIgeT0iMTQiIHdpZHRoPSIxMiIgaGVpZ2h0PSI4IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/printer\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Printer = createLucideIcon('printer', __iconNode);\n\nexport default Printer;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z',\n      key: 'j76jl0',\n    },\n  ],\n  ['path', { d: 'M22 10v6', key: '1lu8f3' }],\n  ['path', { d: 'M6 12.5V16a6 3 0 0 0 12 0v-3.5', key: '1r8lef' }],\n];\n\n/**\n * @component @name GraduationCap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuNDIgMTAuOTIyYTEgMSAwIDAgMC0uMDE5LTEuODM4TDEyLjgzIDUuMThhMiAyIDAgMCAwLTEuNjYgMEwyLjYgOS4wOGExIDEgMCAwIDAgMCAxLjgzMmw4LjU3IDMuOTA4YTIgMiAwIDAgMCAxLjY2IDB6IiAvPgogIDxwYXRoIGQ9Ik0yMiAxMHY2IiAvPgogIDxwYXRoIGQ9Ik02IDEyLjVWMTZhNiAzIDAgMCAwIDEyIDB2LTMuNSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/graduation-cap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst GraduationCap = createLucideIcon('graduation-cap', __iconNode);\n\nexport default GraduationCap;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z',\n      key: 'sc7q7i',\n    },\n  ],\n];\n\n/**\n * @component @name Funnel\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMjBhMSAxIDAgMCAwIC41NTMuODk1bDIgMUExIDEgMCAwIDAgMTQgMjF2LTdhMiAyIDAgMCAxIC41MTctMS4zNDFMMjEuNzQgNC42N0ExIDEgMCAwIDAgMjEgM0gzYTEgMSAwIDAgMC0uNzQyIDEuNjdsNy4yMjUgNy45ODlBMiAyIDAgMCAxIDEwIDE0eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/funnel\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Funnel = createLucideIcon('funnel', __iconNode);\n\nexport default Funnel;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z',\n      key: '1c8476',\n    },\n  ],\n  ['path', { d: 'M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7', key: '1ydtos' }],\n  ['path', { d: 'M7 3v4a1 1 0 0 0 1 1h7', key: 't51u73' }],\n];\n\n/**\n * @component @name Save\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUuMiAzYTIgMiAwIDAgMSAxLjQuNmwzLjggMy44YTIgMiAwIDAgMSAuNiAxLjRWMTlhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yeiIgLz4KICA8cGF0aCBkPSJNMTcgMjF2LTdhMSAxIDAgMCAwLTEtMUg4YTEgMSAwIDAgMC0xIDF2NyIgLz4KICA8cGF0aCBkPSJNNyAzdjRhMSAxIDAgMCAwIDEgMWg3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/save\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Save = createLucideIcon('save', __iconNode);\n\nexport default Save;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n];\n\n/**\n * @component @name Pen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pen = createLucideIcon('pen', __iconNode);\n\nexport default Pen;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z',\n      key: 'uqj9uw',\n    },\n  ],\n  ['path', { d: 'M16 9a5 5 0 0 1 0 6', key: '1q6k2b' }],\n  ['path', { d: 'M19.364 18.364a9 9 0 0 0 0-12.728', key: 'ijwkga' }],\n];\n\n/**\n * @component @name Volume2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgNC43MDJhLjcwNS43MDUgMCAwIDAtMS4yMDMtLjQ5OEw2LjQxMyA3LjU4N0ExLjQgMS40IDAgMCAxIDUuNDE2IDhIM2ExIDEgMCAwIDAtMSAxdjZhMSAxIDAgMCAwIDEgMWgyLjQxNmExLjQgMS40IDAgMCAxIC45OTcuNDEzbDMuMzgzIDMuMzg0QS43MDUuNzA1IDAgMCAwIDExIDE5LjI5OHoiIC8+CiAgPHBhdGggZD0iTTE2IDlhNSA1IDAgMCAxIDAgNiIgLz4KICA8cGF0aCBkPSJNMTkuMzY0IDE4LjM2NGE5IDkgMCAwIDAgMC0xMi43MjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/volume-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Volume2 = createLucideIcon('volume-2', __iconNode);\n\nexport default Volume2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'm21 3-7 7', key: '1l2asr' }],\n  ['path', { d: 'm3 21 7-7', key: 'tjx5ai' }],\n  ['path', { d: 'M9 21H3v-6', key: 'wtvkvv' }],\n];\n\n/**\n * @component @name Maximize2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0ibTIxIDMtNyA3IiAvPgogIDxwYXRoIGQ9Im0zIDIxIDctNyIgLz4KICA8cGF0aCBkPSJNOSAyMUgzdi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/maximize-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Maximize2 = createLucideIcon('maximize-2', __iconNode);\n\nexport default Maximize2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 5h.01', key: '18ugdj' }],\n  ['path', { d: 'M3 12h.01', key: 'nlz23k' }],\n  ['path', { d: 'M3 19h.01', key: 'noohij' }],\n  ['path', { d: 'M8 5h13', key: '1pao27' }],\n  ['path', { d: 'M8 12h13', key: '1za7za' }],\n  ['path', { d: 'M8 19h13', key: 'm83p4d' }],\n];\n\n/**\n * @component @name List\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA1aC4wMSIgLz4KICA8cGF0aCBkPSJNMyAxMmguMDEiIC8+CiAgPHBhdGggZD0iTTMgMTloLjAxIiAvPgogIDxwYXRoIGQ9Ik04IDVoMTMiIC8+CiAgPHBhdGggZD0iTTggMTJoMTMiIC8+CiAgPHBhdGggZD0iTTggMTloMTMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/list\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst List = createLucideIcon('list', __iconNode);\n\nexport default List;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72',\n      key: 'ul74o6',\n    },\n  ],\n  ['path', { d: 'm14 7 3 3', key: '1r5n42' }],\n  ['path', { d: 'M5 6v4', key: 'ilb8ba' }],\n  ['path', { d: 'M19 14v4', key: 'blhpug' }],\n  ['path', { d: 'M10 2v2', key: '7u0qdc' }],\n  ['path', { d: 'M7 8H3', key: 'zfb6yr' }],\n  ['path', { d: 'M21 16h-4', key: '1cnmox' }],\n  ['path', { d: 'M11 3H9', key: '1obp7u' }],\n];\n\n/**\n * @component @name WandSparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNjQgMy42NC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzIiIC8+CiAgPHBhdGggZD0ibTE0IDcgMyAzIiAvPgogIDxwYXRoIGQ9Ik01IDZ2NCIgLz4KICA8cGF0aCBkPSJNMTkgMTR2NCIgLz4KICA8cGF0aCBkPSJNMTAgMnYyIiAvPgogIDxwYXRoIGQ9Ik03IDhIMyIgLz4KICA8cGF0aCBkPSJNMjEgMTZoLTQiIC8+CiAgPHBhdGggZD0iTTExIDNIOSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/wand-sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst WandSparkles = createLucideIcon('wand-sparkles', __iconNode);\n\nexport default WandSparkles;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm21 16-4 4-4-4', key: 'f6ql7i' }],\n  ['path', { d: 'M17 20V4', key: '1ejh1v' }],\n  ['path', { d: 'm3 8 4-4 4 4', key: '11wl7u' }],\n  ['path', { d: 'M7 4v16', key: '1glfcx' }],\n];\n\n/**\n * @component @name ArrowUpDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEgMTYtNCA0LTQtNCIgLz4KICA8cGF0aCBkPSJNMTcgMjBWNCIgLz4KICA8cGF0aCBkPSJtMyA4IDQtNCA0IDQiIC8+CiAgPHBhdGggZD0iTTcgNHYxNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-up-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUpDown = createLucideIcon('arrow-up-down', __iconNode);\n\nexport default ArrowUpDown;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M8 2v4', key: '1cmpym' }],\n  ['path', { d: 'M16 2v4', key: '4m81vk' }],\n  ['rect', { width: '18', height: '18', x: '3', y: '4', rx: '2', key: '1hopcy' }],\n  ['path', { d: 'M3 10h18', key: '8toen8' }],\n];\n\n/**\n * @component @name Calendar\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAydjQiIC8+CiAgPHBhdGggZD0iTTE2IDJ2NCIgLz4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjQiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik0zIDEwaDE4IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/calendar\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Calendar = createLucideIcon('calendar', __iconNode);\n\nexport default Calendar;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M4 9a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a1 1 0 0 1 1 1v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a1 1 0 0 1 1-1h4a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a1 1 0 0 1-1-1V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4a1 1 0 0 1-1 1z',\n      key: '1xbrqy',\n    },\n  ],\n];\n\n/**\n * @component @name Cross\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCA5YTIgMiAwIDAgMC0yIDJ2MmEyIDIgMCAwIDAgMiAyaDRhMSAxIDAgMCAxIDEgMXY0YTIgMiAwIDAgMCAyIDJoMmEyIDIgMCAwIDAgMi0ydi00YTEgMSAwIDAgMSAxLTFoNGEyIDIgMCAwIDAgMi0ydi0yYTIgMiAwIDAgMC0yLTJoLTRhMSAxIDAgMCAxLTEtMVY0YTIgMiAwIDAgMC0yLTJoLTJhMiAyIDAgMCAwLTIgMnY0YTEgMSAwIDAgMS0xIDF6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/cross\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Cross = createLucideIcon('cross', __iconNode);\n\nexport default Cross;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z',\n      key: '1kt360',\n    },\n  ],\n];\n\n/**\n * @component @name Folder\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMjBhMiAyIDAgMCAwIDItMlY4YTIgMiAwIDAgMC0yLTJoLTcuOWEyIDIgMCAwIDEtMS42OS0uOUw5LjYgMy45QTIgMiAwIDAgMCA3LjkzIDNINGEyIDIgMCAwIDAtMiAydjEzYTIgMiAwIDAgMCAyIDJaIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/folder\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Folder = createLucideIcon('folder', __iconNode);\n\nexport default Folder;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm14 10 7-7', key: 'oa77jy' }],\n  ['path', { d: 'M20 10h-6V4', key: 'mjg0md' }],\n  ['path', { d: 'm3 21 7-7', key: 'tjx5ai' }],\n  ['path', { d: 'M4 14h6v6', key: 'rmj7iw' }],\n];\n\n/**\n * @component @name Minimize2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTQgMTAgNy03IiAvPgogIDxwYXRoIGQ9Ik0yMCAxMGgtNlY0IiAvPgogIDxwYXRoIGQ9Im0zIDIxIDctNyIgLz4KICA8cGF0aCBkPSJNNCAxNGg2djYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/minimize-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Minimize2 = createLucideIcon('minimize-2', __iconNode);\n\nexport default Minimize2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z',\n      key: 'zw3jo',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12',\n      key: '1wduqc',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17',\n      key: 'kqbvx6',\n    },\n  ],\n];\n\n/**\n * @component @name Layers\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIuODMgMi4xOGEyIDIgMCAwIDAtMS42NiAwTDIuNiA2LjA4YTEgMSAwIDAgMCAwIDEuODNsOC41OCAzLjkxYTIgMiAwIDAgMCAxLjY2IDBsOC41OC0zLjlhMSAxIDAgMCAwIDAtMS44M3oiIC8+CiAgPHBhdGggZD0iTTIgMTJhMSAxIDAgMCAwIC41OC45MWw4LjYgMy45MWEyIDIgMCAwIDAgMS42NSAwbDguNTgtMy45QTEgMSAwIDAgMCAyMiAxMiIgLz4KICA8cGF0aCBkPSJNMiAxN2ExIDEgMCAwIDAgLjU4LjkxbDguNiAzLjkxYTIgMiAwIDAgMCAxLjY1IDBsOC41OC0zLjlBMSAxIDAgMCAwIDIyIDE3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/layers\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Layers = createLucideIcon('layers', __iconNode);\n\nexport default Layers;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M7 10v12', key: '1qc93n' }],\n  [\n    'path',\n    {\n      d: 'M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z',\n      key: 'emmmcr',\n    },\n  ],\n];\n\n/**\n * @component @name ThumbsUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNyAxMHYxMiIgLz4KICA8cGF0aCBkPSJNMTUgNS44OCAxNCAxMGg1LjgzYTIgMiAwIDAgMSAxLjkyIDIuNTZsLTIuMzMgOEEyIDIgMCAwIDEgMTcuNSAyMkg0YTIgMiAwIDAgMS0yLTJ2LThhMiAyIDAgMCAxIDItMmgyLjc2YTIgMiAwIDAgMCAxLjc5LTEuMTFMMTIgMmEzLjEzIDMuMTMgMCAwIDEgMyAzLjg4WiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/thumbs-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ThumbsUp = createLucideIcon('thumbs-up', __iconNode);\n\nexport default ThumbsUp;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['line', { x1: '22', x2: '2', y1: '12', y2: '12', key: '1y58io' }],\n  [\n    'path',\n    {\n      d: 'M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z',\n      key: 'oot6mr',\n    },\n  ],\n  ['line', { x1: '6', x2: '6.01', y1: '16', y2: '16', key: 'sgf278' }],\n  ['line', { x1: '10', x2: '10.01', y1: '16', y2: '16', key: '1l4acy' }],\n];\n\n/**\n * @component @name HardDrive\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMjIiIHgyPSIyIiB5MT0iMTIiIHkyPSIxMiIgLz4KICA8cGF0aCBkPSJNNS40NSA1LjExIDIgMTJ2NmEyIDIgMCAwIDAgMiAyaDE2YTIgMiAwIDAgMCAyLTJ2LTZsLTMuNDUtNi44OUEyIDIgMCAwIDAgMTYuNzYgNEg3LjI0YTIgMiAwIDAgMC0xLjc5IDEuMTF6IiAvPgogIDxsaW5lIHgxPSI2IiB4Mj0iNi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+CiAgPGxpbmUgeDE9IjEwIiB4Mj0iMTAuMDEiIHkxPSIxNiIgeTI9IjE2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/hard-drive\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst HardDrive = createLucideIcon('hard-drive', __iconNode);\n\nexport default HardDrive;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 9h4', key: 'u4k05v' }],\n  ['path', { d: 'M12 7v5', key: 'ma6bk' }],\n  ['path', { d: 'M14 21v-3a2 2 0 0 0-4 0v3', key: '1rgiei' }],\n  [\n    'path',\n    {\n      d: 'm18 9 3.52 2.147a1 1 0 0 1 .48.854V19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-6.999a1 1 0 0 1 .48-.854L6 9',\n      key: 'flvdwo',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M6 21V7a1 1 0 0 1 .376-.782l5-3.999a1 1 0 0 1 1.249.001l5 4A1 1 0 0 1 18 7v14',\n      key: 'a5i0n2',\n    },\n  ],\n];\n\n/**\n * @component @name Church\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgOWg0IiAvPgogIDxwYXRoIGQ9Ik0xMiA3djUiIC8+CiAgPHBhdGggZD0iTTE0IDIxdi0zYTIgMiAwIDAgMC00IDB2MyIgLz4KICA8cGF0aCBkPSJtMTggOSAzLjUyIDIuMTQ3YTEgMSAwIDAgMSAuNDguODU0VjE5YTIgMiAwIDAgMS0yIDJINGEyIDIgMCAwIDEtMi0ydi02Ljk5OWExIDEgMCAwIDEgLjQ4LS44NTRMNiA5IiAvPgogIDxwYXRoIGQ9Ik02IDIxVjdhMSAxIDAgMCAxIC4zNzYtLjc4Mmw1LTMuOTk5YTEgMSAwIDAgMSAxLjI0OS4wMDFsNSA0QTEgMSAwIDAgMSAxOCA3djE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/church\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Church = createLucideIcon('church', __iconNode);\n\nexport default Church;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M17 14V2', key: '8ymqnk' }],\n  [\n    'path',\n    {\n      d: 'M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z',\n      key: 'm61m77',\n    },\n  ],\n];\n\n/**\n * @component @name ThumbsDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTcgMTRWMiIgLz4KICA8cGF0aCBkPSJNOSAxOC4xMiAxMCAxNEg0LjE3YTIgMiAwIDAgMS0xLjkyLTIuNTZsMi4zMy04QTIgMiAwIDAgMSA2LjUgMkgyMGEyIDIgMCAwIDEgMiAydjhhMiAyIDAgMCAxLTIgMmgtMi43NmEyIDIgMCAwIDAtMS43OSAxLjExTDEyIDIyYTMuMTMgMy4xMyAwIDAgMS0zLTMuODhaIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/thumbs-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ThumbsDown = createLucideIcon('thumbs-down', __iconNode);\n\nexport default ThumbsDown;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M13 21h8', key: '1jsn5i' }],\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n];\n\n/**\n * @component @name PenLine\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMgMjFoOCIgLz4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen-line\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenLine = createLucideIcon('pen-line', __iconNode);\n\nexport default PenLine;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 5H3', key: '1fi0y6' }],\n  ['path', { d: 'M15 12H3', key: '6jk70r' }],\n  ['path', { d: 'M17 19H3', key: 'z6ezky' }],\n];\n\n/**\n * @component @name TextAlignStart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgNUgzIiAvPgogIDxwYXRoIGQ9Ik0xNSAxMkgzIiAvPgogIDxwYXRoIGQ9Ik0xNyAxOUgzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/text-align-start\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TextAlignStart = createLucideIcon('text-align-start', __iconNode);\n\nexport default TextAlignStart;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 3v12', key: '1x0j5s' }],\n  ['path', { d: 'm17 8-5-5-5 5', key: '7q97r8' }],\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n];\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM3YxMiIgLz4KICA8cGF0aCBkPSJtMTcgOC01LTUtNSA1IiAvPgogIDxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('upload', __iconNode);\n\nexport default Upload;\n","// EEF Teaching and Learning Toolkit - All 33 Strategies\r\n// Source: https://educationendowmentfoundation.org.uk/education-evidence/teaching-learning-toolkit\r\n\r\nexport interface EEFStrategy {\r\n    id: string;\r\n    name: string;\r\n    monthsProgress: number;\r\n    costRating: 1 | 2 | 3 | 4 | 5; // 1 = very low, 5 = very high\r\n    evidenceStrength: 1 | 2 | 3 | 4 | 5; // 1 = very limited, 5 = very extensive\r\n    category: 'teaching' | 'targeted' | 'wider';\r\n    description: string;\r\n    implementationTips: string[];\r\n    commonMistakes: string[];\r\n    ofstedLinks: string[]; // Links to Ofsted framework areas\r\n    keywords: string[]; // For matching to school data/issues\r\n}\r\n\r\nexport const eefStrategies: EEFStrategy[] = [\r\n    // HIGH IMPACT STRATEGIES\r\n    {\r\n        id: 'feedback',\r\n        name: 'Feedback',\r\n        monthsProgress: 6,\r\n        costRating: 1,\r\n        evidenceStrength: 5,\r\n        category: 'teaching',\r\n        description: 'Providing information to learners about their performance relative to learning goals, helping redirect actions to achieve the goal.',\r\n        implementationTips: [\r\n            'Focus on task, not the student personally',\r\n            'Be specific about what was done well and what needs improvement',\r\n            'Ensure students have time to act on feedback',\r\n            'Train students to give peer feedback effectively'\r\n        ],\r\n        commonMistakes: [\r\n            'Feedback given too late to be actionable',\r\n            'Too much focus on grades, not improvement',\r\n            'Students not given time to respond to feedback',\r\n            'Feedback not linked to success criteria'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Assessment'],\r\n        keywords: ['marking', 'assessment', 'feedback', 'progress', 'improvement']\r\n    },\r\n    {\r\n        id: 'metacognition',\r\n        name: 'Metacognition and Self-Regulation',\r\n        monthsProgress: 7,\r\n        costRating: 1,\r\n        evidenceStrength: 5,\r\n        category: 'teaching',\r\n        description: 'Teaching pupils specific strategies to set goals, monitor and evaluate their own learning.',\r\n        implementationTips: [\r\n            'Explicitly teach planning, monitoring, and evaluation strategies',\r\n            'Model your own thinking processes aloud',\r\n            'Provide structured opportunities for self-assessment',\r\n            'Use graphic organisers to support planning'\r\n        ],\r\n        commonMistakes: [\r\n            'Assuming students will develop these skills naturally',\r\n            'Not modelling the thinking process explicitly',\r\n            'Focusing only on content, not learning strategies',\r\n            'Not giving time for reflection'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Personal Development'],\r\n        keywords: ['thinking', 'reflection', 'self-assessment', 'planning', 'evaluation', 'independence']\r\n    },\r\n    {\r\n        id: 'reading-comprehension',\r\n        name: 'Reading Comprehension Strategies',\r\n        monthsProgress: 6,\r\n        costRating: 1,\r\n        evidenceStrength: 5,\r\n        category: 'teaching',\r\n        description: 'Teaching specific techniques to help students understand what they read, including inference, summarisation, and questioning.',\r\n        implementationTips: [\r\n            'Use reciprocal reading with clear roles',\r\n            'Teach inference explicitly with think-alouds',\r\n            'Connect reading to prior knowledge',\r\n            'Use graphic organisers for text structure'\r\n        ],\r\n        commonMistakes: [\r\n            'Moving on before comprehension is secured',\r\n            'Not teaching vocabulary alongside comprehension',\r\n            'Over-reliance on comprehension worksheets',\r\n            'Not modelling skilled reading behaviours'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Reading'],\r\n        keywords: ['reading', 'comprehension', 'inference', 'vocabulary', 'phonics', 'literacy']\r\n    },\r\n    {\r\n        id: 'collaborative-learning',\r\n        name: 'Collaborative Learning',\r\n        monthsProgress: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 5,\r\n        category: 'teaching',\r\n        description: 'Students working together on activities or learning tasks in a group small enough for everyone to participate.',\r\n        implementationTips: [\r\n            'Structure tasks so collaboration is necessary',\r\n            'Assign clear roles within groups',\r\n            'Train students in collaboration skills',\r\n            'Mix ability groups for some tasks'\r\n        ],\r\n        commonMistakes: [\r\n            'Groups too large (optimal is 3-4)',\r\n            'No individual accountability',\r\n            'One student does all the work',\r\n            'Task could be done individually'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Behaviour and Attitudes'],\r\n        keywords: ['group work', 'collaboration', 'teamwork', 'discussion', 'talk']\r\n    },\r\n    {\r\n        id: 'oral-language',\r\n        name: 'Oral Language Interventions',\r\n        monthsProgress: 6,\r\n        costRating: 1,\r\n        evidenceStrength: 5,\r\n        category: 'targeted',\r\n        description: 'Approaches that emphasise the importance of spoken language and verbal interaction in the classroom.',\r\n        implementationTips: [\r\n            'Create talk-rich classrooms',\r\n            'Explicitly teach academic vocabulary',\r\n            'Use structured talk activities (e.g., think-pair-share)',\r\n            'Target early years and disadvantaged pupils'\r\n        ],\r\n        commonMistakes: [\r\n            'Not allowing enough talk time',\r\n            'Accepting one-word answers',\r\n            'Not scaffolding academic language',\r\n            'Talking at students, not with them'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Early Years', 'SEND'],\r\n        keywords: ['speaking', 'listening', 'vocabulary', 'oracy', 'communication', 'language', 'EYFS']\r\n    },\r\n    {\r\n        id: 'mastery-learning',\r\n        name: 'Mastery Learning',\r\n        monthsProgress: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 4,\r\n        category: 'teaching',\r\n        description: 'Breaking subject matter into units with clear objectives, students must demonstrate mastery before moving on.',\r\n        implementationTips: [\r\n            'Define clear success criteria for each unit',\r\n            'Provide immediate corrective feedback',\r\n            'Allow time for re-teaching and practice',\r\n            'Use diagnostic assessments'\r\n        ],\r\n        commonMistakes: [\r\n            'Moving on before mastery achieved',\r\n            'Not providing enough practice time',\r\n            'Assessment not matched to objectives',\r\n            'One-size-fits-all pacing'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Assessment'],\r\n        keywords: ['mastery', 'maths', 'White Rose', 'fluency', 'practice', 'assessment']\r\n    },\r\n    {\r\n        id: 'small-group-tuition',\r\n        name: 'Small Group Tuition',\r\n        monthsProgress: 4,\r\n        costRating: 3,\r\n        evidenceStrength: 4,\r\n        category: 'targeted',\r\n        description: 'A teacher or professional educator working with two to five pupils together in a group.',\r\n        implementationTips: [\r\n            'Keep groups to 3-5 students maximum',\r\n            'Target specific gaps in knowledge',\r\n            'Use qualified teachers where possible',\r\n            'Link to classroom learning'\r\n        ],\r\n        commonMistakes: [\r\n            'Groups too large to be effective',\r\n            'Intervention not linked to class curriculum',\r\n            'Using untrained staff',\r\n            'Same students always withdrawn'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'SEND', 'Pupil Premium'],\r\n        keywords: ['intervention', 'small group', 'catch-up', 'PP', 'disadvantaged', 'tuition']\r\n    },\r\n    {\r\n        id: 'one-to-one-tuition',\r\n        name: 'One to One Tuition',\r\n        monthsProgress: 5,\r\n        costRating: 5,\r\n        evidenceStrength: 4,\r\n        category: 'targeted',\r\n        description: 'Intensive individual support for struggling learners.',\r\n        implementationTips: [\r\n            'Target specific learning needs',\r\n            'Use trained tutors',\r\n            'Short, focused sessions (30-45 mins)',\r\n            'Connect to classroom curriculum'\r\n        ],\r\n        commonMistakes: [\r\n            'Sessions too long or unfocused',\r\n            'Not addressing root cause of difficulty',\r\n            'Tutor not connected to class teacher',\r\n            'Over-reliance on withdrawal from class'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'SEND', 'Pupil Premium'],\r\n        keywords: ['1:1', 'tutor', 'intervention', 'SEND', 'EHC', 'individual']\r\n    },\r\n    {\r\n        id: 'peer-tutoring',\r\n        name: 'Peer Tutoring',\r\n        monthsProgress: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 5,\r\n        category: 'teaching',\r\n        description: 'Learners working in pairs or small groups to provide each other with explicit teaching support.',\r\n        implementationTips: [\r\n            'Train both tutors and tutees',\r\n            'Provide structured materials',\r\n            'Cross-age tutoring can be effective',\r\n            'Monitor and support pairs regularly'\r\n        ],\r\n        commonMistakes: [\r\n            'No training for peer tutors',\r\n            'Unstructured pairing time',\r\n            'Always same students tutoring',\r\n            'Not monitoring interactions'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Personal Development'],\r\n        keywords: ['peer', 'paired', 'buddy', 'mentoring', 'tutoring']\r\n    },\r\n    {\r\n        id: 'homework',\r\n        name: 'Homework',\r\n        monthsProgress: 5, // Secondary. Primary = +2 months\r\n        costRating: 1,\r\n        evidenceStrength: 4,\r\n        category: 'teaching',\r\n        description: 'Tasks given to pupils by teachers to complete outside of usual lessons.',\r\n        implementationTips: [\r\n            'Secondary: link to learning, not busy work',\r\n            'Primary: keep short, focus on reading',\r\n            'Provide feedback on homework',\r\n            'Consider homework clubs for disadvantaged'\r\n        ],\r\n        commonMistakes: [\r\n            'Homework for homeworks sake',\r\n            'Too much homework in primary',\r\n            'No feedback given',\r\n            'Widens disadvantage gap'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Pupil Premium'],\r\n        keywords: ['homework', 'home learning', 'independent', 'practice']\r\n    },\r\n    {\r\n        id: 'phonics',\r\n        name: 'Phonics',\r\n        monthsProgress: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 5,\r\n        category: 'teaching',\r\n        description: 'Systematic teaching of the relationship between sounds and spelling patterns.',\r\n        implementationTips: [\r\n            'Use a validated systematic synthetic phonics programme',\r\n            'Daily, focused sessions',\r\n            'Match books to phonics stage',\r\n            'Rapid intervention for those falling behind'\r\n        ],\r\n        commonMistakes: [\r\n            'Not following programme with fidelity',\r\n            'Books not matched to phonics knowledge',\r\n            'Mixed methods confusing children',\r\n            'Slow pace for struggling readers'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Reading', 'Early Years'],\r\n        keywords: ['phonics', 'reading', 'decoding', 'Little Wandle', 'RWI', 'sounds']\r\n    },\r\n    {\r\n        id: 'teaching-assistants',\r\n        name: 'Teaching Assistant Interventions',\r\n        monthsProgress: 4,\r\n        costRating: 3,\r\n        evidenceStrength: 4,\r\n        category: 'targeted',\r\n        description: 'Using TAs to deliver structured interventions to individuals or small groups.',\r\n        implementationTips: [\r\n            'Train TAs in specific interventions',\r\n            'Link interventions to class learning',\r\n            'TAs should supplement, not replace teacher input',\r\n            'Regular liaison between teacher and TA'\r\n        ],\r\n        commonMistakes: [\r\n            'TAs always work with lowest attainers',\r\n            'No training on interventions',\r\n            'TA work not connected to lessons',\r\n            'Over-scaffolding reducing independence'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'SEND', 'Leadership'],\r\n        keywords: ['TA', 'teaching assistant', 'LSA', 'support', 'intervention']\r\n    },\r\n    {\r\n        id: 'behaviour-interventions',\r\n        name: 'Behaviour Interventions',\r\n        monthsProgress: 4,\r\n        costRating: 3,\r\n        evidenceStrength: 4,\r\n        category: 'wider',\r\n        description: 'Approaches to reduce challenging behaviour and support positive engagement.',\r\n        implementationTips: [\r\n            'Focus on prevention, not just response',\r\n            'Teach social and emotional skills explicitly',\r\n            'Consistent whole-school approach',\r\n            'Address underlying causes'\r\n        ],\r\n        commonMistakes: [\r\n            'Reactive rather than proactive',\r\n            'Inconsistent application of policy',\r\n            'Not addressing root causes',\r\n            'Over-reliance on exclusion'\r\n        ],\r\n        ofstedLinks: ['Behaviour and Attitudes', 'Personal Development', 'SEND'],\r\n        keywords: ['behaviour', 'SEMH', 'exclusion', 'suspension', 'attitude', 'engagement']\r\n    },\r\n    {\r\n        id: 'social-emotional-learning',\r\n        name: 'Social and Emotional Learning',\r\n        monthsProgress: 4,\r\n        costRating: 1,\r\n        evidenceStrength: 4,\r\n        category: 'wider',\r\n        description: 'Interventions targeting social and emotional learning, including self-awareness and relationship skills.',\r\n        implementationTips: [\r\n            'Embed in whole-school culture',\r\n            'Explicit teaching of SEL skills',\r\n            'Staff training and modelling',\r\n            'Target universal and targeted approaches'\r\n        ],\r\n        commonMistakes: [\r\n            'Bolt-on PSHE lessons only',\r\n            'Not modelled by adults',\r\n            'No whole-school approach',\r\n            'Ignoring the classroom environment'\r\n        ],\r\n        ofstedLinks: ['Personal Development', 'Behaviour and Attitudes', 'Safeguarding'],\r\n        keywords: ['PSHE', 'wellbeing', 'mental health', 'resilience', 'relationships', 'character']\r\n    },\r\n    {\r\n        id: 'parental-engagement',\r\n        name: 'Parental Engagement',\r\n        monthsProgress: 4,\r\n        costRating: 2,\r\n        evidenceStrength: 4,\r\n        category: 'wider',\r\n        description: 'Strategies to improve parental involvement in their childrens learning.',\r\n        implementationTips: [\r\n            'Focus on learning activities, not just communication',\r\n            'Train parents in how to support at home',\r\n            'Target hard-to-reach families',\r\n            'Regular, accessible communication'\r\n        ],\r\n        commonMistakes: [\r\n            'One-way communication only',\r\n            'Not reaching disadvantaged families',\r\n            'Parents unsure how to help',\r\n            'Homework battles at home'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Personal Development', 'Pupil Premium'],\r\n        keywords: ['parents', 'carers', 'engagement', 'communication', 'home learning']\r\n    },\r\n    {\r\n        id: 'early-years-intervention',\r\n        name: 'Early Years Intervention',\r\n        monthsProgress: 6,\r\n        costRating: 4,\r\n        evidenceStrength: 5,\r\n        category: 'targeted',\r\n        description: 'Approaches that focus on improving outcomes for children in the early years (3-5).',\r\n        implementationTips: [\r\n            'Focus on communication and language',\r\n            'High-quality adult-child interactions',\r\n            'Rich learning environment',\r\n            'Target vocabulary gaps early'\r\n        ],\r\n        commonMistakes: [\r\n            'Over-formal too early',\r\n            'Not enough talk and interaction',\r\n            'Missing early signs of difficulty',\r\n            'Poor transition to Year 1'\r\n        ],\r\n        ofstedLinks: ['Early Years', 'SEND', 'Pupil Premium'],\r\n        keywords: ['EYFS', 'reception', 'nursery', 'early years', 'communication', 'language']\r\n    },\r\n    {\r\n        id: 'extending-school-time',\r\n        name: 'Extending School Time',\r\n        monthsProgress: 3,\r\n        costRating: 3,\r\n        evidenceStrength: 3,\r\n        category: 'wider',\r\n        description: 'Additional time spent in school, including before/after school programmes, summer schools, and extended days.',\r\n        implementationTips: [\r\n            'Target those who need it most',\r\n            'High-quality provision, not just supervision',\r\n            'Focus on academic and enrichment',\r\n            'Consider breakfast clubs for attendance'\r\n        ],\r\n        commonMistakes: [\r\n            'More time but same quality teaching',\r\n            'Not targeted at disadvantaged',\r\n            'Just childcare, not learning',\r\n            'Staff burnout'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Personal Development', 'Pupil Premium'],\r\n        keywords: ['after school', 'breakfast club', 'holiday', 'extended', 'enrichment']\r\n    },\r\n    {\r\n        id: 'arts-participation',\r\n        name: 'Arts Participation',\r\n        monthsProgress: 3,\r\n        costRating: 2,\r\n        evidenceStrength: 3,\r\n        category: 'wider',\r\n        description: 'Participation in artistic and creative activities.',\r\n        implementationTips: [\r\n            'Link arts to academic outcomes',\r\n            'Ensure quality instruction',\r\n            'Target disadvantaged pupils',\r\n            'Connect to cultural capital'\r\n        ],\r\n        commonMistakes: [\r\n            'Arts squeezed out of curriculum',\r\n            'Only for the talented',\r\n            'Not linked to wider learning',\r\n            'Poor quality provision'\r\n        ],\r\n        ofstedLinks: ['Personal Development', 'Cultural Capital'],\r\n        keywords: ['art', 'music', 'drama', 'creative', 'cultural capital', 'enrichment']\r\n    },\r\n    {\r\n        id: 'sports-participation',\r\n        name: 'Sports Participation',\r\n        monthsProgress: 2,\r\n        costRating: 2,\r\n        evidenceStrength: 3,\r\n        category: 'wider',\r\n        description: 'Participation in sports and physical activity programmes.',\r\n        implementationTips: [\r\n            'Focus on engagement, not just competition',\r\n            'Target inactive pupils',\r\n            'Link to health and wellbeing',\r\n            'Use PE premium effectively'\r\n        ],\r\n        commonMistakes: [\r\n            'Only competitive sports',\r\n            'Same pupils always picked',\r\n            'Not reaching inactive children',\r\n            'PE premium not evidenced'\r\n        ],\r\n        ofstedLinks: ['Personal Development', 'Physical Development'],\r\n        keywords: ['PE', 'sport', 'physical', 'health', 'active', 'PE premium']\r\n    },\r\n    {\r\n        id: 'digital-technology',\r\n        name: 'Digital Technology',\r\n        monthsProgress: 4,\r\n        costRating: 4,\r\n        evidenceStrength: 4,\r\n        category: 'teaching',\r\n        description: 'Using technology to support and enhance teaching and learning.',\r\n        implementationTips: [\r\n            'Technology should support pedagogy, not replace it',\r\n            'Train teachers effectively',\r\n            'Consider access for disadvantaged',\r\n            'Use for feedback and assessment'\r\n        ],\r\n        commonMistakes: [\r\n            'Tech for techs sake',\r\n            'Replacing, not supporting teaching',\r\n            'Digital divide for disadvantaged',\r\n            'Poor staff confidence'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Pupil Premium'],\r\n        keywords: ['technology', 'digital', 'iPad', 'computer', 'online', 'software']\r\n    },\r\n    {\r\n        id: 'reducing-class-size',\r\n        name: 'Reducing Class Size',\r\n        monthsProgress: 2,\r\n        costRating: 5,\r\n        evidenceStrength: 3,\r\n        category: 'teaching',\r\n        description: 'Reducing the number of pupils in a teaching group.',\r\n        implementationTips: [\r\n            'Only effective if teaching changes',\r\n            'Very expensive for limited gain',\r\n            'Consider targeted small groups instead',\r\n            'Focus on quality, not just quantity'\r\n        ],\r\n        commonMistakes: [\r\n            'Smaller classes but same teaching',\r\n            'Very high cost, low impact',\r\n            'Resources better spent elsewhere',\r\n            'Assuming smaller = better'\r\n        ],\r\n        ofstedLinks: ['Quality of Education'],\r\n        keywords: ['class size', 'pupil ratio', 'teacher ratio']\r\n    },\r\n    {\r\n        id: 'setting-streaming',\r\n        name: 'Setting and Streaming',\r\n        monthsProgress: -1, // Negative impact!\r\n        costRating: 1,\r\n        evidenceStrength: 4,\r\n        category: 'teaching',\r\n        description: 'Grouping pupils by ability for all or some lessons.',\r\n        implementationTips: [\r\n            'Consider alternatives like mixed-ability with targeted support',\r\n            'If setting, ensure movement between sets',\r\n            'Avoid labelling and low expectations',\r\n            'Monitor impact on disadvantaged'\r\n        ],\r\n        commonMistakes: [\r\n            'Fixed sets with no movement',\r\n            'Lower sets have weaker teaching',\r\n            'Self-fulfilling prophecy',\r\n            'PP pupils over-represented in lower sets'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Pupil Premium'],\r\n        keywords: ['setting', 'streaming', 'ability groups', 'differentiation']\r\n    },\r\n    {\r\n        id: 'repeating-year',\r\n        name: 'Repeating a Year',\r\n        monthsProgress: -4, // Negative impact!\r\n        costRating: 5,\r\n        evidenceStrength: 4,\r\n        category: 'targeted',\r\n        description: 'Holding a student back to repeat a year of schooling.',\r\n        implementationTips: [\r\n            'Avoid if possible - evidence shows harm',\r\n            'Address specific learning gaps instead',\r\n            'Consider targeted interventions',\r\n            'Social and emotional impact significant'\r\n        ],\r\n        commonMistakes: [\r\n            'Assuming more time = better outcomes',\r\n            'Not addressing root causes',\r\n            'Ignoring social/emotional impact',\r\n            'Delaying rather than solving'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'SEND'],\r\n        keywords: ['repeat', 'held back', 'retention']\r\n    },\r\n    {\r\n        id: 'within-class-grouping',\r\n        name: 'Within-Class Attainment Grouping',\r\n        monthsProgress: 2,\r\n        costRating: 1,\r\n        evidenceStrength: 3,\r\n        category: 'teaching',\r\n        description: 'Grouping pupils within their class based on current attainment.',\r\n        implementationTips: [\r\n            'Flexible groups that change',\r\n            'High expectations for all groups',\r\n            'Teacher works with all groups',\r\n            'Avoid permanent groupings'\r\n        ],\r\n        commonMistakes: [\r\n            'Fixed groups all year',\r\n            'Teacher always with same group',\r\n            'Lower groups have lower expectations',\r\n            'PP pupils always in lower groups'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'Pupil Premium'],\r\n        keywords: ['grouping', 'table groups', 'ability', 'differentiation']\r\n    },\r\n    {\r\n        id: 'individualised-instruction',\r\n        name: 'Individualised Instruction',\r\n        monthsProgress: 4,\r\n        costRating: 2,\r\n        evidenceStrength: 4,\r\n        category: 'teaching',\r\n        description: 'Tailoring teaching and learning to individual pupils needs.',\r\n        implementationTips: [\r\n            'Use assessment to identify specific needs',\r\n            'Adaptive teaching within whole-class approach',\r\n            'Technology can support personalisation',\r\n            'Balance individual and whole-class'\r\n        ],\r\n        commonMistakes: [\r\n            'Three-way differentiation for every lesson',\r\n            'Workload becomes unsustainable',\r\n            'Lowering expectations',\r\n            'Too much individual work, not enough teaching'\r\n        ],\r\n        ofstedLinks: ['Quality of Education', 'SEND', 'Adaptive Teaching'],\r\n        keywords: ['differentiation', 'individual', 'adaptive', 'personalised', 'SEND']\r\n    }\r\n];\r\n\r\n// Get strategy by ID\r\nexport function getStrategy(id: string): EEFStrategy | undefined {\r\n    return eefStrategies.find(s => s.id === id);\r\n}\r\n\r\n// Get strategies by category\r\nexport function getStrategiesByCategory(category: 'teaching' | 'targeted' | 'wider'): EEFStrategy[] {\r\n    return eefStrategies.filter(s => s.category === category);\r\n}\r\n\r\n// Get high impact strategies (5+ months)\r\nexport function getHighImpactStrategies(): EEFStrategy[] {\r\n    return eefStrategies.filter(s => s.monthsProgress >= 5).sort((a, b) => b.monthsProgress - a.monthsProgress);\r\n}\r\n\r\n// Search strategies by keywords\r\nexport function searchStrategies(query: string): EEFStrategy[] {\r\n    const lowerQuery = query.toLowerCase();\r\n    return eefStrategies.filter(s => \r\n        s.name.toLowerCase().includes(lowerQuery) ||\r\n        s.description.toLowerCase().includes(lowerQuery) ||\r\n        s.keywords.some(k => k.toLowerCase().includes(lowerQuery))\r\n    );\r\n}\r\n\r\n// Get strategies relevant to a specific issue\r\nexport function getRelevantStrategies(issue: string): EEFStrategy[] {\r\n    const keywords = issue.toLowerCase().split(' ');\r\n    return eefStrategies\r\n        .map(s => ({\r\n            strategy: s,\r\n            score: s.keywords.filter(k => keywords.some(w => k.includes(w) || w.includes(k))).length\r\n        }))\r\n        .filter(item => item.score > 0)\r\n        .sort((a, b) => b.score - a.score)\r\n        .map(item => item.strategy);\r\n}\r\n\r\n","// Ed's Knowledge Base - AI Assistant for School Improvement\r\n// Contains up-to-date information on Ofsted, EEF, and statutory requirements\r\n// Last Updated: November 2025\r\n\r\n// ============================================================================\r\n// FRAMEWORK UPDATE TRACKING\r\n// ============================================================================\r\n\r\nexport interface FrameworkUpdate {\r\n    id: string;\r\n    framework: 'ofsted' | 'siams' | 'eef' | 'dfe';\r\n    title: string;\r\n    effectiveDate: string;\r\n    summary: string;\r\n    impactAreas: string[];\r\n    sourceUrl: string;\r\n    dateAdded: string;\r\n}\r\n\r\nexport const FRAMEWORK_UPDATES: FrameworkUpdate[] = [\r\n    {\r\n        id: 'ofsted-nov-2025',\r\n        framework: 'ofsted',\r\n        title: 'New Education Inspection Framework',\r\n        effectiveDate: '2025-11-10',\r\n        summary: 'Major overhaul introducing 6 evaluation areas, 5-point grading scale, report card format, and separate safeguarding assessment.',\r\n        impactAreas: [\r\n            'All inspection areas renamed and restructured',\r\n            'New 5-point grading scale (Exceptional to Urgent Improvement)',\r\n            'Safeguarding now assessed separately (Met/Not Met)',\r\n            'Report card replaces single overall judgment',\r\n            'Greater focus on Inclusion as standalone area'\r\n        ],\r\n        sourceUrl: 'https://www.gov.uk/government/publications/education-inspection-framework',\r\n        dateAdded: '2025-11-26'\r\n    },\r\n    {\r\n        id: 'siams-2023',\r\n        framework: 'siams',\r\n        title: 'SIAMS Evaluation Schedule 2023',\r\n        effectiveDate: '2023-09-01',\r\n        summary: 'Updated SIAMS framework with 7 strands focusing on how well the school\\'s Christian vision enables all to flourish.',\r\n        impactAreas: [\r\n            'Vision and Leadership',\r\n            'Wisdom, Knowledge and Skills',\r\n            'Character Development',\r\n            'Community and Living Well Together',\r\n            'Dignity and Respect',\r\n            'Impact of Collective Worship',\r\n            'Effectiveness of Religious Education'\r\n        ],\r\n        sourceUrl: 'https://www.churchofengland.org/about/education-and-schools/church-schools-and-academies/siams-inspections',\r\n        dateAdded: '2025-11-26'\r\n    },\r\n    {\r\n        id: 'eef-toolkit-2024',\r\n        framework: 'eef',\r\n        title: 'EEF Teaching and Learning Toolkit Update',\r\n        effectiveDate: '2024-01-01',\r\n        summary: 'Revised impact estimates and new strategies added to the toolkit based on latest research.',\r\n        impactAreas: [\r\n            'Updated effect sizes for interventions',\r\n            'New evidence on tutoring programmes',\r\n            'Revised guidance on metacognition',\r\n            'Updated cost-effectiveness data'\r\n        ],\r\n        sourceUrl: 'https://educationendowmentfoundation.org.uk/education-evidence/teaching-learning-toolkit',\r\n        dateAdded: '2025-11-26'\r\n    }\r\n];\r\n\r\n// ============================================================================\r\n// EEF TEACHING AND LEARNING TOOLKIT\r\n// ============================================================================\r\n\r\nexport interface EEFStrategy {\r\n    id: string;\r\n    name: string;\r\n    category: 'high_impact' | 'moderate_impact' | 'low_impact';\r\n    impactMonths: number; // Additional months of progress\r\n    costRating: 1 | 2 | 3 | 4 | 5; // 1 = very low, 5 = very high\r\n    evidenceStrength: 'very_limited' | 'limited' | 'moderate' | 'extensive';\r\n    description: string;\r\n    implementation: string[];\r\n    considerations: string[];\r\n    ofstedLinks: string[]; // Which Ofsted subcategory IDs this relates to\r\n    siamsLinks: string[]; // Which SIAMS strand IDs this relates to\r\n}\r\n\r\nexport const EEF_TOOLKIT: EEFStrategy[] = [\r\n    // HIGH IMPACT STRATEGIES (4+ months progress)\r\n    {\r\n        id: 'metacognition',\r\n        name: 'Metacognition and Self-Regulation',\r\n        category: 'high_impact',\r\n        impactMonths: 7,\r\n        costRating: 1,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Teaching pupils specific strategies to plan, monitor and evaluate their learning.',\r\n        implementation: [\r\n            'Explicitly teach metacognitive strategies',\r\n            'Model thinking processes (think aloud)',\r\n            'Encourage pupils to plan their approach',\r\n            'Provide opportunities for self-assessment',\r\n            'Give structured feedback on strategies used'\r\n        ],\r\n        considerations: [\r\n            'Takes time to embed - expect 6+ months for impact',\r\n            'Needs consistent approach across all subjects',\r\n            'Staff CPD is essential for success',\r\n            'Works best when combined with subject-specific strategies'\r\n        ],\r\n        ofstedLinks: ['curriculum-implementation', 'achievement-progress'],\r\n        siamsLinks: ['wisdom', 'character']\r\n    },\r\n    {\r\n        id: 'reading-comprehension',\r\n        name: 'Reading Comprehension Strategies',\r\n        category: 'high_impact',\r\n        impactMonths: 6,\r\n        costRating: 1,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Teaching specific approaches to help pupils understand what they read.',\r\n        implementation: [\r\n            'Activate prior knowledge before reading',\r\n            'Teach prediction, questioning, summarising',\r\n            'Use graphic organisers',\r\n            'Reciprocal reading approaches',\r\n            'Explicit vocabulary instruction'\r\n        ],\r\n        considerations: [\r\n            'Should complement, not replace, decoding instruction',\r\n            'Strategies need to be modelled extensively',\r\n            'Pupils need to practice applying strategies independently',\r\n            'Works across all subjects, not just English'\r\n        ],\r\n        ofstedLinks: ['curriculum-reading', 'curriculum-implementation', 'achievement-outcomes'],\r\n        siamsLinks: ['wisdom']\r\n    },\r\n    {\r\n        id: 'feedback',\r\n        name: 'Feedback',\r\n        category: 'high_impact',\r\n        impactMonths: 6,\r\n        costRating: 1,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Information given to pupils about their performance relative to learning goals.',\r\n        implementation: [\r\n            'Focus on learning objectives, not just task completion',\r\n            'Provide specific, actionable next steps',\r\n            'Give time for pupils to act on feedback',\r\n            'Use verbal feedback as well as written',\r\n            'Ensure feedback is understood by pupil'\r\n        ],\r\n        considerations: [\r\n            'Quality matters more than quantity',\r\n            'Timing is crucial - not too immediate, not too delayed',\r\n            'Oral feedback can be as effective as written',\r\n            'Feedback should not harm self-esteem'\r\n        ],\r\n        ofstedLinks: ['curriculum-implementation', 'achievement-progress'],\r\n        siamsLinks: ['wisdom', 'community']\r\n    },\r\n    {\r\n        id: 'high-quality-tutoring',\r\n        name: 'Small Group Tutoring',\r\n        category: 'high_impact',\r\n        impactMonths: 4,\r\n        costRating: 3,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Intensive teaching in small groups, typically 1:3 or 1:4.',\r\n        implementation: [\r\n            'Sessions of 30-60 minutes, 3-5 times per week',\r\n            'Trained tutors with subject knowledge',\r\n            'Structured curriculum linked to main teaching',\r\n            'Regular assessment to adapt teaching',\r\n            '6-12 week blocks typically most effective'\r\n        ],\r\n        considerations: [\r\n            'Quality of tutors is paramount',\r\n            'Must be well-connected to classroom teaching',\r\n            'Works best for reading and maths',\r\n            'Can be delivered by TAs if well-trained'\r\n        ],\r\n        ofstedLinks: ['inclusion-send', 'inclusion-disadvantaged', 'achievement-progress'],\r\n        siamsLinks: ['wisdom', 'community']\r\n    },\r\n    {\r\n        id: 'phonics',\r\n        name: 'Phonics',\r\n        category: 'high_impact',\r\n        impactMonths: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Systematic instruction in the relationship between letters and sounds.',\r\n        implementation: [\r\n            'Use a DfE validated systematic synthetic phonics programme',\r\n            'Daily sessions with pace and structure',\r\n            'Books matched to phonics stage',\r\n            'Rapid intervention for those falling behind',\r\n            'Consistent approach across early years and KS1'\r\n        ],\r\n        considerations: [\r\n            'Must be systematic, not incidental',\r\n            'Fidelity to chosen programme is essential',\r\n            'Impact is greatest in Reception and Year 1',\r\n            'Must be combined with comprehension teaching'\r\n        ],\r\n        ofstedLinks: ['curriculum-reading', 'inclusion-send', 'achievement-outcomes'],\r\n        siamsLinks: ['wisdom']\r\n    },\r\n    {\r\n        id: 'collaborative-learning',\r\n        name: 'Collaborative Learning',\r\n        category: 'high_impact',\r\n        impactMonths: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Pupils working together on activities or learning tasks in groups.',\r\n        implementation: [\r\n            'Structured tasks with clear objectives',\r\n            'Mixed ability or similar ability groupings as appropriate',\r\n            'Individual accountability within group',\r\n            'Teach collaboration skills explicitly',\r\n            'Regular reflection on group work'\r\n        ],\r\n        considerations: [\r\n            'Needs careful planning to avoid social loafing',\r\n            'Competition between groups can be motivating',\r\n            'Younger pupils may need more scaffolding',\r\n            'Group composition matters'\r\n        ],\r\n        ofstedLinks: ['curriculum-implementation', 'pd-character'],\r\n        siamsLinks: ['community', 'character']\r\n    },\r\n    {\r\n        id: 'mastery-learning',\r\n        name: 'Mastery Learning',\r\n        category: 'high_impact',\r\n        impactMonths: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Teaching that breaks content into units and requires mastery before progression.',\r\n        implementation: [\r\n            'Clear learning objectives for each unit',\r\n            'Formative assessment to identify gaps',\r\n            'Corrective activities for those not yet mastered',\r\n            'Additional time for those who need it',\r\n            'Only progress when mastery demonstrated'\r\n        ],\r\n        considerations: [\r\n            'Can be challenging to implement across whole class',\r\n            'May require flexible grouping',\r\n            'Works well in maths (teaching for mastery)',\r\n            'Need to define what mastery looks like'\r\n        ],\r\n        ofstedLinks: ['curriculum-intent', 'curriculum-implementation', 'achievement-progress'],\r\n        siamsLinks: ['wisdom']\r\n    },\r\n    \r\n    // MODERATE IMPACT STRATEGIES (3-4 months progress)\r\n    {\r\n        id: 'oral-language',\r\n        name: 'Oral Language Interventions',\r\n        category: 'moderate_impact',\r\n        impactMonths: 6,\r\n        costRating: 2,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Approaches that emphasise the importance of spoken language and verbal interaction.',\r\n        implementation: [\r\n            'Structured talk activities',\r\n            'Vocabulary instruction',\r\n            'Dialogic teaching approaches',\r\n            'Philosophy for children',\r\n            'Debate and discussion activities'\r\n        ],\r\n        considerations: [\r\n            'Particularly important for disadvantaged pupils',\r\n            'Needs explicit teaching time',\r\n            'Staff may need training in facilitation',\r\n            'Links closely to reading comprehension'\r\n        ],\r\n        ofstedLinks: ['curriculum-intent', 'inclusion-disadvantaged', 'pd-character'],\r\n        siamsLinks: ['wisdom', 'character']\r\n    },\r\n    {\r\n        id: 'homework-secondary',\r\n        name: 'Homework (Secondary)',\r\n        category: 'moderate_impact',\r\n        impactMonths: 5,\r\n        costRating: 1,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Tasks set by teachers for pupils to complete outside of lessons.',\r\n        implementation: [\r\n            'Link homework to class learning',\r\n            'Clear expectations and purpose',\r\n            'Regular feedback on homework',\r\n            'Consistent homework policy',\r\n            'Appropriate length and difficulty'\r\n        ],\r\n        considerations: [\r\n            'Impact is lower for primary-aged pupils',\r\n            'Quality matters more than quantity',\r\n            'Need strategies for pupils without home support',\r\n            'Should not increase teacher workload excessively'\r\n        ],\r\n        ofstedLinks: ['curriculum-implementation', 'achievement-progress', 'leadership-engagement'],\r\n        siamsLinks: ['wisdom', 'community']\r\n    },\r\n    {\r\n        id: 'behaviour-interventions',\r\n        name: 'Behaviour Interventions',\r\n        category: 'moderate_impact',\r\n        impactMonths: 4,\r\n        costRating: 2,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Approaches to reduce low-level disruption and improve learning behaviours.',\r\n        implementation: [\r\n            'Clear consistent expectations',\r\n            'Positive reinforcement systems',\r\n            'Self-management strategies for pupils',\r\n            'Universal tier 1 approaches for all',\r\n            'Targeted interventions for persistent issues'\r\n        ],\r\n        considerations: [\r\n            'Prevention is better than reaction',\r\n            'Whole-school consistency is crucial',\r\n            'Staff training and buy-in essential',\r\n            'May need external support for complex needs'\r\n        ],\r\n        ofstedLinks: ['behaviour-conduct', 'behaviour-attitudes', 'inclusion-mental-health'],\r\n        siamsLinks: ['community', 'dignity']\r\n    },\r\n    {\r\n        id: 'parental-engagement',\r\n        name: 'Parental Engagement',\r\n        category: 'moderate_impact',\r\n        impactMonths: 4,\r\n        costRating: 2,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Strategies to engage parents with their children\\'s learning.',\r\n        implementation: [\r\n            'Home learning activities',\r\n            'Parent workshops on supporting learning',\r\n            'Regular communication about progress',\r\n            'Parents evenings with actionable advice',\r\n            'Removing barriers to engagement'\r\n        ],\r\n        considerations: [\r\n            'Avoid deficit model - work with parents as partners',\r\n            'Consider hard to reach families',\r\n            'Quality of engagement matters more than quantity',\r\n            'Different strategies for different age groups'\r\n        ],\r\n        ofstedLinks: ['leadership-engagement', 'inclusion-disadvantaged'],\r\n        siamsLinks: ['community']\r\n    },\r\n    {\r\n        id: 'social-emotional',\r\n        name: 'Social and Emotional Learning',\r\n        category: 'moderate_impact',\r\n        impactMonths: 4,\r\n        costRating: 2,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Approaches that focus on developing pupils\\' social and emotional skills.',\r\n        implementation: [\r\n            'Universal SEL curriculum',\r\n            'Explicit teaching of skills',\r\n            'Modelling by staff',\r\n            'Opportunities to practice in real contexts',\r\n            'Targeted support for those who need it'\r\n        ],\r\n        considerations: [\r\n            'Most effective as whole-school approach',\r\n            'Staff wellbeing supports pupil wellbeing',\r\n            'Takes time to embed - be patient',\r\n            'Link to behaviour and mental health'\r\n        ],\r\n        ofstedLinks: ['pd-character', 'inclusion-mental-health', 'behaviour-attitudes'],\r\n        siamsLinks: ['character', 'community', 'dignity']\r\n    },\r\n    \r\n    // OTHER IMPORTANT STRATEGIES\r\n    {\r\n        id: 'early-years',\r\n        name: 'Early Years Interventions',\r\n        category: 'moderate_impact',\r\n        impactMonths: 5,\r\n        costRating: 4,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Approaches focusing on early communication, language and literacy.',\r\n        implementation: [\r\n            'High-quality early years provision',\r\n            'Communication and language focus',\r\n            'Early literacy activities',\r\n            'Play-based learning',\r\n            'Parent engagement from the start'\r\n        ],\r\n        considerations: [\r\n            'Earlier investment has longer-term impact',\r\n            'Quality of provision is key',\r\n            'Staff qualifications matter',\r\n            'Transition to formal schooling important'\r\n        ],\r\n        ofstedLinks: ['curriculum-intent', 'curriculum-reading', 'inclusion-send'],\r\n        siamsLinks: ['wisdom']\r\n    },\r\n    {\r\n        id: 'one-to-one-tutoring',\r\n        name: 'One to One Tutoring',\r\n        category: 'high_impact',\r\n        impactMonths: 5,\r\n        costRating: 5,\r\n        evidenceStrength: 'extensive',\r\n        description: 'Individual tuition from a qualified teacher or trained tutor.',\r\n        implementation: [\r\n            'Trained tutors with subject knowledge',\r\n            'Sessions linked to main curriculum',\r\n            'Regular frequency (3+ times per week)',\r\n            'Diagnostic assessment to target gaps',\r\n            'Clear success criteria'\r\n        ],\r\n        considerations: [\r\n            'High cost means need to target carefully',\r\n            'Teacher tutors most effective but expensive',\r\n            'Can use TAs with appropriate training',\r\n            'Online tutoring can be effective too'\r\n        ],\r\n        ofstedLinks: ['inclusion-send', 'inclusion-disadvantaged', 'achievement-progress'],\r\n        siamsLinks: ['wisdom', 'community']\r\n    },\r\n    {\r\n        id: 'teaching-assistants',\r\n        name: 'Teaching Assistant Interventions',\r\n        category: 'moderate_impact',\r\n        impactMonths: 4,\r\n        costRating: 3,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Using TAs effectively to support learning, especially through interventions.',\r\n        implementation: [\r\n            'Clear role definition for TAs',\r\n            'High-quality training',\r\n            'Structured intervention programmes',\r\n            'TA leading intervention, not always supporting SEND',\r\n            'Time to plan and feedback with teachers'\r\n        ],\r\n        considerations: [\r\n            'Proximity to teacher teaching is key',\r\n            'Avoid TAs always supporting lowest attainers',\r\n            'Interventions should supplement not replace',\r\n            'Deploy based on need, not allocation'\r\n        ],\r\n        ofstedLinks: ['inclusion-send', 'curriculum-implementation'],\r\n        siamsLinks: ['wisdom', 'community']\r\n    },\r\n    {\r\n        id: 'within-class-grouping',\r\n        name: 'Within-Class Attainment Grouping',\r\n        category: 'low_impact',\r\n        impactMonths: 2,\r\n        costRating: 1,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Grouping pupils by attainment within a class, usually for reading or maths.',\r\n        implementation: [\r\n            'Keep groups flexible and review regularly',\r\n            'Target teaching at group level',\r\n            'Move pupils between groups as they progress',\r\n            'Avoid labelling groups negatively',\r\n            'Maintain high expectations for all groups'\r\n        ],\r\n        considerations: [\r\n            'Can lead to lower expectations for lower groups',\r\n            'Need to ensure challenge for all',\r\n            'Social effects of grouping need managing',\r\n            'Works better with flexibility'\r\n        ],\r\n        ofstedLinks: ['curriculum-implementation', 'inclusion-send'],\r\n        siamsLinks: ['wisdom', 'dignity']\r\n    },\r\n    {\r\n        id: 'extending-school-time',\r\n        name: 'Extending School Time',\r\n        category: 'low_impact',\r\n        impactMonths: 3,\r\n        costRating: 3,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Additional time in school through longer days, weeks, or holiday programmes.',\r\n        implementation: [\r\n            'Focus on academic activities not just enrichment',\r\n            'Target pupils who would benefit most',\r\n            'Ensure voluntary attendance where possible',\r\n            'Use time for high-impact activities',\r\n            'Consider staff workload'\r\n        ],\r\n        considerations: [\r\n            'More time doesn\\'t automatically mean more learning',\r\n            'Quality of additional time matters',\r\n            'Can support disadvantaged pupils specifically',\r\n            'Holiday programmes can prevent summer slide'\r\n        ],\r\n        ofstedLinks: ['achievement-progress', 'inclusion-disadvantaged', 'pd-enrichment'],\r\n        siamsLinks: ['wisdom', 'community']\r\n    },\r\n    {\r\n        id: 'arts-participation',\r\n        name: 'Arts Participation',\r\n        category: 'moderate_impact',\r\n        impactMonths: 3,\r\n        costRating: 3,\r\n        evidenceStrength: 'moderate',\r\n        description: 'Involvement in artistic and creative activities.',\r\n        implementation: [\r\n            'High-quality arts provision',\r\n            'Links to curriculum where appropriate',\r\n            'Opportunities for performance/exhibition',\r\n            'Access for all pupils',\r\n            'Specialist teaching where possible'\r\n        ],\r\n        considerations: [\r\n            'Impact on academic outcomes is moderate',\r\n            'Other benefits: confidence, collaboration, creativity',\r\n            'Important part of cultural capital',\r\n            'Should be part of broad curriculum'\r\n        ],\r\n        ofstedLinks: ['pd-enrichment', 'pd-character', 'curriculum-intent'],\r\n        siamsLinks: ['wisdom', 'character', 'worship']\r\n    },\r\n    {\r\n        id: 'sports-participation',\r\n        name: 'Sports Participation',\r\n        category: 'moderate_impact',\r\n        impactMonths: 2,\r\n        costRating: 3,\r\n        evidenceStrength: 'limited',\r\n        description: 'Physical activity and sport to improve academic outcomes.',\r\n        implementation: [\r\n            'High-quality PE teaching',\r\n            'Extra-curricular opportunities',\r\n            'Competitive sport options',\r\n            'Links to health and wellbeing',\r\n            'Inclusive activities for all'\r\n        ],\r\n        considerations: [\r\n            'Academic impact is limited',\r\n            'Many other benefits: health, wellbeing, behaviour',\r\n            'Should be part of broad curriculum offer',\r\n            'Sports Premium should focus on sustainable improvement'\r\n        ],\r\n        ofstedLinks: ['pd-enrichment', 'behaviour-attitudes', 'inclusion-mental-health'],\r\n        siamsLinks: ['community', 'character']\r\n    }\r\n];\r\n\r\n// ============================================================================\r\n// STATUTORY DOCUMENT REQUIREMENTS\r\n// ============================================================================\r\n\r\nexport interface DocumentRequirement {\r\n    id: string;\r\n    name: string;\r\n    shortName: string;\r\n    frequency: 'annual' | 'termly' | 'as_needed';\r\n    publishLocation: 'website' | 'governors' | 'internal';\r\n    deadline?: string;\r\n    description: string;\r\n    requiredSections: DocumentSection[];\r\n    dfeGuidanceUrl?: string;\r\n    relatedFramework: ('ofsted' | 'siams')[];\r\n}\r\n\r\nexport interface DocumentSection {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    requiredContent: string[];\r\n    dataPoints?: string[]; // What data needs to be included\r\n    eefLinks?: string[]; // Related EEF strategies\r\n}\r\n\r\nexport const STATUTORY_DOCUMENTS: DocumentRequirement[] = [\r\n    {\r\n        id: 'pupil-premium-strategy',\r\n        name: 'Pupil Premium Strategy Statement',\r\n        shortName: 'PP Strategy',\r\n        frequency: 'annual',\r\n        publishLocation: 'website',\r\n        deadline: 'December each year',\r\n        description: 'Published statement explaining how the school will use Pupil Premium funding to address the challenges faced by eligible pupils.',\r\n        dfeGuidanceUrl: 'https://www.gov.uk/guidance/pupil-premium-information-for-schools-and-alternative-provision-settings',\r\n        relatedFramework: ['ofsted'],\r\n        requiredSections: [\r\n            {\r\n                id: 'pp-school-overview',\r\n                title: 'School Overview',\r\n                description: 'Basic information about the school and PP cohort',\r\n                requiredContent: [\r\n                    'School name and contact',\r\n                    'Number of pupils in school',\r\n                    'Proportion who are disadvantaged',\r\n                    'Pupil Premium allocation this academic year',\r\n                    'Publish date and review date'\r\n                ],\r\n                dataPoints: ['pupil_count', 'pp_count', 'pp_percentage', 'pp_allocation']\r\n            },\r\n            {\r\n                id: 'pp-disadvantaged-profile',\r\n                title: 'Disadvantaged Pupil Profile',\r\n                description: 'Performance and challenges of disadvantaged pupils',\r\n                requiredContent: [\r\n                    'Current attainment and progress data',\r\n                    'Comparison to non-disadvantaged nationally',\r\n                    'Attendance data',\r\n                    'Behaviour and exclusion data',\r\n                    'Key barriers to learning identified'\r\n                ],\r\n                dataPoints: ['pp_attainment', 'pp_progress', 'pp_attendance', 'pp_exclusions']\r\n            },\r\n            {\r\n                id: 'pp-strategy',\r\n                title: 'Strategy on a Page',\r\n                description: 'Summary of approach and priorities',\r\n                requiredContent: [\r\n                    'School\\'s Pupil Premium strategy statement',\r\n                    'Key principles underpinning approach',\r\n                    'Priority challenges (max 5)',\r\n                    'How these were identified'\r\n                ]\r\n            },\r\n            {\r\n                id: 'pp-intended-outcomes',\r\n                title: 'Intended Outcomes',\r\n                description: 'What the school wants to achieve',\r\n                requiredContent: [\r\n                    'Specific, measurable outcomes',\r\n                    'How success will be measured',\r\n                    'Link to challenges identified',\r\n                    'Ambitious targets'\r\n                ]\r\n            },\r\n            {\r\n                id: 'pp-teaching',\r\n                title: 'Quality of Teaching (Tier 1)',\r\n                description: 'How PP will improve teaching for all',\r\n                requiredContent: [\r\n                    'Activity description',\r\n                    'Evidence/rationale (EEF reference)',\r\n                    'Challenge number it addresses',\r\n                    'Estimated cost',\r\n                    'How impact will be measured'\r\n                ],\r\n                eefLinks: ['metacognition', 'feedback', 'reading-comprehension', 'phonics']\r\n            },\r\n            {\r\n                id: 'pp-targeted',\r\n                title: 'Targeted Academic Support (Tier 2)',\r\n                description: 'Specific interventions for disadvantaged pupils',\r\n                requiredContent: [\r\n                    'Intervention programmes',\r\n                    'Small group tutoring',\r\n                    'One to one support',\r\n                    'Evidence base for each',\r\n                    'Cost and impact measures'\r\n                ],\r\n                eefLinks: ['high-quality-tutoring', 'one-to-one-tutoring', 'teaching-assistants']\r\n            },\r\n            {\r\n                id: 'pp-wider',\r\n                title: 'Wider Strategies (Tier 3)',\r\n                description: 'Non-academic barriers and support',\r\n                requiredContent: [\r\n                    'Attendance strategies',\r\n                    'Behaviour support',\r\n                    'Enrichment and trips',\r\n                    'Family support',\r\n                    'Cost and impact measures'\r\n                ],\r\n                eefLinks: ['behaviour-interventions', 'parental-engagement', 'social-emotional']\r\n            },\r\n            {\r\n                id: 'pp-review',\r\n                title: 'Review of Previous Year',\r\n                description: 'Evaluation of impact from previous year',\r\n                requiredContent: [\r\n                    'Outcomes achieved',\r\n                    'What worked well',\r\n                    'What didn\\'t work',\r\n                    'Lessons learned',\r\n                    'Externally provided programmes used'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'sports-premium',\r\n        name: 'PE and Sport Premium Report',\r\n        shortName: 'Sports Premium',\r\n        frequency: 'annual',\r\n        publishLocation: 'website',\r\n        deadline: 'By 31st July each year for previous year',\r\n        description: 'Report showing how Sports Premium funding has been used to improve PE and sport provision.',\r\n        dfeGuidanceUrl: 'https://www.gov.uk/guidance/pe-and-sport-premium-for-primary-schools',\r\n        relatedFramework: ['ofsted'],\r\n        requiredSections: [\r\n            {\r\n                id: 'sp-funding',\r\n                title: 'Funding Overview',\r\n                description: 'Total funding received and carried forward',\r\n                requiredContent: [\r\n                    'Total amount allocated this year',\r\n                    'Amount carried over from previous year',\r\n                    'Total available to spend',\r\n                    'Date updated'\r\n                ],\r\n                dataPoints: ['sports_premium_allocation', 'sports_premium_carried']\r\n            },\r\n            {\r\n                id: 'sp-swimming',\r\n                title: 'Swimming Data',\r\n                description: 'Swimming attainment at end of Year 6',\r\n                requiredContent: [\r\n                    '% meeting 25m standard',\r\n                    '% using range of strokes',\r\n                    '% performing safe self-rescue',\r\n                    'Schools can choose to use premium for additional swimming'\r\n                ],\r\n                dataPoints: ['swimming_25m_percentage', 'swimming_strokes_percentage', 'swimming_rescue_percentage']\r\n            },\r\n            {\r\n                id: 'sp-academic-year',\r\n                title: 'Action Plan',\r\n                description: 'How funding will be spent this year',\r\n                requiredContent: [\r\n                    'Key achievements to date',\r\n                    'Key improvement areas',\r\n                    'Actions and impact',\r\n                    'Allocated spend',\r\n                    'Sustainability plans'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sp-key-indicators',\r\n                title: 'Key Indicator Spend',\r\n                description: 'Spending against the 5 key indicators',\r\n                requiredContent: [\r\n                    'Engagement in PE and sport',\r\n                    'Profile of PE and sport raised',\r\n                    'Staff confidence and skills increased',\r\n                    'Broader range of sports offered',\r\n                    'Competitive sport participation increased'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sp-sustainability',\r\n                title: 'Sustainability and Next Steps',\r\n                description: 'Long-term impact beyond funding',\r\n                requiredContent: [\r\n                    'What will continue after funding',\r\n                    'Staff skills developed',\r\n                    'Equipment and resources purchased',\r\n                    'Partnership arrangements'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'school-development-plan',\r\n        name: 'School Development Plan',\r\n        shortName: 'SDP',\r\n        frequency: 'annual',\r\n        publishLocation: 'governors',\r\n        description: 'Strategic plan setting out the school\\'s priorities and actions for improvement.',\r\n        relatedFramework: ['ofsted', 'siams'],\r\n        requiredSections: [\r\n            {\r\n                id: 'sdp-context',\r\n                title: 'School Context',\r\n                description: 'Overview of the school and its context',\r\n                requiredContent: [\r\n                    'School vision and values',\r\n                    'Key characteristics of school',\r\n                    'Current strengths',\r\n                    'Areas for development',\r\n                    'Last inspection outcomes'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sdp-priorities',\r\n                title: 'Strategic Priorities',\r\n                description: 'The key priorities for the year',\r\n                requiredContent: [\r\n                    'Priority area 1-5',\r\n                    'Link to Ofsted areas',\r\n                    'Link to school vision',\r\n                    'Lead person for each priority'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sdp-actions',\r\n                title: 'Action Plans',\r\n                description: 'Detailed actions for each priority',\r\n                requiredContent: [\r\n                    'Specific actions',\r\n                    'Success criteria',\r\n                    'Milestones and timescales',\r\n                    'Resources required',\r\n                    'Monitoring arrangements',\r\n                    'Expected impact'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sdp-monitoring',\r\n                title: 'Monitoring and Evaluation',\r\n                description: 'How progress will be tracked',\r\n                requiredContent: [\r\n                    'Monitoring schedule',\r\n                    'Who will monitor',\r\n                    'Evidence to be collected',\r\n                    'Reporting to governors',\r\n                    'Review points'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sdp-resources',\r\n                title: 'Resource Allocation',\r\n                description: 'Budget and staffing for priorities',\r\n                requiredContent: [\r\n                    'Budget allocation per priority',\r\n                    'Staffing requirements',\r\n                    'CPD budget',\r\n                    'External support costs'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'self-evaluation-form',\r\n        name: 'Self-Evaluation Form',\r\n        shortName: 'SEF',\r\n        frequency: 'as_needed',\r\n        publishLocation: 'internal',\r\n        description: 'Summary of school\\'s self-evaluation against Ofsted criteria.',\r\n        relatedFramework: ['ofsted'],\r\n        requiredSections: [\r\n            {\r\n                id: 'sef-inclusion',\r\n                title: 'Inclusion',\r\n                description: 'Self-evaluation of inclusion provision',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence base',\r\n                    'Impact of actions taken'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sef-curriculum',\r\n                title: 'Curriculum and Teaching',\r\n                description: 'Self-evaluation of curriculum and teaching quality',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence base',\r\n                    'Impact of actions taken'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sef-achievement',\r\n                title: 'Achievement',\r\n                description: 'Self-evaluation of pupil outcomes',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence base',\r\n                    'Impact of actions taken'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sef-attendance',\r\n                title: 'Attendance and Behaviour',\r\n                description: 'Self-evaluation of attendance and behaviour',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence base',\r\n                    'Impact of actions taken'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sef-pd',\r\n                title: 'Personal Development and Well-being',\r\n                description: 'Self-evaluation of personal development',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence base',\r\n                    'Impact of actions taken'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sef-leadership',\r\n                title: 'Leadership and Governance',\r\n                description: 'Self-evaluation of leadership',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence base',\r\n                    'Impact of actions taken'\r\n                ]\r\n            },\r\n            {\r\n                id: 'sef-safeguarding',\r\n                title: 'Safeguarding',\r\n                description: 'Confirmation safeguarding is effective',\r\n                requiredContent: [\r\n                    'Safeguarding Met/Not Met',\r\n                    'Key evidence',\r\n                    'Any areas being strengthened'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'siams-sef',\r\n        name: 'SIAMS Self-Evaluation',\r\n        shortName: 'SIAMS SEF',\r\n        frequency: 'as_needed',\r\n        publishLocation: 'internal',\r\n        description: 'Self-evaluation for church schools against SIAMS criteria.',\r\n        relatedFramework: ['siams'],\r\n        requiredSections: [\r\n            {\r\n                id: 'siams-sef-vision',\r\n                title: 'Vision and Leadership',\r\n                description: 'Self-evaluation of Christian vision',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence of impact'\r\n                ]\r\n            },\r\n            {\r\n                id: 'siams-sef-wisdom',\r\n                title: 'Wisdom, Knowledge and Skills',\r\n                description: 'Self-evaluation of curriculum and spiritual development',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence of impact'\r\n                ]\r\n            },\r\n            {\r\n                id: 'siams-sef-character',\r\n                title: 'Character Development',\r\n                description: 'Self-evaluation of character education',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence of impact'\r\n                ]\r\n            },\r\n            {\r\n                id: 'siams-sef-community',\r\n                title: 'Community and Living Well Together',\r\n                description: 'Self-evaluation of relationships and wellbeing',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence of impact'\r\n                ]\r\n            },\r\n            {\r\n                id: 'siams-sef-dignity',\r\n                title: 'Dignity and Respect',\r\n                description: 'Self-evaluation of dignity and inclusion',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence of impact'\r\n                ]\r\n            },\r\n            {\r\n                id: 'siams-sef-worship',\r\n                title: 'Impact of Collective Worship',\r\n                description: 'Self-evaluation of worship',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence of impact'\r\n                ]\r\n            },\r\n            {\r\n                id: 'siams-sef-re',\r\n                title: 'Effectiveness of Religious Education',\r\n                description: 'Self-evaluation of RE',\r\n                requiredContent: [\r\n                    'Summary evaluation',\r\n                    'Key strengths',\r\n                    'Areas for development',\r\n                    'Evidence of impact'\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n];\r\n\r\n// ============================================================================\r\n// ED'S CONVERSATION CONTEXT\r\n// ============================================================================\r\n\r\nexport interface EdContext {\r\n    userQuestion: string;\r\n    identifiedTopic: string[];\r\n    relevantFrameworkAreas: string[];\r\n    relevantEEFStrategies: string[];\r\n    suggestedActions: string[];\r\n}\r\n\r\n// Function to find relevant EEF strategies for a given Ofsted subcategory\r\nexport function getEEFStrategiesForOfsted(subcategoryId: string): EEFStrategy[] {\r\n    return EEF_TOOLKIT.filter(strategy => \r\n        strategy.ofstedLinks.includes(subcategoryId)\r\n    ).sort((a, b) => b.impactMonths - a.impactMonths);\r\n}\r\n\r\n// Function to find relevant EEF strategies for a given SIAMS strand\r\nexport function getEEFStrategiesForSIAMS(strandId: string): EEFStrategy[] {\r\n    return EEF_TOOLKIT.filter(strategy => \r\n        strategy.siamsLinks.includes(strandId)\r\n    ).sort((a, b) => b.impactMonths - a.impactMonths);\r\n}\r\n\r\n// Function to get high-impact strategies for Pupil Premium\r\nexport function getHighImpactPPStrategies(): EEFStrategy[] {\r\n    return EEF_TOOLKIT.filter(strategy => \r\n        strategy.category === 'high_impact' &&\r\n        strategy.ofstedLinks.includes('inclusion-disadvantaged')\r\n    ).sort((a, b) => b.impactMonths - a.impactMonths);\r\n}\r\n\r\n// Function to get strategies by cost-effectiveness (high impact, low cost)\r\nexport function getCostEffectiveStrategies(): EEFStrategy[] {\r\n    return EEF_TOOLKIT.filter(strategy => \r\n        strategy.impactMonths >= 4 && strategy.costRating <= 2\r\n    ).sort((a, b) => {\r\n        // Sort by impact/cost ratio\r\n        const ratioA = a.impactMonths / a.costRating;\r\n        const ratioB = b.impactMonths / b.costRating;\r\n        return ratioB - ratioA;\r\n    });\r\n}\r\n\r\n// Ed's knowledge summary for prompts\r\nexport const ED_SYSTEM_PROMPT = `\r\nYou are Ed, an AI assistant specializing in school improvement for UK schools.\r\n\r\nYOUR KNOWLEDGE BASE (as of November 2025):\r\n\r\nOFSTED FRAMEWORK (Updated November 2025):\r\n- 6 evaluation areas: Inclusion, Curriculum & Teaching, Achievement, Attendance & Behaviour, Personal Development & Well-being, Leadership & Governance\r\n- 5-point scale: Exceptional, Strong Standard, Expected Standard, Needs Attention, Urgent Improvement\r\n- Safeguarding assessed separately: Met / Not Met\r\n- Report card format replaces single overall judgment\r\n\r\nSIAMS FRAMEWORK (2023):\r\n- For Church of England and Methodist schools\r\n- 7 strands focused on Christian vision enabling all to flourish\r\n- Ratings: Excellent, Good, Requires Improvement, Ineffective\r\n\r\nEEF TOOLKIT - Highest Impact Strategies:\r\n1. Metacognition (+7 months, very low cost)\r\n2. Reading Comprehension Strategies (+6 months, very low cost)\r\n3. Feedback (+6 months, very low cost)\r\n4. Phonics (+5 months, very low cost)\r\n5. Collaborative Learning (+5 months, very low cost)\r\n6. One-to-One Tutoring (+5 months, high cost)\r\n\r\nSTATUTORY DOCUMENTS YOU CAN HELP CREATE:\r\n- Pupil Premium Strategy Statement (annual, on website)\r\n- PE and Sport Premium Report (annual, by July 31)\r\n- School Development Plan (annual, for governors)\r\n- Self-Evaluation Form (as needed, internal)\r\n- SIAMS Self-Evaluation (for church schools)\r\n\r\nYOUR ROLE:\r\n1. Provide evidence-based advice linked to EEF research\r\n2. Help schools self-evaluate against frameworks\r\n3. Generate statutory documents\r\n4. Identify gaps in evidence and suggest actions\r\n5. Link recommendations to specific framework areas\r\n6. Stay current with framework updates\r\n\r\nALWAYS:\r\n- Reference specific EEF strategies with impact data\r\n- Link advice to relevant Ofsted/SIAMS areas\r\n- Suggest practical, actionable next steps\r\n- Be honest about evidence strength\r\n- Consider cost-effectiveness\r\n`;\r\n\r\n","import React from 'react';\r\nimport { X, FileText, ExternalLink, AlertCircle, CheckCircle, Folder } from 'lucide-react';\r\n\r\ninterface EvidenceMatch {\r\n    documentName: string;\r\n    documentLink?: string;\r\n    confidence: number;\r\n    relevanceExplanation: string;\r\n    keyQuotes?: string[];\r\n    folderPath?: string;\r\n}\r\n\r\ninterface EvidenceModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    categoryName: string;\r\n    subcategoryName: string;\r\n    evidenceItem: string;\r\n    matches: EvidenceMatch[];\r\n}\r\n\r\nexport default function EvidenceModal({\r\n    isOpen,\r\n    onClose,\r\n    categoryName,\r\n    subcategoryName,\r\n    evidenceItem,\r\n    matches\r\n}: EvidenceModalProps) {\r\n    if (!isOpen) return null;\r\n\r\n    const getConfidenceColor = (confidence: number) => {\r\n        if (confidence >= 0.8) return 'text-green-600 bg-green-50 border-green-200';\r\n        if (confidence >= 0.6) return 'text-blue-600 bg-blue-50 border-blue-200';\r\n        return 'text-amber-600 bg-amber-50 border-amber-200';\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm animate-in fade-in duration-200\">\r\n            <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[85vh] flex flex-col animate-in zoom-in-95 duration-200\">\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-gray-100 flex justify-between items-start bg-gray-50/50 rounded-t-xl\">\r\n                    <div>\r\n                        <div className=\"flex items-center gap-2 text-sm text-gray-500 mb-1\">\r\n                            <span>{categoryName}</span>\r\n                            <span>•</span>\r\n                            <span>{subcategoryName}</span>\r\n                        </div>\r\n                        <h2 className=\"text-xl font-bold text-gray-900 flex items-center gap-2\">\r\n                            <FileText className=\"text-blue-600\" size={24} />\r\n                            Evidence Details\r\n                        </h2>\r\n                        <p className=\"text-gray-600 mt-1 font-medium\">\r\n                            \"{evidenceItem}\"\r\n                        </p>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-full transition-colors\"\r\n                    >\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-6 overflow-y-auto custom-scrollbar\">\r\n                    {matches.length === 0 ? (\r\n                        <div className=\"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300\">\r\n                            <AlertCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\r\n                            <h3 className=\"text-lg font-medium text-gray-900\">No Evidence Found Yet</h3>\r\n                            <p className=\"text-gray-500 mt-1 max-w-sm mx-auto\">\r\n                                The AI scanner hasn't found any documents that strongly match this requirement. Try scanning more folders or uploading relevant documents.\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <h3 className=\"font-semibold text-gray-900\">\r\n                                    Found {matches.length} Document{matches.length !== 1 ? 's' : ''}\r\n                                </h3>\r\n                                <span className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full\">\r\n                                    Sorted by relevance\r\n                                </span>\r\n                            </div>\r\n\r\n                            {matches.map((match, idx) => (\r\n                                <div key={idx} className=\"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-all shadow-sm hover:shadow-md bg-white\">\r\n                                    <div className=\"flex justify-between items-start mb-3\">\r\n                                        <div className=\"flex items-start gap-3\">\r\n                                            <div className=\"p-2 bg-blue-50 rounded-lg text-blue-600 mt-1\">\r\n                                                <FileText size={20} />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className=\"font-semibold text-gray-900 text-lg hover:text-blue-600 transition-colors\">\r\n                                                    {match.documentLink ? (\r\n                                                        <a href={match.documentLink} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2\">\r\n                                                            {match.documentName}\r\n                                                            <ExternalLink size={14} />\r\n                                                        </a>\r\n                                                    ) : (\r\n                                                        match.documentName\r\n                                                    )}\r\n                                                </h4>\r\n                                                {match.folderPath && (\r\n                                                    <div className=\"flex items-center gap-1.5 text-xs text-gray-500 mt-1\">\r\n                                                        <Folder size={12} />\r\n                                                        <span className=\"truncate max-w-md\" title={match.folderPath}>\r\n                                                            {match.folderPath}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className={`px-3 py-1 rounded-full text-xs font-bold border ${getConfidenceColor(match.confidence)}`}>\r\n                                            {Math.round(match.confidence * 100)}% Match\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"ml-12 space-y-3\">\r\n                                        <div className=\"bg-gray-50 p-3 rounded-md text-sm text-gray-700 border border-gray-100\">\r\n                                            <span className=\"font-semibold text-gray-900 block mb-1\">Why it matches:</span>\r\n                                            {match.relevanceExplanation}\r\n                                        </div>\r\n\r\n                                        {match.keyQuotes && match.keyQuotes.length > 0 && (\r\n                                            <div>\r\n                                                <span className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block\">Key Excerpts</span>\r\n                                                <div className=\"space-y-2\">\r\n                                                    {match.keyQuotes.map((quote, qIdx) => (\r\n                                                        <div key={qIdx} className=\"flex gap-2 text-sm text-gray-600 italic bg-yellow-50/50 p-2 rounded border-l-2 border-yellow-300\">\r\n                                                            <span className=\"text-yellow-400 font-serif text-lg leading-none\">\"</span>\r\n                                                            {quote}\r\n                                                            <span className=\"text-yellow-400 font-serif text-lg leading-none\">\"</span>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-4 border-t border-gray-100 bg-gray-50 rounded-b-xl flex justify-end\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors shadow-sm\"\r\n                    >\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","// SIAMS (Statutory Inspection of Anglican and Methodist Schools) Framework\r\n// Based on the Church of England Education Office SIAMS Evaluation Schedule\r\n\r\nexport interface SiamsInspectionQuestion {\r\n    id: string;\r\n    question: string;\r\n    guidance: string;\r\n    evidenceRequired: string[];\r\n}\r\n\r\nexport interface SiamsStrand {\r\n    id: string;\r\n    name: string;\r\n    shortName: string;\r\n    description: string;\r\n    color: string;\r\n    inspectionQuestions: SiamsInspectionQuestion[];\r\n    keyIndicators: string[];\r\n}\r\n\r\nexport interface SiamsActionItem {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    strandId: string;\r\n    priority: 'high' | 'medium' | 'low';\r\n    dueDate: string;\r\n    owner: string;\r\n    status: 'not_started' | 'in_progress' | 'completed';\r\n}\r\n\r\n// The SIAMS Inspection Schedule (2023 onwards)\r\nexport const SIAMS_FRAMEWORK: SiamsStrand[] = [\r\n    {\r\n        id: 'vision',\r\n        name: 'Vision and Leadership',\r\n        shortName: 'Vision',\r\n        description: 'How well does the school\\'s Christian vision drive its work, enabling all to flourish?',\r\n        color: 'purple',\r\n        inspectionQuestions: [\r\n            {\r\n                id: 'vision-1',\r\n                question: 'How clearly is the school\\'s Christian vision articulated and understood by all?',\r\n                guidance: 'The vision should be theologically rooted, distinctive, and clearly expressed in school documentation and practice.',\r\n                evidenceRequired: ['Vision statement', 'School website', 'Policies referencing vision', 'Staff understanding']\r\n            },\r\n            {\r\n                id: 'vision-2',\r\n                question: 'How effectively does the vision shape the strategic direction of the school?',\r\n                guidance: 'School improvement plans should explicitly link to the Christian vision.',\r\n                evidenceRequired: ['School Development Plan', 'Strategic priorities', 'Governor minutes']\r\n            },\r\n            {\r\n                id: 'vision-3',\r\n                question: 'How well do leaders at all levels model and promote the vision?',\r\n                guidance: 'Leaders should be able to articulate how their decisions connect to the vision.',\r\n                evidenceRequired: ['Leadership interviews', 'Decision-making processes', 'Staff feedback']\r\n            },\r\n            {\r\n                id: 'vision-4',\r\n                question: 'How effectively does governance support and challenge the school\\'s Christian foundation?',\r\n                guidance: 'Foundation governors should understand their distinctive role.',\r\n                evidenceRequired: ['Governor meeting minutes', 'Governor training records', 'Challenge evidence']\r\n            }\r\n        ],\r\n        keyIndicators: [\r\n            'Vision is theologically rooted and clearly Christian',\r\n            'Vision explicitly drives all school policies and decisions',\r\n            'All stakeholders can articulate the vision and its impact',\r\n            'Foundation governors provide effective support and challenge'\r\n        ]\r\n    },\r\n    {\r\n        id: 'wisdom',\r\n        name: 'Wisdom, Knowledge and Skills',\r\n        shortName: 'Curriculum',\r\n        description: 'How well does the curriculum enable all pupils to flourish?',\r\n        color: 'blue',\r\n        inspectionQuestions: [\r\n            {\r\n                id: 'wisdom-1',\r\n                question: 'How does the curriculum reflect the school\\'s Christian vision?',\r\n                guidance: 'Curriculum design should explicitly connect to Christian values and the vision.',\r\n                evidenceRequired: ['Curriculum overview', 'Subject policies', 'Long-term plans']\r\n            },\r\n            {\r\n                id: 'wisdom-2',\r\n                question: 'How well does the curriculum enable pupils to develop spiritually?',\r\n                guidance: 'Spiritual development should be planned across the curriculum, not just in RE and worship.',\r\n                evidenceRequired: ['SMSC mapping', 'Lesson observations', 'Pupil work']\r\n            },\r\n            {\r\n                id: 'wisdom-3',\r\n                question: 'How effectively does the curriculum prepare pupils for life in modern Britain?',\r\n                guidance: 'British Values and respect for diversity should be embedded.',\r\n                evidenceRequired: ['British Values mapping', 'PSHE curriculum', 'Pupil understanding']\r\n            },\r\n            {\r\n                id: 'wisdom-4',\r\n                question: 'How well do all pupils achieve academically, especially the vulnerable?',\r\n                guidance: 'Outcomes for all groups should demonstrate that all are enabled to flourish.',\r\n                evidenceRequired: ['Attainment data', 'Progress data', 'Disadvantaged outcomes']\r\n            }\r\n        ],\r\n        keyIndicators: [\r\n            'Curriculum explicitly reflects Christian vision',\r\n            'Spiritual development is planned and evident',\r\n            'All pupils make good progress regardless of background',\r\n            'Curriculum prepares pupils for diverse modern Britain'\r\n        ]\r\n    },\r\n    {\r\n        id: 'character',\r\n        name: 'Character Development',\r\n        shortName: 'Character',\r\n        description: 'How well does the school develop character through hope, aspiration and courageous advocacy?',\r\n        color: 'orange',\r\n        inspectionQuestions: [\r\n            {\r\n                id: 'character-1',\r\n                question: 'How well does the school develop pupils\\' character?',\r\n                guidance: 'Character education should be explicit and linked to Christian values.',\r\n                evidenceRequired: ['Character education programme', 'Behaviour policy', 'Recognition systems']\r\n            },\r\n            {\r\n                id: 'character-2',\r\n                question: 'How effectively does the school instil hope and aspiration in all pupils?',\r\n                guidance: 'Pupils should believe they can achieve and make a difference.',\r\n                evidenceRequired: ['Pupil voice', 'Destination data', 'Careers education']\r\n            },\r\n            {\r\n                id: 'character-3',\r\n                question: 'How well do pupils engage in social action and courageous advocacy?',\r\n                guidance: 'Pupils should be active in making a difference locally and globally.',\r\n                evidenceRequired: ['Charity work', 'Community projects', 'Pupil leadership']\r\n            },\r\n            {\r\n                id: 'character-4',\r\n                question: 'How well do pupils understand ethical concepts and make ethical choices?',\r\n                guidance: 'Pupils should be able to discuss ethical dilemmas and demonstrate moral reasoning.',\r\n                evidenceRequired: ['RE lessons', 'PSHE', 'Pupil discussions', 'Behaviour evidence']\r\n            }\r\n        ],\r\n        keyIndicators: [\r\n            'Explicit character education programme linked to vision',\r\n            'Pupils demonstrate hope and high aspirations',\r\n            'Active engagement in social action at all levels',\r\n            'Pupils can articulate ethical reasoning'\r\n        ]\r\n    },\r\n    {\r\n        id: 'community',\r\n        name: 'Community and Living Well Together',\r\n        shortName: 'Community',\r\n        description: 'How well do relationships reflect the school\\'s Christian vision?',\r\n        color: 'teal',\r\n        inspectionQuestions: [\r\n            {\r\n                id: 'community-1',\r\n                question: 'How well do relationships across the school community reflect the Christian vision?',\r\n                guidance: 'Relationships should be characterised by forgiveness, reconciliation, and respect.',\r\n                evidenceRequired: ['Behaviour policy', 'Restorative approaches', 'Staff/pupil relationships']\r\n            },\r\n            {\r\n                id: 'community-2',\r\n                question: 'How effectively does the school support mental health and wellbeing?',\r\n                guidance: 'Wellbeing should be prioritised for all members of the school community.',\r\n                evidenceRequired: ['Wellbeing policy', 'Support systems', 'Staff wellbeing']\r\n            },\r\n            {\r\n                id: 'community-3',\r\n                question: 'How strong are partnerships with parents, church, and community?',\r\n                guidance: 'Church school partnership should be active and mutually beneficial.',\r\n                evidenceRequired: ['Church links', 'Parent engagement', 'Community partnerships']\r\n            },\r\n            {\r\n                id: 'community-4',\r\n                question: 'How inclusive is the school community?',\r\n                guidance: 'All should feel welcomed, valued, and able to participate fully.',\r\n                evidenceRequired: ['Inclusion policy', 'SEND provision', 'Vulnerable groups support']\r\n            }\r\n        ],\r\n        keyIndicators: [\r\n            'Relationships exemplify Christian values of forgiveness and reconciliation',\r\n            'Mental health and wellbeing are prioritised for all',\r\n            'Strong, active church school partnership',\r\n            'Genuinely inclusive community where all belong'\r\n        ]\r\n    },\r\n    {\r\n        id: 'dignity',\r\n        name: 'Dignity and Respect',\r\n        shortName: 'Dignity',\r\n        description: 'How well does the school ensure dignity and respect for all?',\r\n        color: 'rose',\r\n        inspectionQuestions: [\r\n            {\r\n                id: 'dignity-1',\r\n                question: 'How well does the school ensure all are treated with dignity?',\r\n                guidance: 'Every person should be valued as made in the image of God.',\r\n                evidenceRequired: ['Equality policy', 'Anti-bullying policy', 'Incident records']\r\n            },\r\n            {\r\n                id: 'dignity-2',\r\n                question: 'How effectively does the school tackle prejudice and discrimination?',\r\n                guidance: 'There should be clear processes and zero tolerance for discrimination.',\r\n                evidenceRequired: ['Discrimination incidents', 'Response procedures', 'Training records']\r\n            },\r\n            {\r\n                id: 'dignity-3',\r\n                question: 'How well do pupils understand and respect difference and diversity?',\r\n                guidance: 'Pupils should celebrate diversity as reflecting God\\'s creation.',\r\n                evidenceRequired: ['Curriculum coverage', 'Pupil voice', 'Displays and resources']\r\n            },\r\n            {\r\n                id: 'dignity-4',\r\n                question: 'How well are protected characteristics respected and understood?',\r\n                guidance: 'Age-appropriate teaching about all protected characteristics.',\r\n                evidenceRequired: ['RSE curriculum', 'PSHE coverage', 'Staff training']\r\n            }\r\n        ],\r\n        keyIndicators: [\r\n            'All treated with dignity as made in image of God',\r\n            'Prejudice and discrimination actively challenged',\r\n            'Diversity celebrated and respected',\r\n            'Protected characteristics taught appropriately'\r\n        ]\r\n    },\r\n    {\r\n        id: 'worship',\r\n        name: 'Impact of Collective Worship',\r\n        shortName: 'Worship',\r\n        description: 'How well does collective worship enable all to flourish spiritually?',\r\n        color: 'violet',\r\n        inspectionQuestions: [\r\n            {\r\n                id: 'worship-1',\r\n                question: 'How central is collective worship to the life of the school?',\r\n                guidance: 'Worship should be the heartbeat of the school community.',\r\n                evidenceRequired: ['Worship timetable', 'Worship policy', 'Planning documents']\r\n            },\r\n            {\r\n                id: 'worship-2',\r\n                question: 'How well does worship reflect the school\\'s Christian vision and Anglican/Methodist tradition?',\r\n                guidance: 'Worship should be distinctively Christian and reflect denominational tradition.',\r\n                evidenceRequired: ['Worship themes', 'Use of liturgy', 'Christian calendar']\r\n            },\r\n            {\r\n                id: 'worship-3',\r\n                question: 'How inclusive and invitational is collective worship?',\r\n                guidance: 'All should be able to participate while respecting individual beliefs.',\r\n                evidenceRequired: ['Withdrawal procedures', 'Inclusive language', 'Visitor feedback']\r\n            },\r\n            {\r\n                id: 'worship-4',\r\n                question: 'How well do pupils engage with and respond to worship?',\r\n                guidance: 'Pupils should be actively engaged, not passive observers.',\r\n                evidenceRequired: ['Pupil-led worship', 'Prayer spaces', 'Pupil voice on worship']\r\n            },\r\n            {\r\n                id: 'worship-5',\r\n                question: 'How effectively does worship contribute to spiritual development?',\r\n                guidance: 'Worship should provide opportunities for stillness, reflection, and encounter.',\r\n                evidenceRequired: ['Reflection opportunities', 'Impact evidence', 'Spiritual development']\r\n            }\r\n        ],\r\n        keyIndicators: [\r\n            'Worship is central heartbeat of school',\r\n            'Distinctively Christian in Anglican/Methodist tradition',\r\n            'Inclusive and invitational to all',\r\n            'Pupils actively engaged and lead worship',\r\n            'Clear impact on spiritual development'\r\n        ]\r\n    },\r\n    {\r\n        id: 're',\r\n        name: 'Effectiveness of Religious Education',\r\n        shortName: 'RE',\r\n        description: 'How effective is Religious Education in enabling pupils to flourish?',\r\n        color: 'emerald',\r\n        inspectionQuestions: [\r\n            {\r\n                id: 're-1',\r\n                question: 'How well does RE reflect the Church of England Statement of Entitlement?',\r\n                guidance: 'RE should be academically rigorous, have a significant Christian content, and enable pupils to engage with questions of meaning.',\r\n                evidenceRequired: ['RE policy', 'Curriculum overview', 'Statement of Entitlement audit']\r\n            },\r\n            {\r\n                id: 're-2',\r\n                question: 'How high quality is RE teaching?',\r\n                guidance: 'RE should be taught by confident, well-trained staff using effective pedagogy.',\r\n                evidenceRequired: ['Lesson observations', 'Pupil work', 'Teacher subject knowledge']\r\n            },\r\n            {\r\n                id: 're-3',\r\n                question: 'How well do pupils achieve in RE?',\r\n                guidance: 'Outcomes in RE should be at least in line with core subjects.',\r\n                evidenceRequired: ['RE assessment data', 'Progress tracking', 'GCSE results if applicable']\r\n            },\r\n            {\r\n                id: 're-4',\r\n                question: 'How well does RE prepare pupils to live in diverse society?',\r\n                guidance: 'Pupils should learn about Christianity and other worldviews.',\r\n                evidenceRequired: ['Curriculum coverage', 'World religion content', 'Pupil understanding']\r\n            },\r\n            {\r\n                id: 're-5',\r\n                question: 'How effectively does RE enable pupils to engage with big questions?',\r\n                guidance: 'RE should provoke curiosity and enable theological thinking.',\r\n                evidenceRequired: ['Discussion evidence', 'Written work', 'Pupil voice']\r\n            }\r\n        ],\r\n        keyIndicators: [\r\n            'RE meets Statement of Entitlement requirements',\r\n            'High-quality teaching by confident staff',\r\n            'Strong pupil outcomes comparable to core subjects',\r\n            'Good coverage of Christianity and other worldviews',\r\n            'Pupils can engage theologically with big questions'\r\n        ]\r\n    }\r\n];\r\n\r\n// SIAMS Ratings\r\nexport const SIAMS_RATINGS = {\r\n    'excellent': { label: 'Excellent', color: 'bg-green-500', description: 'Exceptional practice' },\r\n    'good': { label: 'Good', color: 'bg-blue-500', description: 'Effective practice' },\r\n    'requires_improvement': { label: 'Requires Improvement', color: 'bg-yellow-500', description: 'Some weaknesses' },\r\n    'ineffective': { label: 'Ineffective', color: 'bg-red-500', description: 'Significant weaknesses' },\r\n    'not_assessed': { label: 'Not Assessed', color: 'bg-gray-400', description: 'Awaiting assessment' }\r\n};\r\n\r\n// Evidence keywords for SIAMS matching\r\nexport const SIAMS_EVIDENCE_KEYWORDS: Record<string, string[]> = {\r\n    'vision': [\r\n        'christian vision', 'vision statement', 'theologically rooted', 'flourish',\r\n        'foundation governors', 'strategic direction', 'church school', 'diocese'\r\n    ],\r\n    'wisdom': [\r\n        'spiritual development', 'smsc', 'curriculum', 'british values',\r\n        'cultural capital', 'achievement', 'progress', 'academic'\r\n    ],\r\n    'character': [\r\n        'character education', 'hope', 'aspiration', 'courageous advocacy',\r\n        'social action', 'charity', 'ethical', 'moral', 'values'\r\n    ],\r\n    'community': [\r\n        'relationships', 'forgiveness', 'reconciliation', 'wellbeing',\r\n        'mental health', 'church partnership', 'community', 'inclusion'\r\n    ],\r\n    'dignity': [\r\n        'dignity', 'respect', 'image of god', 'equality', 'diversity',\r\n        'anti-bullying', 'protected characteristics', 'discrimination'\r\n    ],\r\n    'worship': [\r\n        'collective worship', 'assembly', 'prayer', 'reflection',\r\n        'anglican', 'methodist', 'liturgy', 'christian calendar', 'spiritual'\r\n    ],\r\n    're': [\r\n        'religious education', 're curriculum', 'statement of entitlement',\r\n        'christianity', 'world religions', 'theology', 'big questions'\r\n    ]\r\n};\r\n\r\n// Calculate strand readiness\r\nexport function calculateStrandReadiness(strandId: string, assessments: Record<string, any>): { userScore: number; evidenceCount: number } {\r\n    const strand = SIAMS_FRAMEWORK.find(s => s.id === strandId);\r\n    if (!strand) return { userScore: 0, evidenceCount: 0 };\r\n    \r\n    let totalScore = 0;\r\n    let assessedCount = 0;\r\n    let evidenceCount = 0;\r\n    \r\n    for (const question of strand.inspectionQuestions) {\r\n        const assessment = assessments[question.id];\r\n        if (assessment?.rating && assessment.rating !== 'not_assessed') {\r\n            assessedCount++;\r\n            const score = assessment.rating === 'excellent' ? 100 :\r\n                         assessment.rating === 'good' ? 75 :\r\n                         assessment.rating === 'requires_improvement' ? 50 : 25;\r\n            totalScore += score;\r\n        }\r\n        if (assessment?.evidenceCount) {\r\n            evidenceCount += assessment.evidenceCount;\r\n        }\r\n    }\r\n    \r\n    const userScore = assessedCount > 0 ? Math.round(totalScore / assessedCount) : 0;\r\n    return { userScore, evidenceCount };\r\n}\r\n\r\n// Calculate overall SIAMS readiness\r\nexport function calculateOverallSiamsReadiness(assessments: Record<string, any>): { userScore: number; totalEvidence: number } {\r\n    let totalScore = 0;\r\n    let totalEvidence = 0;\r\n    let strandCount = 0;\r\n    \r\n    for (const strand of SIAMS_FRAMEWORK) {\r\n        const { userScore, evidenceCount } = calculateStrandReadiness(strand.id, assessments);\r\n        if (userScore > 0) {\r\n            totalScore += userScore;\r\n            strandCount++;\r\n        }\r\n        totalEvidence += evidenceCount;\r\n    }\r\n    \r\n    return {\r\n        userScore: strandCount > 0 ? Math.round(totalScore / strandCount) : 0,\r\n        totalEvidence\r\n    };\r\n}\r\n\r\n","// Ofsted Education Inspection Framework (EIF)\r\n// Updated for November 2025 changes\r\n// Reference: https://www.gov.uk/government/publications/education-inspection-framework\r\n\r\nexport interface EvidenceItem {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n}\r\n\r\nexport interface SubCategory {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    evidenceRequired: EvidenceItem[];\r\n    keyIndicators: string[];\r\n    inspectionFocus: string[];\r\n}\r\n\r\nexport interface Category {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    color: string;\r\n    guidanceSummary: string;\r\n    guidanceLink: string;\r\n    subcategories: SubCategory[];\r\n}\r\n\r\nexport interface ActionItem {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    category: string;\r\n    subCategory: string;\r\n    evidenceItem?: string;\r\n    priority: 'high' | 'medium' | 'low';\r\n    dueDate: string;\r\n    owner: string;\r\n    status: 'not_started' | 'in_progress' | 'completed';\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\n// NEW 5-Point Grading Scale (November 2025)\r\nexport const OFSTED_RATINGS = {\r\n    'exceptional': { \r\n        label: 'Exceptional', \r\n        color: 'bg-purple-500', \r\n        textColor: 'text-purple-700',\r\n        description: 'Highest quality provision',\r\n        score: 5\r\n    },\r\n    'strong_standard': { \r\n        label: 'Strong Standard', \r\n        color: 'bg-green-500', \r\n        textColor: 'text-green-700',\r\n        description: 'Above expected standards',\r\n        score: 4\r\n    },\r\n    'expected_standard': { \r\n        label: 'Expected Standard', \r\n        color: 'bg-blue-500', \r\n        textColor: 'text-blue-700',\r\n        description: 'Meets all required standards',\r\n        score: 3\r\n    },\r\n    'needs_attention': { \r\n        label: 'Needs Attention', \r\n        color: 'bg-yellow-500', \r\n        textColor: 'text-yellow-700',\r\n        description: 'Some aspects inconsistent or limited',\r\n        score: 2\r\n    },\r\n    'urgent_improvement': { \r\n        label: 'Urgent Improvement', \r\n        color: 'bg-red-500', \r\n        textColor: 'text-red-700',\r\n        description: 'Requires immediate action',\r\n        score: 1\r\n    },\r\n    'not_assessed': { \r\n        label: 'Not Assessed', \r\n        color: 'bg-gray-400', \r\n        textColor: 'text-gray-600',\r\n        description: 'Awaiting assessment',\r\n        score: 0\r\n    }\r\n};\r\n\r\n// Safeguarding is now assessed separately\r\nexport const SAFEGUARDING_STATUS = {\r\n    'met': { label: 'Met', color: 'bg-green-500', description: 'Safeguarding requirements are met' },\r\n    'not_met': { label: 'Not Met', color: 'bg-red-500', description: 'Safeguarding requirements are NOT met' },\r\n    'not_assessed': { label: 'Not Assessed', color: 'bg-gray-400', description: 'Awaiting assessment' }\r\n};\r\n\r\n// NEW Ofsted Framework - 6 Evaluation Areas (November 2025)\r\nexport const OFSTED_FRAMEWORK: Category[] = [\r\n    {\r\n        id: 'inclusion',\r\n        name: 'Inclusion',\r\n        description: 'How well the school ensures all pupils, including those with SEND and disadvantaged pupils, receive the support they need',\r\n        color: 'teal',\r\n        guidanceSummary: 'Inspectors evaluate how effectively the school identifies and supports pupils with additional needs, including those with SEND, disadvantaged pupils, and those with mental health needs. This includes the quality of the graduated approach and how well the curriculum is adapted.',\r\n        guidanceLink: 'https://www.gov.uk/government/publications/education-inspection-framework',\r\n        subcategories: [\r\n            {\r\n                id: 'inclusion-send',\r\n                name: 'SEND Provision',\r\n                description: 'Support for pupils with special educational needs and disabilities',\r\n                evidenceRequired: [\r\n                    { id: 'send-1', name: 'SEND Policy', description: 'Current SEND policy and information report' },\r\n                    { id: 'send-2', name: 'Graduated Approach', description: 'Evidence of assess, plan, do, review cycle' },\r\n                    { id: 'send-3', name: 'Provision Map', description: 'Mapping of interventions and support' },\r\n                    { id: 'send-4', name: 'EHCP Reviews', description: 'Annual review documentation' },\r\n                    { id: 'send-5', name: 'SENCO Role', description: 'Evidence of SENCO leadership and impact' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Pupils with SEND achieve well from their starting points',\r\n                    'Early identification of needs is effective',\r\n                    'High-quality targeted support is in place',\r\n                    'Staff have appropriate training for SEND',\r\n                    'Parents are engaged as partners'\r\n                ],\r\n                inspectionFocus: [\r\n                    'How quickly are needs identified?',\r\n                    'Is the graduated approach implemented effectively?',\r\n                    'Do pupils with SEND access the full curriculum?',\r\n                    'What is the impact of interventions?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'inclusion-disadvantaged',\r\n                name: 'Disadvantaged Pupils',\r\n                description: 'Support and outcomes for disadvantaged pupils including those eligible for Pupil Premium',\r\n                evidenceRequired: [\r\n                    { id: 'pp-1', name: 'Pupil Premium Strategy', description: 'Current PP strategy statement' },\r\n                    { id: 'pp-2', name: 'PP Outcomes', description: 'Progress and attainment data for PP pupils' },\r\n                    { id: 'pp-3', name: 'Intervention Impact', description: 'Evidence of impact of PP spending' },\r\n                    { id: 'pp-4', name: 'Attendance Data', description: 'Attendance comparison for PP pupils' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Disadvantaged pupils achieve as well as others nationally',\r\n                    'Gaps are closing over time',\r\n                    'PP strategy is evidence-based (EEF)',\r\n                    'Barriers to learning are addressed effectively'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What are the barriers for disadvantaged pupils?',\r\n                    'How is PP funding used to address barriers?',\r\n                    'What is the impact on outcomes?',\r\n                    'How are attendance gaps addressed?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'inclusion-mental-health',\r\n                name: 'Mental Health & Wellbeing Support',\r\n                description: 'Support for pupils with mental health needs and promotion of wellbeing',\r\n                evidenceRequired: [\r\n                    { id: 'mh-1', name: 'Mental Health Lead', description: 'Trained senior mental health lead' },\r\n                    { id: 'mh-2', name: 'Wellbeing Curriculum', description: 'How wellbeing is taught' },\r\n                    { id: 'mh-3', name: 'Support Systems', description: 'Referral pathways and support available' },\r\n                    { id: 'mh-4', name: 'Staff Training', description: 'Mental health awareness training' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Pupils mental health needs are identified early',\r\n                    'Effective support systems are in place',\r\n                    'Staff are trained to recognise signs of mental ill health',\r\n                    'Pupils know how to access support'\r\n                ],\r\n                inspectionFocus: [\r\n                    'How are mental health needs identified?',\r\n                    'What support is available?',\r\n                    'How is pupil wellbeing promoted?',\r\n                    'Is there a whole-school approach?'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'curriculum-teaching',\r\n        name: 'Curriculum and Teaching',\r\n        description: 'The quality, breadth and ambition of the curriculum and how effectively it is taught',\r\n        color: 'rose',\r\n        guidanceSummary: 'Inspectors evaluate how well the curriculum is designed, sequenced and taught. This includes whether it is ambitious for all pupils, how well it builds knowledge over time, and the quality of pedagogy.',\r\n        guidanceLink: 'https://www.gov.uk/government/publications/education-inspection-framework',\r\n        subcategories: [\r\n            {\r\n                id: 'curriculum-intent',\r\n                name: 'Curriculum Intent',\r\n                description: 'The design and ambition of the curriculum',\r\n                evidenceRequired: [\r\n                    { id: 'intent-1', name: 'Curriculum Overview', description: 'Whole-school curriculum map' },\r\n                    { id: 'intent-2', name: 'Subject Policies', description: 'Intent statements for each subject' },\r\n                    { id: 'intent-3', name: 'Progression Maps', description: 'How knowledge builds over time' },\r\n                    { id: 'intent-4', name: 'Cultural Capital', description: 'How curriculum builds cultural capital' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Curriculum is ambitious for all pupils including SEND',\r\n                    'Clear progression of knowledge and skills',\r\n                    'National Curriculum coverage is secure',\r\n                    'Local context is reflected appropriately'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What is the curriculum intent?',\r\n                    'How is the curriculum sequenced?',\r\n                    'How does it build cultural capital?',\r\n                    'Is it ambitious for all?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'curriculum-implementation',\r\n                name: 'Teaching Quality',\r\n                description: 'How effectively the curriculum is taught',\r\n                evidenceRequired: [\r\n                    { id: 'teach-1', name: 'Lesson Observations', description: 'Recent observation evidence' },\r\n                    { id: 'teach-2', name: 'Work Scrutiny', description: 'Analysis of pupil work over time' },\r\n                    { id: 'teach-3', name: 'Assessment Policy', description: 'How assessment informs teaching' },\r\n                    { id: 'teach-4', name: 'CPD Records', description: 'Staff development and impact' },\r\n                    { id: 'teach-5', name: 'Feedback Policy', description: 'Approach to feedback' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Teachers have strong subject knowledge',\r\n                    'Effective pedagogical approaches are used',\r\n                    'Assessment is used to adapt teaching',\r\n                    'Feedback helps pupils improve',\r\n                    'Teaching is adapted for different learners'\r\n                ],\r\n                inspectionFocus: [\r\n                    'How is the curriculum taught?',\r\n                    'Do teachers have secure subject knowledge?',\r\n                    'How is assessment used?',\r\n                    'Is teaching adapted for all learners?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'curriculum-reading',\r\n                name: 'Reading and Literacy',\r\n                description: 'The teaching of reading including phonics',\r\n                evidenceRequired: [\r\n                    { id: 'read-1', name: 'Phonics Programme', description: 'DfE validated SSP programme' },\r\n                    { id: 'read-2', name: 'Reading Curriculum', description: 'Approach to reading across school' },\r\n                    { id: 'read-3', name: 'Book Matching', description: 'How books are matched to phonics stage' },\r\n                    { id: 'read-4', name: 'Intervention Data', description: 'Keep-up/catch-up intervention impact' },\r\n                    { id: 'read-5', name: 'Phonics Results', description: 'Phonics screening check outcomes' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Validated SSP programme implemented with fidelity',\r\n                    'Books are matched to pupils phonics knowledge',\r\n                    'Rapid intervention for those falling behind',\r\n                    'Reading for pleasure is promoted',\r\n                    'Strong phonics outcomes'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What phonics programme is used?',\r\n                    'Are books decodable and matched?',\r\n                    'How quickly are struggling readers supported?',\r\n                    'Do pupils read fluently and with comprehension?'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'achievement',\r\n        name: 'Achievement',\r\n        description: 'The outcomes pupils achieve and the progress they make',\r\n        color: 'blue',\r\n        guidanceSummary: 'Inspectors evaluate the outcomes pupils achieve, including national test and examination results, and the progress pupils make from their starting points. This includes outcomes for different groups of pupils.',\r\n        guidanceLink: 'https://www.gov.uk/government/publications/education-inspection-framework',\r\n        subcategories: [\r\n            {\r\n                id: 'achievement-outcomes',\r\n                name: 'Academic Outcomes',\r\n                description: 'Attainment and progress in national assessments',\r\n                evidenceRequired: [\r\n                    { id: 'out-1', name: 'KS2 Results', description: 'End of KS2 outcomes and progress' },\r\n                    { id: 'out-2', name: 'Phonics Results', description: 'Year 1 phonics screening outcomes' },\r\n                    { id: 'out-3', name: 'EYFS Outcomes', description: 'GLD and prime area data' },\r\n                    { id: 'out-4', name: 'Progress Data', description: 'In-year progress tracking' },\r\n                    { id: 'out-5', name: 'Group Analysis', description: 'Outcomes by pupil group' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Outcomes are at least in line with national',\r\n                    'Progress is strong from starting points',\r\n                    'All groups achieve well',\r\n                    'Outcomes are improving over time'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What are the outcomes in national tests?',\r\n                    'How do outcomes compare to national?',\r\n                    'Are all groups achieving well?',\r\n                    'What is the trend over time?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'achievement-progress',\r\n                name: 'Progress from Starting Points',\r\n                description: 'How well pupils progress relative to their starting points',\r\n                evidenceRequired: [\r\n                    { id: 'prog-1', name: 'Baseline Data', description: 'Starting point assessments' },\r\n                    { id: 'prog-2', name: 'Progress Measures', description: 'How progress is tracked' },\r\n                    { id: 'prog-3', name: 'Value Added', description: 'Progress scores where available' },\r\n                    { id: 'prog-4', name: 'Cohort Analysis', description: 'Tracking cohorts over time' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Pupils make strong progress from their starting points',\r\n                    'Progress is consistent across the curriculum',\r\n                    'Lower attainers catch up',\r\n                    'Higher attainers are stretched'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What progress do pupils make?',\r\n                    'Is progress consistent across subjects?',\r\n                    'Do all groups make expected progress?',\r\n                    'How is progress measured?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'achievement-destinations',\r\n                name: 'Preparation for Next Stage',\r\n                description: 'How well pupils are prepared for the next stage of education',\r\n                evidenceRequired: [\r\n                    { id: 'dest-1', name: 'Transition Data', description: 'Outcomes at transition points' },\r\n                    { id: 'dest-2', name: 'Secondary Ready', description: 'Preparation for secondary school' },\r\n                    { id: 'dest-3', name: 'Careers Guidance', description: 'Where applicable' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Pupils are well-prepared for next stage',\r\n                    'Transition arrangements are effective',\r\n                    'Academic and personal readiness'\r\n                ],\r\n                inspectionFocus: [\r\n                    'Are pupils ready for secondary school?',\r\n                    'What transition support is provided?',\r\n                    'Do pupils have appropriate skills and knowledge?'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'attendance-behaviour',\r\n        name: 'Attendance and Behaviour',\r\n        description: 'Pupils attendance, behaviour, attitudes to learning and conduct',\r\n        color: 'orange',\r\n        guidanceSummary: 'Inspectors evaluate attendance levels including persistent absence, the effectiveness of strategies to improve attendance, behaviour in lessons and around school, and pupils attitudes to learning.',\r\n        guidanceLink: 'https://www.gov.uk/government/publications/education-inspection-framework',\r\n        subcategories: [\r\n            {\r\n                id: 'attendance-overall',\r\n                name: 'Attendance',\r\n                description: 'Overall attendance and persistent absence rates',\r\n                evidenceRequired: [\r\n                    { id: 'att-1', name: 'Attendance Data', description: 'Current attendance rates' },\r\n                    { id: 'att-2', name: 'PA Data', description: 'Persistent absence rates and trends' },\r\n                    { id: 'att-3', name: 'Attendance Policy', description: 'School attendance policy' },\r\n                    { id: 'att-4', name: 'Intervention Evidence', description: 'Impact of attendance strategies' },\r\n                    { id: 'att-5', name: 'Group Breakdown', description: 'Attendance by pupil group' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Attendance is at least in line with national (96%+)',\r\n                    'Persistent absence is reducing',\r\n                    'Same-day response to absence',\r\n                    'Gaps for disadvantaged are closing',\r\n                    'Strong attendance culture'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What is overall attendance?',\r\n                    'What is the PA rate?',\r\n                    'How quickly does the school respond to absence?',\r\n                    'Are there gaps between groups?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'behaviour-conduct',\r\n                name: 'Behaviour and Conduct',\r\n                description: 'Behaviour in lessons and around school',\r\n                evidenceRequired: [\r\n                    { id: 'beh-1', name: 'Behaviour Policy', description: 'Behaviour and relationships policy' },\r\n                    { id: 'beh-2', name: 'Exclusion Data', description: 'Fixed term and permanent exclusions' },\r\n                    { id: 'beh-3', name: 'Behaviour Logs', description: 'Incident recording and trends' },\r\n                    { id: 'beh-4', name: 'Restorative Approaches', description: 'How relationships are repaired' }\r\n                ],\r\n                keyIndicators: [\r\n                    'High expectations consistently applied',\r\n                    'Behaviour is at least good',\r\n                    'Low-level disruption is rare',\r\n                    'Exclusions are low and reducing',\r\n                    'Bullying is rare and dealt with effectively'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What is behaviour like in lessons?',\r\n                    'How is behaviour managed?',\r\n                    'Are expectations consistently applied?',\r\n                    'What is the exclusion rate?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'behaviour-attitudes',\r\n                name: 'Attitudes to Learning',\r\n                description: 'Pupils engagement and attitudes in lessons',\r\n                evidenceRequired: [\r\n                    { id: 'atl-1', name: 'Pupil Voice', description: 'What pupils say about learning' },\r\n                    { id: 'atl-2', name: 'Lesson Observations', description: 'Evidence of engagement' },\r\n                    { id: 'atl-3', name: 'Work Scrutiny', description: 'Evidence of effort and pride' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Pupils are engaged and focused',\r\n                    'Positive attitudes to learning',\r\n                    'Pupils take pride in their work',\r\n                    'Resilience when facing challenges'\r\n                ],\r\n                inspectionFocus: [\r\n                    'Are pupils engaged in lessons?',\r\n                    'Do pupils want to succeed?',\r\n                    'How do pupils respond to challenge?'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'personal-development',\r\n        name: 'Personal Development and Well-being',\r\n        description: 'The broader development of pupils as individuals and citizens',\r\n        color: 'violet',\r\n        guidanceSummary: 'Inspectors evaluate how well the school develops pupils character, resilience, confidence and independence. This includes PSHE, RSE, British Values, and enrichment opportunities.',\r\n        guidanceLink: 'https://www.gov.uk/government/publications/education-inspection-framework',\r\n        subcategories: [\r\n            {\r\n                id: 'pd-character',\r\n                name: 'Character and Resilience',\r\n                description: 'Development of character, confidence and resilience',\r\n                evidenceRequired: [\r\n                    { id: 'char-1', name: 'Character Education', description: 'How character is developed' },\r\n                    { id: 'char-2', name: 'PSHE Curriculum', description: 'Personal development curriculum' },\r\n                    { id: 'char-3', name: 'Pupil Leadership', description: 'Opportunities for leadership' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Character is explicitly developed',\r\n                    'Pupils show resilience',\r\n                    'Confidence is built',\r\n                    'Pupils can self-regulate'\r\n                ],\r\n                inspectionFocus: [\r\n                    'How is character developed?',\r\n                    'Do pupils show resilience?',\r\n                    'Are pupils confident?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'pd-citizenship',\r\n                name: 'Citizenship and British Values',\r\n                description: 'Preparation for life in modern Britain',\r\n                evidenceRequired: [\r\n                    { id: 'bv-1', name: 'British Values Mapping', description: 'How BV are taught' },\r\n                    { id: 'bv-2', name: 'Democracy', description: 'Understanding of democracy' },\r\n                    { id: 'bv-3', name: 'Rule of Law', description: 'Understanding of rules and laws' },\r\n                    { id: 'bv-4', name: 'Tolerance', description: 'Respect for diversity' }\r\n                ],\r\n                keyIndicators: [\r\n                    'British Values are embedded',\r\n                    'Pupils understand democracy',\r\n                    'Respect for diversity',\r\n                    'Prepared for life in modern Britain'\r\n                ],\r\n                inspectionFocus: [\r\n                    'How are British Values taught?',\r\n                    'Do pupils understand diversity?',\r\n                    'Are pupils prepared for modern Britain?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'pd-enrichment',\r\n                name: 'Enrichment and Wider Opportunities',\r\n                description: 'Extra-curricular and enrichment provision',\r\n                evidenceRequired: [\r\n                    { id: 'enrich-1', name: 'Enrichment Offer', description: 'Clubs, trips, experiences' },\r\n                    { id: 'enrich-2', name: 'Participation Data', description: 'Who accesses enrichment' },\r\n                    { id: 'enrich-3', name: 'Cultural Capital', description: 'Experiences offered' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Rich enrichment offer',\r\n                    'All pupils can access',\r\n                    'Builds cultural capital',\r\n                    'Develops talents and interests'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What enrichment is offered?',\r\n                    'Do all pupils access it?',\r\n                    'How does it build cultural capital?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'pd-rse',\r\n                name: 'RSE and Health Education',\r\n                description: 'Relationships, sex and health education',\r\n                evidenceRequired: [\r\n                    { id: 'rse-1', name: 'RSE Policy', description: 'Current RSE policy' },\r\n                    { id: 'rse-2', name: 'RSE Curriculum', description: 'Coverage and progression' },\r\n                    { id: 'rse-3', name: 'Parent Consultation', description: 'Evidence of consultation' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Statutory RSE is delivered',\r\n                    'Age-appropriate content',\r\n                    'Parents consulted',\r\n                    'Pupils understand healthy relationships'\r\n                ],\r\n                inspectionFocus: [\r\n                    'Is RSE delivered effectively?',\r\n                    'Is content age-appropriate?',\r\n                    'Have parents been consulted?'\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 'leadership-governance',\r\n        name: 'Leadership and Governance',\r\n        description: 'The effectiveness of leadership at all levels including governance',\r\n        color: 'gray',\r\n        guidanceSummary: 'Inspectors evaluate how effectively leaders and governors ensure the school provides a high quality education, how they develop staff, manage workload and wellbeing, and engage with parents and the community.',\r\n        guidanceLink: 'https://www.gov.uk/government/publications/education-inspection-framework',\r\n        subcategories: [\r\n            {\r\n                id: 'leadership-vision',\r\n                name: 'Vision and Strategy',\r\n                description: 'Clarity and ambition of school vision',\r\n                evidenceRequired: [\r\n                    { id: 'vis-1', name: 'Vision Statement', description: 'School vision and values' },\r\n                    { id: 'vis-2', name: 'School Development Plan', description: 'Strategic improvement priorities' },\r\n                    { id: 'vis-3', name: 'Self-Evaluation', description: 'Accurate self-knowledge' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Clear and ambitious vision',\r\n                    'Staff understand and share the vision',\r\n                    'Accurate self-evaluation',\r\n                    'Strategic priorities are right'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What is the school vision?',\r\n                    'Is self-evaluation accurate?',\r\n                    'Are priorities appropriate?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'leadership-governance',\r\n                name: 'Governance',\r\n                description: 'Effectiveness of governance and oversight',\r\n                evidenceRequired: [\r\n                    { id: 'gov-1', name: 'Governor Minutes', description: 'Evidence of support and challenge' },\r\n                    { id: 'gov-2', name: 'Governor Training', description: 'Training and development' },\r\n                    { id: 'gov-3', name: 'Monitoring Visits', description: 'Governor monitoring activity' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Governors know the school well',\r\n                    'Effective support and challenge',\r\n                    'Hold leaders to account',\r\n                    'Statutory duties fulfilled'\r\n                ],\r\n                inspectionFocus: [\r\n                    'How do governors know the school?',\r\n                    'Do governors challenge effectively?',\r\n                    'Are statutory duties met?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'leadership-staff',\r\n                name: 'Staff Development and Wellbeing',\r\n                description: 'How leaders develop staff and manage workload',\r\n                evidenceRequired: [\r\n                    { id: 'staff-1', name: 'CPD Programme', description: 'Staff development offer' },\r\n                    { id: 'staff-2', name: 'Workload Policy', description: 'How workload is managed' },\r\n                    { id: 'staff-3', name: 'Staff Voice', description: 'What staff say' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Effective professional development',\r\n                    'Workload is manageable',\r\n                    'Staff wellbeing prioritised',\r\n                    'High staff morale'\r\n                ],\r\n                inspectionFocus: [\r\n                    'How is CPD quality assured?',\r\n                    'Is workload reasonable?',\r\n                    'How is staff wellbeing supported?'\r\n                ]\r\n            },\r\n            {\r\n                id: 'leadership-engagement',\r\n                name: 'Parent and Community Engagement',\r\n                description: 'Relationships with parents and the wider community',\r\n                evidenceRequired: [\r\n                    { id: 'parent-1', name: 'Parent Survey', description: 'Parent views and feedback' },\r\n                    { id: 'parent-2', name: 'Communication', description: 'How parents are kept informed' },\r\n                    { id: 'parent-3', name: 'Complaints', description: 'Complaints handling' }\r\n                ],\r\n                keyIndicators: [\r\n                    'Strong parent partnerships',\r\n                    'Effective communication',\r\n                    'Parents engaged in learning',\r\n                    'Complaints handled well'\r\n                ],\r\n                inspectionFocus: [\r\n                    'What do parents think?',\r\n                    'How are parents engaged?',\r\n                    'Is communication effective?'\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n];\r\n\r\n// Safeguarding - Now assessed separately (November 2025)\r\nexport const SAFEGUARDING_FRAMEWORK = {\r\n    id: 'safeguarding',\r\n    name: 'Safeguarding',\r\n    description: 'The effectiveness of safeguarding arrangements',\r\n    color: 'red',\r\n    guidanceSummary: 'Safeguarding is now assessed separately from the main evaluation areas. It is judged as either \"Met\" or \"Not Met\". A \"Not Met\" judgment is serious and will trigger immediate action.',\r\n    requirements: [\r\n        { id: 'sg-1', name: 'Safeguarding Policy', description: 'Current policy reflecting KCSIE' },\r\n        { id: 'sg-2', name: 'Single Central Record', description: 'Compliant and up to date SCR' },\r\n        { id: 'sg-3', name: 'DSL Arrangements', description: 'Trained DSL and deputies' },\r\n        { id: 'sg-4', name: 'Staff Training', description: 'All staff trained on safeguarding' },\r\n        { id: 'sg-5', name: 'Referral Procedures', description: 'Clear and followed procedures' },\r\n        { id: 'sg-6', name: 'Safer Recruitment', description: 'Robust recruitment practices' },\r\n        { id: 'sg-7', name: 'CPOMS/Recording', description: 'Effective concern recording' },\r\n        { id: 'sg-8', name: 'Prevent Duty', description: 'Prevent duty implemented' },\r\n        { id: 'sg-9', name: 'Online Safety', description: 'Effective online safety measures' },\r\n        { id: 'sg-10', name: 'Site Security', description: 'Appropriate site security' }\r\n    ],\r\n    keyIndicators: [\r\n        'Culture of safeguarding is embedded',\r\n        'All staff know how to report concerns',\r\n        'DSL arrangements are robust',\r\n        'SCR is compliant',\r\n        'Referrals are timely and appropriate',\r\n        'Pupils feel safe'\r\n    ]\r\n};\r\n\r\n// Helper functions\r\nexport function calculateAIRating(evidenceCount: number, requiredCount: number): string {\r\n    if (evidenceCount === 0) return 'not_assessed';\r\n    const ratio = evidenceCount / requiredCount;\r\n    if (ratio >= 1.0) return 'exceptional';\r\n    if (ratio >= 0.8) return 'strong_standard';\r\n    if (ratio >= 0.6) return 'expected_standard';\r\n    if (ratio >= 0.4) return 'needs_attention';\r\n    return 'urgent_improvement';\r\n}\r\n\r\nexport function calculateCategoryReadiness(categoryId: string, assessments: Record<string, any>): { userScore: number; aiScore: number } {\r\n    const category = OFSTED_FRAMEWORK.find(c => c.id === categoryId);\r\n    if (!category) return { userScore: 0, aiScore: 0 };\r\n    \r\n    let totalUserScore = 0;\r\n    let totalAIScore = 0;\r\n    let assessedCount = 0;\r\n    \r\n    for (const sub of category.subcategories) {\r\n        const assessment = assessments[sub.id];\r\n        if (assessment?.schoolRating && assessment.schoolRating !== 'not_assessed') {\r\n            assessedCount++;\r\n            const rating = OFSTED_RATINGS[assessment.schoolRating as keyof typeof OFSTED_RATINGS];\r\n            totalUserScore += (rating?.score || 0) * 20; // Convert to percentage\r\n        }\r\n    }\r\n    \r\n    const userScore = assessedCount > 0 ? Math.round(totalUserScore / assessedCount) : 0;\r\n    const aiScore = 0; // Would be calculated from evidence scanning\r\n    \r\n    return { userScore, aiScore };\r\n}\r\n\r\nexport function calculateOverallReadiness(assessments: Record<string, any>): { userScore: number; aiScore: number } {\r\n    let totalUserScore = 0;\r\n    let totalAIScore = 0;\r\n    let categoryCount = 0;\r\n    \r\n    for (const category of OFSTED_FRAMEWORK) {\r\n        const { userScore, aiScore } = calculateCategoryReadiness(category.id, assessments);\r\n        if (userScore > 0) {\r\n            totalUserScore += userScore;\r\n            categoryCount++;\r\n        }\r\n        totalAIScore += aiScore;\r\n    }\r\n    \r\n    return {\r\n        userScore: categoryCount > 0 ? Math.round(totalUserScore / categoryCount) : 0,\r\n        aiScore: categoryCount > 0 ? Math.round(totalAIScore / categoryCount) : 0\r\n    };\r\n}\r\n\r\n// Export for backwards compatibility\r\nexport { OFSTED_FRAMEWORK as default };\r\n","// Document Generator - Creates statutory documents from school data\r\n// Supports: SEF, SDP, Pupil Premium Strategy, Sports Premium Report\r\n\r\nimport { STATUTORY_DOCUMENTS, EEF_TOOLKIT, DocumentRequirement } from './ed-knowledge-base';\r\nimport { OFSTED_FRAMEWORK, OFSTED_RATINGS } from './ofsted-framework';\r\nimport { SIAMS_FRAMEWORK, SIAMS_RATINGS } from './siams-framework';\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\nexport interface SchoolData {\r\n    name: string;\r\n    urn?: string;\r\n    academicYear: string;\r\n    isChurchSchool: boolean;\r\n    \r\n    // Pupil numbers\r\n    totalPupils?: number;\r\n    ppPupils?: number;\r\n    sendPupils?: number;\r\n    \r\n    // Funding\r\n    ppAllocation?: number;\r\n    recoveryPremium?: number;\r\n    sportsPremiumAllocation?: number;\r\n    \r\n    // Assessments\r\n    ofstedAssessments?: Record<string, any>;\r\n    siamsAssessments?: Record<string, any>;\r\n    \r\n    // Actions\r\n    actions?: any[];\r\n    \r\n    // Evidence\r\n    evidenceMatches?: any[];\r\n}\r\n\r\nexport interface GeneratedDocument {\r\n    type: string;\r\n    title: string;\r\n    academicYear: string;\r\n    generatedAt: string;\r\n    sections: GeneratedSection[];\r\n    metadata: {\r\n        wordCount: number;\r\n        completionPercentage: number;\r\n        missingData: string[];\r\n    };\r\n}\r\n\r\nexport interface GeneratedSection {\r\n    id: string;\r\n    title: string;\r\n    content: string;\r\n    status: 'complete' | 'partial' | 'empty';\r\n    dataUsed: string[];\r\n    suggestionsForImprovement?: string[];\r\n}\r\n\r\n// ============================================================================\r\n// SEF GENERATOR\r\n// ============================================================================\r\n\r\nexport function generateSEF(\r\n    schoolData: SchoolData,\r\n    assessments: Record<string, any>,\r\n    evidenceMatches: any[],\r\n    actions: any[]\r\n): GeneratedDocument {\r\n    const sections: GeneratedSection[] = [];\r\n    \r\n    // Generate section for each Ofsted category\r\n    for (const category of OFSTED_FRAMEWORK) {\r\n        const categoryAssessments = Object.entries(assessments)\r\n            .filter(([key, _]) => key.startsWith(category.id));\r\n        \r\n        const categoryEvidence = evidenceMatches.filter(e => \r\n            e.categoryId === category.id\r\n        );\r\n        \r\n        const categoryActions = actions.filter(a => \r\n            a.categoryId === category.id\r\n        );\r\n        \r\n        // Calculate overall rating for category\r\n        let avgRating = 'not_assessed';\r\n        const ratings = categoryAssessments\r\n            .map(([_, a]) => a.schoolRating)\r\n            .filter(r => r && r !== 'not_assessed');\r\n        \r\n        if (ratings.length > 0) {\r\n            const ratingScores = ratings.map(r => {\r\n                const rating = OFSTED_RATINGS[r as keyof typeof OFSTED_RATINGS];\r\n                return rating?.score || 0;\r\n            });\r\n            const avgScore = ratingScores.reduce((a, b) => a + b, 0) / ratingScores.length;\r\n            \r\n            if (avgScore >= 4.5) avgRating = 'exceptional';\r\n            else if (avgScore >= 3.5) avgRating = 'strong_standard';\r\n            else if (avgScore >= 2.5) avgRating = 'expected_standard';\r\n            else if (avgScore >= 1.5) avgRating = 'needs_attention';\r\n            else avgRating = 'urgent_improvement';\r\n        }\r\n        \r\n        const ratingLabel = OFSTED_RATINGS[avgRating as keyof typeof OFSTED_RATINGS]?.label || 'Not Assessed';\r\n        \r\n        // Build strengths from assessments and evidence\r\n        const strengths: string[] = [];\r\n        const areasForDevelopment: string[] = [];\r\n        \r\n        categoryAssessments.forEach(([key, assessment]) => {\r\n            if (assessment.schoolRationale) {\r\n                if (assessment.schoolRating === 'exceptional' || assessment.schoolRating === 'strong_standard') {\r\n                    strengths.push(assessment.schoolRationale);\r\n                } else if (assessment.schoolRating === 'needs_attention' || assessment.schoolRating === 'urgent_improvement') {\r\n                    areasForDevelopment.push(assessment.schoolRationale);\r\n                }\r\n            }\r\n        });\r\n        \r\n        // Build content\r\n        let content = `## ${category.name}\\n\\n`;\r\n        content += `**Self-Evaluation Grade: ${ratingLabel}**\\n\\n`;\r\n        \r\n        content += `### Context\\n`;\r\n        content += `${category.description}\\n\\n`;\r\n        \r\n        content += `### Key Strengths\\n`;\r\n        if (strengths.length > 0) {\r\n            strengths.forEach(s => {\r\n                content += `- ${s}\\n`;\r\n            });\r\n        } else {\r\n            content += `_No strengths documented yet. Complete self-assessments to populate._\\n`;\r\n        }\r\n        content += '\\n';\r\n        \r\n        content += `### Areas for Development\\n`;\r\n        if (areasForDevelopment.length > 0) {\r\n            areasForDevelopment.forEach(a => {\r\n                content += `- ${a}\\n`;\r\n            });\r\n        } else if (avgRating === 'needs_attention' || avgRating === 'urgent_improvement') {\r\n            content += `_Areas for development should be documented for this grade._\\n`;\r\n        } else {\r\n            content += `_No significant areas for development identified._\\n`;\r\n        }\r\n        content += '\\n';\r\n        \r\n        content += `### Evidence Base\\n`;\r\n        content += `${categoryEvidence.length} pieces of evidence identified:\\n`;\r\n        categoryEvidence.slice(0, 5).forEach(e => {\r\n            content += `- ${e.documentName} (${Math.round(e.confidence * 100)}% match)\\n`;\r\n        });\r\n        if (categoryEvidence.length > 5) {\r\n            content += `_...and ${categoryEvidence.length - 5} more documents_\\n`;\r\n        }\r\n        content += '\\n';\r\n        \r\n        content += `### Actions in Progress\\n`;\r\n        const pendingActions = categoryActions.filter(a => a.status !== 'completed');\r\n        if (pendingActions.length > 0) {\r\n            pendingActions.forEach(a => {\r\n                content += `- ${a.title} (${a.priority} priority, due ${a.dueDate})\\n`;\r\n            });\r\n        } else {\r\n            content += `_No current actions for this area._\\n`;\r\n        }\r\n        content += '\\n';\r\n        \r\n        sections.push({\r\n            id: category.id,\r\n            title: category.name,\r\n            content,\r\n            status: ratings.length > 0 ? (strengths.length > 0 ? 'complete' : 'partial') : 'empty',\r\n            dataUsed: [`assessments:${categoryAssessments.length}`, `evidence:${categoryEvidence.length}`, `actions:${categoryActions.length}`]\r\n        });\r\n    }\r\n    \r\n    // Calculate completion\r\n    const completeSections = sections.filter(s => s.status === 'complete').length;\r\n    const totalSections = sections.length;\r\n    const completionPercentage = Math.round((completeSections / totalSections) * 100);\r\n    \r\n    // Find missing data\r\n    const missingData: string[] = [];\r\n    sections.forEach(s => {\r\n        if (s.status === 'empty') {\r\n            missingData.push(`No assessment data for ${s.title}`);\r\n        }\r\n    });\r\n    \r\n    return {\r\n        type: 'sef',\r\n        title: `Self-Evaluation Form - ${schoolData.name}`,\r\n        academicYear: schoolData.academicYear,\r\n        generatedAt: new Date().toISOString(),\r\n        sections,\r\n        metadata: {\r\n            wordCount: sections.reduce((acc, s) => acc + s.content.split(/\\s+/).length, 0),\r\n            completionPercentage,\r\n            missingData\r\n        }\r\n    };\r\n}\r\n\r\n// ============================================================================\r\n// PUPIL PREMIUM STRATEGY GENERATOR\r\n// ============================================================================\r\n\r\nexport interface PPData {\r\n    totalPupils: number;\r\n    ppPupils: number;\r\n    allocation: number;\r\n    recoveryPremium?: number;\r\n    \r\n    barriers: Array<{\r\n        id: string;\r\n        description: string;\r\n        category: 'academic' | 'social' | 'attendance';\r\n    }>;\r\n    \r\n    outcomes: {\r\n        reading?: { pp: number; nonPp: number; national: number };\r\n        writing?: { pp: number; nonPp: number; national: number };\r\n        maths?: { pp: number; nonPp: number; national: number };\r\n    };\r\n    \r\n    attendance: {\r\n        pp: number;\r\n        nonPp: number;\r\n        ppPersistentAbsence: number;\r\n    };\r\n    \r\n    spending: Array<{\r\n        tier: 1 | 2 | 3;\r\n        activity: string;\r\n        description: string;\r\n        eefStrategyId?: string;\r\n        cost: number;\r\n        barrierIds: string[];\r\n        intendedOutcomes: string;\r\n    }>;\r\n    \r\n    previousYearReview?: {\r\n        whatWorked: string[];\r\n        whatDidntWork: string[];\r\n        lessonsLearned: string;\r\n    };\r\n}\r\n\r\nexport function generatePupilPremiumStrategy(\r\n    schoolData: SchoolData,\r\n    ppData: PPData\r\n): GeneratedDocument {\r\n    const sections: GeneratedSection[] = [];\r\n    \r\n    // Section 1: School Overview\r\n    const ppPercentage = ppData.ppPupils && ppData.totalPupils \r\n        ? Math.round((ppData.ppPupils / ppData.totalPupils) * 100) \r\n        : 0;\r\n    \r\n    let overviewContent = `## School Overview\\n\\n`;\r\n    overviewContent += `| Metric | Data |\\n|--------|------|\\n`;\r\n    overviewContent += `| School name | ${schoolData.name} |\\n`;\r\n    overviewContent += `| Number of pupils | ${ppData.totalPupils || '_Not provided_'} |\\n`;\r\n    overviewContent += `| Proportion disadvantaged | ${ppPercentage}% (${ppData.ppPupils || 0} pupils) |\\n`;\r\n    overviewContent += `| Pupil Premium allocation | £${ppData.allocation?.toLocaleString() || '_Not provided_'} |\\n`;\r\n    if (ppData.recoveryPremium) {\r\n        overviewContent += `| Recovery Premium | £${ppData.recoveryPremium.toLocaleString()} |\\n`;\r\n    }\r\n    overviewContent += `| Academic year | ${schoolData.academicYear} |\\n`;\r\n    overviewContent += `| Publish date | ${new Date().toLocaleDateString('en-GB')} |\\n`;\r\n    \r\n    sections.push({\r\n        id: 'overview',\r\n        title: 'School Overview',\r\n        content: overviewContent,\r\n        status: ppData.totalPupils ? 'complete' : 'partial',\r\n        dataUsed: ['totalPupils', 'ppPupils', 'allocation']\r\n    });\r\n    \r\n    // Section 2: Disadvantaged Pupil Profile\r\n    let profileContent = `## Disadvantaged Pupil Performance Overview\\n\\n`;\r\n    \r\n    if (ppData.outcomes) {\r\n        profileContent += `### Academic Outcomes\\n\\n`;\r\n        profileContent += `| Subject | PP % | Non-PP % | National % | Gap |\\n`;\r\n        profileContent += `|---------|------|----------|------------|-----|\\n`;\r\n        \r\n        if (ppData.outcomes.reading) {\r\n            const gap = ppData.outcomes.reading.nonPp - ppData.outcomes.reading.pp;\r\n            profileContent += `| Reading | ${ppData.outcomes.reading.pp}% | ${ppData.outcomes.reading.nonPp}% | ${ppData.outcomes.reading.national}% | ${gap > 0 ? '-' : '+'}${Math.abs(gap)}pp |\\n`;\r\n        }\r\n        if (ppData.outcomes.writing) {\r\n            const gap = ppData.outcomes.writing.nonPp - ppData.outcomes.writing.pp;\r\n            profileContent += `| Writing | ${ppData.outcomes.writing.pp}% | ${ppData.outcomes.writing.nonPp}% | ${ppData.outcomes.writing.national}% | ${gap > 0 ? '-' : '+'}${Math.abs(gap)}pp |\\n`;\r\n        }\r\n        if (ppData.outcomes.maths) {\r\n            const gap = ppData.outcomes.maths.nonPp - ppData.outcomes.maths.pp;\r\n            profileContent += `| Maths | ${ppData.outcomes.maths.pp}% | ${ppData.outcomes.maths.nonPp}% | ${ppData.outcomes.maths.national}% | ${gap > 0 ? '-' : '+'}${Math.abs(gap)}pp |\\n`;\r\n        }\r\n    }\r\n    \r\n    profileContent += `\\n### Attendance\\n\\n`;\r\n    profileContent += `| Metric | PP | Non-PP | Gap |\\n`;\r\n    profileContent += `|--------|----|---------| ----|\\n`;\r\n    profileContent += `| Overall attendance | ${ppData.attendance?.pp || '_'}% | ${ppData.attendance?.nonPp || '_'}% | ${ppData.attendance?.pp && ppData.attendance?.nonPp ? `${(ppData.attendance.nonPp - ppData.attendance.pp).toFixed(1)}pp` : '_'} |\\n`;\r\n    profileContent += `| Persistent absence | ${ppData.attendance?.ppPersistentAbsence || '_'}% | - | - |\\n`;\r\n    \r\n    sections.push({\r\n        id: 'profile',\r\n        title: 'Disadvantaged Pupil Performance',\r\n        content: profileContent,\r\n        status: ppData.outcomes ? 'complete' : 'empty',\r\n        dataUsed: ['outcomes', 'attendance']\r\n    });\r\n    \r\n    // Section 3: Barriers to Learning\r\n    let barriersContent = `## Barriers to Learning\\n\\n`;\r\n    barriersContent += `The key barriers our disadvantaged pupils face are:\\n\\n`;\r\n    \r\n    if (ppData.barriers && ppData.barriers.length > 0) {\r\n        ppData.barriers.forEach((barrier, i) => {\r\n            barriersContent += `### Barrier ${i + 1}: ${barrier.description}\\n`;\r\n            barriersContent += `_Category: ${barrier.category}_\\n\\n`;\r\n        });\r\n    } else {\r\n        barriersContent += `_Barriers have not yet been identified. This should be completed based on assessment data, pupil voice, and staff knowledge._\\n`;\r\n    }\r\n    \r\n    sections.push({\r\n        id: 'barriers',\r\n        title: 'Barriers to Learning',\r\n        content: barriersContent,\r\n        status: ppData.barriers?.length > 0 ? 'complete' : 'empty',\r\n        dataUsed: ['barriers']\r\n    });\r\n    \r\n    // Sections 4-6: Tiered Spending\r\n    for (const tier of [1, 2, 3]) {\r\n        const tierName = tier === 1 ? 'Teaching (Tier 1)' : tier === 2 ? 'Targeted Academic Support (Tier 2)' : 'Wider Strategies (Tier 3)';\r\n        const tierDescription = tier === 1 \r\n            ? 'High-quality teaching for all pupils, including disadvantaged'\r\n            : tier === 2 \r\n            ? 'Targeted interventions and small group tuition'\r\n            : 'Non-academic barriers including attendance and wellbeing';\r\n        \r\n        let tierContent = `## ${tierName}\\n\\n`;\r\n        tierContent += `_${tierDescription}_\\n\\n`;\r\n        \r\n        const tierSpending = ppData.spending?.filter(s => s.tier === tier) || [];\r\n        const tierTotal = tierSpending.reduce((acc, s) => acc + s.cost, 0);\r\n        \r\n        if (tierSpending.length > 0) {\r\n            tierContent += `| Activity | Cost | EEF Evidence | Barriers Addressed | Intended Outcomes |\\n`;\r\n            tierContent += `|----------|------|--------------|-------------------|-------------------|\\n`;\r\n            \r\n            tierSpending.forEach(s => {\r\n                const eefStrategy = s.eefStrategyId \r\n                    ? EEF_TOOLKIT.find(e => e.id === s.eefStrategyId)\r\n                    : null;\r\n                const eefEvidence = eefStrategy \r\n                    ? `+${eefStrategy.impactMonths} months` \r\n                    : '_Custom_';\r\n                \r\n                tierContent += `| ${s.activity} | £${s.cost.toLocaleString()} | ${eefEvidence} | ${s.barrierIds.join(', ')} | ${s.intendedOutcomes} |\\n`;\r\n            });\r\n            \r\n            tierContent += `\\n**Tier ${tier} Total: £${tierTotal.toLocaleString()}**\\n`;\r\n        } else {\r\n            tierContent += `_No spending allocated to Tier ${tier} yet._\\n`;\r\n        }\r\n        \r\n        sections.push({\r\n            id: `tier-${tier}`,\r\n            title: tierName,\r\n            content: tierContent,\r\n            status: tierSpending.length > 0 ? 'complete' : 'empty',\r\n            dataUsed: [`tier${tier}Spending`]\r\n        });\r\n    }\r\n    \r\n    // Section 7: Review of Previous Year\r\n    let reviewContent = `## Review of Previous Academic Year\\n\\n`;\r\n    \r\n    if (ppData.previousYearReview) {\r\n        reviewContent += `### What Worked Well\\n`;\r\n        ppData.previousYearReview.whatWorked.forEach(item => {\r\n            reviewContent += `- ${item}\\n`;\r\n        });\r\n        \r\n        reviewContent += `\\n### What Didn't Work\\n`;\r\n        ppData.previousYearReview.whatDidntWork.forEach(item => {\r\n            reviewContent += `- ${item}\\n`;\r\n        });\r\n        \r\n        reviewContent += `\\n### Lessons Learned\\n`;\r\n        reviewContent += ppData.previousYearReview.lessonsLearned;\r\n    } else {\r\n        reviewContent += `_Previous year review not yet completed._\\n`;\r\n    }\r\n    \r\n    sections.push({\r\n        id: 'review',\r\n        title: 'Review of Previous Year',\r\n        content: reviewContent,\r\n        status: ppData.previousYearReview ? 'complete' : 'empty',\r\n        dataUsed: ['previousYearReview']\r\n    });\r\n    \r\n    // Calculate metadata\r\n    const completeSections = sections.filter(s => s.status === 'complete').length;\r\n    const missingData: string[] = [];\r\n    sections.forEach(s => {\r\n        if (s.status === 'empty') {\r\n            missingData.push(`Missing: ${s.title}`);\r\n        }\r\n    });\r\n    \r\n    return {\r\n        type: 'pp_strategy',\r\n        title: `Pupil Premium Strategy Statement - ${schoolData.name}`,\r\n        academicYear: schoolData.academicYear,\r\n        generatedAt: new Date().toISOString(),\r\n        sections,\r\n        metadata: {\r\n            wordCount: sections.reduce((acc, s) => acc + s.content.split(/\\s+/).length, 0),\r\n            completionPercentage: Math.round((completeSections / sections.length) * 100),\r\n            missingData\r\n        }\r\n    };\r\n}\r\n\r\n// ============================================================================\r\n// SPORTS PREMIUM REPORT GENERATOR\r\n// ============================================================================\r\n\r\nexport interface SportsPremiumData {\r\n    allocation: number;\r\n    carriedForward: number;\r\n    \r\n    swimming: {\r\n        percentage25m: number;\r\n        percentageStrokes: number;\r\n        percentageRescue: number;\r\n    };\r\n    \r\n    spending: Array<{\r\n        keyIndicator: 1 | 2 | 3 | 4 | 5;\r\n        activity: string;\r\n        cost: number;\r\n        intendedImpact: string;\r\n        actualImpact?: string;\r\n        isSustainable: boolean;\r\n        sustainabilityPlan?: string;\r\n    }>;\r\n}\r\n\r\nexport function generateSportsPremiumReport(\r\n    schoolData: SchoolData,\r\n    sportsData: SportsPremiumData\r\n): GeneratedDocument {\r\n    const sections: GeneratedSection[] = [];\r\n    \r\n    // Key Indicator names\r\n    const keyIndicatorNames = {\r\n        1: 'Engagement of all pupils in regular physical activity',\r\n        2: 'Profile of PESSPA raised across school',\r\n        3: 'Increased confidence, knowledge and skills of all staff',\r\n        4: 'Broader experience of a range of sports and activities',\r\n        5: 'Increased participation in competitive sport'\r\n    };\r\n    \r\n    // Funding Overview\r\n    let fundingContent = `## Funding Overview\\n\\n`;\r\n    fundingContent += `| | Amount |\\n|--|--------|\\n`;\r\n    fundingContent += `| Total amount allocated | £${sportsData.allocation?.toLocaleString() || '_Not set_'} |\\n`;\r\n    fundingContent += `| Carried forward from previous year | £${sportsData.carriedForward?.toLocaleString() || '0'} |\\n`;\r\n    fundingContent += `| **Total available** | **£${((sportsData.allocation || 0) + (sportsData.carriedForward || 0)).toLocaleString()}** |\\n`;\r\n    \r\n    sections.push({\r\n        id: 'funding',\r\n        title: 'Funding Overview',\r\n        content: fundingContent,\r\n        status: sportsData.allocation ? 'complete' : 'empty',\r\n        dataUsed: ['allocation', 'carriedForward']\r\n    });\r\n    \r\n    // Swimming Data\r\n    let swimmingContent = `## Swimming Data (Year 6)\\n\\n`;\r\n    swimmingContent += `_Meeting national curriculum requirements for swimming and water safety_\\n\\n`;\r\n    swimmingContent += `| Criteria | % Meeting |\\n|----------|-----------|`;\r\n    swimmingContent += `| Swim competently over 25 metres | ${sportsData.swimming?.percentage25m || '_'}% |\\n`;\r\n    swimmingContent += `| Use a range of strokes effectively | ${sportsData.swimming?.percentageStrokes || '_'}% |\\n`;\r\n    swimmingContent += `| Perform safe self-rescue | ${sportsData.swimming?.percentageRescue || '_'}% |\\n`;\r\n    \r\n    sections.push({\r\n        id: 'swimming',\r\n        title: 'Swimming Data',\r\n        content: swimmingContent,\r\n        status: sportsData.swimming?.percentage25m ? 'complete' : 'empty',\r\n        dataUsed: ['swimming']\r\n    });\r\n    \r\n    // Spending by Key Indicator\r\n    for (let ki = 1; ki <= 5; ki++) {\r\n        const kiSpending = sportsData.spending?.filter(s => s.keyIndicator === ki) || [];\r\n        const kiTotal = kiSpending.reduce((acc, s) => acc + s.cost, 0);\r\n        \r\n        let kiContent = `## Key Indicator ${ki}\\n\\n`;\r\n        kiContent += `**${keyIndicatorNames[ki as keyof typeof keyIndicatorNames]}**\\n\\n`;\r\n        \r\n        if (kiSpending.length > 0) {\r\n            kiContent += `| Activity | Cost | Impact | Sustainable? |\\n`;\r\n            kiContent += `|----------|------|--------|-------------|\\n`;\r\n            \r\n            kiSpending.forEach(s => {\r\n                kiContent += `| ${s.activity} | £${s.cost.toLocaleString()} | ${s.actualImpact || s.intendedImpact} | ${s.isSustainable ? '✓' : '✗'} |\\n`;\r\n            });\r\n            \r\n            kiContent += `\\n**Key Indicator ${ki} Total: £${kiTotal.toLocaleString()}**\\n`;\r\n        } else {\r\n            kiContent += `_No spending allocated to this key indicator._\\n`;\r\n        }\r\n        \r\n        sections.push({\r\n            id: `ki-${ki}`,\r\n            title: `Key Indicator ${ki}`,\r\n            content: kiContent,\r\n            status: kiSpending.length > 0 ? 'complete' : 'empty',\r\n            dataUsed: [`keyIndicator${ki}`]\r\n        });\r\n    }\r\n    \r\n    // Calculate metadata\r\n    const completeSections = sections.filter(s => s.status === 'complete').length;\r\n    const missingData: string[] = [];\r\n    sections.forEach(s => {\r\n        if (s.status === 'empty') {\r\n            missingData.push(`Missing: ${s.title}`);\r\n        }\r\n    });\r\n    \r\n    return {\r\n        type: 'sports_premium',\r\n        title: `PE and Sport Premium Report - ${schoolData.name}`,\r\n        academicYear: schoolData.academicYear,\r\n        generatedAt: new Date().toISOString(),\r\n        sections,\r\n        metadata: {\r\n            wordCount: sections.reduce((acc, s) => acc + s.content.split(/\\s+/).length, 0),\r\n            completionPercentage: Math.round((completeSections / sections.length) * 100),\r\n            missingData\r\n        }\r\n    };\r\n}\r\n\r\n// ============================================================================\r\n// SDP GENERATOR\r\n// ============================================================================\r\n\r\nexport interface SDPPriority {\r\n    number: number;\r\n    title: string;\r\n    description: string;\r\n    rationale: string;\r\n    ofstedCategoryId?: string;\r\n    siamsStrandId?: string;\r\n    leadPerson: string;\r\n    successCriteria: string[];\r\n    allocatedBudget?: number;\r\n    milestones: Array<{\r\n        title: string;\r\n        targetTerm: string;\r\n        status: 'pending' | 'in_progress' | 'completed' | 'missed';\r\n    }>;\r\n}\r\n\r\nexport function generateSDP(\r\n    schoolData: SchoolData,\r\n    priorities: SDPPriority[],\r\n    assessments: Record<string, any>\r\n): GeneratedDocument {\r\n    const sections: GeneratedSection[] = [];\r\n    \r\n    // Context Section\r\n    let contextContent = `## School Context\\n\\n`;\r\n    contextContent += `### Vision and Values\\n`;\r\n    contextContent += `_[School vision statement should be inserted here]_\\n\\n`;\r\n    \r\n    // Add last inspection summary\r\n    contextContent += `### Current Position\\n`;\r\n    contextContent += `Based on self-evaluation, key strengths and areas for development are:\\n\\n`;\r\n    \r\n    // Calculate from assessments\r\n    const strengths: string[] = [];\r\n    const areasForDev: string[] = [];\r\n    \r\n    Object.entries(assessments).forEach(([key, assessment]) => {\r\n        if (assessment.schoolRating === 'exceptional' || assessment.schoolRating === 'strong_standard') {\r\n            if (assessment.schoolRationale) strengths.push(assessment.schoolRationale);\r\n        } else if (assessment.schoolRating === 'needs_attention' || assessment.schoolRating === 'urgent_improvement') {\r\n            if (assessment.schoolRationale) areasForDev.push(assessment.schoolRationale);\r\n        }\r\n    });\r\n    \r\n    contextContent += `**Strengths:**\\n`;\r\n    strengths.slice(0, 5).forEach(s => contextContent += `- ${s}\\n`);\r\n    if (strengths.length === 0) contextContent += `_Complete self-evaluation to populate_\\n`;\r\n    \r\n    contextContent += `\\n**Areas for Development:**\\n`;\r\n    areasForDev.slice(0, 5).forEach(a => contextContent += `- ${a}\\n`);\r\n    if (areasForDev.length === 0) contextContent += `_Complete self-evaluation to populate_\\n`;\r\n    \r\n    sections.push({\r\n        id: 'context',\r\n        title: 'School Context',\r\n        content: contextContent,\r\n        status: strengths.length > 0 || areasForDev.length > 0 ? 'partial' : 'empty',\r\n        dataUsed: ['assessments']\r\n    });\r\n    \r\n    // Priorities Summary\r\n    let summaryContent = `## Strategic Priorities ${schoolData.academicYear}\\n\\n`;\r\n    summaryContent += `| # | Priority | Lead | Ofsted Link | Budget |\\n`;\r\n    summaryContent += `|---|----------|------|-------------|--------|\\n`;\r\n    \r\n    priorities.forEach(p => {\r\n        const ofstedLink = p.ofstedCategoryId \r\n            ? OFSTED_FRAMEWORK.find(c => c.id === p.ofstedCategoryId)?.name || '-'\r\n            : '-';\r\n        summaryContent += `| ${p.number} | ${p.title} | ${p.leadPerson} | ${ofstedLink} | £${(p.allocatedBudget || 0).toLocaleString()} |\\n`;\r\n    });\r\n    \r\n    sections.push({\r\n        id: 'summary',\r\n        title: 'Strategic Priorities Summary',\r\n        content: summaryContent,\r\n        status: priorities.length > 0 ? 'complete' : 'empty',\r\n        dataUsed: ['priorities']\r\n    });\r\n    \r\n    // Detailed priority sections\r\n    priorities.forEach(priority => {\r\n        let priorityContent = `## Priority ${priority.number}: ${priority.title}\\n\\n`;\r\n        \r\n        priorityContent += `### Rationale\\n${priority.rationale || '_Not provided_'}\\n\\n`;\r\n        \r\n        priorityContent += `### Success Criteria\\n`;\r\n        if (priority.successCriteria && priority.successCriteria.length > 0) {\r\n            priority.successCriteria.forEach(sc => {\r\n                priorityContent += `- ${sc}\\n`;\r\n            });\r\n        } else {\r\n            priorityContent += `_Success criteria not defined_\\n`;\r\n        }\r\n        \r\n        priorityContent += `\\n### Milestones\\n`;\r\n        priorityContent += `| Milestone | Target | Status |\\n`;\r\n        priorityContent += `|-----------|--------|--------|\\n`;\r\n        \r\n        if (priority.milestones && priority.milestones.length > 0) {\r\n            priority.milestones.forEach(m => {\r\n                const statusEmoji = m.status === 'completed' ? '✓' : \r\n                                   m.status === 'in_progress' ? '🔄' : \r\n                                   m.status === 'missed' ? '✗' : '○';\r\n                priorityContent += `| ${m.title} | ${m.targetTerm} | ${statusEmoji} ${m.status} |\\n`;\r\n            });\r\n        } else {\r\n            priorityContent += `| _No milestones defined_ | - | - |\\n`;\r\n        }\r\n        \r\n        sections.push({\r\n            id: `priority-${priority.number}`,\r\n            title: `Priority ${priority.number}: ${priority.title}`,\r\n            content: priorityContent,\r\n            status: priority.successCriteria?.length > 0 ? 'complete' : 'partial',\r\n            dataUsed: [`priority${priority.number}`]\r\n        });\r\n    });\r\n    \r\n    // Calculate metadata\r\n    const completeSections = sections.filter(s => s.status === 'complete').length;\r\n    const missingData: string[] = [];\r\n    sections.forEach(s => {\r\n        if (s.status === 'empty') {\r\n            missingData.push(`Missing: ${s.title}`);\r\n        }\r\n    });\r\n    \r\n    return {\r\n        type: 'sdp',\r\n        title: `School Development Plan - ${schoolData.name}`,\r\n        academicYear: schoolData.academicYear,\r\n        generatedAt: new Date().toISOString(),\r\n        sections,\r\n        metadata: {\r\n            wordCount: sections.reduce((acc, s) => acc + s.content.split(/\\s+/).length, 0),\r\n            completionPercentage: Math.round((completeSections / sections.length) * 100),\r\n            missingData\r\n        }\r\n    };\r\n}\r\n\r\n// ============================================================================\r\n// EXPORT HELPERS\r\n// ============================================================================\r\n\r\nexport function documentToMarkdown(doc: GeneratedDocument): string {\r\n    let markdown = `# ${doc.title}\\n\\n`;\r\n    markdown += `_Academic Year: ${doc.academicYear}_\\n`;\r\n    markdown += `_Generated: ${new Date(doc.generatedAt).toLocaleDateString('en-GB')}_\\n\\n`;\r\n    markdown += `---\\n\\n`;\r\n    \r\n    doc.sections.forEach(section => {\r\n        markdown += section.content + '\\n\\n';\r\n    });\r\n    \r\n    return markdown;\r\n}\r\n\r\nexport function documentToHTML(doc: GeneratedDocument): string {\r\n    // Basic markdown to HTML conversion\r\n    let html = `<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>${doc.title}</title>\r\n    <style>\r\n        body { font-family: Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; }\r\n        h1 { color: #1a365d; }\r\n        h2 { color: #2d4a6f; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 32px; }\r\n        h3 { color: #4a5568; }\r\n        table { border-collapse: collapse; width: 100%; margin: 16px 0; }\r\n        th, td { border: 1px solid #e2e8f0; padding: 8px 12px; text-align: left; }\r\n        th { background: #f7fafc; }\r\n        .meta { color: #718096; font-size: 14px; }\r\n    </style>\r\n</head>\r\n<body>\r\n    <h1>${doc.title}</h1>\r\n    <p class=\"meta\">Academic Year: ${doc.academicYear} | Generated: ${new Date(doc.generatedAt).toLocaleDateString('en-GB')}</p>\r\n    <hr>\r\n`;\r\n    \r\n    doc.sections.forEach(section => {\r\n        // Basic markdown conversion\r\n        let sectionHtml = section.content\r\n            .replace(/^## (.*$)/gm, '<h2>$1</h2>')\r\n            .replace(/^### (.*$)/gm, '<h3>$1</h3>')\r\n            .replace(/^\\*\\*(.*)\\*\\*$/gm, '<strong>$1</strong>')\r\n            .replace(/\\|(.*)\\|/g, (match) => {\r\n                const cells = match.split('|').filter(c => c.trim());\r\n                return '<tr>' + cells.map(c => `<td>${c.trim()}</td>`).join('') + '</tr>';\r\n            })\r\n            .replace(/^- (.*)$/gm, '<li>$1</li>')\r\n            .replace(/(<li>.*<\\/li>)/s, '<ul>$1</ul>')\r\n            .replace(/\\n/g, '<br>');\r\n        \r\n        html += sectionHtml;\r\n    });\r\n    \r\n    html += `</body></html>`;\r\n    return html;\r\n}\r\n\r\n"],"names":[],"mappings":"wDSEA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,4DgBiB6D,CYAP,AZAO,CYAP,AZAO,CAAA,AYAG,CAAA,AZAH,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,qHAhBQ,CRAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,8GQEhB,CIAvD,ACAA,AVAiD,AQAjD,AOAA,AOAA,AfAA,AaAA,ADAA,APAA,ADAA,ANAuD,CUAvD,APAA,AHAuD,AIAvD,AWAA,ADAA,ATAA,AYAA,AXAA,ACAA,ALAA,ECAA,anBFT,IAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAEA,EAAA,EAAA,CAAA,CAAA,O6CqCO,IAAM,EAAiB,CAC1B,YAAe,CACX,MAAO,cACP,MAAO,gBACP,UAAW,kBACX,YAAa,4BACb,MAAO,CACX,EACA,gBAAmB,CACf,MAAO,kBACP,MAAO,eACP,UAAW,iBACX,YAAa,2BACb,MAAO,CACX,EACA,kBAAqB,CACjB,MAAO,oBACP,MAAO,cACP,UAAW,gBACX,YAAa,+BACb,MAAO,CACX,EACA,gBAAmB,CACf,MAAO,kBACP,MAAO,gBACP,UAAW,kBACX,YAAa,uCACb,MAAO,CACX,EACA,mBAAsB,CAClB,MAAO,qBACP,MAAO,aACP,UAAW,eACX,YAAa,4BACb,MAAO,CACX,EACA,aAAgB,CACZ,MAAO,eACP,MAAO,cACP,UAAW,gBACX,YAAa,sBACb,MAAO,CACX,CACJ,EAUa,EAA+B,CACxC,CACI,GAAI,YACJ,KAAM,YACN,YAAa,4HACb,MAAO,OACP,gBAAiB,wRACjB,aAAc,4EACd,cAAe,CACX,CACI,GAAI,iBACJ,KAAM,iBACN,YAAa,qEACb,iBAAkB,CACd,CAAE,GAAI,SAAU,KAAM,cAAe,YAAa,4CAA6C,EAC/F,CAAE,GAAI,SAAU,KAAM,qBAAsB,YAAa,4CAA6C,EACtG,CAAE,GAAI,SAAU,KAAM,gBAAiB,YAAa,sCAAuC,EAC3F,CAAE,GAAI,SAAU,KAAM,eAAgB,YAAa,6BAA8B,EACjF,CAAE,GAAI,SAAU,KAAM,aAAc,YAAa,yCAA0C,EAC9F,CACD,cAAe,CACX,2DACA,6CACA,4CACA,2CACA,kCACH,CACD,gBAAiB,CACb,oCACA,qDACA,kDACA,uCAER,AADK,EAEL,CACI,GAAI,0BACJ,KAAM,uBACN,YAAa,2FACb,iBAAkB,CACd,CAAE,GAAI,OAAQ,KAAM,yBAA0B,YAAa,+BAAgC,EAC3F,CAAE,GAAI,OAAQ,KAAM,cAAe,YAAa,4CAA6C,EAC7F,CAAE,GAAI,OAAQ,KAAM,sBAAuB,YAAa,mCAAoC,EAC5F,CAAE,GAAI,OAAQ,KAAM,kBAAmB,YAAa,qCAAsC,EAC7F,CACD,cAAe,CACX,4DACA,6BACA,sCACA,iDACH,CACD,gBAAiB,CACb,kDACA,8CACA,kCACA,qCACH,AACL,EACA,CACI,GAAI,0BACJ,KAAM,oCACN,YAAa,yEACb,iBAAkB,CACd,CAAE,GAAI,OAAQ,KAAM,qBAAsB,YAAa,mCAAoC,EAC3F,CAAE,GAAI,OAAQ,KAAM,uBAAwB,YAAa,yBAA0B,EACnF,CAAE,GAAI,OAAQ,KAAM,kBAAmB,YAAa,yCAA0C,EAC9F,CAAE,GAAI,OAAQ,KAAM,iBAAkB,YAAa,kCAAmC,EACzF,CACD,cAAe,CACX,kDACA,yCACA,4DACA,oCACH,CACD,gBAAiB,CACb,0CACA,6BACA,mCACA,oCACH,AACL,EAER,AADK,EAEL,CACI,GAAI,sBACJ,KAAM,0BACN,YAAa,uFACb,MAAO,OACP,gBAAiB,4MACjB,aAAc,4EACd,cAAe,CACX,CACI,GAAI,oBACJ,KAAM,oBACN,YAAa,4CACb,iBAAkB,CACd,CAAE,GAAI,WAAY,KAAM,sBAAuB,YAAa,6BAA8B,EAC1F,CAAE,GAAI,WAAY,KAAM,mBAAoB,YAAa,oCAAqC,EAC9F,CAAE,GAAI,WAAY,KAAM,mBAAoB,YAAa,gCAAiC,EAC1F,CAAE,GAAI,WAAY,KAAM,mBAAoB,YAAa,wCAAyC,EACrG,CACD,cAAe,CACX,wDACA,4CACA,yCACA,2CACH,CACD,gBAAiB,CACb,iCACA,mCACA,sCACA,2BAER,AADK,EAEL,CACI,GAAI,4BACJ,KAAM,mBACN,YAAa,2CACb,iBAAkB,CACd,CAAE,GAAI,UAAW,KAAM,sBAAuB,YAAa,6BAA8B,EACzF,CAAE,GAAI,UAAW,KAAM,gBAAiB,YAAa,kCAAmC,EACxF,CAAE,GAAI,UAAW,KAAM,oBAAqB,YAAa,iCAAkC,EAC3F,CAAE,GAAI,UAAW,KAAM,cAAe,YAAa,8BAA+B,EAClF,CAAE,GAAI,UAAW,KAAM,kBAAmB,YAAa,sBAAuB,EACjF,CACD,cAAe,CACX,yCACA,4CACA,uCACA,gCACA,6CACH,CACD,gBAAiB,CACb,gCACA,6CACA,0BACA,wCACH,AACL,EACA,CACI,GAAI,qBACJ,KAAM,uBACN,YAAa,4CACb,iBAAkB,CACd,CAAE,GAAI,SAAU,KAAM,oBAAqB,YAAa,6BAA8B,EACtF,CAAE,GAAI,SAAU,KAAM,qBAAsB,YAAa,mCAAoC,EAC7F,CAAE,GAAI,SAAU,KAAM,gBAAiB,YAAa,wCAAyC,EAC7F,CAAE,GAAI,SAAU,KAAM,oBAAqB,YAAa,sCAAuC,EAC/F,CAAE,GAAI,SAAU,KAAM,kBAAmB,YAAa,kCAAmC,EAC5F,CACD,cAAe,CACX,oDACA,gDACA,8CACA,mCACA,0BACH,CACD,gBAAiB,CACb,kCACA,mCACA,gDACA,kDACH,AACL,EACH,AACL,EACA,CACI,GAAI,cACJ,KAAM,cACN,YAAa,yDACb,MAAO,OACP,gBAAiB,oNACjB,aAAc,4EACd,cAAe,CACX,CACI,GAAI,uBACJ,KAAM,oBACN,YAAa,kDACb,iBAAkB,CACd,CAAE,GAAI,QAAS,KAAM,cAAe,YAAa,kCAAmC,EACpF,CAAE,GAAI,QAAS,KAAM,kBAAmB,YAAa,mCAAoC,EACzF,CAAE,GAAI,QAAS,KAAM,gBAAiB,YAAa,yBAA0B,EAC7E,CAAE,GAAI,QAAS,KAAM,gBAAiB,YAAa,2BAA4B,EAC/E,CAAE,GAAI,QAAS,KAAM,iBAAkB,YAAa,yBAA0B,EACjF,CACD,cAAe,CACX,8CACA,0CACA,0BACA,mCACH,CACD,gBAAiB,CACb,2CACA,uCACA,iCACA,+BACH,AACL,EACA,CACI,GAAI,uBACJ,KAAM,gCACN,YAAa,6DACb,iBAAkB,CACd,CAAE,GAAI,SAAU,KAAM,gBAAiB,YAAa,4BAA6B,EACjF,CAAE,GAAI,SAAU,KAAM,oBAAqB,YAAa,yBAA0B,EAClF,CAAE,GAAI,SAAU,KAAM,cAAe,YAAa,iCAAkC,EACpF,CAAE,GAAI,SAAU,KAAM,kBAAmB,YAAa,4BAA6B,EACtF,CACD,cAAe,CACX,yDACA,+CACA,2BACA,iCACH,CACD,gBAAiB,CACb,gCACA,0CACA,wCACA,4BAER,AADK,EAEL,CACI,GAAI,2BACJ,KAAM,6BACN,YAAa,+DACb,iBAAkB,CACd,CAAE,GAAI,SAAU,KAAM,kBAAmB,YAAa,+BAAgC,EACtF,CAAE,GAAI,SAAU,KAAM,kBAAmB,YAAa,kCAAmC,EACzF,CAAE,GAAI,SAAU,KAAM,mBAAoB,YAAa,kBAAmB,EAC7E,CACD,cAAe,CACX,0CACA,wCACA,kCACH,CACD,gBAAiB,CACb,yCACA,uCACA,mDACH,AACL,EACH,AACL,EACA,CACI,GAAI,uBACJ,KAAM,2BACN,YAAa,kEACb,MAAO,SACP,gBAAiB,uMACjB,aAAc,4EACd,cAAe,CACX,CACI,GAAI,qBACJ,KAAM,aACN,YAAa,kDACb,iBAAkB,CACd,CAAE,GAAI,QAAS,KAAM,kBAAmB,YAAa,0BAA2B,EAChF,CAAE,GAAI,QAAS,KAAM,UAAW,YAAa,qCAAsC,EACnF,CAAE,GAAI,QAAS,KAAM,oBAAqB,YAAa,0BAA2B,EAClF,CAAE,GAAI,QAAS,KAAM,wBAAyB,YAAa,iCAAkC,EAC7F,CAAE,GAAI,QAAS,KAAM,kBAAmB,YAAa,2BAA4B,EACpF,CACD,cAAe,CACX,sDACA,iCACA,+BACA,qCACA,4BACH,CACD,gBAAiB,CACb,8BACA,uBACA,kDACA,iCACH,AACL,EACA,CACI,GAAI,oBACJ,KAAM,wBACN,YAAa,yCACb,iBAAkB,CACd,CAAE,GAAI,QAAS,KAAM,mBAAoB,YAAa,oCAAqC,EAC3F,CAAE,GAAI,QAAS,KAAM,iBAAkB,YAAa,qCAAsC,EAC1F,CAAE,GAAI,QAAS,KAAM,iBAAkB,YAAa,+BAAgC,EACpF,CAAE,GAAI,QAAS,KAAM,yBAA0B,YAAa,gCAAiC,EAChG,CACD,cAAe,CACX,yCACA,6BACA,+BACA,kCACA,8CACH,CACD,gBAAiB,CACb,qCACA,4BACA,yCACA,8BACH,AACL,EACA,CACI,GAAI,sBACJ,KAAM,wBACN,YAAa,6CACb,iBAAkB,CACd,CAAE,GAAI,QAAS,KAAM,cAAe,YAAa,gCAAiC,EAClF,CAAE,GAAI,QAAS,KAAM,sBAAuB,YAAa,wBAAyB,EAClF,CAAE,GAAI,QAAS,KAAM,gBAAiB,YAAa,8BAA+B,EACrF,CACD,cAAe,CACX,iCACA,iCACA,kCACA,oCACH,CACD,gBAAiB,CACb,iCACA,6BACA,sCACH,AACL,EACH,AACL,EACA,CACI,GAAI,uBACJ,KAAM,sCACN,YAAa,gEACb,MAAO,SACP,gBAAiB,qLACjB,aAAc,4EACd,cAAe,CACX,CACI,GAAI,eACJ,KAAM,2BACN,YAAa,sDACb,iBAAkB,CACd,CAAE,GAAI,SAAU,KAAM,sBAAuB,YAAa,4BAA6B,EACvF,CAAE,GAAI,SAAU,KAAM,kBAAmB,YAAa,iCAAkC,EACxF,CAAE,GAAI,SAAU,KAAM,mBAAoB,YAAa,8BAA+B,EACzF,CACD,cAAe,CACX,oCACA,yBACA,sBACA,2BACH,CACD,gBAAiB,CACb,8BACA,6BACA,wBACH,AACL,EACA,CACI,GAAI,iBACJ,KAAM,iCACN,YAAa,yCACb,iBAAkB,CACd,CAAE,GAAI,OAAQ,KAAM,yBAA0B,YAAa,mBAAoB,EAC/E,CAAE,GAAI,OAAQ,KAAM,YAAa,YAAa,4BAA6B,EAC3E,CAAE,GAAI,OAAQ,KAAM,cAAe,YAAa,iCAAkC,EAClF,CAAE,GAAI,OAAQ,KAAM,YAAa,YAAa,uBAAwB,EACzE,CACD,cAAe,CACX,8BACA,8BACA,wBACA,sCACH,CACD,gBAAiB,CACb,iCACA,kCACA,0CACH,AACL,EACA,CACI,GAAI,gBACJ,KAAM,qCACN,YAAa,4CACb,iBAAkB,CACd,CAAE,GAAI,WAAY,KAAM,mBAAoB,YAAa,2BAA4B,EACrF,CAAE,GAAI,WAAY,KAAM,qBAAsB,YAAa,yBAA0B,EACrF,CAAE,GAAI,WAAY,KAAM,mBAAoB,YAAa,qBAAsB,EAClF,CACD,cAAe,CACX,wBACA,wBACA,0BACA,iCACH,CACD,gBAAiB,CACb,8BACA,2BACA,sCACH,AACL,EACA,CACI,GAAI,SACJ,KAAM,2BACN,YAAa,0CACb,iBAAkB,CACd,CAAE,GAAI,QAAS,KAAM,aAAc,YAAa,oBAAqB,EACrE,CAAE,GAAI,QAAS,KAAM,iBAAkB,YAAa,0BAA2B,EAC/E,CAAE,GAAI,QAAS,KAAM,sBAAuB,YAAa,0BAA2B,EACvF,CACD,cAAe,CACX,6BACA,0BACA,oBACA,0CACH,CACD,gBAAiB,CACb,gCACA,8BACA,+BACH,AACL,EACH,AACL,EACA,CACI,GAAI,wBACJ,KAAM,4BACN,YAAa,qEACb,MAAO,OACP,gBAAiB,mNACjB,aAAc,4EACd,cAAe,CACX,CACI,GAAI,oBACJ,KAAM,sBACN,YAAa,wCACb,iBAAkB,CACd,CAAE,GAAI,QAAS,KAAM,mBAAoB,YAAa,0BAA2B,EACjF,CAAE,GAAI,QAAS,KAAM,0BAA2B,YAAa,kCAAmC,EAChG,CAAE,GAAI,QAAS,KAAM,kBAAmB,YAAa,yBAA0B,EAClF,CACD,cAAe,CACX,6BACA,wCACA,2BACA,iCACH,CACD,gBAAiB,CACb,6BACA,+BACA,8BACH,AACL,EACA,CACI,GAAI,wBACJ,KAAM,aACN,YAAa,4CACb,iBAAkB,CACd,CAAE,GAAI,QAAS,KAAM,mBAAoB,YAAa,mCAAoC,EAC1F,CAAE,GAAI,QAAS,KAAM,oBAAqB,YAAa,0BAA2B,EAClF,CAAE,GAAI,QAAS,KAAM,oBAAqB,YAAa,8BAA+B,EACzF,CACD,cAAe,CACX,iCACA,kCACA,0BACA,6BACH,CACD,gBAAiB,CACb,oCACA,sCACA,4BACH,AACL,EACA,CACI,GAAI,mBACJ,KAAM,kCACN,YAAa,gDACb,iBAAkB,CACd,CAAE,GAAI,UAAW,KAAM,gBAAiB,YAAa,yBAA0B,EAC/E,CAAE,GAAI,UAAW,KAAM,kBAAmB,YAAa,yBAA0B,EACjF,CAAE,GAAI,UAAW,KAAM,cAAe,YAAa,gBAAiB,EACvE,CACD,cAAe,CACX,qCACA,yBACA,8BACA,oBACH,CACD,gBAAiB,CACb,8BACA,0BACA,oCACH,AACL,EACA,CACI,GAAI,wBACJ,KAAM,kCACN,YAAa,qDACb,iBAAkB,CACd,CAAE,GAAI,WAAY,KAAM,gBAAiB,YAAa,2BAA4B,EAClF,CAAE,GAAI,WAAY,KAAM,gBAAiB,YAAa,+BAAgC,EACtF,CAAE,GAAI,WAAY,KAAM,aAAc,YAAa,qBAAsB,EAC5E,CACD,cAAe,CACX,6BACA,0BACA,8BACA,0BACH,CACD,gBAAiB,CACb,yBACA,2BACA,8BACH,AACL,EACH,AACL,EACH,CA0CM,SAAS,EAA2B,CAAkB,CAAE,CAAgC,EAC3F,IAAM,EAAW,EAAiB,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,GACrD,GAAI,CAAC,EAAU,MAAO,CAAE,UAAW,EAAG,QAAS,CAAE,EAEjD,IAAI,EAAiB,EAEjB,EAAgB,EAEpB,IAAK,IAAM,KAAO,EAAS,aAAa,CAAE,CACtC,IAAM,EAAa,CAAW,CAAC,EAAI,EAAE,CAAC,CACtC,GAAI,GAAY,cAA4C,iBAA5B,EAAW,YAAY,CAAqB,CACxE,IACA,IAAM,EAAS,CAAc,CAAC,EAAW,YAAY,CAAgC,CACrF,GAAkB,AAAuB,IAAI,AAA1B,GAAQ,QAAS,CACxC,AADyC,CAE7C,CAKA,MAAO,CAAE,GAPoE,OAI3D,EAAgB,EAAI,KAAK,KAAK,CAAC,EAAiB,GAAiB,EAG/D,QAFJ,CAEY,CAChC,CnD3pBA,AmDwpBuB,InDxpBvB,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,CmDwpBoE,CnDxpBpE,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,iMmCgBA,EAAA,CAAA,EAAA,EAAA,OAAA,EAAA,4LnChBA,IAAA,EAAA,EAAA,CAAA,CAAA,gNAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,+FkBAgB,4PKCiE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,GvBD3F,IAAA,EAAA,EAAA,CAAA,CAAA,2ByBqBuC,CEAD,AEAL,AUZxB,AfYwB,ACAM,sQzBrBvC,IAAA,EAAA,EAAA,CAAA,CAAA,e6CeuB,CJZd,A5BYH,AUAe,AHZL,AyBYO,A3BAV,AGAO,AUZJ,AeYD,ANZN,APAO,AUAP,ACAA,CHAA,AlBYY,AuBAN,AFZN,ADAA,AVAO,AYYO,AdZP,AlBYV,AKAO,AEZG,ACYI,AyBAL,ANZN,CGAA,AGYM,AbZC,AYYO,AxBAH,AuBZX,AxBAO,AWAA,ASAP,ACAA,AlBYY,AVAf,AKAO,M4BAE,EAAA,oIhDhBf,IAAA,EAAA,EAAA,CAAA,CAAA,6N6BOkE,CHAF,AGAE,CHAF,AGAE,CHAF,AGAE,CAAA,AHAF,CAAA,AGAE,CAAA,IAAU,yCAC7B,a7BR/C,IAAA,EAAA,EAAA,CAAA,CAAA,OAYA,IAAM,EAA0C,CAC5C,KAAQ,yCACR,KAAQ,yCACR,OAAU,6CACV,OAAU,6CACV,KAAQ,yCACR,KAAQ,wCACZ,EAEe,SAAS,EAAY,QAChC,CAAM,SACN,CAAO,QACP,CAAM,cACN,CAAY,CACZ,iBAAe,cACf,CAAY,aACZ,CAAW,CACI,EACf,IAyFU,EAzFJ,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA4B,UAC9D,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuC,QAGrE,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAe,EAAE,EAC7C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UAoFvC,CAlFA,CAAA,EAkFI,AAlFJ,EAAA,SAAA,AAAS,EAAC,KACF,IACI,GACA,CAFI,CAEW,EAAY,MADd,KACyB,EACtC,EAAa,EAAY,SAAS,EAAI,IACtC,EAAY,EAAY,QAAQ,EAAI,IACpC,EAAa,EAAY,SAAS,EAAI,IACtC,EAAW,EAAY,OAAO,EAAI,IAClC,EAAY,EAAY,QAAQ,EAChC,EAAU,EAAY,MAAM,EAC5B,EAAS,EAAY,KAAK,EAAI,EAAE,IAGhC,EAAe,EAAe,CAAC,aAAa,EAAE,EAAA,CAAc,CAAG,IAC/D,EAAa,IACb,EAAY,IACZ,EAAa,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EACnD,CADsD,CAC3C,IACX,EAAY,UACZ,EAAU,AAH+D,QAIzE,EAAS,EAAE,GAEf,EAAW,IAEnB,EAAG,CAAC,EAAQ,EAAa,EAAa,EA0DjC,GAGD,CAAA,EAAA,EAHS,AAGT,GAAA,EAAC,MAAA,CAAI,UAAU,gGACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8IAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4FACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2CACT,EAAc,gBAAkB,sBAErC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACV,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,6CAA6C,EAAE,GAlBxE,EAAiB,IAAI,CAAC,GAAK,EAAE,IAAI,GAkB6D,EAlBxD,CAEhD,CAAe,CADJ,AACK,GADK,OAAS,OACJ,EAAI,EAAgB,IAAO,EAgBmD,CAAe,MAhB1E,IAiBvB,IAGT,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0DACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,MAAQ,IAAE,WAItD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,EAAS,UAAU,kGAChC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,KAAM,UAKjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACX,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,GAAG,cAAc,SArFjB,AAAD,CAqF4B,GApF7C,EAAE,cAAc,GAGhB,IAAI,EAAa,IAAI,EAAM,CACvB,EAAQ,IAAI,IAAI,AAChB,EAAW,IAAI,CAAC,CACZ,GAAI,OAAO,UAAU,GACrB,OAAQ,eACR,SAAU,MACV,QAAS,EACT,UAAW,IAAI,KACf,KAAM,WACV,GAGJ,IAAM,EAAwB,CAC1B,GAAI,GAAa,IAAM,OAAO,UAAU,eACxC,YACA,WACA,YACA,UACA,WACA,SACA,EACA,SAAU,GAAgB,GAAa,SACvC,UAAW,GAAa,WAAa,IAAI,OAAO,WAAW,GAC3D,UAAW,IAAI,OAAO,WAAW,GACjC,MAAO,CACX,EAEA,EAAO,EACX,EAqD+D,UAAU,sBAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,GAAI,UAAU,kBAAkB,qBAEvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACV,CAAC,OAAQ,cAAe,YAAY,CAAC,GAAG,CAAC,AAAC,GACvC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEG,KAAK,SACL,QAAS,IAAM,EAAU,GACzB,UAAW,CAAC,iFAAiF,EAAE,IAAW,EAChG,mDACA,0DAAA,CACJ,UAEL,EAAE,OAAO,CAAC,IAAK,MARX,SAarB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,KAAM,GAAI,UAAU,mBAAmB,eAExD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,MAAO,EACP,SAAW,AAAD,GAAO,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,UAAU,iIAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,gBAAO,kBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,oBACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,4BAOpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,KAAM,GAAI,UAAU,oBAAoB,0BAEvD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kFAAyE,4BAG7F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,EAC1C,YAAY,qEACZ,UAAU,iIAIb,EAAM,MAAM,CAAG,GACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gGACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6EAAoE,YACjF,EAAM,GAAG,CAAC,GACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAkB,UAAU,0EACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA6B,EAAK,QAAQ,GAC1D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAM,IAAI,KAAK,EAAK,SAAS,EAAE,kBAAkB,GAAG,IAAE,IAAI,KAAK,EAAK,SAAS,EAAE,kBAAkB,CAAC,EAAE,CAAE,CAAE,KAAM,UAAW,OAAQ,SAAU,SAEhJ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAiB,EAAK,OAAO,KALpC,EAAK,EAAE,YAcrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,wDAA+C,uBAChE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,QAAQ,CAAA,CAAA,EACR,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,UAAU,yGACV,YAAY,8BAIpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,iFACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAU,KAAM,KAAM,0BAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,KAAM,EACN,UAAU,+HACV,YAAY,qCAMxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gFACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,iFACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,KAAM,KAAM,eAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,UAAU,qGACV,YAAY,uBAIpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,iFACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,KAAM,KAAM,iBAE1B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,UAAU,0GAIlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,iFACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,KAAM,KAAM,eAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,EAC1C,UAAU,kHAQ9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iFACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,KAAK,SACL,QAAS,EACT,UAAU,6FACb,WAGD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,KAAK,SACL,KAAK,cACL,UAAU,6IAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,KAAM,KAAM,2BA7LlB,IAoMxB,UuC5Se,EAAA,OAAA,EAAA,+JYHA,SAAS,EAAc,QAClC,CAAM,SACN,CAAO,cACP,CAAY,iBACZ,CAAe,cACf,CAAY,SACZ,CAAO,CACU,SACjB,AAAK,EASD,CAAA,CATA,CASA,EAAA,CATS,EAST,EAAC,MAAA,CAAI,UAAU,gIACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0HAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qGACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,IACP,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,MACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,OAEX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oEACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,gBAAgB,KAAM,KAAM,sBAGpD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,2CAAiC,IACxC,EAAa,UAGvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,kGAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,KAAM,UAKjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDACS,IAAnB,EAAQ,MAAM,CACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yFACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,UAAU,yCACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,0BAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+CAAsC,kJAKvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wCAA8B,SACjC,EAAQ,MAAM,CAAC,YAA6B,IAAnB,EAAQ,MAAM,CAAS,IAAM,MAEjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oEAA2D,2BAK9E,EAAQ,GAAG,CAAC,CAAC,EAAO,SAtDjB,QAuDA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAc,UAAU,0HACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wDACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,KAAM,OAEpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qFACT,EAAM,YAAY,CACf,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,KAAM,EAAM,YAAY,CAAE,OAAO,SAAS,IAAI,sBAAsB,UAAU,oCAC5E,EAAM,YAAY,CACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAa,KAAM,QAGxB,EAAM,YAAY,GAGzB,EAAM,UAAU,EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAO,KAAM,KACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAoB,MAAO,EAAM,UAAU,UACtD,EAAM,UAAU,YAMrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,gDAAgD,EAAE,AAjFnG,AAAI,GAiFkH,EAAM,UAAU,GAjFpH,GAAY,EAAP,4CACnB,GAAc,GAAY,EAAP,yCAChB,8CA+E+H,CAAG,WACpG,KAAK,KAAK,CAAC,AAAmB,MAAb,UAAU,EAAQ,gBAI5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mFACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kDAAyC,oBACxD,EAAM,oBAAoB,IAG9B,EAAM,SAAS,EAAI,EAAM,SAAS,CAAC,MAAM,CAAG,GACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mFAA0E,iBAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACV,EAAM,SAAS,CAAC,GAAG,CAAC,CAAC,EAAO,IACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAe,UAAU,6GACtB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2DAAkD,MACjE,EACD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2DAAkD,QAH5D,cA3CxB,UA4D1B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iFACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,uIACb,iBAzHG,IAgIxB,kIlD1JA,IAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,WyCsBM,EAAA,CAAA,EAAA,EAAA,OAAA,EAA4B,aAAa,CGAX,AFZU,ADYC,AIAF,CAAA,AJAE,ACZD,AEYV,keCApB,EAAA,gN7CtBhB,IAAA,EAAA,EAAA,CAAA,CAAA,OgDcO,IAAM,EAA+B,CAExC,CACI,GAAI,WACJ,KAAM,WACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,sIACb,mBAAoB,CAChB,4CACA,kEACA,+CACA,mDACH,CACD,eAAgB,CACZ,2CACA,4CACA,iDACA,0CACH,CACD,YAAa,CAAC,uBAAwB,aAAa,CACnD,SAAU,CAAC,UAAW,aAAc,WAAY,WAAY,cAAc,AAC9E,EACA,CACI,GAAI,gBACJ,KAAM,oCACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,6FACb,mBAAoB,CAChB,mEACA,0CACA,uDACA,6CACH,CACD,eAAgB,CACZ,wDACA,gDACA,oDACA,iCACH,CACD,YAAa,CAAC,uBAAwB,uBAAuB,CAC7D,SAAU,CAAC,WAAY,aAAc,kBAAmB,WAAY,aAAc,eAAe,AACrG,EACA,CACI,GAAI,wBACJ,KAAM,mCACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,gIACb,mBAAoB,CAChB,0CACA,+CACA,qCACA,4CACH,CACD,eAAgB,CACZ,4CACA,kDACA,4CACA,2CACH,CACD,YAAa,CAAC,uBAAwB,UAAU,CAChD,SAAU,CAAC,UAAW,gBAAiB,YAAa,aAAc,UAAW,WAAW,AAC5F,EACA,CACI,GAAI,yBACJ,KAAM,yBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,iHACb,mBAAoB,CAChB,gDACA,mCACA,yCACA,oCACH,CACD,eAAgB,CACZ,oCACA,+BACA,gCACA,kCACH,CACD,YAAa,CAAC,uBAAwB,0BAA0B,CAChE,SAAU,CAAC,aAAc,gBAAiB,WAAY,aAAc,OAAO,AAC/E,EACA,CACI,GAAI,gBACJ,KAAM,8BACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,uGACb,mBAAoB,CAChB,8BACA,uCACA,0DACA,8CACH,CACD,eAAgB,CACZ,gCACA,6BACA,oCACA,qCACH,CACD,YAAa,CAAC,uBAAwB,cAAe,OAAO,CAC5D,SAAU,CAAC,WAAY,YAAa,aAAc,QAAS,gBAAiB,WAAY,OAAO,AACnG,EACA,CACI,GAAI,mBACJ,KAAM,mBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,gHACb,mBAAoB,CAChB,8CACA,wCACA,0CACA,6BACH,CACD,eAAgB,CACZ,oCACA,qCACA,uCACA,2BACH,CACD,YAAa,CAAC,uBAAwB,aAAa,CACnD,SAAU,CAAC,UAAW,QAAS,aAAc,UAAW,WAAY,aAAa,AACrF,EACA,CACI,GAAI,sBACJ,KAAM,sBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,0FACb,mBAAoB,CAChB,sCACA,oCACA,wCACA,6BACH,CACD,eAAgB,CACZ,mCACA,8CACA,wBACA,iCACH,CACD,YAAa,CAAC,uBAAwB,OAAQ,gBAAgB,CAC9D,SAAU,CAAC,eAAgB,cAAe,WAAY,KAAM,gBAAiB,UAAU,AAC3F,EACA,CACI,GAAI,qBACJ,KAAM,qBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,wDACb,mBAAoB,CAChB,iCACA,qBACA,uCACA,kCACH,CACD,eAAgB,CACZ,iCACA,0CACA,uCACA,yCACH,CACD,YAAa,CAAC,uBAAwB,OAAQ,gBAAgB,CAC9D,SAAU,CAAC,MAAO,QAAS,eAAgB,OAAQ,MAAO,aAAa,AAC3E,EACA,CACI,GAAI,gBACJ,KAAM,gBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,kGACb,mBAAoB,CAChB,+BACA,+BACA,sCACA,sCACH,CACD,eAAgB,CACZ,8BACA,4BACA,gCACA,8BACH,CACD,YAAa,CAAC,uBAAwB,uBAAuB,CAC7D,SAAU,CAAC,OAAQ,SAAU,QAAS,YAAa,WAAW,AAClE,EACA,CACI,GAAI,WACJ,KAAM,WACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,0EACb,mBAAoB,CAChB,6CACA,wCACA,+BACA,4CACH,CACD,eAAgB,CACZ,8BACA,+BACA,oBACA,0BACH,CACD,YAAa,CAAC,uBAAwB,gBAAgB,CACtD,SAAU,CAAC,WAAY,gBAAiB,cAAe,WAAW,AACtE,EACA,CACI,GAAI,UACJ,KAAM,UACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,gFACb,mBAAoB,CAChB,yDACA,0BACA,+BACA,8CACH,CACD,eAAgB,CACZ,wCACA,yCACA,mCACA,mCACH,CACD,YAAa,CAAC,uBAAwB,UAAW,cAAc,CAC/D,SAAU,CAAC,UAAW,UAAW,WAAY,gBAAiB,MAAO,SAAS,AAClF,EACA,CACI,GAAI,sBACJ,KAAM,mCACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,gFACb,mBAAoB,CAChB,sCACA,uCACA,mDACA,yCACH,CACD,eAAgB,CACZ,wCACA,+BACA,mCACA,yCACH,CACD,YAAa,CAAC,uBAAwB,OAAQ,aAAa,CAC3D,SAAU,CAAC,KAAM,qBAAsB,MAAO,UAAW,eAAe,AAC5E,EACA,CACI,GAAI,0BACJ,KAAM,0BACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,QACV,YAAa,8EACb,mBAAoB,CAChB,yCACA,+CACA,mCACA,4BACH,CACD,eAAgB,CACZ,iCACA,qCACA,6BACA,6BACH,CACD,YAAa,CAAC,0BAA2B,uBAAwB,OAAO,CACxE,SAAU,CAAC,YAAa,OAAQ,YAAa,aAAc,WAAY,aAC3E,AADwF,EAExF,CACI,GAAI,4BACJ,KAAM,gCACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,QACV,YAAa,2GACb,mBAAoB,CAChB,gCACA,kCACA,+BACA,2CACH,CACD,eAAgB,CACZ,4BACA,yBACA,2BACA,qCACH,CACD,YAAa,CAAC,uBAAwB,0BAA2B,eAAe,CAChF,SAAU,CAAC,OAAQ,YAAa,gBAAiB,aAAc,gBAAiB,YAAY,AAChG,EACA,CACI,GAAI,sBACJ,KAAM,sBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,QACV,YAAa,0EACb,mBAAoB,CAChB,uDACA,0CACA,gCACA,oCACH,CACD,eAAgB,CACZ,6BACA,sCACA,6BACA,2BACH,CACD,YAAa,CAAC,uBAAwB,uBAAwB,gBAAgB,CAC9E,SAAU,CAAC,UAAW,SAAU,aAAc,gBAAiB,gBAAgB,AACnF,EACA,CACI,GAAI,2BACJ,KAAM,2BACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,qFACb,mBAAoB,CAChB,sCACA,wCACA,4BACA,+BACH,CACD,eAAgB,CACZ,wBACA,kCACA,oCACA,4BACH,CACD,YAAa,CAAC,cAAe,OAAQ,gBAAgB,CACrD,SAAU,CAAC,OAAQ,YAAa,UAAW,cAAe,gBAAiB,WAAW,AAC1F,EACA,CACI,GAAI,wBACJ,KAAM,wBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,QACV,YAAa,gHACb,mBAAoB,CAChB,gCACA,+CACA,mCACA,0CACH,CACD,eAAgB,CACZ,sCACA,gCACA,+BACA,gBACH,CACD,YAAa,CAAC,uBAAwB,uBAAwB,gBAAgB,CAC9E,SAAU,CAAC,eAAgB,iBAAkB,UAAW,WAAY,aACxE,AADqF,EAErF,CACI,GAAI,qBACJ,KAAM,qBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,QACV,YAAa,qDACb,mBAAoB,CAChB,iCACA,6BACA,8BACA,8BACH,CACD,eAAgB,CACZ,kCACA,wBACA,+BACA,yBACH,CACD,YAAa,CAAC,uBAAwB,mBAAmB,CACzD,SAAU,CAAC,MAAO,QAAS,QAAS,WAAY,mBAAoB,aAAa,AACrF,EACA,CACI,GAAI,uBACJ,KAAM,uBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,QACV,YAAa,4DACb,mBAAoB,CAChB,4CACA,yBACA,+BACA,6BACH,CACD,eAAgB,CACZ,0BACA,4BACA,iCACA,2BACH,CACD,YAAa,CAAC,uBAAwB,uBAAuB,CAC7D,SAAU,CAAC,KAAM,QAAS,WAAY,SAAU,SAAU,aAAa,AAC3E,EACA,CACI,GAAI,qBACJ,KAAM,qBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,iEACb,mBAAoB,CAChB,qDACA,6BACA,oCACA,kCACH,CACD,eAAgB,CACZ,sBACA,qCACA,mCACA,wBACH,CACD,YAAa,CAAC,uBAAwB,gBAAgB,CACtD,SAAU,CAAC,aAAc,UAAW,OAAQ,WAAY,SAAU,WAAW,AACjF,EACA,CACI,GAAI,sBACJ,KAAM,sBACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,qDACb,mBAAoB,CAChB,qCACA,kCACA,yCACA,sCACH,CACD,eAAgB,CACZ,oCACA,6BACA,mCACA,4BACH,CACD,YAAa,CAAC,uBAAuB,CACrC,SAAU,CAAC,aAAc,cAAe,gBAAgB,AAC5D,EACA,CACI,GAAI,oBACJ,KAAM,wBACN,eAAgB,CAAC,EACjB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,sDACb,mBAAoB,CAChB,iEACA,2CACA,uCACA,kCACH,CACD,eAAgB,CACZ,8BACA,kCACA,2BACA,2CACH,CACD,YAAa,CAAC,uBAAwB,gBAAgB,CACtD,SAAU,CAAC,UAAW,YAAa,iBAAkB,kBAAkB,AAC3E,EACA,CACI,GAAI,iBACJ,KAAM,mBACN,eAAgB,CAAC,EACjB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,wDACb,mBAAoB,CAChB,0CACA,yCACA,kCACA,0CACH,CACD,eAAgB,CACZ,uCACA,6BACA,mCACA,+BACH,CACD,YAAa,CAAC,uBAAwB,OAAO,CAC7C,SAAU,CAAC,SAAU,YAAa,YAAY,AAClD,EACA,CACI,GAAI,wBACJ,KAAM,mCACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,kEACb,mBAAoB,CAChB,8BACA,mCACA,gCACA,4BACH,CACD,eAAgB,CACZ,wBACA,iCACA,uCACA,mCACH,CACD,YAAa,CAAC,uBAAwB,gBAAgB,CACtD,SAAU,CAAC,WAAY,eAAgB,UAAW,kBAAkB,AACxE,EACA,CACI,GAAI,6BACJ,KAAM,6BACN,eAAgB,EAChB,WAAY,EACZ,iBAAkB,EAClB,SAAU,WACV,YAAa,8DACb,mBAAoB,CAChB,4CACA,gDACA,yCACA,qCACH,CACD,eAAgB,CACZ,6CACA,iCACA,wBACA,gDACH,CACD,YAAa,CAAC,uBAAwB,OAAQ,oBAAoB,CAClE,SAAU,CAAC,kBAAmB,aAAc,WAAY,eAAgB,OAAO,AACnF,EACH,IhD9hBc,CACP,CACI,GAAI,mBACJ,SAAU,gDACV,KAAM,UACN,KAAM,iHACN,MAAO,8CACX,EACA,CACI,GAAI,gBACJ,SAAU,kEACV,KAAM,UACN,KAAM,gEACN,MAAO,iDACX,EACA,CACI,GAAI,mBACJ,SAAU,+CACV,KAAM,UACN,KAAM,2DACN,MAAO,qCACX,EACA,CACI,GAAI,gBACJ,SAAU,yDACV,KAAM,UACN,KAAM,wDACN,MAAO,oDACX,EACA,CACI,GAAI,sBACJ,SAAU,gEACV,KAAM,UACN,KAAM,kEACN,MAAO,yCACX,EACH,IACQ,CACL,CACI,GAAI,mBACJ,SAAU,oEACV,KAAM,QACN,KAAM,kDACN,MAAO,kDACX,EACA,CACI,GAAI,mBACJ,SAAU,uEACV,KAAM,QACN,KAAM,mEACN,MAAO,mCACX,EACA,CACI,GAAI,qBACJ,SAAU,0DACV,KAAM,QACN,KAAM,qDACN,MAAO,0CACX,EACH,IACY,CACT,CACI,GAAI,eACJ,SAAU,2DACV,KAAM,YACN,KAAM,sDACN,MAAO,mCACX,EACA,CACI,GAAI,oBACJ,SAAU,6DACV,KAAM,YACN,KAAM,iDACN,MAAO,uCACX,EACA,CACI,GAAI,cACJ,SAAU,yDACV,KAAM,YACN,KAAM,sDACN,MAAO,4CACX,EACH,IACO,CACJ,CACI,GAAI,iBACJ,SAAU,wDACV,KAAM,OACN,KAAM,kDACN,MAAO,qCACX,EACA,CACI,GAAI,gBACJ,SAAU,2DACV,KAAM,OACN,KAAM,+CACN,MAAO,0CACX,EACA,CACI,GAAI,aACJ,SAAU,kDACV,KAAM,OACN,KAAM,qDACN,MAAO,gCACX,EACH,IACW,CACR,CACI,GAAI,oBACJ,SAAU,kDACV,KAAM,WACN,KAAM,6CACN,MAAO,oCACX,EACA,CACI,GAAI,iBACJ,SAAU,wDACV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","ignoreList":[16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49]}