(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67034,(e,t,r)=>{var i={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],h=new n((o+a)*3/4-a),u=0,c=a>0?o-4:o;for(r=0;r<c;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],h[u++]=t>>16&255,h[u++]=t>>8&255,h[u++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,h[u++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,h[u++]=t>>8&255,h[u++]=255&t),h},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,s=[],o=0,a=i-n;o<a;o+=16383)s.push(function(e,t,i){for(var n,s=[],o=t;o<i;o+=3)n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[n>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?s.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===n&&s.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i[45]=62,i[95]=63},72:function(e,t,r){"use strict";var i=r(675),n=r(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var i=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);var s=0|f(i,n),l=o(s),h=l.write(i,n);return h!==s&&(l=l.slice(0,h)),l}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(R(e,SharedArrayBuffer)||e&&R(e.buffer,SharedArrayBuffer)))return function(e,t,r){var i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),i}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var u=e.valueOf&&e.valueOf();if(null!=u&&u!==e)return a.from(u,t,r);var p=function(e){if(a.isBuffer(e)){var t=0|d(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return h(e),o(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),r=o(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(h(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(e).length;default:if(n)return i?-1:S(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,r){var n,s,o,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=t;s<r;++s)n+=N[e[s]];return n}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":return n=this,s=t,o=r,0===s&&o===n.length?i.fromByteArray(n):i.fromByteArray(n.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,n){var s;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(n)return -1;else r=e.length-1;else if(r<0)if(!n)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,i,n)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){var s,o=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var u=-1;for(s=r;s<a;s++)if(h(e,s)===h(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*o}else -1!==u&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var c=!0,d=0;d<l;d++)if(h(e,s+d)!==h(t,d)){c=!1;break}if(c)return s}return -1}a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(R(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:+(i<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,i=a.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(R(s,Uint8Array)&&(s=a.from(s)),!a.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,i,n){if(R(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var s=n-i,o=r-t,l=Math.min(s,o),h=this.slice(i,n),u=e.slice(t,r),c=0;c<l;++c)if(h[c]!==u[c]){s=h[c],o=u[c];break}return s<o?-1:+(o<s)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,l,h=e[n],u=null,c=h>239?4:h>223?3:h>191?2:1;if(n+c<=r)switch(c){case 1:h<128&&(u=h);break;case 2:(192&(s=e[n+1]))==128&&(l=(31&h)<<6|63&s)>127&&(u=l);break;case 3:s=e[n+1],o=e[n+2],(192&s)==128&&(192&o)==128&&(l=(15&h)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,c=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=c}var d=i,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,d.slice(g,g+=4096));return p}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function _(e,t,r,i,n,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function E(e,t,r,i,n,s){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function I(e,t,r,i,s){return t*=1,r>>>=0,s||E(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}function b(e,t,r,i,s){return t*=1,r>>>=0,s||E(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}a.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,o,a,l,h,u,c,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var f=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a,l=parseInt(t.substr(2*o,2),16);if((a=l)!=a)break;e[r+o]=l}return o}(this,e,t,r);case"utf8":case"utf-8":return n=t,s=r,k(S(e,this.length-n),this,n,s);case"ascii":return o=t,a=r,k(A(e),this,o,a);case"latin1":case"binary":return function(e,t,r,i){return k(A(t),e,r,i)}(this,e,t,r);case"base64":return l=t,h=r,k(C(e),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,c=r,k(function(e,t){for(var r,i,n=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n.push(r%256),n.push(i);return n}(e,this.length-u),this,u,c);default:if(f)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,a.prototype),i},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},a.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}var s=1,o=0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=e/s&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}var s=r-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return b(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return b(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,i){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var s=n-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return n},a.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===i&&s<128||"latin1"===i)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var o=a.isBuffer(e)?e:a.from(e,i),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%l]}return this};var T=/[^+/0-9A-Za-z-_]/g;function S(e,t){t=t||1/0;for(var r,i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319||o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function A(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function C(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function k(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var N=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var i=16*r,n=0;n<16;++n)t[i+n]=e[r]+e[n];return t}()},783:function(e,t){t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,l=(1<<a)-1,h=l>>1,u=-7,c=r?n-1:0,d=r?-1:1,f=e[t+c];for(c+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+c],c+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+c],c+=d,u-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=h}return(f?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,l,h=8*s-n-1,u=(1<<h)-1,c=u>>1,d=5960464477539062e-23*(23===n),f=i?0:s-1,p=i?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(t*l-1)*Math.pow(2,n),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;e[r+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,h+=n;h>0;e[r+f]=255&o,f+=p,o/=256,h-=8);e[r+f-p]|=128*g}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}},o=!0;try{i[e](r,r.exports,s),o=!1}finally{o&&delete n[e]}return r.exports}s.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},44747,e=>{"use strict";let t,r,i,n,s;var o,a,l,h,u,c,d,f,p,g,m,y,v,w,_,E,I=e.i(43476),b=e.i(71645),T=e.i(47167);let S=function(e){let t=[],r=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&i+1<e.length&&(64512&e.charCodeAt(i+1))==56320?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128)}return t},A=function(e){let t=[],r=0,i=0;for(;r<e.length;){let n=e[r++];if(n<128)t[i++]=String.fromCharCode(n);else if(n>191&&n<224){let s=e[r++];t[i++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){let s=((7&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{let s=e[r++],o=e[r++];t[i++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&o)}}return t.join("")},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){let n=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,h=n>>2,u=(3&n)<<4|o>>4,c=(15&o)<<2|l>>6,d=63&l;!a&&(d=64,s||(c=64)),i.push(r[h],r[u],r[c],r[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(S(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):A(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){let n=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,o=++t<e.length?r[e.charAt(t)]:64,a=++t<e.length?r[e.charAt(t)]:64;if(++t,null==n||null==s||null==o||null==a)throw new k;let l=n<<2|s>>4;if(i.push(l),64!==o){let e=s<<4&240|o>>2;if(i.push(e),64!==a){let e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let R=function(e){let t=S(e);return C.encodeByteArray(t,!0)},N=function(e){return R(e).replace(/\./g,"")},O=function(e){try{return C.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},P=()=>{try{return("undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g).__FIREBASE_DEFAULTS__||(()=>{if(void 0===T.default||void 0===T.default.env)return;let e=T.default.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)})()||(()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&O(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},D=e=>P()?.emulatorHosts?.[e],x=()=>P()?.config,L=e=>P()?.[`_${e}`];class M{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function U(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V(e){return(await fetch(e,{credentials:"include"})).ok}let F={},B=!1;function j(e,t){if("undefined"==typeof window||"undefined"==typeof document||!U(window.location.host)||F[e]===t||F[e]||B)return;function r(e){return`__firebase__banner__${e}`}F[e]=t;let i="__firebase__banner",n=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(F))F[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(i),t=!1,e||((e=document.createElement("div")).setAttribute("id",i),t=!0),{created:t,element:e}),o=r("text"),a=document.getElementById(o)||document.createElement("span"),l=r("learnmore"),h=document.getElementById(l)||document.createElement("a"),u=r("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e,t=s.element;t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center",h.setAttribute("id",l),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline";let r=((e=document.createElement("span")).style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{let e;B=!0,(e=document.getElementById(i))&&e.remove()},e);c.setAttribute("width","24"),c.setAttribute("id",u),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px",t.append(c,a,h,r),document.body.appendChild(t)}n?(a.innerText="Preview backend disconnected.",c.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(c.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText="Preview backend running in this workspace."),a.setAttribute("id",o)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function H(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}class z extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,q.prototype.create)}}class q{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var r,i;let n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?(r=o,i=n,r.replace(W,(e,t)=>{let r=i[t];return null!=r?String(r):`<${t}?>`})):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new z(s,l,n)}}let W=/\{\$([^}]+)}/g;function G(e,t){if(e===t)return!0;let r=Object.keys(e),i=Object.keys(t);for(let n of r){if(!i.includes(n))return!1;let r=e[n],s=t[n];if(K(r)&&K(s)){if(!G(r,s))return!1}else if(r!==s)return!1}for(let e of i)if(!r.includes(e))return!1;return!0}function K(e){return null!==e&&"object"==typeof e}function J(e){let t=[];for(let[r,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function X(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[r,i]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(i)}}),t}function Q(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}class Y{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(i=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:r}:e).next&&(i.next=Z),void 0===i.error&&(i.error=Z),void 0===i.complete&&(i.complete=Z);let n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),n}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z(){}function ee(e){return e&&e._delegate?e._delegate:e}class et{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let er="[DEFAULT]";class ei{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new M;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(r)return null;throw e}if(r)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:er})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=er){return this.instances.has(e)}getOptions(e=er){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let n=this.instances.get(r);return n&&e(n,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var r;let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e)===er?void 0:r,options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=er){return this.component?this.component.multipleInstances?e:er:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class en{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ei(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let es=[];(o=l||(l={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";let eo={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},ea=l.INFO,el={[l.DEBUG]:"log",[l.VERBOSE]:"log",[l.INFO]:"info",[l.WARN]:"warn",[l.ERROR]:"error"},eh=(e,t,...r)=>{if(t<e.logLevel)return;let i=new Date().toISOString(),n=el[t];if(n)console[n](`[${i}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class eu{constructor(e){this.name=e,this._logLevel=ea,this._logHandler=eh,this._userLogHandler=null,es.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in l))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?eo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,l.DEBUG,...e),this._logHandler(this,l.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,l.VERBOSE,...e),this._logHandler(this,l.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,l.INFO,...e),this._logHandler(this,l.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,l.WARN,...e),this._logHandler(this,l.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,l.ERROR,...e),this._logHandler(this,l.ERROR,...e)}}let ec=new WeakMap,ed=new WeakMap,ef=new WeakMap,ep=new WeakMap,eg=new WeakMap,em={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return ed.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ef.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ey(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ey(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",n),e.removeEventListener("error",s)},n=()=>{t(ey(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",n),e.addEventListener("error",s)})).then(t=>{t instanceof IDBCursor&&ec.set(t,e)}).catch(()=>{}),eg.set(t,e),t}if(ep.has(e))return ep.get(e);let i=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ev(this),t),ey(ec.get(this))}:function(...t){return ey(e.apply(ev(this),t))}:function(t,...r){let i=e.call(ev(this),t,...r);return ef.set(i,t.sort?t.sort():[t]),ey(i)};return e instanceof IDBTransaction&&function(e){if(ed.has(e))return;let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",s),e.removeEventListener("abort",s)},n=()=>{t(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",n),e.addEventListener("error",s),e.addEventListener("abort",s)});ed.set(e,t)}(e),(t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,em):e}(e);return i!==e&&(ep.set(e,i),eg.set(i,e)),i}let ev=e=>eg.get(e),ew=["get","getKey","getAll","getAllKeys","count"],e_=["put","add","delete","clear"],eE=new Map;function eI(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(eE.get(t))return eE.get(t);let r=t.replace(/FromIndex$/,""),i=t!==r,n=e_.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(n||ew.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,n?"readwrite":"readonly"),o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),n&&s.done]))[0]};return eE.set(t,s),s}em={...s=em,get:(e,t,r)=>eI(e,t)||s.get(e,t,r),has:(e,t)=>!!eI(e,t)||s.has(e,t)};class eb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if(t=e.getComponent(),t?.type!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let eT="@firebase/app",eS="0.14.6",eA=new eu("@firebase/app"),eC="[DEFAULT]",ek={[eT]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eR=new Map,eN=new Map,eO=new Map;function eP(e,t){try{e.container.addComponent(t)}catch(r){eA.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function eD(e,t){e.container.addOrOverwriteComponent(t)}function ex(e){let t=e.name;if(eO.has(t))return eA.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(eO.set(t,e),eR.values()))eP(r,e);for(let t of eN.values())eP(t,e);return!0}function eL(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function eM(e,t,r=eC){eL(e,t).clearInstance(r)}function eU(e){return void 0!==e.options}function eV(e){return!eU(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function eF(e){return null!=e&&void 0!==e.settings}function eB(){eO.clear()}let ej=new q("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eH{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ej.create("app-deleted",{appName:this._name})}}function e$(e,t){let r=O(e.split(".")[1]);null===r?console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(r).exp?console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):1e3*JSON.parse(r).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class ez extends eH{constructor(e,t,r,i){const n=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:r,automaticDataCollectionEnabled:n};void 0!==e.apiKey?super(e,s,i):super(e.options,s,i),this._serverConfig={automaticDataCollectionEnabled:n,...t},this._serverConfig.authIdToken&&e$(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&e$(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,eQ(eT,eS,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){eX(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ej.create("server-app-deleted")}}let eq="12.6.0";function eW(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let i={name:eC,automaticDataCollectionEnabled:!0,...t},n=i.name;if("string"!=typeof n||!n)throw ej.create("bad-app-name",{appName:String(n)});if(r||(r=x()),!r)throw ej.create("no-options");let s=eR.get(n);if(s)if(G(r,s.options)&&G(i,s.config))return s;else throw ej.create("duplicate-app",{appName:n});let o=new en(n);for(let e of eO.values())o.addComponent(e);let a=new eH(r,i,o);return eR.set(n,a),a}function eG(e,t={}){let r;if(("undefined"!=typeof window||$())&&!$())throw ej.create("invalid-server-app-environment");let i=t||{};if(e&&(eU(e)?r=e.options:eV(e)?i=e:r=e),void 0===i.automaticDataCollectionEnabled&&(i.automaticDataCollectionEnabled=!0),r||(r=x()),!r)throw ej.create("no-options");let n={...i,...r};if(void 0!==n.releaseOnDeref&&delete n.releaseOnDeref,void 0!==i.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw ej.create("finalization-registry-not-supported",{});let s=""+[...JSON.stringify(n)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),o=eN.get(s);if(o)return o.incRefCount(i.releaseOnDeref),o;let a=new en(s);for(let e of eO.values())a.addComponent(e);let l=new ez(r,i,s,a);return eN.set(s,l),l}function eK(e=eC){let t=eR.get(e);if(!t&&e===eC&&x())return eW();if(!t)throw ej.create("no-app",{appName:e});return t}function eJ(){return Array.from(eR.values())}async function eX(e){let t=!1,r=e.name;eR.has(r)?(t=!0,eR.delete(r)):eN.has(r)&&0>=e.decRefCount()&&(eN.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function eQ(e,t,r){let i=ek[e]??e;r&&(i+=`-${r}`);let n=i.match(/\s|\//),s=t.match(/\s|\//);if(n||s){let e=[`Unable to register library "${i}" with version "${t}":`];n&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),n&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eA.warn(e.join(" "));return}ex(new et(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function eY(e,t){if(null!==e&&"function"!=typeof e)throw ej.create("invalid-log-argument");for(let r of es){let i=null;t&&t.level&&(i=eo[t.level]),null===e?r.userLogHandler=null:r.userLogHandler=(t,r,...n)=>{let s=n.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");r>=(i??t.logLevel)&&e({level:l[r].toLowerCase(),message:s,args:n,type:t.name})}}}function eZ(e){es.forEach(t=>{t.setLogLevel(e)})}let e0="firebase-heartbeat-store",e1=null;function e2(){return e1||(e1=(function(e,t,{blocked:r,upgrade:i,blocking:n,terminated:s}={}){let o=indexedDB.open(e,1),a=ey(o);return i&&o.addEventListener("upgradeneeded",e=>{i(ey(o.result),e.oldVersion,e.newVersion,ey(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(e0)}catch(e){console.warn(e)}}}).catch(e=>{throw ej.create("idb-open",{originalErrorMessage:e.message})})),e1}async function e6(e){try{let t=(await e2()).transaction(e0),r=await t.objectStore(e0).get(e5(e));return await t.done,r}catch(e){if(e instanceof z)eA.warn(e.message);else{let t=ej.create("idb-get",{originalErrorMessage:e?.message});eA.warn(t.message)}}}async function e3(e,t){try{let r=(await e2()).transaction(e0,"readwrite"),i=r.objectStore(e0);await i.put(t,e5(e)),await r.done}catch(e){if(e instanceof z)eA.warn(e.message);else{let t=ej.create("idb-set",{originalErrorMessage:e?.message});eA.warn(t.message)}}}function e5(e){return`${e.name}!${e.options.appId}`}class e4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e7(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=e8();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,r=e[0].date;for(let i=1;i<e.length;i++)e[i].date<r&&(r=e[i].date,t=i);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){eA.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=e8(),{heartbeatsToSend:t,unsentEntries:r}=function(e,t=1024){let r=[],i=e.slice();for(let n of e){let e=r.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),e9(r)>t){e.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),e9(r)>t){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=N(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return eA.warn(e),""}}}function e8(){return new Date().toISOString().substring(0,10)}class e7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let r=!0,i="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(i);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(i),e(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{t(n.error?.message||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await e6(this.app);return e?.heartbeats?e:{heartbeats:[]}}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return e3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return e3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function e9(e){return N(JSON.stringify({version:2,heartbeats:e})).length}function te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}ex(new et("platform-logger",e=>new eb(e),"PRIVATE")),ex(new et("heartbeat",e=>new e4(e),"PRIVATE")),eQ(eT,eS,""),eQ(eT,eS,"esm2020"),eQ("fire-js",""),e.s(["SDK_VERSION",()=>eq,"_DEFAULT_ENTRY_NAME",()=>eC,"_addComponent",()=>eP,"_addOrOverwriteComponent",()=>eD,"_apps",()=>eR,"_clearComponents",()=>eB,"_components",()=>eO,"_getProvider",()=>eL,"_isFirebaseApp",()=>eU,"_isFirebaseServerApp",()=>eF,"_isFirebaseServerAppSettings",()=>eV,"_registerComponent",()=>ex,"_removeServiceInstance",()=>eM,"_serverApps",()=>eN,"deleteApp",()=>eX,"getApp",()=>eK,"getApps",()=>eJ,"initializeApp",()=>eW,"initializeServerApp",()=>eG,"onLog",()=>eY,"registerVersion",()=>eQ,"setLogLevel",()=>eZ],92953);let tt=new q("auth","Firebase",te()),tr=new eu("@firebase/auth");function ti(e,...t){tr.logLevel<=l.ERROR&&tr.error(`Auth (${eq}): ${e}`,...t)}function tn(e,...t){throw tl(e,...t)}function ts(e,...t){return tl(e,...t)}function to(e,t,r){return new q("auth","Firebase",{...te(),[t]:r}).create(t,{appName:e.name})}function ta(e){return to(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tl(e,...t){if("string"!=typeof e){let r=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(r,...i)}return tt.create(e,...t)}function th(e,t,...r){if(!e)throw tl(t,...r)}function tu(e){let t="INTERNAL ASSERTION FAILED: "+e;throw ti(t),Error(t)}function tc(){return"undefined"!=typeof self&&self.location?.href||""}function td(){return"undefined"!=typeof self&&self.location?.protocol||null}class tf{constructor(e,t){var r;this.shortDelay=e,this.longDelay=t,r="Short delay should be less than long delay!",t>e||tu(r),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(H())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){let e;return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===td()||"https:"===td()||"object"==typeof(e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==e.id||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tp(e,t){var r,i;r=e.emulator,i="Emulator should always be set here",r||tu(i);let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class tg{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void tu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void tu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void tu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let tm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ty=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tv=new tf(3e4,6e4);function tw(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function t_(e,t,r,i,n={}){return tE(e,n,async()=>{let n={},s={};i&&("GET"===t?s=i:n={body:JSON.stringify(i)});let o=J({key:e.config.apiKey,...s}).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);let l={method:t,headers:a,...n};return("undefined"==typeof navigator||"Cloudflare-Workers"!==navigator.userAgent)&&(l.referrerPolicy="no-referrer"),e.emulatorConfig&&U(e.emulatorConfig.host)&&(l.credentials="include"),tg.fetch()(await tb(e,e.config.apiHost,r,o),l)})}async function tE(e,t,r){e._canInitEmulator=!1;let i={...tm,...t};try{let t=new tT(e),n=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();let s=await n.json();if("needConfirmation"in s)throw tS(e,"account-exists-with-different-credential",s);if(n.ok&&!("errorMessage"in s))return s;{let[t,r]=(n.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw tS(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw tS(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw tS(e,"user-disabled",s);let o=i[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(r)throw to(e,o,r);tn(e,o)}}catch(t){if(t instanceof z)throw t;tn(e,"network-request-failed",{message:String(t)})}}async function tI(e,t,r,i,n={}){let s=await t_(e,t,r,i,n);return"mfaPendingCredential"in s&&tn(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function tb(e,t,r,i){let n=`${t}${r}?${i}`,s=e.config.emulator?tp(e.config,n):`${e.config.apiScheme}://${n}`;return ty.includes(r)&&(await e._persistenceManagerAvailable,"COOKIE"===e._getPersistenceType())?e._getPersistence()._getFinalTarget(s).toString():s}class tT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ts(this.auth,"network-request-failed")),tv.get())})}}function tS(e,t,r){let i={appName:e.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);let n=ts(e,t,i);return n.customData._tokenResponse=r,n}function tA(e){return void 0!==e&&void 0!==e.enterprise}class tC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)switch(t.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tk(e,t){return t_(e,"GET","/v2/recaptchaConfig",tw(e,t))}async function tR(e,t){return t_(e,"POST","/v1/accounts:delete",t)}async function tN(e,t){return t_(e,"POST","/v1/accounts:lookup",t)}function tO(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function tP(e,t=!1){let r=ee(e),i=await r.getIdToken(t),n=tx(i);th(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");let s="object"==typeof n.firebase?n.firebase:void 0,o=s?.sign_in_provider;return{claims:n,token:i,authTime:tO(tD(n.auth_time)),issuedAtTime:tO(tD(n.iat)),expirationTime:tO(tD(n.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function tD(e){return 1e3*Number(e)}function tx(e){let[t,r,i]=e.split(".");if(void 0===t||void 0===r||void 0===i)return ti("JWT malformed, contained fewer than 3 sections"),null;try{let e=O(r);if(!e)return ti("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return ti("Caught error parsing JWT payload as JSON",e?.toString()),null}}function tL(e){let t=tx(e);return th(t,"internal-error"),th(void 0!==t.exp,"internal-error"),th(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function tM(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof z&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class tU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(!e)return this.errorBackoff=3e4,Math.max(0,(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tV{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tO(this.lastLoginAt),this.creationTime=tO(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tF(e){var t,r;let i=e.auth,n=await e.getIdToken(),s=await tM(e,tN(i,{idToken:n}));th(s?.users.length,i,"internal-error");let o=s.users[0];e._notifyReloadListener(o);let a=o.providerUserInfo?.length?tj(o.providerUserInfo):[],l=(t=e.providerData,r=a,[...t.filter(e=>!r.some(t=>t.providerId===e.providerId)),...r]),h=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!l?.length;Object.assign(e,{uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new tV(o.createdAt,o.lastLoginAt),isAnonymous:!!h&&u})}async function tB(e){let t=ee(e);await tF(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tj(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function tH(e,t){let r=await tE(e,{},async()=>{let r=J({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:n}=e.config,s=await tb(e,i,"/v1/token",`key=${n}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";let a={method:"POST",headers:o,body:r};return e.emulatorConfig&&U(e.emulatorConfig.host)&&(a.credentials="include"),tg.fetch()(s,a)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function t$(e,t){return t_(e,"POST","/v2/accounts:revokeToken",tw(e,t))}class tz{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){th(e.idToken,"internal-error"),th(void 0!==e.idToken,"internal-error"),th(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):tL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){th(0!==e.length,"internal-error");let t=tL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(th(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:n}=await tH(e,t);this.updateTokensAndExpiration(r,i,Number(n))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:n}=t,s=new tz;return r&&(th("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(th("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),n&&(th("number"==typeof n,"internal-error",{appName:e}),s.expirationTime=n),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tz,this.toJSON())}_performRefresh(){return tu("not implemented")}}function tq(e,t){th("string"==typeof e||void 0===e,"internal-error",{appName:t})}class tW{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new tU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new tV(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await tM(this,this.stsTokenManager.getToken(this.auth,e));return th(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tP(this,e)}reload(){return tB(this)}_assign(e){this!==e&&(th(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new tW({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){th(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await tF(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(eF(this.auth.app))return Promise.reject(ta(this.auth));let e=await this.getIdToken();return await tM(this,tR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,n=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:u,emailVerified:c,isAnonymous:d,providerData:f,stsTokenManager:p}=t;th(u&&p,e,"internal-error");let g=tz.fromJSON(this.name,p);th("string"==typeof u,e,"internal-error"),tq(r,e.name),tq(i,e.name),th("boolean"==typeof c,e,"internal-error"),th("boolean"==typeof d,e,"internal-error"),tq(n,e.name),tq(s,e.name),tq(o,e.name),tq(a,e.name),tq(l,e.name),tq(h,e.name);let m=new tW({uid:u,auth:e,email:i,emailVerified:c,displayName:r,isAnonymous:d,photoURL:s,phoneNumber:n,tenantId:o,stsTokenManager:g,createdAt:l,lastLoginAt:h});return f&&Array.isArray(f)&&(m.providerData=f.map(e=>({...e}))),a&&(m._redirectEventId=a),m}static async _fromIdTokenResponse(e,t,r=!1){let i=new tz;i.updateFromServerResponse(t);let n=new tW({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tF(n),n}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];th(void 0!==i.localId,"internal-error");let n=void 0!==i.providerUserInfo?tj(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!n?.length,o=new tz;o.updateFromIdToken(r);let a=new tW({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s});return Object.assign(a,{uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:n,metadata:new tV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!n?.length}),a}}let tG=new Map;function tK(e){var t,r;t="Expected a class definition",e instanceof Function||tu(t);let i=tG.get(e);return i?(r="Instance stored in cache mismatched with class",i instanceof e||tu(r)):(i=new e,tG.set(e,i)),i}class tJ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function tX(e,t,r){return`firebase:${e}:${t}:${r}`}tJ.type="NONE";class tQ{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:n}=this.auth;this.fullUserKey=tX(this.userKey,i.apiKey,n),this.fullPersistenceKey=tX("persistence",i.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let t=await tN(this.auth,{idToken:e}).catch(()=>void 0);return t?tW._fromGetAccountInfoResponse(this.auth,t,e):null}return tW._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new tQ(tK(tJ),e,r);let i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),n=i[0]||tK(tJ),s=tX(r,e.config.apiKey,e.name),o=null;for(let r of t)try{let t=await r._get(s);if(t){let i;if("string"==typeof t){let r=await tN(e,{idToken:t}).catch(()=>void 0);if(!r)break;i=await tW._fromGetAccountInfoResponse(e,r,t)}else i=tW._fromJSON(e,t);r!==n&&(o=i),n=r;break}}catch{}let a=i.filter(e=>e._shouldAllowMigration);return n._shouldAllowMigration&&a.length&&(n=a[0],o&&await n._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==n)try{await e._remove(s)}catch{}}))),new tQ(n,e,r)}}function tY(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(t2(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tZ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(t3(t))return"Blackberry";if(t5(t))return"Webos";if(t0(t))return"Safari";if((t.includes("chrome/")||t1(t))&&!t.includes("edge/"))return"Chrome";if(t6(t))return"Android";let r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(r?.length===2)return r[1]}return"Other"}function tZ(e=H()){return/firefox\//i.test(e)}function t0(e=H()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function t1(e=H()){return/crios\//i.test(e)}function t2(e=H()){return/iemobile/i.test(e)}function t6(e=H()){return/android/i.test(e)}function t3(e=H()){return/blackberry/i.test(e)}function t5(e=H()){return/webos/i.test(e)}function t4(e=H()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function t8(e=H()){return t4(e)||t6(e)||t5(e)||t3(e)||/windows phone/i.test(e)||t2(e)}function t7(e,t=[]){let r;switch(e){case"Browser":r=tY(H());break;case"Worker":r=`${tY(H())}-${e}`;break;default:r=e}let i=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${eq}/${i}`}class t9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,i)=>{try{let i=e(t);r(i)}catch(e){i(e)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}async function re(e,t={}){return t_(e,"GET","/v2/passwordPolicy",tw(e,t))}class rt{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}class rr{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ri(this),this.idTokenSubscription=new ri(this),this.beforeStateQueue=new t9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tK(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted){if(this.persistenceManager=await tQ.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await tN(this,{idToken:e}),r=await tW._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(eF(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,n=r?._redirectEventId,s=await this.tryRedirectSignIn(e);(!t||t===n)&&s?.user&&(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return(th(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId)?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tF(e)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(eF(this.app))return Promise.reject(ta(this));let t=e?ee(e):null;return t&&th(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&th(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return eF(this.app)?Promise.reject(ta(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return eF(this.app)?Promise.reject(ta(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tK(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new rt(await re(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new q("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await t$(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&tK(e)||this._popupRedirectResolver;th(t,this,"argument-error"),this.redirectPersistenceManager=await tQ.create(this,[tK(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return(this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e)?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let n="function"==typeof t?t:t.next.bind(t),s=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(th(o,this,"internal-error"),o.then(()=>{s||n(this.currentUser)}),"function"==typeof t){let n=e.addObserver(t,r,i);return()=>{s=!0,n()}}{let r=e.addObserver(t);return()=>{s=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return th(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=t7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(eF(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&function(e,...t){tr.logLevel<=l.WARN&&tr.warn(`Auth (${eq}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}class ri{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){let r=new Y(e,void 0);return r.subscribe.bind(r)}(e=>this.observer=e)}get next(){return th(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rn={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rs(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ro{constructor(){this.enterprise=new ra}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ra{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}let rl="NO_RECAPTCHA";class rh{constructor(e){this.type="recaptcha-enterprise",this.auth=ee(e)}async verify(e="verify",t=!1){async function r(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{tk(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0===i.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{let r=new tC(i);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}}).catch(e=>{r(e)})})}function i(t,r,i){let n=window.grecaptcha;tA(n)?n.enterprise.ready(()=>{n.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r(rl)})}):i(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ro().execute("siteKey",{action:"verify"}):new Promise((e,n)=>{r(this.auth).then(r=>{if(!t&&tA(window.grecaptcha))i(r,e,n);else{var s;if("undefined"==typeof window)return void n(Error("RecaptchaVerifier is only supported in browser"));let t=rn.recaptchaEnterpriseScript;0!==t.length&&(t+=r),(s=t,rn.loadJS(s)).then(()=>{i(r,e,n)}).catch(e=>{n(e)})}}).catch(e=>{n(e)})})}}async function ru(e,t,r,i=!1,n=!1){let s,o=new rh(e);if(n)s=rl;else try{s=await o.verify(r)}catch(e){s=await o.verify(r,!0)}let a={...t};if("mfaSmsEnrollment"===r||"mfaSmsSignIn"===r){if("phoneEnrollmentInfo"in a){let e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function rc(e,t,r,i,n){if("EMAIL_PASSWORD_PROVIDER"===n)if(!e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return i(e,t).catch(async n=>{if("auth/missing-recaptcha-token"!==n.code)return Promise.reject(n);{console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let n=await ru(e,t,r,"getOobCode"===r);return i(e,n)}});else{let n=await ru(e,t,r,"getOobCode"===r);return i(e,n)}if("PHONE_PROVIDER"!==n)return Promise.reject(n+" provider is not supported.");if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let n=await ru(e,t,r);return i(e,n).catch(async n=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&("auth/missing-recaptcha-token"===n.code||"auth/invalid-app-credential"===n.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);let n=await ru(e,t,r,!1,!0);return i(e,n)}return Promise.reject(n)})}{let n=await ru(e,t,r,!1,!0);return i(e,n)}}async function rd(e){let t=ee(e),r=new tC(await tk(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new rh(t).verify()}function rf(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rp(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class rg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tu("not implemented")}_getIdTokenResponse(e){return tu("not implemented")}_linkToIdToken(e,t){return tu("not implemented")}_getReauthenticationResolver(e){return tu("not implemented")}}async function rm(e,t){return t_(e,"POST","/v1/accounts:signUp",t)}async function ry(e,t){return tI(e,"POST","/v1/accounts:signInWithPassword",tw(e,t))}async function rv(e,t){return tI(e,"POST","/v1/accounts:signInWithEmailLink",tw(e,t))}async function rw(e,t){return tI(e,"POST","/v1/accounts:signInWithEmailLink",tw(e,t))}class r_ extends rg{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new r_(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new r_(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return rc(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ry,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rv(e,{email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return rc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rm,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rw(e,{idToken:t,email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function rE(e,t){return tI(e,"POST","/v1/accounts:signInWithIdp",tw(e,t))}class rI extends rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new rI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let{providerId:t,signInMethod:r,...i}="string"==typeof e?JSON.parse(e):e;if(!t||!r)return null;let n=new rI(t,r);return n.idToken=i.idToken||void 0,n.accessToken=i.accessToken||void 0,n.secret=i.secret,n.nonce=i.nonce,n.pendingToken=i.pendingToken||null,n}_getIdTokenResponse(e){return rE(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,rE(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,rE(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J(t)}return e}}async function rb(e,t){return t_(e,"POST","/v1/accounts:sendVerificationCode",tw(e,t))}async function rT(e,t){return tI(e,"POST","/v1/accounts:signInWithPhoneNumber",tw(e,t))}async function rS(e,t){let r=await tI(e,"POST","/v1/accounts:signInWithPhoneNumber",tw(e,t));if(r.temporaryProof)throw tS(e,"account-exists-with-different-credential",r);return r}let rA={USER_NOT_FOUND:"user-not-found"};async function rC(e,t){return tI(e,"POST","/v1/accounts:signInWithPhoneNumber",tw(e,{...t,operation:"REAUTH"}),rA)}class rk extends rg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new rk({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new rk({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return rT(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return rS(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return rC(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:n}=e;return r||t||i||n?new rk({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:n}):null}}class rR{constructor(e){const t=X(Q(e)),r=t.apiKey??null,i=t.oobCode??null,n=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);th(r&&i&&n,"argument-error"),this.apiKey=r,this.operation=n,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t,r,i,n=(r=(t=X(Q(e)).link)?X(Q(t)).deep_link_id:null,((i=X(Q(e)).deep_link_id)?X(Q(i)).link:null)||i||r||t||e);try{return new rR(n)}catch{return null}}}class rN{constructor(){this.providerId=rN.PROVIDER_ID}static credential(e,t){return r_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=rR.parseLink(t);return th(r,"argument-error"),r_._fromEmailAndCode(e,r.code,r.tenantId)}}rN.PROVIDER_ID="password",rN.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rN.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rP extends rO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rD extends rP{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return th("providerId"in t&&"signInMethod"in t,"argument-error"),rI._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return th(e.idToken||e.accessToken,"argument-error"),rI._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return rD.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return rD.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:n,nonce:s,providerId:o}=e;if(!r&&!i&&!t&&!n||!o)return null;try{return new rD(o)._credential({idToken:t,accessToken:r,nonce:s,pendingToken:n})}catch(e){return null}}}class rx extends rP{constructor(){super("facebook.com")}static credential(e){return rI._fromParams({providerId:rx.PROVIDER_ID,signInMethod:rx.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rx.credentialFromTaggedObject(e)}static credentialFromError(e){return rx.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rx.credential(e.oauthAccessToken)}catch{return null}}}rx.FACEBOOK_SIGN_IN_METHOD="facebook.com",rx.PROVIDER_ID="facebook.com";class rL extends rP{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rI._fromParams({providerId:rL.PROVIDER_ID,signInMethod:rL.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rL.credentialFromTaggedObject(e)}static credentialFromError(e){return rL.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return rL.credential(t,r)}catch{return null}}}rL.GOOGLE_SIGN_IN_METHOD="google.com",rL.PROVIDER_ID="google.com";class rM extends rP{constructor(){super("github.com")}static credential(e){return rI._fromParams({providerId:rM.PROVIDER_ID,signInMethod:rM.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rM.credentialFromTaggedObject(e)}static credentialFromError(e){return rM.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rM.credential(e.oauthAccessToken)}catch{return null}}}rM.GITHUB_SIGN_IN_METHOD="github.com",rM.PROVIDER_ID="github.com";class rU extends rP{constructor(){super("twitter.com")}static credential(e,t){return rI._fromParams({providerId:rU.PROVIDER_ID,signInMethod:rU.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rU.credentialFromTaggedObject(e)}static credentialFromError(e){return rU.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return rU.credential(t,r)}catch{return null}}}rU.TWITTER_SIGN_IN_METHOD="twitter.com",rU.PROVIDER_ID="twitter.com";class rV{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){return new rV({user:await tW._fromIdTokenResponse(e,r,i),providerId:rF(r),_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){return await e._updateTokensIfNecessary(r,!0),new rV({user:e,providerId:rF(r),_tokenResponse:r,operationType:t})}}function rF(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rB extends z{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rB.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new rB(e,t,r,i)}}function rj(e,t,r,i){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw rB._fromErrorAndOperation(e,r,t,i);throw r})}async function rH(e,t,r=!1){let i=await tM(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return rV._forOperation(e,"link",i)}async function r$(e,t,r=!1){let{auth:i}=e;if(eF(i.app))return Promise.reject(ta(i));let n="reauthenticate";try{let s=await tM(e,rj(i,n,t,e),r);th(s.idToken,i,"internal-error");let o=tx(s.idToken);th(o,i,"internal-error");let{sub:a}=o;return th(e.uid===a,i,"user-mismatch"),rV._forOperation(e,n,s)}catch(e){throw e?.code==="auth/user-not-found"&&tn(i,"user-mismatch"),e}}async function rz(e,t,r=!1){if(eF(e.app))return Promise.reject(ta(e));let i="signIn",n=await rj(e,i,t),s=await rV._fromIdTokenResponse(e,i,n);return r||await e._updateCurrentUser(s.user),s}class rq{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?rW._fromServerResponse(e,t):"totpInfo"in t?rG._fromServerResponse(e,t):tn(e,"internal-error")}}class rW extends rq{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new rW(t)}}class rG extends rq{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new rG(t)}}function rK(e,t){return t_(e,"POST","/v2/accounts/mfaEnrollment:start",tw(e,t))}new WeakMap;let rJ="__sak";class rX{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(rJ,"1"),this.storage.removeItem(rJ),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class rQ extends rX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){let r;if(!e.key)return void this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});let i=e.key;t?this.detachListener():this.stopPolling();let n=()=>{let e=this.storage.getItem(i);(t||this.localCache[i]!==e)&&this.notifyListeners(i,e)},s=this.storage.getItem(i);((r=H()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rQ.type="LOCAL";class rY extends rX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rY.type="SESSION";class rZ{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let r=new rZ(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:r,data:i}=e.data,n=this.handlersMap[r];if(!n?.size)return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:r});let s=Array.from(n).map(async t=>t(e.origin,i)),o=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function r0(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}rZ.receivers=[];class r1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i,n,s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((o,a)=>{let l=r0("",20);s.port1.start();let h=setTimeout(()=>{a(Error("unsupported_event"))},r);n={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(h),clearTimeout(i),a(Error("invalid_response"))}}},this.handlers.add(n),s.port1.addEventListener("message",n.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{n&&this.removeMessageHandler(n)})}}function r2(){return window}function r6(){return void 0!==r2().WorkerGlobalScope&&"function"==typeof r2().importScripts}async function r3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let r5="firebaseLocalStorageDb",r4="firebaseLocalStorage",r8="fbase_key";class r7{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function r9(e,t){return e.transaction([r4],t?"readwrite":"readonly").objectStore(r4)}function ie(){let e=indexedDB.open(r5,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(r4,{keyPath:r8})}catch(e){r(e)}}),e.addEventListener("success",async()=>{let r=e.result;r.objectStoreNames.contains(r4)?t(r):(r.close(),await new r7(indexedDB.deleteDatabase(r5)).toPromise(),t(await ie()))})})}async function it(e,t,r){return new r7(r9(e,!0).put({[r8]:t,value:r})).toPromise()}async function ir(e,t){let r=r9(e,!1).get(t),i=await new r7(r).toPromise();return void 0===i?null:i.value}function ii(e,t){return new r7(r9(e,!0).delete(t)).toPromise()}class is{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ie()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rZ._getInstance(r6()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await r3(),!this.activeServiceWorker)return;this.sender=new r1(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await ie();return await it(e,rJ,"1"),await ii(e,rJ),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>it(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>ir(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ii(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new r7(r9(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],r=new Set;if(0!==e.length)for(let{fbase_key:i,value:n}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(n)&&(this.notifyListeners(i,n),t.push(i));for(let e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function io(e,t){return t_(e,"POST","/v2/accounts/mfaSignIn:start",tw(e,t))}is.type="LOCAL",rs("rcb"),new tf(3e4,6e4);let ia="recaptcha";async function il(e,t,r){if(!e._getRecaptchaConfig())try{await rd(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"==typeof t?{phoneNumber:t}:t,"session"in i){let t=i.session;if("phoneNumber"in i){th("enroll"===t.type,e,"internal-error");let n={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===rl){th(r?.type===ia,e,"argument-error");let i=await ih(e,t,r);return rK(e,i)}return rK(e,t)},o=rc(e,n,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{th("signin"===t.type,e,"internal-error");let n=i.multiFactorHint?.uid||i.multiFactorUid;th(n,e,"missing-multi-factor-info");let s={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===rl){th(r?.type===ia,e,"argument-error");let i=await ih(e,t,r);return io(e,i)}return io(e,t)},a=rc(e,s,"mfaSmsSignIn",o,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},n=async(e,t)=>{if(t.captchaResponse===rl){th(r?.type===ia,e,"argument-error");let i=await ih(e,t,r);return rb(e,i)}return rb(e,t)},s=rc(e,t,"sendVerificationCode",n,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{r?._reset()}}async function ih(e,t,r){th(r.type===ia,e,"argument-error");let i=await r.verify();th("string"==typeof i,e,"argument-error");let n={...t};if("phoneEnrollmentInfo"in n){let e=n.phoneEnrollmentInfo.phoneNumber,t=n.phoneEnrollmentInfo.captchaResponse,r=n.phoneEnrollmentInfo.clientType,s=n.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(n,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:i,captchaResponse:t,clientType:r,recaptchaVersion:s}}),n}if(!("phoneSignInInfo"in n))return Object.assign(n,{recaptchaToken:i}),n;{let e=n.phoneSignInInfo.captchaResponse,t=n.phoneSignInInfo.clientType,r=n.phoneSignInInfo.recaptchaVersion;return Object.assign(n,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:e,clientType:t,recaptchaVersion:r}}),n}}class iu{constructor(e){this.providerId=iu.PROVIDER_ID,this.auth=ee(e)}verifyPhoneNumber(e,t){return il(this.auth,e,ee(t))}static credential(e,t){return rk._fromVerification(e,t)}static credentialFromResult(e){return iu.credentialFromTaggedObject(e)}static credentialFromError(e){return iu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?rk._fromTokenResponse(t,r):null}}function ic(e,t){return t?tK(t):(th(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}iu.PROVIDER_ID="phone",iu.PHONE_SIGN_IN_METHOD="phone";class id extends rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ip(e){return rz(e.auth,new id(e),e.bypassAuthState)}function ig(e){let{auth:t,user:r}=e;return th(r,t,"internal-error"),r$(r,new id(e),e.bypassAuthState)}async function im(e){let{auth:t,user:r}=e;return th(r,t,"internal-error"),rH(r,new id(e),e.bypassAuthState)}class iy{constructor(e,t,r,i,n=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:n,error:s,type:o}=e;if(s)return void this.reject(s);let a={auth:this.auth,requestUri:t,sessionId:r,tenantId:n||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ip;case"linkViaPopup":case"linkViaRedirect":return im;case"reauthViaPopup":case"reauthViaRedirect":return ig;default:tn(this.auth,"internal-error")}}resolve(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||tu(r),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||tu(r),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let iv=new tf(2e3,1e4);async function iw(e,t,r){if(eF(e.app))return Promise.reject(ts(e,"operation-not-supported-in-this-environment"));let i=ee(e);if(!(t instanceof rO))throw rO.name!==t.constructor.name&&tn(e,"argument-error"),to(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`);let n=ic(i,r);return new i_(i,"signInViaPopup",t,n).executeNotNull()}class i_ extends iy{constructor(e,t,r,i,n){super(e,t,i,n),this.provider=r,this.authWindow=null,this.pollId=null,i_.currentPopupAction&&i_.currentPopupAction.cancel(),i_.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return th(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||tu(t);let r=r0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,i_.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iv.get())};e()}}i_.currentPopupAction=null;let iE=new Map;class iI extends iy{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=iE.get(this.auth._key());if(!e){try{let t=await ib(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}iE.set(this.auth._key(),e)}return this.bypassAuthState||iE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ib(e,t){var r;let i=tX("pendingRedirect",(r=t).config.apiKey,r.name),n=tK(e._redirectPersistence);if(!await n._isAvailable())return!1;let s=await n._get(i)==="true";return await n._remove(i),s}function iT(e,t){iE.set(e._key(),t)}async function iS(e,t,r=!1){if(eF(e.app))return Promise.reject(ta(e));let i=ee(e),n=ic(i,t),s=new iI(i,n,r),o=await s.execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class iA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ik(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ik(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ts(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(iC(e))}saveEventToCache(e){this.cachedEventUids.add(iC(e)),this.lastProcessedEventTime=Date.now()}}function iC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ik({type:e,error:t}){return"unknown"===e&&t?.code==="auth/no-auth-event"}async function iR(e,t={}){return t_(e,"GET","/v1/projects",t)}let iN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iO=/^https?/;async function iP(e){if(e.config.emulator)return;let{authorizedDomains:t}=await iR(e);for(let e of t)try{if(function(e){let t=tc(),{protocol:r,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){let n=new URL(e);return""===n.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&n.hostname===i}if(!iO.test(r))return!1;if(iN.test(e))return i===e;let n=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+n+"|"+n+")$","i").test(i)}(e))return}catch{}tn(e,"unauthorized-domain")}let iD=new tf(3e4,6e4);function ix(){let e=r2().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let iL=null,iM=new tf(5e3,15e3),iU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function iF(e){let t,r,i,n,s,o=await (iL=iL||new Promise((t,r)=>{function i(){ix(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ix(),r(ts(e,"network-request-failed"))},timeout:iD.get()})}if(r2().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(r2().gapi?.load)i();else{var n;let t=rs("iframefcb");return r2()[t]=()=>{gapi.load?i():r(ts(e,"network-request-failed"))},(n=`${rn.gapiScript}?onload=${t}`,rn.loadJS(n)).catch(e=>r(e))}}).catch(e=>{throw iL=null,e})),a=r2().gapi;return th(a,e,"internal-error"),o.open({where:document.body,url:(th((t=e.config).authDomain,e,"auth-domain-config-required"),r=t.emulator?tp(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:eq},(n=iV.get(e.config.apiHost))&&(i.eid=n),(s=e._getFrameworks()).length&&(i.fw=s.join(",")),`${r}?${J(i).slice(1)}`),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iU,dontclear:!0},t=>new Promise(async(r,i)=>{await t.restyle({setHideOnLeave:!1});let n=ts(e,"network-request-failed"),s=r2().setTimeout(()=>{i(n)},iM.get());function o(){r2().clearTimeout(s),r(t)}t.ping(o).then(o,()=>{i(n)})}))}let iB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ij{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let iH=encodeURIComponent("fac");async function i$(e,t,r,i,n,s){th(e.config.authDomain,e,"auth-domain-config-required"),th(e.config.apiKey,e,"invalid-api-key");let o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:i,v:eq,eventId:n};if(t instanceof rO)for(let[r,i]of(t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",!function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())&&(o.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))o[r]=i;if(t instanceof rP){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}for(let t of(e.tenantId&&(o.tid=e.tenantId),Object.keys(o)))void 0===o[t]&&delete o[t];let a=await e._getAppCheckToken(),l=a?`#${iH}=${encodeURIComponent(a)}`:"";return`${function({config:e}){return e.emulator?tp(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${J(o).slice(1)}${l}`}let iz="webStorageSupport",iq=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rY,this._completeRedirectFn=iS,this._overrideRedirectResult=iT}async _openPopup(e,t,r,i){var n,s;n=this.eventManagers[e._key()]?.manager,s="_initialize() not called before _openPopup()",n||tu(s);let o=await i$(e,t,r,tc(),i);return function(e,t,r,i=500,n=600){let s=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",l={...iB,width:i.toString(),height:n.toString(),top:s,left:o},h=H().toLowerCase();r&&(a=t1(h)?"_blank":r),tZ(h)&&(t=t||"http://localhost",l.scrollbars="yes");let u=Object.entries(l).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=H()){return t4(e)&&!!window.navigator?.standalone}(h)&&"_self"!==a){var c,d;let e,r;return c=t||"",d=a,(e=document.createElement("a")).href=c,e.target=d,(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r),new ij(null)}let f=window.open(t||"",a,u);th(f,e,"popup-blocked");try{f.focus()}catch(e){}return new ij(f)}(e,o,r0())}async _openRedirect(e,t,r,i){var n;return await this._originValidation(e),n=await i$(e,t,r,tc(),i),r2().location.href=n,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var r;let{manager:e,promise:i}=this.eventManagers[t];return e?Promise.resolve(e):(r="If manager is not set, promise should be",i||tu(r),i)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await iF(e),r=new iA(e);return t.register("authEvent",t=>(th(t?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(iz,{type:iz},r=>{let i=r?.[0]?.[iz];void 0!==i&&t(!!i),tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return t8()||t0()||t4()}};var iW="@firebase/auth",iG="1.11.1";class iK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){th(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let iJ=L("authIdTokenMaxAge")||300,iX=null;rn={loadJS:e=>new Promise((t,r)=>{let i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{let t=ts("internal-error");t.customData=e,r(t)},i.type="text/javascript",i.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},a="Browser",ex(new et("auth",(e,{options:t})=>{let r,i,n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=n.options;th(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});let u=new rr(n,s,o,{apiKey:l,authDomain:h,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:t7(a)});return i=(Array.isArray(r=t?.persistence||[])?r:[r]).map(tK),t?.errorMap&&u._updateErrorMap(t.errorMap),u._initializeWithPersistence(i,t?.popupRedirectResolver),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ex(new et("auth-internal",e=>new iK(ee(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),eQ(iW,iG,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(a)),eQ(iW,iG,"esm2020"),e.s([],58556),e.i(58556),eQ("firebase","12.6.0","app"),e.i(92953),e.i(67034);var iQ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,iY={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}var t=function(){this.blockSize=-1};function r(){}function i(e,t,r){r||(r=0);let i=Array(16);if("string"==typeof t)for(var n=0;n<16;++n)i[n]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(n=0;n<16;++n)i[n]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],n=e.g[2];let s=e.g[3],o;o=t+(s^r&(n^s))+i[0]+0xd76aa478|0,o=s+(n^(t=r+(o<<7|o>>>25))&(r^n))+i[1]+0xe8c7b756|0,o=n+(r^(s=t+(o<<12|o>>>20))&(t^r))+i[2]+0x242070db|0,o=r+(t^(n=s+(o<<17|o>>>15))&(s^t))+i[3]+0xc1bdceee|0,o=t+(s^(r=n+(o<<22|o>>>10))&(n^s))+i[4]+0xf57c0faf|0,o=s+(n^(t=r+(o<<7|o>>>25))&(r^n))+i[5]+0x4787c62a|0,o=n+(r^(s=t+(o<<12|o>>>20))&(t^r))+i[6]+0xa8304613|0,o=r+(t^(n=s+(o<<17|o>>>15))&(s^t))+i[7]+0xfd469501|0,o=t+(s^(r=n+(o<<22|o>>>10))&(n^s))+i[8]+0x698098d8|0,o=s+(n^(t=r+(o<<7|o>>>25))&(r^n))+i[9]+0x8b44f7af|0,o=n+(r^(s=t+(o<<12|o>>>20))&(t^r))+i[10]+0xffff5bb1|0,o=r+(t^(n=s+(o<<17|o>>>15))&(s^t))+i[11]+0x895cd7be|0,o=t+(s^(r=n+(o<<22|o>>>10))&(n^s))+i[12]+0x6b901122|0,o=s+(n^(t=r+(o<<7|o>>>25))&(r^n))+i[13]+0xfd987193|0,o=n+(r^(s=t+(o<<12|o>>>20))&(t^r))+i[14]+0xa679438e|0,o=r+(t^(n=s+(o<<17|o>>>15))&(s^t))+i[15]+0x49b40821|0,r=n+(o<<22|o>>>10),o=t+(n^s&(r^n))+i[1]+0xf61e2562|0,t=r+(o<<5|o>>>27),o=s+(r^n&(t^r))+i[6]+0xc040b340|0,s=t+(o<<9|o>>>23),o=n+(t^r&(s^t))+i[11]+0x265e5a51|0,n=s+(o<<14|o>>>18),o=r+(s^t&(n^s))+i[0]+0xe9b6c7aa|0,r=n+(o<<20|o>>>12),o=t+(n^s&(r^n))+i[5]+0xd62f105d|0,t=r+(o<<5|o>>>27),o=s+(r^n&(t^r))+i[10]+0x2441453|0,s=t+(o<<9|o>>>23),o=n+(t^r&(s^t))+i[15]+0xd8a1e681|0,n=s+(o<<14|o>>>18),o=r+(s^t&(n^s))+i[4]+0xe7d3fbc8|0,r=n+(o<<20|o>>>12),o=t+(n^s&(r^n))+i[9]+0x21e1cde6|0,t=r+(o<<5|o>>>27),o=s+(r^n&(t^r))+i[14]+0xc33707d6|0,s=t+(o<<9|o>>>23),o=n+(t^r&(s^t))+i[3]+0xf4d50d87|0,n=s+(o<<14|o>>>18),o=r+(s^t&(n^s))+i[8]+0x455a14ed|0,r=n+(o<<20|o>>>12),o=t+(n^s&(r^n))+i[13]+0xa9e3e905|0,t=r+(o<<5|o>>>27),o=s+(r^n&(t^r))+i[2]+0xfcefa3f8|0,s=t+(o<<9|o>>>23),o=n+(t^r&(s^t))+i[7]+0x676f02d9|0,n=s+(o<<14|o>>>18),o=r+(s^t&(n^s))+i[12]+0x8d2a4c8a|0,o=t+((r=n+(o<<20|o>>>12))^n^s)+i[5]+0xfffa3942|0,o=s+((t=r+(o<<4|o>>>28))^r^n)+i[8]+0x8771f681|0,o=n+((s=t+(o<<11|o>>>21))^t^r)+i[11]+0x6d9d6122|0,o=r+((n=s+(o<<16|o>>>16))^s^t)+i[14]+0xfde5380c|0,o=t+((r=n+(o<<23|o>>>9))^n^s)+i[1]+0xa4beea44|0,o=s+((t=r+(o<<4|o>>>28))^r^n)+i[4]+0x4bdecfa9|0,o=n+((s=t+(o<<11|o>>>21))^t^r)+i[7]+0xf6bb4b60|0,o=r+((n=s+(o<<16|o>>>16))^s^t)+i[10]+0xbebfbc70|0,o=t+((r=n+(o<<23|o>>>9))^n^s)+i[13]+0x289b7ec6|0,o=s+((t=r+(o<<4|o>>>28))^r^n)+i[0]+0xeaa127fa|0,o=n+((s=t+(o<<11|o>>>21))^t^r)+i[3]+0xd4ef3085|0,o=r+((n=s+(o<<16|o>>>16))^s^t)+i[6]+0x4881d05|0,o=t+((r=n+(o<<23|o>>>9))^n^s)+i[9]+0xd9d4d039|0,o=s+((t=r+(o<<4|o>>>28))^r^n)+i[12]+0xe6db99e5|0,o=n+((s=t+(o<<11|o>>>21))^t^r)+i[15]+0x1fa27cf8|0,o=r+((n=s+(o<<16|o>>>16))^s^t)+i[2]+0xc4ac5665|0,r=n+(o<<23|o>>>9),o=t+(n^(r|~s))+i[0]+0xf4292244|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~n))+i[7]+0x432aff97|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~r))+i[14]+0xab9423a7|0,n=s+(o<<15|o>>>17),o=r+(s^(n|~t))+i[5]+0xfc93a039|0,r=n+(o<<21|o>>>11),o=t+(n^(r|~s))+i[12]+0x655b59c3|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~n))+i[3]+0x8f0ccc92|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~r))+i[10]+0xffeff47d|0,n=s+(o<<15|o>>>17),o=r+(s^(n|~t))+i[1]+0x85845dd1|0,r=n+(o<<21|o>>>11),o=t+(n^(r|~s))+i[8]+0x6fa87e4f|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~n))+i[15]+0xfe2ce6e0|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~r))+i[6]+0xa3014314|0,n=s+(o<<15|o>>>17),o=r+(s^(n|~t))+i[13]+0x4e0811a1|0,r=n+(o<<21|o>>>11),o=t+(n^(r|~s))+i[4]+0xf7537e82|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~n))+i[11]+0xbd3af235|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~r))+i[2]+0x2ad7d2bb|0,n=s+(o<<15|o>>>17),o=r+(s^(n|~t))+i[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(n+(o<<21|o>>>11))|0,e.g[2]=e.g[2]+n|0,e.g[3]=e.g[3]+s|0}function n(e,t){this.h=t;let r=[],i=!0;for(let n=e.length-1;n>=0;n--){let s=0|e[n];i&&s==t||(r[n]=s,i=!1)}this.g=r}r.prototype=t.prototype,e.F=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.D=function(e,r,i){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[r].apply(e,n)},e.prototype.u=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.v=function(e,t){void 0===t&&(t=e.length);let r=t-this.blockSize,n=this.C,s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)i(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(n[s++]=e.charCodeAt(o++),s==this.blockSize){i(this,n),s=0;break}}else for(;o<t;)if(n[s++]=e[o++],s==this.blockSize){i(this,n),s=0;break}}this.h=s,this.o+=t},e.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var r=e.length-8;r<e.length;++r)e[r]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,r=0;r<4;++r)for(let i=0;i<32;i+=8)e[t++]=this.g[r]>>>i&255;return e};var s,o={};function a(e){var t;return -128<=e&&e<128?(t=function(e){return new n([0|e],e<0?-1:0)},Object.prototype.hasOwnProperty.call(o,e)?o[e]:o[e]=t(e)):new n([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return u;if(e<0)return g(l(-e));let t=[],r=1;for(let i=0;e>=r;i++)t[i]=e/r|0,r*=0x100000000;return new n(t,0)}var u=a(0),c=a(1),d=a(0x1000000);function f(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return -1==e.h}function g(e){let t=e.g.length,r=[];for(let i=0;i<t;i++)r[i]=~e.g[i];return new n(r,~e.h).add(c)}function m(e,t){return e.add(g(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function w(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(u,u);if(p(e))return t=w(g(e),t),new v(g(t.g),g(t.h));if(p(t))return t=w(e,g(t)),new v(g(t.g),t.h);if(e.g.length>30){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var r=c,i=t;0>=i.l(e);)r=_(r),i=_(i);var n=E(r,1),s=E(i,1);for(i=E(i,2),r=E(r,2);!f(i);){var o=s.add(i);0>=o.l(e)&&(n=n.add(r),s=o),i=E(i,1),r=E(r,1)}return t=m(e,n.j(t)),new v(n,t)}for(n=u;e.l(t)>=0;){for(i=(i=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))<=48?1:Math.pow(2,i-48),o=(s=l(r)).j(t);p(o)||o.l(e)>0;)r-=i,o=(s=l(r)).j(t);f(s)&&(s=c),n=n.add(s),e=m(e,o)}return new v(n,e)}function _(e){let t=e.g.length+1,r=[];for(let i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new n(r,e.h)}function E(e,t){let r=t>>5;t%=32;let i=e.g.length-r,s=[];for(let n=0;n<i;n++)s[n]=t>0?e.i(n+r)>>>t|e.i(n+r+1)<<32-t:e.i(n+r);return new n(s,e.h)}(s=n.prototype).m=function(){if(p(this))return-g(this).m();let e=0,t=1;for(let r=0;r<this.g.length;r++){let i=this.i(r);e+=(i>=0?i:0x100000000+i)*t,t*=0x100000000}return e},s.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+g(this).toString(e);let t=l(Math.pow(e,6));var r=this;let i="";for(;;){let n=w(r,t).g,s=(((r=m(r,n.j(t))).g.length>0?r.g[0]:r.h)>>>0).toString(e);if(f(r=n))return s+i;for(;s.length<6;)s="0"+s;i=s+i}},s.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},s.l=function(e){return p(e=m(this,e))?-1:+!f(e)},s.abs=function(){return p(this)?g(this):this},s.add=function(e){let t=Math.max(this.g.length,e.g.length),r=[],i=0;for(let n=0;n<=t;n++){let t=i+(65535&this.i(n))+(65535&e.i(n)),s=(t>>>16)+(this.i(n)>>>16)+(e.i(n)>>>16);i=s>>>16,t&=65535,s&=65535,r[n]=s<<16|t}return new n(r,-0x80000000&r[r.length-1]?-1:0)},s.j=function(e){if(f(this)||f(e))return u;if(p(this))return p(e)?g(this).j(g(e)):g(g(this).j(e));if(p(e))return g(this.j(g(e)));if(0>this.l(d)&&0>e.l(d))return l(this.m()*e.m());let t=this.g.length+e.g.length,r=[];for(var i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){let n=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);r[2*i+2*t]+=s*a,y(r,2*i+2*t),r[2*i+2*t+1]+=n*a,y(r,2*i+2*t+1),r[2*i+2*t+1]+=s*o,y(r,2*i+2*t+1),r[2*i+2*t+2]+=n*o,y(r,2*i+2*t+2)}for(e=0;e<t;e++)r[e]=r[2*e+1]<<16|r[2*e];for(e=t;e<2*t;e++)r[e]=0;return new n(r,0)},s.B=function(e){return w(this,e).h},s.and=function(e){let t=Math.max(this.g.length,e.g.length),r=[];for(let i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new n(r,this.h&e.h)},s.or=function(e){let t=Math.max(this.g.length,e.g.length),r=[];for(let i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new n(r,this.h|e.h)},s.xor=function(e){let t=Math.max(this.g.length,e.g.length),r=[];for(let i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new n(r,this.h^e.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,iY.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.B,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=l,n.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if((r=r||10)<2||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return g(e(t.substring(1),r));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');let i=l(Math.pow(r,8)),n=u;for(let e=0;e<t.length;e+=8){var s=Math.min(8,t.length-e);let o=parseInt(t.substring(e,e+s),r);s<8?(s=l(Math.pow(r,s)),n=n.j(s).add(l(o))):n=(n=n.j(i)).add(l(o))}return n},h=iY.Integer=n}).apply(void 0!==iQ?iQ:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var iZ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,i0={};(function(){var e,t,r=Object.defineProperty,i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof iZ&&iZ];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function n(e,t){if(t)e:{var n=i;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in n))break e;n=n[o]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}n("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),n("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),n("Object.entries",function(e){return e||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push([t,e[t]]);return r}});var s=s||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e,t,r){return e.call.apply(e.bind,arguments)}function h(e,t,r){return(h=l).apply(null,arguments)}function v(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function r(){}r.prototype=t.prototype,e.Z=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Ob=function(e,r,i){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[r].apply(e,n)}}var _="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function E(e){let t=e.length;if(t>0){let r=Array(t);for(let i=0;i<t;i++)r[i]=e[i];return r}return[]}function I(e,t){for(let t=1;t<arguments.length;t++){let i=arguments[t];var r=typeof i;if("array"==(r="object"!=r?r:i?Array.isArray(i)?"array":r:"null")||"object"==r&&"number"==typeof i.length){r=e.length||0;let t=i.length||0;e.length=r+t;for(let n=0;n<t;n++)e[r+n]=i[n]}else e.push(i)}}var b=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let S,A=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){let r=b.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},k=()=>{let e=Promise.resolve(void 0);S=()=>{e.then(R)}};function R(){let e;for(var t;e=null,C.g&&(e=C.g,C.g=C.g.next,C.g||(C.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){o.setTimeout(()=>{throw e},0)}(e)}b.j(t),b.h<100&&(b.h++,t.next=b.g,b.g=t)}A=!1}function N(){this.u=this.u,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(e){}return e}();function D(e){return/^[\s\xa0]*$/.test(e)}function x(e,t){O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}w(x,O),x.prototype.init=function(e,t){let r=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement)),this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&x.Z.h.call(this)},x.prototype.h=function(){x.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),M=0;function U(e,t,r,i,n){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!i,this.ha=n,this.key=++M,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function F(e,t,r){for(let i in e)t.call(r,e[i],i,e)}function B(e){let t={};for(let r in e)t[r]=e[r];return t}let j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(e,t){let r,i;for(let t=1;t<arguments.length;t++){for(r in i=arguments[t])e[r]=i[r];for(let t=0;t<j.length;t++)r=j[t],Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}}function $(e){this.src=e,this.g={},this.h=0}function z(e,t){let r=t.type;if(r in e.g){var i,n=e.g[r],s=Array.prototype.indexOf.call(n,t,void 0);(i=s>=0)&&Array.prototype.splice.call(n,s,1),i&&(V(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function q(e,t,r,i){for(let n=0;n<e.length;++n){let s=e[n];if(!s.da&&s.listener==t&&!!r==s.capture&&s.ha==i)return n}return -1}$.prototype.add=function(e,t,r,i,n){let s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);let o=q(e,t,i,n);return o>-1?(t=e[o],r||(t.fa=!1)):((t=new U(t,this.src,s,!!i,n)).fa=r,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),G={};function K(e,t,r,i,n,s){if(!t)throw Error("Invalid event type");let o=a(n)?!!n.capture:!!n,l=Y(e);if(l||(e[W]=l=new $(e)),(r=l.add(t,r,i,o,s)).proxy)return r;if(i=function e(t){return Q.call(e.src,e.listener,t)},r.proxy=i,i.src=e,i.listener=r,e.addEventListener)P||(n=o),void 0===n&&(n=!1),e.addEventListener(t.toString(),i,n);else if(e.attachEvent)e.attachEvent(X(t.toString()),i);else if(e.addListener&&e.removeListener)e.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return r}function J(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])z(t.i,e);else{var r=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(r,i,e.capture):t.detachEvent?t.detachEvent(X(r),i):t.addListener&&t.removeListener&&t.removeListener(i),(r=Y(t))?(z(r,e),0==r.h&&(r.src=null,t[W]=null)):V(e)}}}function X(e){return e in G?G[e]:G[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new x(t,this);let r=e.listener,i=e.ha||e.src;e.fa&&J(e),e=r.call(i,t)}return e}function Y(e){return(e=e[W])instanceof $?e:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(e){return"function"==typeof e?e:(e[Z]||(e[Z]=function(t){return e.handleEvent(t)}),e[Z])}function et(){N.call(this),this.i=new $(this),this.M=this,this.G=null}function er(e,t){let r,i;var n,s=e.G;if(s)for(n=[];s;s=s.G)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var o=t;H(t=new O(s,e),o)}if(o=!0,n)for(i=n.length-1;i>=0;i--)o=ei(r=t.g=n[i],s,!0,t)&&o;if(o=ei(r=t.g=e,s,!0,t)&&o,o=ei(r,s,!1,t)&&o,n)for(i=0;i<n.length;i++)o=ei(r=t.g=n[i],s,!1,t)&&o}function ei(e,t,r,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let n=!0;for(let s=0;s<t.length;++s){let o=t[s];if(o&&!o.da&&o.capture==r){let t=o.listener,r=o.ha||o.src;o.fa&&z(e.i,o),n=!1!==t.call(r,i)&&n}}return n&&!i.defaultPrevented}w(et,N),et.prototype[L]=!0,et.prototype.removeEventListener=function(e,t,r,i){!function e(t,r,i,n,s){if(Array.isArray(r))for(var o=0;o<r.length;o++)e(t,r[o],i,n,s);else(n=a(n)?!!n.capture:!!n,i=ee(i),t&&t[L])?(t=t.i,(o=String(r).toString())in t.g&&(i=q(r=t.g[o],i,n,s))>-1&&(V(r[i]),Array.prototype.splice.call(r,i,1),0==r.length&&(delete t.g[o],t.h--))):t&&(t=Y(t))&&(r=t.g[r.toString()],t=-1,r&&(t=q(r,i,n,s)),(i=t>-1?r[t]:null)&&J(i))}(this,e,t,r,i)},et.prototype.N=function(){if(et.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let r=e.g[t];for(let e=0;e<r.length;e++)V(r[e]);delete e.g[t],e.h--}}this.G=null},et.prototype.J=function(e,t,r,i){return this.i.add(String(e),t,!1,r,i)},et.prototype.K=function(e,t,r,i){return this.i.add(String(e),t,!0,r,i)};class en extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=function(e,t){if("function"!=typeof e)if(e&&"function"==typeof e.handleEvent)e=h(e.handleEvent,e);else throw Error("Invalid listener argument");return Number(t)>0x7fffffff?-1:o.setTimeout(e,t||0)}(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(e){N.call(this),this.h=e,this.g={}}w(es,N);var eo=[];function ea(e){F(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}es.prototype.N=function(){es.Z.N.call(this),ea(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var el=o.JSON.stringify,eh=o.JSON.parse,eu=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function ec(){}function ed(){}var ef={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ep(){O.call(this,"d")}function eg(){O.call(this,"c")}w(ep,O),w(eg,O);var em={},ey=null;function ev(){return ey=ey||new et}function ew(e){O.call(this,em.Ia,e)}function e_(e){let t=ev();er(t,new ew(t))}function eE(e,t){O.call(this,em.STAT_EVENT,e),this.stat=t}function eI(e){let t=ev();er(t,new eE(t,e))}function eb(e,t){O.call(this,em.Ja,e),this.size=t}function eT(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function eS(){this.g=!0}function eA(e,t,r,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{let s=JSON.parse(t);if(s){for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var r=s[e];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var n=i[0];if("noop"!=n&&"stop"!=n&&"close"!=n)for(let e=1;e<i.length;e++)i[e]=""}}}}return el(s)}catch(e){return t}}(e,r)+(i?" "+i:"")})}em.Ia="serverreachability",w(ew,O),em.STAT_EVENT="statevent",w(eE,O),em.Ja="timingevent",w(eb,O),eS.prototype.ua=function(){this.g=!1},eS.prototype.info=function(){};var eC={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ek={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function eR(){}function eN(e){return encodeURIComponent(String(e))}function eO(e,t,r,i){this.j=e,this.i=t,this.l=r,this.S=i||1,this.V=new es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new eP}function eP(){this.i=null,this.g="",this.h=!1}w(eR,ec),eR.prototype.g=function(){return new XMLHttpRequest},e=new eR;var eD={},ex={};function eL(e,t,r){e.M=1,e.A=e5(e0(t)),e.u=r,e.R=!0,eM(e,null)}function eM(e,t){e.F=Date.now(),eV(e),e.B=e0(e.A);var r,i,n,s,o,l,u=e.B,c=e.S;Array.isArray(c)||(c=[String(c)]),th(u.i,"t",c),e.C=0,u=e.j.L,e.h=new eP,e.g=tJ(e.j,u?t:null,!e.u),e.P>0&&(e.O=new en(h(e.Y,e,e.g),e.P)),t=e.V,u=e.g,c=e.ba;var d="readystatechange";Array.isArray(d)||(d&&(eo[0]=d.toString()),d=eo);for(let e=0;e<d.length;e++){let r=function e(t,r,i,n,s){if(n&&n.once)return function e(t,r,i,n,s){if(Array.isArray(r)){for(let o=0;o<r.length;o++)e(t,r[o],i,n,s);return null}return i=ee(i),t&&t[L]?t.K(r,i,a(n)?!!n.capture:!!n,s):K(t,r,i,!0,n,s)}(t,r,i,n,s);if(Array.isArray(r)){for(let o=0;o<r.length;o++)e(t,r[o],i,n,s);return null}return i=ee(i),t&&t[L]?t.J(r,i,a(n)?!!n.capture:!!n,s):K(t,r,i,!1,n,s)}(u,d[e],c||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}t=e.J?B(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),e_(),r=e.i,i=e.v,n=e.B,s=e.l,o=e.S,l=e.u,r.info(function(){if(r.g)if(l){var e="",t=l.split("&");for(let r=0;r<t.length;r++){var a=t[r].split("=");if(a.length>1){let t=a[0];a=a[1];let r=t.split("_");e=r.length>=2&&"type"==r[1]?e+(t+"=")+a+"&":e+(t+"=redacted&")}}}else e=null;else e=l;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+i+"\n"+n+"\n"+e})}function eU(e){return!!e.g&&"GET"==e.v&&2!=e.M&&e.j.Aa}function eV(e){e.T=Date.now()+e.H,eF(e,e.H)}function eF(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=eT(h(e.aa,e),t)}function eB(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function ej(e){0==e.j.I||e.K||tz(e.j,e)}function eH(e){eB(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ea(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function e$(e,t){try{var r=e.j;if(0!=r.I&&(r.g==e||eK(r.h,e))){if(!e.L&&eK(r.h,e)&&3==r.I){try{var i=r.Ba.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var n=i;if(0==n[0]){e:if(!r.v){if(r.g)if(r.g.F+3e3<e.F)t$(r),tD(r);else break e;tB(r),eI(18)}}else r.xa=n[1],0<r.xa-r.K&&n[2]<37500&&r.F&&0==r.A&&!r.C&&(r.C=eT(h(r.Va,r),6e3));1>=eG(r.h)&&r.ta&&(r.ta=void 0)}else tW(r,11)}else if((e.L||r.g==e)&&t$(r),!D(t))for(n=r.Ba.g.parse(t),t=0;t<n.length;t++){let a=n[t],l=a[0];if(!(l<=r.K))if(r.K=l,a=a[1],2==r.I)if("c"==a[0]){r.M=a[1],r.ba=a[2];let t=a[3];null!=t&&(r.ka=t,r.j.info("VER="+r.ka));let n=a[4];null!=n&&(r.za=n,r.j.info("SVER="+r.za));let l=a[5];null!=l&&"number"==typeof l&&l>0&&(r.O=i=1.5*l,r.j.info("backChannelRequestTimeoutMs_="+i)),i=r;let h=e.g;if(h){let e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(eJ(s,s.h),s.h=null))}if(i.G){let e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.wa=e,e3(i.J,i.G,e))}}if(r.I=3,r.l&&r.l.ra(),r.aa&&(r.T=Date.now()-e.F,r.j.info("Handshake RTT: "+r.T+"ms")),(i=r).na=tK(i,i.L?i.ba:null,i.W),e.L){eX(i.h,e);var o=i.O;o&&(e.H=o),e.D&&(eB(e),eV(e)),i.g=e}else tF(i);r.i.length>0&&tL(r)}else"stop"!=a[0]&&"close"!=a[0]||tW(r,7);else 3==r.I&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?tW(r,7):tP(r):"noop"!=a[0]&&r.l&&r.l.qa(a),r.A=0)}}e_(4)}catch(e){}}eO.prototype.ba=function(e){e=e.target;let t=this.O;t&&3==tk(e)?t.j():this.Y(e)},eO.prototype.Y=function(e){try{if(e==this.g)e:{let f=tk(this.g),p=this.g.ya(),g=this.g.ca();if(!(f<3)&&(3!=f||this.g&&(this.h.h||this.g.la()||tR(this.g)))){this.K||4!=f||7==p||(8==p||g<=0?e_(3):e_(2)),eB(this);var t=this.g.ca();this.X=t;var r=function(e){if(!eU(e))return e.g.la();let t=tR(e.g);if(""===t)return"";let r="",i=t.length,n=4==tk(e.g);if(!e.h.i){if("undefined"==typeof TextDecoder)return eH(e),ej(e),"";e.h.i=new o.TextDecoder}for(let s=0;s<i;s++)e.h.h=!0,r+=e.h.i.decode(t[s],{stream:!(n&&s==i-1)});return t.length=0,e.h.g+=r,e.C=0,e.h.g}(this);if(this.o=200==t,i=this.i,n=this.v,s=this.B,a=this.l,l=this.S,i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+l+"]: "+n+"\n"+s+"\n"+f+" "+t}),this.o){if(this.U&&!this.L){t:{if(this.g){var i,n,s,a,l,h,u=this.g;if((h=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(h)){var c=h;break t}}c=null}if(e=c)eA(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,e$(this,e);else{this.o=!1,this.m=3,eI(12),eH(this),ej(this);break e}}if(this.R){let t;for(e=!0;!this.K&&this.C<r.length;)if((t=function(e,t){var r=e.C,i=t.indexOf("\n",r);return -1==i?ex:isNaN(r=Number(t.substring(r,i)))?eD:(i+=1)+r>t.length?ex:(t=t.slice(i,i+r),e.C=i+r,t)}(this,r))==ex){4==f&&(this.m=4,eI(14),e=!1),eA(this.i,this.l,null,"[Incomplete Response]");break}else if(t==eD){this.m=4,eI(15),eA(this.i,this.l,r,"[Invalid Chunk]"),e=!1;break}else eA(this.i,this.l,t,null),e$(this,t);if(eU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=f||0!=r.length||this.h.h||(this.m=1,eI(16),e=!1),this.o=this.o&&e,e){if(r.length>0&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.aa&&!d.P&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),tj(d),d.P=!0,eI(11))}}else eA(this.i,this.l,r,"[Invalid Chunked Response]"),eH(this),ej(this)}else eA(this.i,this.l,r,null),e$(this,r);4==f&&eH(this),this.o&&!this.K&&(4==f?tz(this.j,this):(this.o=!1,eV(this)))}else(function(e){let t={};e=(e.g&&tk(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(D(e[i]))continue;var r=function(e){var t=1;e=e.split(":");let r=[];for(;t>0&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}(e[i]);let n=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();let s=t[n]||[];t[n]=s,s.push(r)}var i=function(e){return e.join(", ")};for(let e in t)i.call(void 0,t[e],e,t)})(this.g),400==t&&r.indexOf("Unknown SID")>0?(this.m=3,eI(12)):(this.m=0,eI(13)),eH(this),ej(this)}}}catch(e){}finally{}},eO.prototype.cancel=function(){this.K=!0,eH(this)},eO.prototype.aa=function(){var e,t;this.D=null;let r=Date.now();r-this.T>=0?(e=this.i,t=this.B,e.info(function(){return"TIMEOUT: "+t}),2!=this.M&&(e_(),eI(17)),eH(this),this.m=2,ej(this)):eF(this,this.T-r)};var ez=class{constructor(e,t){this.g=e,this.map=t}};function eq(e){this.l=e||10,e=o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eW(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eG(e){return e.h?1:e.g?e.g.size:0}function eK(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function eJ(e,t){e.g?e.g.add(t):e.h=t}function eX(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function eQ(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.G);return t}return E(e.i)}eq.prototype.cancel=function(){if(this.i=eQ(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var eY=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eZ(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof eZ?(this.l=e.l,e1(this,e.j),this.o=e.o,this.g=e.g,e2(this,e.u),this.h=e.h,e6(this,tu(e.i)),this.m=e.m):e&&(t=String(e).match(eY))?(this.l=!1,e1(this,t[1]||"",!0),this.o=e4(t[2]||""),this.g=e4(t[3]||"",!0),e2(this,t[4]),this.h=e4(t[5]||"",!0),e6(this,t[6]||"",!0),this.m=e4(t[7]||"")):(this.l=!1,this.i=new tn(null,this.l))}function e0(e){return new eZ(e)}function e1(e,t,r){e.j=r?e4(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function e2(e,t){if(t){if(isNaN(t=Number(t))||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function e6(e,t,r){var i,n;t instanceof tn?(e.i=t,i=e.i,(n=e.l)&&!i.j&&(ts(i),i.i=null,i.g.forEach(function(e,t){let r=t.toLowerCase();t!=r&&(to(this,t),th(this,r,e))},i)),i.j=n):(r||(t=e8(t,tr)),e.i=new tn(t,e.l))}function e3(e,t,r){e.i.set(t,r)}function e5(e){return e3(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function e4(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function e8(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,e7),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function e7(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}eZ.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(e8(t,e9,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(e8(t,e9,!0),"@"),e.push(eN(r).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.u)&&e.push(":",String(r))),(r=this.h)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(e8(r,"/"==r.charAt(0)?tt:te,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.m)&&e.push("#",e8(r,ti)),e.join("")},eZ.prototype.resolve=function(e){let t=e0(this),r=!!e.j;r?e1(t,e.j):r=!!e.o,r?t.o=e.o:r=!!e.g,r?t.g=e.g:r=null!=e.u;var i=e.h;if(r)e2(t,e.u);else if(r=!!e.h){if("/"!=i.charAt(0))if(this.g&&!this.h)i="/"+i;else{var n=t.h.lastIndexOf("/");-1!=n&&(i=t.h.slice(0,n+1)+i)}if(".."==(n=i)||"."==n)i="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){i=0==n.lastIndexOf("/",0),n=n.split("/");let e=[];for(let t=0;t<n.length;){let r=n[t++];"."==r?i&&t==n.length&&e.push(""):".."==r?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),i&&t==n.length&&e.push("")):(e.push(r),i=!0)}i=e.join("/")}else i=n}return r?t.h=i:r=""!==e.i.toString(),r?e6(t,tu(e.i)):r=!!e.m,r&&(t.m=e.m),t};var e9=/[#\/\?@]/g,te=/[#\?:]/g,tt=/[#\?]/g,tr=/[#\?@]/g,ti=/#/g;function tn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ts(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let r=0;r<e.length;r++){let i=e[r].indexOf("="),n,s=null;i>=0?(n=e[r].substring(0,i),s=e[r].substring(i+1)):n=e[r],t(n,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function to(e,t){ts(e),t=tc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ta(e,t){return ts(e),t=tc(e,t),e.g.has(t)}function tl(e,t){ts(e);let r=[];if("string"==typeof t)ta(e,t)&&(r=r.concat(e.g.get(tc(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)r=r.concat(e[t]);return r}function th(e,t,r){to(e,t),r.length>0&&(e.i=null,e.g.set(tc(e,t),E(r)),e.h+=r.length)}function tu(e){let t=new tn;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function tc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function td(e,t,r,i,n){try{n&&(n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null),i(r)}catch(e){}}function tf(){this.g=new eu}function tp(e){this.i=e.Sb||null,this.h=e.ab||!1}function tg(e,t){et.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function tm(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function ty(e){e.readyState=4,e.l=null,e.j=null,e.B=null,tv(e)}function tv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tw(e){let t="";return F(e,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}function t_(e,t,r){e:{for(i in r){var i=!1;break e}i=!0}i||(r=tw(r),"string"==typeof e?null!=r&&eN(r):e3(e,t,r))}function tE(e){et.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=tn.prototype).add=function(e,t){ts(this),this.i=null,e=tc(this,e);let r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},t.forEach=function(e,t){ts(this),this.g.forEach(function(r,i){r.forEach(function(r){e.call(t,r,i,this)},this)},this)},t.set=function(e,t){return ts(this),this.i=null,ta(this,e=tc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=tl(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(let i=0;i<t.length;i++){var r=t[i];let n=eN(r);r=tl(this,r);for(let t=0;t<r.length;t++){let i=n;""!==r[t]&&(i+="="+eN(r[t])),e.push(i)}}return this.i=e.join("&")},w(tp,ec),tp.prototype.g=function(){return new tg(this.i,this.h)},w(tg,et),(t=tg.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,tv(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,ty(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tv(this)),this.g&&(this.readyState=3,tv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tm(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ty(this):tv(this),3==this.readyState&&tm(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,ty(this))},t.Na=function(e){this.g&&(this.response=e,ty(this))},t.ga=function(){this.g&&ty(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(tg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),w(tE,et);var tI=/^https?$/i,tb=["POST","PUT"];function tT(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,tS(e),tC(e)}function tS(e){e.A||(e.A=!0,er(e,"complete"),er(e,"error"))}function tA(e){if(e.h&&void 0!==s){if(e.v&&4==tk(e))setTimeout(e.Ca.bind(e),0);else if(er(e,"readystatechange"),4==tk(e)){e.h=!1;try{let s=e.ca();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,i=!0;break;default:i=!1}if(!(t=i)){if(r=0===s){let t=String(e.D).match(eY)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!tI.test(t?t.toLowerCase():"")}t=r}if(t)er(e,"complete"),er(e,"success");else{e.o=6;try{var n=tk(e)>2?e.g.statusText:""}catch(e){n=""}e.l=n+" ["+e.ca()+"]",tS(e)}}finally{tC(e)}}}}function tC(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);let r=e.g;e.g=null,t||er(e,"ready");try{r.onreadystatechange=null}catch(e){}}}function tk(e){return e.g?e.g.readyState:0}function tR(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tN(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function tO(e){this.za=0,this.i=[],this.j=new eS,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tN("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tN("baseRetryDelayMs",5e3,e),this.Za=tN("retryDelaySeedMs",1e4,e),this.Ta=tN("forwardChannelMaxRetries",2,e),this.va=tN("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new eq(e&&e.concurrentRequestLimit),this.Ba=new tf,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function tP(e){if(tx(e),3==e.I){var t=e.V++,r=e0(e.J);if(e3(r,"SID",e.M),e3(r,"RID",t),e3(r,"TYPE","terminate"),tU(e,r),(t=new eO(e,e.j,t)).M=2,t.A=e5(e0(r)),r=!1,o.navigator&&o.navigator.sendBeacon)try{r=o.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!r&&o.Image&&((new Image).src=t.A,r=!0),r||(t.g=tJ(t.j,null),t.g.ea(t.A)),t.F=Date.now(),eV(t)}tG(e)}function tD(e){e.g&&(tj(e),e.g.cancel(),e.g=null)}function tx(e){tD(e),e.v&&(o.clearTimeout(e.v),e.v=null),t$(e),e.h.cancel(),e.m&&("number"==typeof e.m&&o.clearTimeout(e.m),e.m=null)}function tL(e){if(!eW(e.h)&&!e.m){e.m=!0;var t=e.Ea;S||k(),A||(S(),A=!0),C.add(t,e),e.D=0}}function tM(e,t){var r;r=t?t.l:e.V++;let i=e0(e.J);e3(i,"SID",e.M),e3(i,"RID",r),e3(i,"AID",e.K),tU(e,i),e.u&&e.o&&t_(i,e.u,e.o),r=new eO(e,e.j,r,e.D+1),null===e.u&&(r.J=e.o),t&&(e.i=t.G.concat(e.i)),t=tV(e,r,1e3),r.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),eJ(e.h,r),eL(r,i,t)}function tU(e,t){e.H&&F(e.H,function(e,r){e3(t,r,e)}),e.l&&F({},function(e,r){e3(t,r,e)})}function tV(e,t,r){r=Math.min(e.i.length,r);let i=e.l?h(e.l.Ka,e.l,e):null;e:{var n=e.i;let t=-1;for(;;){let e=["count="+r];-1==t?r>0?(t=n[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let h=0;h<r;h++){var s=n[h].g;let r=n[h].map;if((s-=t)<0)t=Math.max(0,n[h].g-100),l=!1;else try{s="req"+s+"_";try{var o=r instanceof Map?r:Object.entries(r);for(let[t,r]of o){let i=r;a(r)&&(i=el(r)),e.push(s+t+"="+encodeURIComponent(i))}}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}catch(e){i&&i(r)}}if(l){o=e.join("&");break e}}o=void 0}return t.G=e=e.i.splice(0,r),o}function tF(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;S||k(),A||(S(),A=!0),C.add(t,e),e.A=0}}function tB(e){return!e.g&&!e.v&&!(e.A>=3)&&(e.Y++,e.v=eT(h(e.Da,e),tq(e,e.A)),e.A++,!0)}function tj(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function tH(e){e.g=new eO(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=e0(e.na);e3(t,"RID","rpc"),e3(t,"SID",e.M),e3(t,"AID",e.K),e3(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&e3(t,"TO",e.ia),e3(t,"TYPE","xmlhttp"),tU(e,t),e.u&&e.o&&t_(t,e.u,e.o),e.O&&(e.g.H=e.O);var r=e.g;e=e.ba,r.M=1,r.A=e5(e0(t)),r.u=null,r.R=!0,eM(r,e)}function t$(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function tz(e,t){var r,i=null;if(e.g==t){t$(e),tj(e),e.g=null;var n=2}else{if(!eK(e.h,t))return;i=t.G,eX(e.h,t),n=1}if(0!=e.I){if(t.o)if(1==n){i=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;er(n=ev(),new eb(n,i)),tL(e)}else tF(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==n&&(r=t,!(eG(e.h)>=e.h.j-!!e.m)&&(e.m?(e.i=r.G.concat(e.i),!0):1!=e.I&&2!=e.I&&!(e.D>=(e.Sa?0:e.Ta))&&(e.m=eT(h(e.Ea,e,r),tq(e,e.D)),e.D++,!0)))||2==n&&tB(e)))switch(i&&i.length>0&&((t=e.h).i=t.i.concat(i)),s){case 1:tW(e,5);break;case 4:tW(e,10);break;case 3:tW(e,6);break;default:tW(e,2)}}}function tq(e,t){let r=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(r*=2),r*t}function tW(e,t){if(e.j.info("Error code "+t),2==t){let t,s,a;var r,i=h(e.bb,e),n=e.Ua;let l=!n;n=new eZ(n||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||e1(n,"https"),e5(n),l?function(e,t){let r=new eS;if(o.Image){let i=new Image;i.onload=v(td,r,"TestLoadImage: loaded",!0,t,i),i.onerror=v(td,r,"TestLoadImage: error",!1,t,i),i.onabort=v(td,r,"TestLoadImage: abort",!1,t,i),i.ontimeout=v(td,r,"TestLoadImage: timeout",!1,t,i),o.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(n.toString(),i):(r=n.toString(),t=new eS,s=new AbortController,a=setTimeout(()=>{s.abort(),td(t,"TestPingServer: timeout",!1,i)},1e4),fetch(r,{signal:s.signal}).then(e=>{clearTimeout(a),e.ok?td(t,"TestPingServer: ok",!0,i):td(t,"TestPingServer: server error",!1,i)}).catch(()=>{clearTimeout(a),td(t,"TestPingServer: error",!1,i)}))}else eI(2);e.I=0,e.l&&e.l.pa(t),tG(e),tx(e)}function tG(e){if(e.I=0,e.ja=[],e.l){let t=eQ(e.h);(0!=t.length||0!=e.i.length)&&(I(e.ja,t),I(e.ja,e.i),e.h.i.length=0,E(e.i),e.i.length=0),e.l.oa()}}function tK(e,t,r){var i=r instanceof eZ?e0(r):new eZ(r);if(""!=i.g)t&&(i.g=t+"."+i.g),e2(i,i.u);else{var n=o.location;i=n.protocol,t=t?t+"."+n.hostname:n.hostname,n=+n.port;let e=new eZ(null);i&&e1(e,i),t&&(e.g=t),n&&e2(e,n),r&&(e.h=r),i=e}return r=e.G,t=e.wa,r&&t&&e3(i,r,t),e3(i,"VER",e.ka),tU(e,i),i}function tJ(e,t,r){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tE(e.Aa&&!e.ma?new tp({ab:r}):e.ma)).Fa(e.L),t}function tX(){}function tQ(){}function tY(e,t){et.call(this),this.g=new tO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!D(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!D(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t1(this)}function tZ(e){ep.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t0(){eg.call(this),this.status=1}function t1(e){this.g=e}(t=tE.prototype).Fa=function(e){this.H=e},t.ea=function(t,r,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);r=r?r.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():e.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(r,String(t),!0),this.B=!1}catch(e){tT(this,e);return}if(t=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)i.set(s,n[s]);else if("function"==typeof n.keys&&"function"==typeof n.get)for(let e of n.keys())i.set(e,n.get(e));else throw Error("Unknown input type for opt_headers: "+String(n));for(let[e,a]of(n=Array.from(i.keys()).find(e=>"content-type"==e.toLowerCase()),s=o.FormData&&t instanceof o.FormData,!(Array.prototype.indexOf.call(tb,r,void 0)>=0)||n||s||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i))this.g.setRequestHeader(e,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(e){tT(this,e)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,er(this,"complete"),er(this,"abort"),tC(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tC(this,!0)),tE.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tA(this):this.Xa())},t.Xa=function(){tA(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return tk(this)>2?this.g.status:-1}catch(e){return -1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eh(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=tO.prototype).ka=8,t.I=1,t.connect=function(e,t,r,i){eI(0),this.W=e,this.H=t||{},r&&void 0!==i&&(this.H.OSID=r,this.H.OAID=i),this.F=this.X,this.J=tK(this,null,this.W),tL(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;let n=new eO(this,this.j,e),s=this.o;if(this.U&&(s?H(s=B(s),this.U):s=this.U),null!==this.u||this.R||(n.J=s,s=null),this.S)e:{for(var t=0,r=0;r<this.i.length;r++){t:{var i=this.i[r];if("__data__"in i.map&&"string"==typeof(i=i.map.__data__)){i=i.length;break t}i=void 0}if(void 0===i)break;if((t+=i)>4096){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=tV(this,n,t),e3(r=e0(this.J),"RID",e),e3(r,"CVER",22),this.G&&e3(r,"X-HTTP-Session-Id",this.G),tU(this,r),s&&(this.R?t="headers="+eN(tw(s))+"&"+t:this.u&&t_(r,this.u,s)),eJ(this.h,n),this.Ra&&e3(r,"TYPE","init"),this.S?(e3(r,"$req",t),e3(r,"SID","null"),n.U=!0,eL(n,r,null)):eL(n,r,t),this.I=2}}else 3==this.I&&(e?tM(this,e):0==this.i.length||eW(this.h)||tM(this))},t.Da=function(){if(this.v=null,tH(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=eT(h(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,eI(10),tD(this),tH(this))},t.Va=function(){null!=this.C&&(this.C=null,tD(this),tB(this),eI(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),eI(2)):(this.j.info("Failed to ping google.com"),eI(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=tX.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},tQ.prototype.g=function(e,t){return new tY(e,t)},w(tY,et),tY.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tY.prototype.close=function(){tP(this.g)},tY.prototype.o=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=el(e),e=r);t.i.push(new ez(t.Ya++,e)),3==t.I&&tL(t)},tY.prototype.N=function(){this.g.l=null,delete this.j,tP(this.g),delete this.g,tY.Z.N.call(this)},w(tZ,ep),w(t0,eg),w(t1,tX),t1.prototype.ra=function(){er(this.g,"a")},t1.prototype.qa=function(e){er(this.g,new tZ(e))},t1.prototype.pa=function(e){er(this.g,new t0)},t1.prototype.oa=function(){er(this.g,"b")},tQ.prototype.createWebChannel=tQ.prototype.g,tY.prototype.send=tY.prototype.o,tY.prototype.open=tY.prototype.m,tY.prototype.close=tY.prototype.close,y=i0.createWebChannelTransport=function(){return new tQ},m=i0.getStatEventTarget=function(){return ev()},g=i0.Event=em,p=i0.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},eC.NO_ERROR=0,eC.TIMEOUT=8,eC.HTTP_ERROR=6,f=i0.ErrorCode=eC,ek.COMPLETE="complete",d=i0.EventType=ek,ed.EventType=ef,ef.OPEN="a",ef.CLOSE="b",ef.ERROR="c",ef.MESSAGE="d",et.prototype.listen=et.prototype.J,c=i0.WebChannel=ed,i0.FetchXmlHttpFactory=tp,tE.prototype.listenOnce=tE.prototype.K,tE.prototype.getLastError=tE.prototype.Ha,tE.prototype.getLastErrorCode=tE.prototype.ya,tE.prototype.getStatus=tE.prototype.ca,tE.prototype.getResponseJson=tE.prototype.La,tE.prototype.getResponseText=tE.prototype.la,tE.prototype.send=tE.prototype.ea,tE.prototype.setWithCredentials=tE.prototype.Fa,u=i0.XhrIo=tE}).apply(void 0!==iZ?iZ:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let i1="@firebase/firestore",i2="4.9.2";class i6{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}i6.UNAUTHENTICATED=new i6(null),i6.GOOGLE_CREDENTIALS=new i6("google-credentials-uid"),i6.FIRST_PARTY=new i6("first-party-uid"),i6.MOCK_USER=new i6("mock-user");let i3="12.3.0",i5=new eu("@firebase/firestore");function i4(){return i5.logLevel}function i8(e,...t){if(i5.logLevel<=l.DEBUG){let r=t.map(ne);i5.debug(`Firestore (${i3}): ${e}`,...r)}}function i7(e,...t){if(i5.logLevel<=l.ERROR){let r=t.map(ne);i5.error(`Firestore (${i3}): ${e}`,...r)}}function i9(e,...t){if(i5.logLevel<=l.WARN){let r=t.map(ne);i5.warn(`Firestore (${i3}): ${e}`,...r)}}function ne(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function nt(e,t,r){let i="Unexpected state";"string"==typeof t?i=t:r=t,nr(e,i,r)}function nr(e,t,r){let i=`FIRESTORE (${i3}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==r)try{i+=" CONTEXT: "+JSON.stringify(r)}catch(e){i+=" CONTEXT: "+r}throw i7(i),Error(i)}function ni(e,t,r,i){let n="Unexpected state";"string"==typeof r?n=r:i=r,e||nr(t,n,i)}let nn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ns extends z{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class no{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class na{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(i6.UNAUTHENTICATED))}shutdown(){}}class nh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nu{constructor(e){this.t=e,this.currentUser=i6.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ni(void 0===this.o,42304);let r=this.i,i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),n=new no;this.o=()=>{this.i++,this.currentUser=this.u(),n.resolve(),n=new no,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let t=n;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},o=e=>{i8("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(i8("FirebaseAuthCredentialsProvider","Auth not yet detected"),n.resolve(),n=new no)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(i8("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ni("string"==typeof t.accessToken,31837,{l:t}),new na(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ni(null===e||"string"==typeof e,2055,{h:e}),new i6(e)}}class nc{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=i6.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nd{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new nc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(i6.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class np{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eF(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ni(void 0===this.o,3512);let r=e=>{null!=e.error&&i8("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.m;return this.m=e.token,i8("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let i=e=>{i8("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?i(e):i8("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ni("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new nf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class ng{static newId(){let e=62*Math.floor(256/62),t="";for(;t.length<20;){let r=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let e=0;e<40;e++)r[e]=Math.floor(256*Math.random());return r}(0);for(let i=0;i<r.length;++i)t.length<20&&r[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[i]%62))}return t}}function nm(e,t){return e<t?-1:+(e>t)}function ny(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let r=e.charAt(i),n=t.charAt(i);if(r!==n)return nv(r)===nv(n)?nm(r,n):nv(r)?1:-1}return nm(e.length,t.length)}function nv(e){let t=e.charCodeAt(0);return t>=55296&&t<=57343}function nw(e,t,r){return e.length===t.length&&e.every((e,i)=>r(e,t[i]))}let n_="__name__";class nE{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&nt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nE.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof nE?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let r=nE.compareSegments(e.get(i),t.get(i));if(0!==r)return r}return nm(e.length,t.length)}static compareSegments(e,t){let r=nE.isNumericId(e),i=nE.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?nE.extractNumericId(e).compare(nE.extractNumericId(t)):ny(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return h.fromString(e.substring(4,e.length-2))}}class nI extends nE{construct(e,t,r){return new nI(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ns(nn.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new nI(t)}static emptyPath(){return new nI([])}}let nb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nT extends nE{construct(e,t,r){return new nT(e,t,r)}static isValidIdentifier(e){return nb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nT.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===n_}static keyField(){return new nT([n_])}static fromServerFormat(e){let t=[],r="",i=0,n=()=>{if(0===r.length)throw new ns(nn.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let t=e[i];if("\\"===t){if(i+1===e.length)throw new ns(nn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ns(nn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,i+=2}else"`"===t?s=!s:"."!==t||s?r+=t:n(),i++}if(n(),s)throw new ns(nn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nT(t)}static emptyPath(){return new nT([])}}class nS{constructor(e){this.path=e}static fromPath(e){return new nS(nI.fromString(e))}static fromName(e){return new nS(nI.fromString(e).popFirst(5))}static empty(){return new nS(nI.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nI.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nI.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nS(new nI(e.slice()))}}function nA(e,t){let r={typeString:e};return t&&(r.value=t),r}function nC(e,t){let r;if("object"!=typeof e||null===e||Object.getPrototypeOf(e)!==Object.prototype&&null!==Object.getPrototypeOf(e))throw new ns(nn.INVALID_ARGUMENT,"JSON must be an object");for(let i in t)if(t[i]){let n=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){r=`JSON missing required field: '${i}'`;break}let o=e[i];if(n&&typeof o!==n){r=`JSON field '${i}' must be a ${n}.`;break}if(void 0!==s&&o!==s.value){r=`Expected '${i}' field to equal '${s.value}'`;break}}if(r)throw new ns(nn.INVALID_ARGUMENT,r);return!0}class nk{static now(){return nk.fromMillis(Date.now())}static fromDate(e){return nk.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*1e6);return new nk(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new ns(nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new ns(nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nm(this.nanoseconds,e.nanoseconds):nm(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nk._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nC(e,nk._jsonSchema))return new nk(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nk._jsonSchemaVersion="firestore/timestamp/1.0",nk._jsonSchema={type:nA("string",nk._jsonSchemaVersion),seconds:nA("number"),nanoseconds:nA("number")};class nR{static fromTimestamp(e){return new nR(e)}static min(){return new nR(new nk(0,0))}static max(){return new nR(new nk(0x3afff4417f,0x3b9ac9ff))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nN{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nN(nR.min(),nS.empty(),-1)}static max(){return new nN(nR.max(),nS.empty(),-1)}}class nO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class nP{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nP((r,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof nP?t:nP.resolve(t)}catch(e){return nP.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nP.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nP.reject(t)}static resolve(e){return new nP((t,r)=>{t(e)})}static reject(e){return new nP((t,r)=>{r(e)})}static waitFor(e){return new nP((t,r)=>{let i=0,n=0,s=!1;e.forEach(e=>{++i,e.next(()=>{++n,s&&n===i&&t()},e=>r(e))}),s=!0,n===i&&t()})}static or(e){let t=nP.resolve(!1);for(let r of e)t=t.next(e=>e?nP.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,i)=>{r.push(t.call(this,e,i))}),this.waitFor(r)}static mapArray(e,t){return new nP((r,i)=>{let n=e.length,s=Array(n),o=0;for(let a=0;a<n;a++){let l=a;t(e[l]).next(e=>{s[l]=e,++o===n&&r(s)},e=>i(e))}})}static doWhile(e,t){return new nP((r,i)=>{let n=()=>{!0===e()?t().next(()=>{n()},i):r()};n()})}}function nD(e){return"IndexedDbTransactionError"===e.name}class nx{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}}nx.ce=-1;function nL(e){return 0===e&&1/e==-1/0}function nM(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function nU(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}class nV{constructor(e,t){this.comparator=e,this.root=t||nB.EMPTY}insert(e,t){return new nV(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nB.BLACK,null,null))}remove(e){return new nV(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nB.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nF(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nF(this.root,e,this.comparator,!1)}getReverseIterator(){return new nF(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nF(this.root,e,this.comparator,!0)}}class nF{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let n=1;for(;!e.isEmpty();)if(n=t?r(e.key,t):1,t&&i&&(n*=-1),n<0)e=this.isReverse?e.left:e.right;else{if(0===n){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nB{constructor(e,t,r,i,n){this.key=e,this.value=t,this.color=null!=r?r:nB.RED,this.left=null!=i?i:nB.EMPTY,this.right=null!=n?n:nB.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,n){return new nB(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=n?n:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,n=r(e,i.key);return(i=n<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===n?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return nB.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,i=this;if(0>t(e,i.key))i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return nB.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,nB.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,nB.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw nt(27949);return e+ +!this.isRed()}}nB.EMPTY=null,nB.RED=!0,nB.BLACK=!1,nB.EMPTY=new class{constructor(){this.size=0}get key(){throw nt(57766)}get value(){throw nt(16141)}get color(){throw nt(16727)}get left(){throw nt(29726)}get right(){throw nt(36894)}copy(e,t,r,i,n){return this}insert(e,t,r){return new nB(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nj{constructor(e){this.comparator=e,this.data=new nV(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nH(this.data.getIterator())}getIteratorFrom(e){return new nH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nj)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,i=r.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new nj(this.comparator);return t.data=e,t}}class nH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class n${constructor(e){this.fields=e,e.sort(nT.comparator)}static empty(){return new n$([])}unionWith(e){let t=new nj(nT.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new n$(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nw(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class nz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nq{constructor(e){this.binaryString=e}static fromBase64String(e){return new nq(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new nz("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new nq(function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nm(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nq.EMPTY_BYTE_STRING=new nq("");let nW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nG(e){if(ni(!!e,39018),"string"==typeof e){let t=0,r=nW.exec(e);if(ni(!!r,46558,{timestamp:e}),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:nK(e.seconds),nanos:nK(e.nanos)}}function nK(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nJ(e){return"string"==typeof e?nq.fromBase64String(e):nq.fromUint8Array(e)}let nX="server_timestamp",nQ="__type__",nY="__previous_value__",nZ="__local_write_time__";function n0(e){return(e?.mapValue?.fields||{})[nQ]?.stringValue===nX}function n1(e){let t=nG(e.mapValue.fields[nZ].timestampValue);return new nk(t.seconds,t.nanos)}let n2="(default)";class n6{constructor(e,t){this.projectId=e,this.database=t||n2}static empty(){return new n6("","")}get isDefaultDatabase(){return this.database===n2}isEqual(e){return e instanceof n6&&e.projectId===this.projectId&&e.database===this.database}}let n3="__max__",n5={},n4="value";function n8(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?n0(e)?4:sh(e)?0x1fffffffffffff:sa(e)?10:11:nt(28295,{value:e})}function n7(e,t){if(e===t)return!0;let r=n8(e);if(r!==n8(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return n1(e).isEqual(n1(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let i=nG(e.timestampValue),n=nG(t.timestampValue);return i.seconds===n.seconds&&i.nanos===n.nanos;case 5:return e.stringValue===t.stringValue;case 6:return nJ(e.bytesValue).isEqual(nJ(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return nK(e.geoPointValue.latitude)===nK(t.geoPointValue.latitude)&&nK(e.geoPointValue.longitude)===nK(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return nK(e.integerValue)===nK(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=nK(e.doubleValue),i=nK(t.doubleValue);return r===i?nL(r)===nL(i):isNaN(r)&&isNaN(i)}return!1;case 9:return nw(e.arrayValue.values||[],t.arrayValue.values||[],n7);case 10:case 11:let s=e.mapValue.fields||{},o=t.mapValue.fields||{};if(nM(s)!==nM(o))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===o[e]||!n7(s[e],o[e])))return!1;return!0;default:return nt(52216,{left:e})}}function n9(e,t){return void 0!==(e.values||[]).find(e=>n7(e,t))}function se(e,t){var r,i,n,s,o,a;if(e===t)return 0;let l=n8(e),h=n8(t);if(l!==h)return nm(l,h);switch(l){case 0:case 0x1fffffffffffff:return 0;case 1:return nm(e.booleanValue,t.booleanValue);case 2:let u,c;return u=nK(e.integerValue||e.doubleValue),u<(c=nK(t.integerValue||t.doubleValue))?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1;case 3:return st(e.timestampValue,t.timestampValue);case 4:return st(n1(e),n1(t));case 5:return ny(e.stringValue,t.stringValue);case 6:let d,f;return r=e.bytesValue,i=t.bytesValue,d=nJ(r),f=nJ(i),d.compareTo(f);case 7:return function(e,t){let r=e.split("/"),i=t.split("/");for(let e=0;e<r.length&&e<i.length;e++){let t=nm(r[e],i[e]);if(0!==t)return t}return nm(r.length,i.length)}(e.referenceValue,t.referenceValue);case 8:let p;return n=e.geoPointValue,s=t.geoPointValue,0!==(p=nm(nK(n.latitude),nK(s.latitude)))?p:nm(nK(n.longitude),nK(s.longitude));case 9:return sr(e.arrayValue,t.arrayValue);case 10:let g,m,y,v,w;return o=e.mapValue,a=t.mapValue,g=o.fields||{},m=a.fields||{},y=g[n4]?.arrayValue,v=m[n4]?.arrayValue,0!==(w=nm(y?.values?.length||0,v?.values?.length||0))?w:sr(y,v);case 11:return function(e,t){if(e===n5&&t===n5)return 0;if(e===n5)return 1;if(t===n5)return -1;let r=e.fields||{},i=Object.keys(r),n=t.fields||{},s=Object.keys(n);i.sort(),s.sort();for(let e=0;e<i.length&&e<s.length;++e){let t=ny(i[e],s[e]);if(0!==t)return t;let o=se(r[i[e]],n[s[e]]);if(0!==o)return o}return nm(i.length,s.length)}(e.mapValue,t.mapValue);default:throw nt(23264,{he:l})}}function st(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nm(e,t);let r=nG(e),i=nG(t),n=nm(r.seconds,i.seconds);return 0!==n?n:nm(r.nanos,i.nanos)}function sr(e,t){let r=e.values||[],i=t.values||[];for(let e=0;e<r.length&&e<i.length;++e){let t=se(r[e],i[e]);if(t)return t}return nm(r.length,i.length)}function si(e){var t,r;let i;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(i=nG(e.timestampValue),`time(${i.seconds},${i.nanos})`):"stringValue"in e?e.stringValue:"bytesValue"in e?nJ(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,nS.fromName(t).toString()):"geoPointValue"in e?(r=e.geoPointValue,`geo(${r.latitude},${r.longitude})`):"arrayValue"in e?function(e){let t="[",r=!0;for(let i of e.values||[])r?r=!1:t+=",",t+=si(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",i=!0;for(let n of t)i?i=!1:r+=",",r+=`${n}:${si(e.fields[n])}`;return r+"}"}(e.mapValue):nt(61005,{value:e})}function sn(e){return!!e&&"integerValue"in e}function ss(e){return!!e&&"arrayValue"in e}function so(e){return!!e&&"mapValue"in e}function sa(e){return(e?.mapValue?.fields||{}).__type__?.stringValue==="__vector__"}function sl(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return nU(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=sl(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=sl(e.arrayValue.values[r]);return t}return{...e}}function sh(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===n3}class su{constructor(e){this.value=e}static empty(){return new su({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!so(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(t)}setAll(e){let t=nT.emptyPath(),r={},i=[];e.forEach((e,n)=>{if(!t.isImmediateParentOf(n)){let e=this.getFieldsMap(t);this.applyChanges(e,r,i),r={},i=[],t=n.popLast()}e?r[n.lastSegment()]=sl(e):i.push(n.lastSegment())});let n=this.getFieldsMap(t);this.applyChanges(n,r,i)}delete(e){let t=this.field(e.popLast());so(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return n7(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];so(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){for(let i of(nU(t,(t,r)=>e[t]=r),r))delete e[i]}clone(){return new su(sl(this.value))}}class sc{constructor(e,t,r,i,n,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=n,this.data=s,this.documentState=o}static newInvalidDocument(e){return new sc(e,0,nR.min(),nR.min(),nR.min(),su.empty(),0)}static newFoundDocument(e,t,r,i){return new sc(e,1,t,nR.min(),r,i,0)}static newNoDocument(e,t){return new sc(e,2,t,nR.min(),nR.min(),su.empty(),0)}static newUnknownDocument(e,t){return new sc(e,3,t,nR.min(),nR.min(),su.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(nR.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=su.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=su.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nR.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sd{constructor(e,t){this.position=e,this.inclusive=t}}function sf(e,t,r){let i=0;for(let n=0;n<e.position.length;n++){let s=t[n],o=e.position[n];if(i=s.field.isKeyField()?nS.comparator(nS.fromName(o.referenceValue),r.key):se(o,r.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function sp(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!n7(e.position[r],t.position[r]))return!1;return!0}class sg{constructor(e,t="asc"){this.field=e,this.dir=t}}class sm{}class sy extends sm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new sE(e,t,r):"array-contains"===t?new sS(e,r):"in"===t?new sA(e,r):"not-in"===t?new sC(e,r):"array-contains-any"===t?new sk(e,r):new sy(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new sI(e,r):new sb(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(se(t,this.value)):null!==t&&n8(this.value)===n8(t)&&this.matchesComparison(se(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sv extends sm{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sv(e,t)}matches(e){return sw(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sw(e){return"and"===e.op}function s_(e){for(let t of e.filters)if(t instanceof sv)return!1;return!0}class sE extends sy{constructor(e,t,r){super(e,t,r),this.key=nS.fromName(r.referenceValue)}matches(e){let t=nS.comparator(e.key,this.key);return this.matchesComparison(t)}}class sI extends sy{constructor(e,t){super(e,"in",t),this.keys=sT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sb extends sy{constructor(e,t){super(e,"not-in",t),this.keys=sT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sT(e,t){return(t.arrayValue?.values||[]).map(e=>nS.fromName(e.referenceValue))}class sS extends sy{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ss(t)&&n9(t.arrayValue,this.value)}}class sA extends sy{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&n9(this.value.arrayValue,t)}}class sC extends sy{constructor(e,t){super(e,"not-in",t)}matches(e){if(n9(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!n9(this.value.arrayValue,t)}}class sk extends sy{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ss(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>n9(this.value.arrayValue,e))}}class sR{constructor(e,t=null,r=[],i=[],n=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=n,this.startAt=s,this.endAt=o,this.Te=null}}function sN(e,t=null,r=[],i=[],n=null,s=null,o=null){return new sR(e,t,r,i,n,s,o)}function sO(e){if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof sy)return t.field.canonicalString()+t.op.toString()+si(t.value);if(s_(t)&&sw(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>si(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>si(e)).join(",")),e.Te=t}return e.Te}function sP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++){var r,i;if(r=e.orderBy[n],i=t.orderBy[n],!(r.dir===i.dir&&r.field.isEqual(i.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof sy?r instanceof sy&&t.op===r.op&&t.field.isEqual(r.field)&&n7(t.value,r.value):t instanceof sv?r instanceof sv&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,i,n)=>t&&e(i,r.filters[n]),!0):void nt(19439)}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sp(e.startAt,t.startAt)&&sp(e.endAt,t.endAt)}class sD{constructor(e,t=null,r=[],i=[],n=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=n,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function sL(e){if(null===e.Ie){let t;e.Ie=[];let r=new Set;for(let t of e.explicitOrderBy)e.Ie.push(t),r.add(t.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new nj(nT.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{r.has(t.canonicalString())||t.isKeyField()||e.Ie.push(new sg(t,i))}),r.has(nT.keyField().canonicalString())||e.Ie.push(new sg(nT.keyField(),i))}return e.Ie}function sM(e){return e.Ee||(e.Ee=function(e,t){if("F"===e.limitType)return sN(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new sg(e.field,t)});let r=e.endAt?new sd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new sd(e.startAt.position,e.startAt.inclusive):null;return sN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}}(e,sL(e))),e.Ee}function sU(e,t,r){return new sD(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function sV(e,t){return sP(sM(e),sM(t))&&e.limitType===t.limitType}function sF(e){return`${sO(sM(e))}|lt:${e.limitType}`}function sB(e){var t;let r;return`Query(target=${r=(t=sM(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof sy?`${t.field.canonicalString()} ${t.op} ${si(t.value)}`:t instanceof sv?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(e=>si(e)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(e=>si(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function sj(e,t){var r,i,n,s;let o,a,l;return t.isFoundDocument()&&(o=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(o):nS.isDocumentKey(e.path)?e.path.isEqual(o):e.path.isImmediateParentOf(o))&&function(e,t){for(let r of sL(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(r=e,i=t,(!r.startAt||(n=r.startAt,a=sf(n,sL(r),i),n.inclusive?!!(a<=0):!!(a<0)))&&(!r.endAt||(s=r.endAt,l=sf(s,sL(r),i),s.inclusive?!!(l>=0):!!(l>0))))}class sH{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,i]of r)if(this.equalsFn(t,e))return i}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nU(this.inner,(t,r)=>{for(let[t,i]of r)e(t,i)})}isEmpty(){var e=this.inner;for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}size(){return this.innerSize}}let s$=new nV(nS.comparator),sz=new nV(nS.comparator);function sq(...e){let t=sz;for(let r of e)t=t.insert(r.key,r);return t}function sW(){return new sH(e=>e.toString(),(e,t)=>e.isEqual(t))}new nV(nS.comparator);let sG=new nj(nS.comparator);function sK(...e){let t=sG;for(let r of e)t=t.add(r);return t}let sJ=new nj(nm);class sX{constructor(){this._=void 0}}class sQ extends sX{}class sY extends sX{constructor(e){super(),this.elements=e}}function sZ(e,t){let r=s3(t);for(let t of e.elements)r.some(e=>n7(e,t))||r.push(t);return{arrayValue:{values:r}}}class s0 extends sX{constructor(e){super(),this.elements=e}}function s1(e,t){let r=s3(t);for(let t of e.elements)r=r.filter(e=>!n7(e,t));return{arrayValue:{values:r}}}class s2 extends sX{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function s6(e){return nK(e.integerValue||e.doubleValue)}function s3(e){return ss(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class s5{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new s5}static exists(e){return new s5(void 0,e)}static updateTime(e){return new s5(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function s4(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class s8{}function s7(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new oo(e.key,s5.none()):new ot(e.key,e.data,s5.none());{let r=e.data,i=su.empty(),n=new nj(nT.comparator);for(let e of t.fields)if(!n.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?i.delete(e):i.set(e,t),n=n.add(e)}return new or(e.key,i,new n$(n.toArray()),s5.none())}}function s9(e,t,r,i){return e instanceof ot?function(e,t,r,i){if(!s4(e.precondition,t))return r;let n=e.value.clone(),s=os(e.fieldTransforms,i,t);return n.setAll(s),t.convertToFoundDocument(t.version,n).setHasLocalMutations(),null}(e,t,r,i):e instanceof or?function(e,t,r,i){if(!s4(e.precondition,t))return r;let n=os(e.fieldTransforms,i,t),s=t.data;return(s.setAll(oi(e)),s.setAll(n),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,i):s4(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function oe(e,t){var r,i;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,i=t.fieldTransforms,!!(void 0===r&&void 0===i||!(!r||!i)&&nw(r,i,(e,t)=>{var r,i;return e.field.isEqual(t.field)&&(r=e.transform,i=t.transform,r instanceof sY&&i instanceof sY||r instanceof s0&&i instanceof s0?nw(r.elements,i.elements,n7):r instanceof s2&&i instanceof s2?n7(r.Ae,i.Ae):r instanceof sQ&&i instanceof sQ)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ot extends s8{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class or extends s8{constructor(e,t,r,i,n=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=n,this.type=1}getFieldMask(){return this.fieldMask}}function oi(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let i=e.data.field(r);t.set(r,i)}}),t}function on(e,t,r){let i=new Map;ni(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let s=0;s<r.length;s++){var n;let o=e[s],a=o.transform,l=t.data.field(o.field);i.set(o.field,(n=r[s],a instanceof sY?sZ(a,l):a instanceof s0?s1(a,l):n))}return i}function os(e,t,r){let i=new Map;for(let n of e){let e=n.transform,s=r.data.field(n.field);i.set(n.field,function(e,t,r){var i;let n,s,o;return e instanceof sQ?(i=t,n={fields:{[nQ]:{stringValue:nX},[nZ]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}},i&&n0(i)&&(i=function e(t){let r=t.mapValue.fields[nY];return n0(r)?e(r):r}(i)),i&&(n.fields[nY]=i),{mapValue:n}):e instanceof sY?sZ(e,t):e instanceof s0?s1(e,t):(o=s6(s=function(e,t){return e instanceof s2?sn(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}(e,t))+s6(e.Ae),sn(s)&&sn(e.Ae)?{integerValue:""+o}:function(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nL(t)?"-0":t}}(e.serializer,o))}(e,s,t))}return i}class oo extends s8{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oa{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let i=this.mutations[t];i.key.isEqual(e.key)&&function(e,t,r){let i,n;e instanceof ot?(i=e.value.clone(),n=on(e.fieldTransforms,t,r.transformResults),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()):e instanceof or?function(e,t,r){if(!s4(e.precondition,t))return t.convertToUnknownDocument(r.version);let i=on(e.fieldTransforms,t,r.transformResults),n=t.data;n.setAll(oi(e)),n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(e,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}(i,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=s9(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=s9(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=sW();return this.mutations.forEach(i=>{let n=e.get(i.key),s=n.overlayedDocument,o=this.applyToLocalView(s,n.mutatedFields),a=s7(s,o=t.has(i.key)?null:o);null!==a&&r.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(nR.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sK())}isEqual(e){return this.batchId===e.batchId&&nw(this.mutations,e.mutations,(e,t)=>oe(e,t))&&nw(this.baseMutations,e.baseMutations,(e,t)=>oe(e,t))}}class ol{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}(w=v||(v={}))[w.OK=0]="OK",w[w.CANCELLED=1]="CANCELLED",w[w.UNKNOWN=2]="UNKNOWN",w[w.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",w[w.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",w[w.NOT_FOUND=5]="NOT_FOUND",w[w.ALREADY_EXISTS=6]="ALREADY_EXISTS",w[w.PERMISSION_DENIED=7]="PERMISSION_DENIED",w[w.UNAUTHENTICATED=16]="UNAUTHENTICATED",w[w.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",w[w.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",w[w.ABORTED=10]="ABORTED",w[w.OUT_OF_RANGE=11]="OUT_OF_RANGE",w[w.UNIMPLEMENTED=12]="UNIMPLEMENTED",w[w.INTERNAL=13]="INTERNAL",w[w.UNAVAILABLE=14]="UNAVAILABLE",w[w.DATA_LOSS=15]="DATA_LOSS",new h([0xffffffff,0xffffffff],0);class oh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ou(e){let t;return ni(!!e,49232),nR.fromTimestamp(new nk((t=nG(e)).seconds,t.nanos))}function oc(e,t){let r=new nI(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?r:r.child(t)}function od(e){return nT.fromServerFormat(e.fieldPath)}class of{constructor(e){this.yt=e}}class op{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(+!!e.booleanValue);else if("integerValue"in e)this.Ft(t,15),t.Mt(nK(e.integerValue));else if("doubleValue"in e){let r=nK(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),nL(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),"string"==typeof r&&(r=nG(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(nJ(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?sh(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):sa(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):nt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};for(let e of(this.Ft(t,55),Object.keys(r)))this.Ot(e,t),this.Ct(r[e],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=r[n4].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(nK(i)),this.Ot(n4,t),this.Ct(r[n4],t)}Qt(e,t){let r=e.values||[];for(let e of(this.Ft(t,50),r))this.Ct(e,t)}Lt(e,t){this.Ft(t,37),nS.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}op.Kt=new op;class og{constructor(){this.Cn=new om}addToCollectionParentIndex(e,t){return this.Cn.add(t),nP.resolve()}getCollectionParents(e,t){return nP.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return nP.resolve()}deleteFieldIndex(e,t){return nP.resolve()}deleteAllFieldIndexes(e){return nP.resolve()}createTargetIndexes(e,t){return nP.resolve()}getDocumentsMatchingTarget(e,t){return nP.resolve(null)}getIndexType(e,t){return nP.resolve(0)}getFieldIndexes(e,t){return nP.resolve([])}getNextCollectionGroupToUpdate(e){return nP.resolve(null)}getMinOffset(e,t){return nP.resolve(nN.min())}getMinOffsetFromCollectionGroup(e,t){return nP.resolve(nN.min())}updateCollectionGroup(e,t,r){return nP.resolve()}updateIndexEntries(e,t){return nP.resolve()}}class om{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nj(nI.comparator),n=!i.has(r);return this.index[t]=i.add(r),n}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nj(nI.comparator)).toArray()}}new Uint8Array(0);class oy{static withCacheSize(e){return new oy(e,oy.DEFAULT_COLLECTION_PERCENTILE,oy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}oy.DEFAULT_COLLECTION_PERCENTILE=10,oy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oy.DEFAULT=new oy(0x2800000,oy.DEFAULT_COLLECTION_PERCENTILE,oy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oy.DISABLED=new oy(-1,0,0);class ov{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ov(0)}static cr(){return new ov(-1)}}class ow{constructor(){this.changes=new sH(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?nP.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class o_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oE{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&s9(r.mutation,e,n$.empty(),nk.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,sK()).next(()=>t))}getLocalViewOfDocuments(e,t,r=sK()){let i=sW();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(e=>{let t=sq();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=sW();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sK()))}populateOverlays(e,t,r){let i=[];return r.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,i){let n=s$,s=sW(),o=sW();return t.forEach((e,t)=>{let o=r.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof or)?n=n.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),s9(o.mutation,t,o.mutation.getFieldMask(),nk.now())):s.set(t.key,n$.empty())}),this.recalculateAndSaveOverlays(e,n).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new o_(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){let r=sW(),i=new nV((e,t)=>e-t),n=sK();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let n of e)n.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let o=r.get(e)||n$.empty();o=n.applyToLocalView(s,o),r.set(e,o);let a=(i.get(n.batchId)||sK()).add(e);i=i.insert(n.batchId,a)})}).next(()=>{let s=[],o=i.getReverseIterator();for(;o.hasNext();){let i=o.getNext(),a=i.key,l=i.value,h=sW();l.forEach(e=>{if(!n.has(e)){let i=s7(t.get(e),r.get(e));null!==i&&h.set(e,i),n=n.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,h))}return nP.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,i){return nS.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):null!==t.collectionGroup?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(n=>{let s=i-n.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-n.size):nP.resolve(sW()),o=-1,a=n;return s.next(t=>nP.forEach(t,(t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),n.get(t)?nP.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,n)).next(()=>this.computeViews(e,a,t,sK())).next(e=>{let t;return{batchId:o,changes:(t=sz,e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t)}}))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nS(t)).next(e=>{let t=sq();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let n=t.collectionGroup,s=sq();return this.indexManager.getCollectionParents(e,n).next(o=>nP.forEach(o,o=>{let a=new sD(o.child(n),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,a,r,i).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(n=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,n,i))).next(e=>{n.forEach((t,r)=>{let i=r.getKey();null===e.get(i)&&(e=e.insert(i,sc.newInvalidDocument(i)))});let r=sq();return e.forEach((e,i)=>{let s=n.get(e);void 0!==s&&s9(s.mutation,i,n$.empty(),nk.now()),sj(t,i)&&(r=r.insert(e,i))}),r})}}class oI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return nP.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:t.id,version:t.version,createTime:ou(t.createTime)}),nP.resolve()}getNamedQuery(e,t){return nP.resolve(this.kr.get(t))}saveNamedQuery(e,t){var r;let i;return this.kr.set(t.name,{name:t.name,query:(i=function(e){var t,r,i,n,s,o,a;let l,h,u,c,d,f,p=(t=e.parent,ni((o=l=nI.fromString(t)).length>=4&&"projects"===o.get(0)&&"databases"===o.get(2),10190,{key:l.toString()}),4===(h=l).length?nI.emptyPath():(ni((a=h).length>4&&"documents"===a.get(4),29091,{key:a.toString()}),a.popFirst(5))),g=e.structuredQuery,m=g.from?g.from.length:0,y=null;if(m>0){ni(1===m,65062);let e=g.from[0];e.allDescendants?y=e.collectionId:p=p.child(e.collectionId)}let v=[];g.where&&(v=(u=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=od(e.unaryFilter.field);return sy.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=od(e.unaryFilter.field);return sy.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let i=od(e.unaryFilter.field);return sy.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=od(e.unaryFilter.field);return sy.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nt(61313);default:return nt(60726)}}(t):void 0!==t.fieldFilter?sy.create(od(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nt(58110);default:return nt(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?sv.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nt(1026)}}(t.compositeFilter.op)):nt(30097,{filter:t})}(g.where))instanceof sv&&s_(r=u)&&sw(r)?u.getFilters():[u]);let w=[];g.orderBy&&(w=g.orderBy.map(e=>new sg(od(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let _=null;g.limit&&(_=null==(c="object"==typeof(i=g.limit)?i.value:i)?null:c);let E=null;g.startAt&&(d=!!(n=g.startAt).before,E=new sd(n.values||[],d));let I=null;return g.endAt&&(f=!(s=g.endAt).before,I=new sd(s.values||[],f)),new sD(p,y,w,v,_,"F",E,I)}({parent:(r=t.bundledQuery).parent,structuredQuery:r.structuredQuery}),"LAST"===r.limitType?sU(i,i.limit,"L"):i),readTime:ou(t.readTime)}),nP.resolve()}}class ob{constructor(){this.overlays=new nV(nS.comparator),this.qr=new Map}getOverlay(e,t){return nP.resolve(this.overlays.get(t))}getOverlays(e,t){let r=sW();return nP.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,i)=>{this.St(e,t,i)}),nP.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(r)),nP.resolve()}getOverlaysForCollection(e,t,r){let i=sW(),n=t.length+1,s=new nS(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===n&&e.largestBatchId>r&&i.set(e.getKey(),e)}return nP.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let n=new nV((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=n.get(e.largestBatchId);null===t&&(t=sW(),n=n.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=sW(),a=n.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=i)););return nP.resolve(o)}St(e,t,r){let i=this.overlays.get(r.key);if(null!==i){let e=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new ol(t,r));let n=this.qr.get(t);void 0===n&&(n=sK(),this.qr.set(t,n)),this.qr.set(t,n.add(r.key))}}class oT{constructor(){this.sessionToken=nq.EMPTY_BYTE_STRING}getSessionToken(e){return nP.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nP.resolve()}}class oS{constructor(){this.Qr=new nj(oA.$r),this.Ur=new nj(oA.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new oA(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new oA(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){let t=new nS(new nI([])),r=new oA(t,e),i=new oA(t,e+1),n=[];return this.Ur.forEachInRange([r,i],e=>{this.Gr(e),n.push(e.key)}),n}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new nS(new nI([])),r=new oA(t,e),i=new oA(t,e+1),n=sK();return this.Ur.forEachInRange([r,i],e=>{n=n.add(e.key)}),n}containsKey(e){let t=new oA(e,0),r=this.Qr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class oA{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return nS.comparator(e.key,t.key)||nm(e.Yr,t.Yr)}static Kr(e,t){return nm(e.Yr,t.Yr)||nS.comparator(e.key,t.key)}}class oC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new nj(oA.$r)}checkEmpty(e){return nP.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){let n=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new oa(n,t,r,i);for(let t of(this.mutationQueue.push(s),i))this.Zr=this.Zr.add(new oA(t.key,n)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return nP.resolve(s)}lookupMutationBatch(e,t){return nP.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.ei(t+1),i=r<0?0:r;return nP.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return nP.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return nP.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new oA(t,0),i=new oA(t,1/0),n=[];return this.Zr.forEachInRange([r,i],e=>{let t=this.Xr(e.Yr);n.push(t)}),nP.resolve(n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nj(nm);return t.forEach(e=>{let t=new oA(e,0),i=new oA(e,1/0);this.Zr.forEachInRange([t,i],e=>{r=r.add(e.Yr)})}),nP.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,n=r;nS.isDocumentKey(n)||(n=n.child(""));let s=new oA(new nS(n),0),o=new nj(nm);return this.Zr.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.Yr)),!0)},s),nP.resolve(this.ti(o))}ti(e){let t=[];return e.forEach(e=>{let r=this.Xr(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){ni(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Zr;return nP.forEach(t.mutations,i=>{let n=new oA(i.key,t.batchId);return r=r.delete(n),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new oA(t,0),i=this.Zr.firstAfterOrEqual(r);return nP.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,nP.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ok{constructor(e){this.ri=e,this.docs=new nV(nS.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),n=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-n,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return nP.resolve(r?r.document.mutableCopy():sc.newInvalidDocument(t))}getEntries(e,t){let r=s$;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():sc.newInvalidDocument(e))}),nP.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let n=s$,s=t.path,o=new nS(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=nS.comparator(e.documentKey,t.documentKey))?r:nm(e.largestBatchId,t.largestBatchId)}(new nN(o.readTime,o.key,-1),r)||(i.has(o.key)||sj(t,o))&&(n=n.insert(o.key,o.mutableCopy()))}return nP.resolve(n)}getAllFromCollectionGroup(e,t,r,i){nt(9500)}ii(e,t){return nP.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new oR(this)}getSize(e){return nP.resolve(this.size)}}class oR extends ow{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),nP.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class oN{constructor(e){this.persistence=e,this.si=new sH(e=>sO(e),sP),this.lastRemoteSnapshotVersion=nR.min(),this.highestTargetId=0,this.oi=0,this._i=new oS,this.targetCount=0,this.ai=ov.ur()}forEachTarget(e,t){return this.si.forEach((e,r)=>t(r)),nP.resolve()}getLastRemoteSnapshotVersion(e){return nP.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nP.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),nP.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),nP.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ov(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,nP.resolve()}updateTargetData(e,t){return this.Pr(t),nP.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,nP.resolve()}removeTargets(e,t,r){let i=0,n=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.si.delete(s),n.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),nP.waitFor(n).next(()=>i)}getTargetCount(e){return nP.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return nP.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),nP.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,n=[];return i&&t.forEach(t=>{n.push(i.markPotentiallyOrphaned(e,t))}),nP.waitFor(n)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),nP.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return nP.resolve(r)}containsKey(e,t){return nP.resolve(this._i.containsKey(t))}}class oO{constructor(e,t){this.ui={},this.overlays={},this.ci=new nx(0),this.li=!1,this.li=!0,this.hi=new oT,this.referenceDelegate=e(this),this.Pi=new oN(this),this.indexManager=new og,this.remoteDocumentCache=new ok(e=>this.referenceDelegate.Ti(e)),this.serializer=new of(t),this.Ii=new oI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ob,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new oC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){i8("MemoryPersistence","Starting transaction:",e);let i=new oP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(e=>this.referenceDelegate.di(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Ai(e,t){return nP.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class oP extends nO{constructor(e){super(),this.currentSequenceNumber=e}}class oD{constructor(e){this.persistence=e,this.Ri=new oS,this.Vi=null}static mi(e){return new oD(e)}get fi(){if(this.Vi)return this.Vi;throw nt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),nP.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),nP.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),nP.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nP.forEach(this.fi,r=>{let i=nS.fromPath(r);return this.gi(e,i).next(e=>{e||t.removeEntry(i,nR.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return nP.or([()=>nP.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ox{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=sK(),i=sK();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new ox(e,t.fromCache,r,i)}}class oL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){let t;return!function(){let t=P()?.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(e.g.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:Number((t=H().match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1")>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let n={result:null};return this.ys(e,t).next(e=>{n.result=e}).next(()=>{if(!n.result)return this.ws(e,t,i,r).next(e=>{n.result=e})}).next(()=>{if(n.result)return;let r=new oL;return this.Ss(e,t,r).next(i=>{if(n.result=i,this.Vs)return this.bs(e,t,r,i.size)})}).next(()=>n.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(i4()<=l.DEBUG&&i8("QueryEngine","SDK will not create cache indexes for query:",sB(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),nP.resolve()):(i4()<=l.DEBUG&&i8("QueryEngine","Query:",sB(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(i4()<=l.DEBUG&&i8("QueryEngine","The SDK decides to create cache indexes for query:",sB(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sM(t))):nP.resolve())}ys(e,t){if(sx(t))return nP.resolve(null);let r=sM(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(r=sM(t=sU(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{let n=sK(...i);return this.ps.getDocuments(e,n).next(i=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.Ds(t,i);return this.Cs(t,s,n,r.readTime)?this.ys(e,sU(t,null,"F")):this.vs(e,s,t,r)}))})))}ws(e,t,r,i){return sx(t)||i.isEqual(nR.min())?nP.resolve(null):this.ps.getDocuments(e,r).next(n=>{let s,o,a=this.Ds(t,n);return this.Cs(t,a,r,i)?nP.resolve(null):(i4()<=l.DEBUG&&i8("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sB(t)),this.vs(e,a,t,(s=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,new nN(nR.fromTimestamp(1e9===o?new nk(s+1,0):new nk(s,o)),nS.empty(),-1))).next(e=>e))})}Ds(e,t){let r=new nj((t,r)=>{let i=!1;for(let n of sL(e)){let e=function(e,t,r){var i;let n,s,o=e.field.isKeyField()?nS.comparator(t.key,r.key):(i=e.field,n=t.data.field(i),s=r.data.field(i),null!==n&&null!==s?se(n,s):nt(42886));switch(e.dir){case"asc":return o;case"desc":return -1*o;default:return nt(19790,{direction:e.dir})}}(n,t,r);if(0!==e)return e;i=i||n.field.isKeyField()}return 0});return t.forEach((t,i)=>{sj(e,i)&&(r=r.add(i))}),r}Cs(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let n="F"===e.limitType?t.last():t.first();return!!n&&(n.hasPendingWrites||n.version.compareTo(i)>0)}Ss(e,t,r){return i4()<=l.DEBUG&&i8("QueryEngine","Using full collection scan to execute query:",sB(t)),this.ps.getDocumentsMatchingQuery(e,t,nN.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class oU{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new nV(nm),this.xs=new sH(e=>sO(e),sP),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function oV(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(n=>(i=n,e.Bs(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let n=[],s=[],o=sK();for(let e of i)for(let t of(n.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))o=o.add(t.key);return e.localDocuments.getDocuments(r,o).next(e=>({Ls:e,removedBatchIds:n,addedBatchIds:s}))})})}class oF{constructor(){this.activeTargetIds=sJ}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class oB{constructor(){this.Mo=new oF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new oF,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oj{Oo(e){}shutdown(){}}let oH="ConnectivityMonitor";class o${constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){for(let e of(i8(oH,"Network connectivity changed: AVAILABLE"),this.qo))e(0)}ko(){for(let e of(i8(oH,"Network connectivity changed: UNAVAILABLE"),this.qo))e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oz=null;function oq(){return null===oz?oz=0x10000000+Math.round(0x80000000*Math.random()):oz++,"0x"+oz.toString(16)}let oW="RestConnection",oG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===n2?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,n){let s=oq(),o=this.zo(e,t.toUriEncodedString());i8(oW,`Sending RPC '${e}' ${s}:`,o,r);let a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,i,n);let{host:l}=new URL(o),h=U(l);return this.Jo(e,o,a,r,h).then(t=>(i8(oW,`Received RPC '${e}' ${s}: `,t),t),t=>{throw i9(oW,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",r),t})}Ho(e,t,r,i,n,s){return this.Go(e,t,r,i,n)}jo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+i3,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}zo(e,t){let r=oG[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class oJ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}let oX="WebChannelConnection";class oQ extends oK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,n){let s=oq();return new Promise((n,o)=>{let a=new u;a.setWithCredentials(!0),a.listenOnce(d.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case f.NO_ERROR:let t=a.getResponseJson();i8(oX,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),n(t);break;case f.TIMEOUT:i8(oX,`RPC '${e}' ${s} timed out`),o(new ns(nn.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:let r=a.getStatus();if(i8(oX,`RPC '${e}' ${s} failed with status:`,r,"response text:",a.getResponseText()),r>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e,r=(e=t.status.toLowerCase().replace(/_/g,"-"),Object.values(nn).indexOf(e)>=0?e:nn.UNKNOWN);o(new ns(r,t.message))}else o(new ns(nn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ns(nn.UNAVAILABLE,"Connection failed."));break;default:nt(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{i8(oX,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);i8(oX,`RPC '${e}' ${s} sending request:`,i),a.send(t,"POST",l,r,15)})}T_(e,t,r){let i=oq(),n=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y(),o=m(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let h=n.join("");i8(oX,`Creating RPC '${e}' stream ${i}: ${h}`,a);let u=s.createWebChannel(h,a);this.I_(u);let d=!1,f=!1,w=new oJ({Yo:t=>{f?i8(oX,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(d||(i8(oX,`Opening RPC '${e}' stream ${i} transport.`),u.open(),d=!0),i8(oX,`RPC '${e}' stream ${i} sending:`,t),u.send(t))},Zo:()=>u.close()}),_=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};return _(u,c.EventType.OPEN,()=>{f||(i8(oX,`RPC '${e}' stream ${i} transport opened.`),w.o_())}),_(u,c.EventType.CLOSE,()=>{f||(f=!0,i8(oX,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(u))}),_(u,c.EventType.ERROR,t=>{f||(f=!0,i9(oX,`RPC '${e}' stream ${i} transport errored. Name:`,t.name,"Message:",t.message),w.a_(new ns(nn.UNAVAILABLE,"The operation could not be completed")))}),_(u,c.EventType.MESSAGE,t=>{if(!f){let r=t.data[0];ni(!!r,16349);let n=r?.error||r[0]?.error;if(n){i8(oX,`RPC '${e}' stream ${i} received error:`,n);let t=n.status,r=function(e){let t=v[e];if(void 0!==t){if(void 0===t)return i7("GRPC error has no .code"),nn.UNKNOWN;switch(t){case v.OK:return nn.OK;case v.CANCELLED:return nn.CANCELLED;case v.UNKNOWN:return nn.UNKNOWN;case v.DEADLINE_EXCEEDED:return nn.DEADLINE_EXCEEDED;case v.RESOURCE_EXHAUSTED:return nn.RESOURCE_EXHAUSTED;case v.INTERNAL:return nn.INTERNAL;case v.UNAVAILABLE:return nn.UNAVAILABLE;case v.UNAUTHENTICATED:return nn.UNAUTHENTICATED;case v.INVALID_ARGUMENT:return nn.INVALID_ARGUMENT;case v.NOT_FOUND:return nn.NOT_FOUND;case v.ALREADY_EXISTS:return nn.ALREADY_EXISTS;case v.PERMISSION_DENIED:return nn.PERMISSION_DENIED;case v.FAILED_PRECONDITION:return nn.FAILED_PRECONDITION;case v.ABORTED:return nn.ABORTED;case v.OUT_OF_RANGE:return nn.OUT_OF_RANGE;case v.UNIMPLEMENTED:return nn.UNIMPLEMENTED;case v.DATA_LOSS:return nn.DATA_LOSS;default:return nt(39323,{code:t})}}}(t),s=n.message;void 0===r&&(r=nn.INTERNAL,s="Unknown error status: "+t+" with message "+n.message),f=!0,w.a_(new ns(r,s)),u.close()}else i8(oX,`RPC '${e}' stream ${i} received:`,r),w.u_(r)}}),_(o,g.STAT_EVENT,t=>{t.stat===p.PROXY?i8(oX,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===p.NOPROXY&&i8(oX,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function oY(){return"undefined"!=typeof document?document:null}class oZ{constructor(e,t,r=1e3,i=1.5,n=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=n,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&i8("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class o0{}class o1 extends o0{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ns(nn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.Go(e,oc(t,r),i,n,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ns(nn.UNKNOWN,e.toString())})}Ho(e,t,r,i,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,oc(t,r),i,s,o,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ns(nn.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class o2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(i7(t),this.aa=!1):i8("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}let o6="RemoteStore";class o3{constructor(e,t,r,i,n){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=n,this.Aa.Oo(e=>{r.enqueueAndForget(async()=>{o8(this)&&(i8(o6,"Restarting streams for network reachability change."),await async function(e){e.Ea.add(4),await o4(e),e.Ra.set("Unknown"),e.Ea.delete(4),await o5(e)}(this))})}),this.Ra=new o2(r,i)}}async function o5(e){if(o8(e))for(let t of e.da)await t(!0)}async function o4(e){for(let t of e.da)await t(!1)}function o8(e){return 0===e.Ea.size}async function o7(e,t){t?(e.Ea.delete(2),await o5(e)):t||(e.Ea.add(2),await o4(e),e.Ra.set("Unknown"))}class o9{constructor(e,t,r,i,n){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=n,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,n){let s=new o9(e,t,Date.now()+r,i,n);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ns(nn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class ae{constructor(){this.queries=at(),this.onlineState="Unknown",this.Ca=new Set}terminate(){var e;let t;e=new ns(nn.ABORTED,"Firestore shutting down"),t=this.queries,this.queries=at(),t.forEach((t,r)=>{for(let t of r.Sa)t.onError(e)})}}function at(){return new sH(e=>sF(e),sV)}(E=_||(_={})).Ma="default",E.Cache="cache";class ar{constructor(e,t,r,i,n,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=n,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new sH(e=>sF(e),sV),this.Iu=new Map,this.Eu=new Set,this.du=new nV(nS.comparator),this.Au=new Map,this.Ru=new oS,this.Vu={},this.mu=new Map,this.fu=ov.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}function ai(e,t,r){var i;if(e.isPrimaryClient&&0===r||!e.isPrimaryClient&&1===r){let r,n=[];e.Tu.forEach((e,r)=>{let i=r.view.va(t);i.snapshot&&n.push(i.snapshot)}),(i=e.eventManager).onlineState=t,r=!1,i.queries.forEach((e,i)=>{for(let e of i.Sa)e.va(t)&&(r=!0)}),r&&i.Ca.forEach(e=>{e.next()}),n.length&&e.Pu.H_(n),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function an(e,t,r){let i=[],n=[],s=[];e.Tu.isEmpty()||(e.Tu.forEach((o,a)=>{s.push(e.pu(a,t,r).then(t=>{if((t||r)&&e.isPrimaryClient){let i=t?!t.fromCache:r?.targetChanges.get(a.targetId)?.current;e.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(t){i.push(t);let e=ox.As(a.targetId,t);n.push(e)}}))}),await Promise.all(s),e.Pu.H_(i),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>nP.forEach(t,t=>nP.forEach(t.Es,i=>e.persistence.referenceDelegate.addReference(r,t.targetId,i)).next(()=>nP.forEach(t.ds,i=>e.persistence.referenceDelegate.removeReference(r,t.targetId,i)))))}catch(e){if(!nD(e))throw e;i8("LocalStore","Failed to update sequence numbers: "+e)}for(let r of t){let t=r.targetId;if(!r.fromCache){let r=e.Ms.get(t),i=r.snapshotVersion,n=r.withLastLimboFreeSnapshotVersion(i);e.Ms=e.Ms.insert(t,n)}}}(e.localStore,n))}async function as(e,t){if(!e.currentUser.isEqual(t)){i8("SyncEngine","User change. New user:",t.toKey());let r=await oV(e.localStore,t);e.currentUser=t,e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ns(nn.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.mu.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await an(e,r.Ls)}}class ao{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=new oh(e.databaseInfo.databaseId,!0),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){var t,r;return t=this.persistence,r=new oM,new oU(t,r,e.initialUser,this.serializer)}Cu(e){return new oO(oD.mi,this.serializer)}Du(e){return new oB}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ao.provider={build:()=>new ao};class aa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ai(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=as.bind(null,this.syncEngine),await o7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ae}createDatastore(e){var t;let r=new oh(e.databaseInfo.databaseId,!0),i=new oQ(e.databaseInfo);return t=e.authCredentials,new o1(t,e.appCheckCredentials,i,r)}createRemoteStore(e){var t,r;return t=this.localStore,r=this.datastore,new o3(t,r,e.asyncQueue,e=>ai(this.syncEngine,e,0),o$.v()?new o$:new oj)}createSyncEngine(e,t){var r,i,n,s,o,a;let l;return r=this.localStore,i=this.remoteStore,n=this.eventManager,s=this.sharedClientState,o=e.initialUser,a=e.maxConcurrentLimboResolutions,l=new ar(r,i,n,s,o,a),t&&(l.gu=!0),l}async terminate(){await async function(e){i8(o6,"RemoteStore shutting down."),e.Ea.add(5),await o4(e),e.Aa.shutdown(),e.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}aa.provider={build:()=>new aa};let al=new Map,ah="firestore.googleapis.com";class au{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new ns(nn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ah,this.ssl=!0}else this.host=e.host,this.ssl=e.ssl??!0;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ns(nn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,i){if(!0===t&&!0===i)throw new ns(nn.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=function(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ns(nn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ns(nn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ns(nn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,r;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ac{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new au({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ns(nn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ns(nn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new au(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new nl;switch(e.type){case"firstParty":return new nd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ns(nn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){let e;return(e=al.get(this))&&(i8("ComponentProvider","Removing Datastore"),al.delete(this),e.terminate()),Promise.resolve()}}class ad{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ad(this.firestore,e,this._query)}}class af{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ap(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new af(this.firestore,e,this._key)}toJSON(){return{type:af._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(nC(t,af._jsonSchema))return new af(e,r||null,new nS(nI.fromString(t.referencePath)))}}af._jsonSchemaVersion="firestore/documentReference/1.0",af._jsonSchema={type:nA("string",af._jsonSchemaVersion),referencePath:nA("string")};class ap extends ad{constructor(e,t,r){super(e,t,new sD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new af(this.firestore,null,new nS(e))}withConverter(e){return new ap(this.firestore,e,this._path)}}let ag="AsyncQueue";class am{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oZ(this,"async_queue_retry"),this._c=()=>{let e=oY();e&&i8(ag,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=oY();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=oY();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new no;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nD(e))throw e;i8(ag,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,i7("INTERNAL UNHANDLED ERROR: ",ay(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=o9.createAndSchedule(this,e,t,r,e=>this.hc(e));return this.tc.push(i),i}uc(){this.nc&&nt(47125,{Pc:ay(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{for(let t of(this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.tc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ay(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class av extends ac{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new am,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new am(e),this._firestoreClient=void 0,await e}}}class aw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aw(nq.fromBase64String(e))}catch(e){throw new ns(nn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new aw(nq.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:aw._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nC(e,aw._jsonSchema))return aw.fromBase64String(e.bytes)}}aw._jsonSchemaVersion="firestore/bytes/1.0",aw._jsonSchema={type:nA("string",aw._jsonSchemaVersion),bytes:nA("string")};class a_{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ns(nn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nT(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class aE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ns(nn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ns(nn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nm(this._lat,e._lat)||nm(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:aE._jsonSchemaVersion}}static fromJSON(e){if(nC(e,aE._jsonSchema))return new aE(e.latitude,e.longitude)}}aE._jsonSchemaVersion="firestore/geoPoint/1.0",aE._jsonSchema={type:nA("string",aE._jsonSchemaVersion),latitude:nA("number"),longitude:nA("number")};class aI{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:aI._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nC(e,aI._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new aI(e.vectorValues);throw new ns(nn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}aI._jsonSchemaVersion="firestore/vectorValue/1.0",aI._jsonSchema={type:nA("string",aI._jsonSchemaVersion),vectorValues:nA("object")};let ab=RegExp("[~\\*/\\[\\]]");function aT(e,t,r,i,n){let s=i&&!i.isEmpty(),o=void 0!==n,a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${n}`),l+=")"),new ns(nn.INVALID_ARGUMENT,a+e+l)}class aS{constructor(e,t,r,i,n){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=n}get id(){return this._key.path.lastSegment()}get ref(){return new af(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new aA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(aC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aA extends aS{data(){return super.data()}}function aC(e,t){return"string"==typeof t?function(e,t,r){if(t.search(ab)>=0)throw aT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,void 0);try{return new a_(...t.split("."))._internalPath}catch(r){throw aT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,void 0)}}(e,t):t instanceof a_?t._internalPath:t._delegate._internalPath}class ak{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aR extends aS{constructor(e,t,r,i,n,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=n}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new aN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(aC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ns(nn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=aR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()&&(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),this._firestore,this.ref.path,t.bundle="NOT SUPPORTED"),t}}aR._jsonSchemaVersion="firestore/documentSnapshot/1.0",aR._jsonSchema={type:nA("string",aR._jsonSchemaVersion),bundleSource:nA("string","DocumentSnapshot"),bundleName:nA("string"),bundle:nA("string")};class aN extends aR{data(e={}){return super.data(e)}}class aO{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ak(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new aN(this._firestore,this._userDataWriter,r.key,r,new ak(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ns(nn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let i=new aN(e._firestore,e._userDataWriter,r.doc.key,r.doc,new ak(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let i=new aN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ak(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),n=-1,s=-1;return 0!==t.type&&(n=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt(61501,{type:e})}}(t.type),doc:i,oldIndex:n,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ns(nn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=aO._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),i.push(e.ref.path))}),this._firestore,this.query._query,e.bundleName,e.bundle="NOT SUPPORTED",e}}aO._jsonSchemaVersion="firestore/querySnapshot/1.0",aO._jsonSchema={type:nA("string",aO._jsonSchemaVersion),bundleSource:nA("string","QuerySnapshot"),bundleName:nA("string"),bundle:nA("string")},new WeakMap,function(e=!0){i3=eq,ex(new et("firestore",(t,{instanceIdentifier:r,options:i})=>{let n=t.getProvider("app").getImmediate(),s=new av(new nu(t.getProvider("auth-internal")),new np(n,t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ns(nn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new n6(e.options.projectId,t)}(n,r),n);return i={useFetchStreams:e,...i},s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),eQ(i1,i2,void 0),eQ(i1,i2,"esm2020")}();let aP={apiKey:T.default.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:T.default.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:T.default.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:T.default.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:T.default.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:T.default.env.NEXT_PUBLIC_FIREBASE_APP_ID};try{i=0===eJ().length?eW(aP):eK(),n=function(e=eK()){let t=eL(e,"auth");if(t.isInitialized())return t.getImmediate();let r=function(e,t){let r=eL(e,"auth");if(r.isInitialized()){let e=r.getImmediate();if(G(r.getOptions(),t??{}))return e;tn(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:iq,persistence:[is,rQ,rY]}),i=L("authTokenSyncURL");if(i&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(i,location.origin);if(location.origin===e.origin){let t,i=(t=e.toString(),async e=>{let r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>iJ)return;let n=r?.token;iX!==n&&(iX=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});ee(r).beforeAuthStateChanged(i,()=>i(r.currentUser)),ee(r).onIdTokenChanged(e=>i(e),void 0,void 0)}}let n=D("auth");return n&&function(e,t,r){let i=ee(e);th(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let n=rf(t),{host:s,port:o}=function(e){let t=rf(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let i=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(i);if(n){let e=n[1];return{host:e,port:rp(i.substr(e.length+1))}}{let[e,t]=i.split(":");return{host:e,port:rp(t)}}}(t),a=null===o?"":`:${o}`,l={url:`${n}//${s}${a}/`},h=Object.freeze({host:s,port:o,protocol:n.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!i._canInitEmulator){th(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),th(G(l,i.config.emulator)&&G(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,U(s)?(V(`${n}//${s}${a}`),j("Auth",!0)):function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(r,`http://${n}`),r}(i),function(e,t){let r=eL("object"==typeof e?e:eK(),"firestore").getImmediate({identifier:"string"==typeof e?e:n2});if(!r._initialized){let e=(e=>{let t=D(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),i]:[t.substring(0,r),i]})("firestore");e&&function(e,t,r,i={}){e=function(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ns(nn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=function(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":nt(12329,{type:typeof e})}(e);throw new ns(nn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}(e,ac);let n=U(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${r}`;n&&(V(`https://${a}`),j("Firestore",!0)),s.host!==ah&&s.host!==a&&i9("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l={...s,host:a,ssl:n,emulatorOptions:i};if(!G(l,o)&&(e._setSettings(l),i.mockUserToken)){let t,r;if("string"==typeof i.mockUserToken)t=i.mockUserToken,r=i6.MOCK_USER;else{t=function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",i=e.iat||0,n=e.sub||e.user_id;if(!n)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}},...e};return[N(JSON.stringify({alg:"none",type:"JWT"})),N(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e._app?.options.projectId);let n=i.mockUserToken.sub||i.mockUserToken.user_id;if(!n)throw new ns(nn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new i6(n)}e._authCredentials=new nh(new na(t,r))}}(r,...e)}}(i)}catch(e){console.warn("Firebase initialization failed (expected during build without keys):",e)}let aD=(0,b.createContext)(void 0);e.s(["AuthProvider",0,({children:e})=>{let[t,r]=(0,b.useState)(null),[i,s]=(0,b.useState)(!0),[o,a]=(0,b.useState)(null),[l,h]=(0,b.useState)(null),[u,c]=(0,b.useState)(null),d=async e=>{try{let t=await fetch("/api/auth/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid,email:e.email,displayName:e.displayName})});if(t.ok){let e=await t.json();c(e.organization)}}catch(e){console.error("Error fetching profile:",e)}};(0,b.useEffect)(()=>{var e,t;let i=(e=n,t=async e=>{r(e),e?(h(e.providerData[0]?.providerId||null),await d(e)):(h(null),a(null),c(null)),s(!1)},ee(e).onAuthStateChanged(t,void 0,void 0));return()=>i()},[]);let f=async()=>{t&&await d(t)},p=async()=>{let e=new rL;e.addScope("https://www.googleapis.com/auth/drive.readonly");try{let t=await iw(n,e),r=rL.credentialFromResult(t),i=r?.accessToken;i&&a(i),h("google.com")}catch(e){console.error("Error signing in with Google",e)}},g=async()=>{let e=new rD("microsoft.com");e.addScope("Files.Read.All");try{let t=await iw(n,e),r=rD.credentialFromResult(t),i=r?.accessToken;i&&a(i),h("microsoft.com")}catch(e){console.error("Error signing in with Microsoft",e)}},m=async()=>{try{var e;await (e=n,ee(e).signOut()),a(null),h(null),c(null)}catch(e){console.error("Error signing out",e)}};return(0,I.jsx)(aD.Provider,{value:{user:t,loading:i,accessToken:o,providerId:l,organization:u,signInWithGoogle:p,signInWithMicrosoft:g,signOut:m,refreshProfile:f},children:e})},"useAuth",0,()=>{let e=(0,b.useContext)(aD);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}],44747)}]);