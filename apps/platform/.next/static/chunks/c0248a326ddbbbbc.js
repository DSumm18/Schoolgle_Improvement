(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:d,iconNode:n,...c},h)=>(0,t.createElement)("svg",{ref:h,...s,width:r,height:r,stroke:e,strokeWidth:i?24*Number(l)/Number(r):l,className:a("lucide",o),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...n.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(d)?d:[d]])),i=(e,s)=>{let i=(0,t.forwardRef)(({className:i,...o},d)=>(0,t.createElement)(l,{ref:d,iconNode:s,className:a(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...o}));return i.displayName=r(e),i};e.s(["default",()=>i],75254)},18566,(e,t,r)=>{t.exports=e.r(76562)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],61911)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},42920,31278,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);e.s(["Building",()=>r],42920);let a=(0,t.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},78116,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(44747),l=e.i(42920),i=e.i(61911),o=e.i(72520),d=e.i(31278);function n(){let{user:e,organization:n,refreshProfile:c}=(0,s.useAuth)(),h=(0,a.useRouter)(),[u,x]=(0,r.useState)("choice"),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{n&&h.push("/dashboard")},[n,h]);let j=async t=>{if(t.preventDefault(),p.trim()&&e){y(!0),f(null);try{if(!(await fetch("/api/organization/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,userId:e.uid})})).ok)throw Error("Failed to create organization");await c()}catch(e){f(e.message||"Something went wrong"),y(!1)}}};return e?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome to Schoolgle"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Let's get your school set up."})]}),"choice"===u&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("button",{onClick:()=>x("create"),className:"w-full p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all flex items-center gap-4 group text-left",children:[(0,t.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg text-blue-600 group-hover:bg-blue-200",children:(0,t.jsx)(l.Building,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Create New School"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Set up a new workspace for your school"})]}),(0,t.jsx)(o.ArrowRight,{className:"ml-auto text-gray-400 group-hover:text-blue-500",size:20})]}),(0,t.jsxs)("button",{onClick:()=>x("join"),className:"w-full p-4 border-2 border-gray-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition-all flex items-center gap-4 group text-left",children:[(0,t.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg text-purple-600 group-hover:bg-purple-200",children:(0,t.jsx)(i.Users,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Join Existing School"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Use an invite code or link"})]}),(0,t.jsx)(o.ArrowRight,{className:"ml-auto text-gray-400 group-hover:text-purple-500",size:20})]})]}),"create"===u&&(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"School Name"}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),placeholder:"e.g. St. Mary's Primary School",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),b&&(0,t.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:b}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>x("choice"),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Back"}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"animate-spin",size:18}),"Creating..."]}):"Create School"})]})]}),"join"===u&&(0,t.jsxs)("div",{className:"text-center space-y-6",children:[(0,t.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg text-yellow-800 text-sm",children:"To join an existing school, please ask your administrator to send you an invite email."}),(0,t.jsx)("button",{onClick:()=>x("choice"),className:"text-gray-500 hover:text-gray-700 font-medium",children:"Back to options"})]})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsx)(d.Loader2,{className:"animate-spin text-blue-600",size:32})})}e.s(["default",()=>n])}]);